{"version":3,"mappings":"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AO,MAAO,KAAO,KAAM,KAAO,MAAO,KAAO,KAAM,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,KAAM,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,KAAM,KAAO,KAAM,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,KAAO,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,YAAY,MAAO,OAAO,MAAO,OAAO,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,cAAc,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,mBAAmB,MAAO,kBAAkB,MAAO,QAAQ,MAAO,kBAAkB,MAAO,4CAA4C,MAAO,4CAA4C,MAAO,4CAA4C,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,mBAAmB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,mBAAmB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,yCAAyC,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,yCAAyC,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,6BAA6B,KAAM,wCAAwC,KAAM,QAAQ,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,8BAA8B,KAAM,yCAAyC,KAAM,yCAAyC,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,6BAA6B,KAAM,6BAA6B,KAAM,wCAAwC,KAAM,wCAAwC,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,GAAI,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,mBAAmB,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,mBAAmB,IAAK,QAAQ,IAAK,mBAAmB,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,GAAI,QAAQ,IAAK,QAAQ,IAAK,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,GAAI,QAAQ,IAAK,QAAQ,IAAK,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,IAAK,QAAQ,KAAM,QAAQ,IAAK,QAAQ,IAAK,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,IAAK,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,8BAA8B,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,mBAAmB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,kBAAkB,KAAM,kBAAkB,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,MAAO,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,QAAQ,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,IAAK,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,KAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,OAAO,KAAM,OAAO,MAAO,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,iBAAiB,KAAM,iBAAiB,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,kBAAkB,KAAM,kBAAkB,KAAM,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,MAAO,OAAO,KAAM,OAAO,MAAO,OAAO,MAAO,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,oDAAoD,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,yCAAyC,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,0CAA0C,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,yBAAyB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,wBAAwB,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,cAAc,EAAG,aAAa,EAAG,aAAa,EAAG,aAAa,EAAG,aAAa,EAAG,aAAa,EAAG,uBAAuB,EAAG,uBAAuB,EAAG,uBAAuB,EAAG,uBAAuB,EAAG,uBAAuB,EAA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,EACA,GAAM,CACJ,IACF,EACA,OAAU,CACR,SACA,IACF,EACA,uBAAwB,CACtB,YACF,EACA,IAAO,CACL,KACF,EACA,KAAQ,CACN,MACF,EACA,IAAO,CACL,KACF,EACA,YAAe,CACb,aACF,EACA,IAAO,CACL,KACF,EACA,EAAK,CACH,GACF,EACA,MAAO,CACL,KACF,EACA,QAAW,CACT,UACA,KACF,EACA,KAAQ,CACN,MACF,EACA,eAAgB,CACd,SACA,SACF,EACA,KAAQ,CACN,OACA,KACA,OACF,EACA,KAAQ,CACN,OACA,KACF,EACA,SAAY,CACV,WACA,IACF,EACA,OAAU,CACR,SACA,KACF,EACA,SAAY,CACV,WACA,MACF,EACA,KAAM,CACJ,SACA,KACA,QACF,EACA,eAAgB,CACd,QACF,EACA,gBAAiB,CACf,SACF,EACA,qBAAsB,CACpB,UACF,EACA,WAAc,CACZ,YACF,EACA,OAAU,CACR,QACF,EACA,SAAY,CACV,WACA,KACF,EACA,WAAY,CACV,WACA,MACF,EACA,IAAO,CACL,MACA,MACF,EACA,MAAS,CACP,OACF,EACA,MAAS,CACP,OACF,EACA,OAAU,CACR,SACA,WACF,EACA,IAAO,CACL,KACF,EACA,MAAS,CACP,OACF,EACA,KAAQ,CACN,MACF,EACA,MAAS,CACP,OACF,EACA,IAAO,CACL,MACA,MACF,EACA,IAAO,CACL,KACF,EACA,UAAa,CACX,WACF,EACA,aAAgB,CACd,cACF,EACA,IAAO,CACL,KACF,EACA,SAAY,CACV,WACA,KACF,EACA,WAAc,CACZ,YACF,EACA,IAAO,CACL,KACF,EACA,SAAU,CACR,QACA,QACF,EACA,WAAY,CACV,UACA,WACA,MACF,EACA,QAAW,CACT,SACF,EACA,MAAS,CACP,OACF,EACA,MAAS,CACP,OACF,EACA,aAAgB,CACd,eACA,QACF,EACA,UAAa,CACX,YACA,MACF,EACA,0BAA2B,CACzB,KACF,EACA,SAAY,CACV,UACF,EACA,KAAQ,CACN,OACA,IACF,EACA,QAAW,CACT,SACF,EACA,IAAO,CACL,KACF,EACA,IAAO,CACL,KACF,EACA,OAAU,CACR,QACF,EACA,EAAK,CACH,GACF,EACA,KAAQ,CACN,MACF,EACA,UAAa,CACX,WACF,EACA,IAAO,CACL,KACF,EACA,MAAS,CACP,OACF,EACA,KAAQ,CACN,MACF,EACA,oBAAqB,CACnB,mBACF,EACA,gBAAiB,CACf,SACA,QACF,EACA,gBAAiB,CACf,gBACA,UACF,EACA,OAAU,CACR,SACA,YACF,EACA,iBAAkB,CAChB,MACA,IACF,EACA,KAAQ,CACN,MACF,EACA,aAAgB,CACd,cACF,EACA,OAAU,CACR,QACF,EACA,IAAO,CACL,MACA,KACF,EACA,OAAU,CACR,QACF,EACA,IAAO,CACL,KACF,EACA,IAAO,CACL,KACF,EACA,0BAA2B,CACzB,OACF,EACA,IAAO,CACL,KACF,EACA,OAAU,CACR,QACF,EACA,gBAAiB,CACf,gBACA,OACA,KACF,EACA,KAAM,CACJ,QACF,EACA,OAAU,CACR,QACF,EACA,MAAS,CACP,OACF,EACA,2BAA4B,CAC1B,0BACF,EACA,KAAQ,CACN,MACF,EACA,QAAW,CACT,SACF,EACA,+BAAgC,CAC9B,KACF,EACA,qBAAsB,CACpB,MACA,mBACF,EACA,YAAa,CACX,KACF,EACA,SAAU,CACR,OACF,EACA,SAAY,CACV,UACF,EACA,OAAU,CACR,QACF,EACA,QAAW,CACT,UACA,IACF,EACA,IAAO,CACL,KACF,EACA,KAAQ,CACN,MACF,EACA,GAAM,CACJ,KACA,KACF,EACA,oBAAqB,CACnB,gBACA,IACF,EACA,GAAM,CACJ,IACF,EACA,YAAa,CACX,YACA,QACF,EACA,OAAU,CACR,QACF,EACA,QAAW,CACT,SACF,EACA,OAAU,CACR,QACF,EACA,KAAQ,CACN,MACF,EACA,cAAe,CACb,MACF,EACA,QAAW,CACT,SACF,EACA,KAAQ,CACN,MACF,EACA,WAAc,CACZ,aACA,MACA,UACF,EACA,QAAW,CACT,UACA,IACF,EACA,KAAQ,CACN,MACF,EACA,IAAO,CACL,KACF,EACA,KAAQ,CACN,MACF,EACA,KAAQ,CACN,MACF,EACA,uBAAwB,CACtB,MACF,EACA,iCAAkC,CAChC,MACF,EACA,KAAQ,CACN,OACA,aACF,EACA,IAAO,CACL,MACA,KACF,EACA,KAAQ,CACN,MACF,EACA,UAAa,CACX,WACF,EACA,KAAQ,CACN,MACF,EACA,qBAAsB,CACpB,oBACF,EACA,MAAS,CACP,QACA,KACF,EACA,UAAW,CACT,SACA,YACA,WACA,WACF,EACA,WAAY,CACV,SACF,EACA,IAAO,CACL,KACF,EACA,GAAM,CACJ,IACF,EACA,EAAK,CACH,GACF,EACA,KAAQ,CACN,MACF,EACA,MAAS,CACP,OACF,EACA,IAAO,CACL,KACF,EACA,eAAgB,CACd,aACF,EACA,QAAW,CACT,SACF,EACA,mBAAoB,CAClB,gBACF,EACA,MAAS,CACP,OACF,EACA,GAAM,CACJ,IACF,EACA,WAAc,CACZ,aACA,IACF,EACA,MAAS,CACP,OACF,EACA,KAAQ,CACN,OACA,OACF,EACA,MAAS,CACP,OACF,EACA,MAAS,CACP,OACF,EACA,iBAAkB,CAChB,cACF,EACA,MAAS,CACP,OACF,EACA,uBAAwB,CACtB,YACF,EACA,OAAU,CACR,QACF,EACA,OAAU,CACR,SACA,KACA,KACF,EACA,MAAS,CACP,OACF,EACA,MAAS,CACP,QACA,MACA,SACF,EACA,MAAS,CACP,OACF,EACA,OAAU,CACR,QACF,EACA,SAAY,CACV,WACA,IACF,EACA,OAAU,CACR,QACF,EACA,KAAQ,CACN,OACA,QACA,QACA,YACF,EACA,WAAc,CACZ,YACF,EACA,UAAW,CACT,MACF,EACA,WAAY,CACV,KACF,EACA,QAAW,CACT,SACF,EACA,cAAe,CACb,OACF,EACA,SAAY,CACV,UACF,EACA,KAAQ,CACN,MACF,EACA,OAAU,CACR,QACF,EACA,UAAa,CACX,WACF,EACA,IAAO,CACL,KACF,EACA,QAAW,CACT,SACF,EACA,SAAY,CACV,UACF,EACA,MAAS,CACP,OACF,EACA,QAAW,CACT,SACF,EACA,OAAU,CACR,QACF,EACA,WAAc,CACZ,aACA,MACF,EACA,KAAQ,CACN,MACF,EACA,qBAAsB,CACpB,iBACF,EACA,mBAAoB,CAClB,aACA,MACF,EACA,KAAQ,CACN,MACF,EACA,KAAQ,CACN,MACF,EACA,MAAS,CACP,OACF,EACA,MAAS,CACP,OACF,EACA,IAAO,CACL,KACF,EACA,IAAO,CACL,KACF,EACA,KAAQ,CACN,MACF,EACA,cAAe,CACb,aACA,MACF,EACA,MAAS,CACP,OACF,EACA,KAAQ,CACN,MACF,EACA,OAAU,CACR,QACF,EACA,SAAY,CACV,WACA,MACF,EACA,GAAM,CACJ,IACF,EACA,UAAW,CACT,QACF,EACA,OAAU,CACR,QACF,EACA,OAAU,CACR,SACA,cACF,EACA,UAAa,CACX,WACF,EACA,4BAA6B,CAC3B,KACF,EACA,UAAW,CACT,SACA,IACF,EACA,WAAc,CACZ,aACA,OACF,EACA,KAAQ,CACN,MACF,EACA,OAAU,CACR,QACF,EACA,SAAY,CACV,YACA,UACF,EACA,SAAU,CACR,OACF,EACA,WAAc,CACZ,aACA,KACA,SACF,EACA,WAAc,CACZ,YACF,EACA,WAAc,CACZ,YACF,EACA,OAAU,CACR,QACF,EACA,OAAU,CACR,QACF,EACA,cAAe,CACb,YACF,EACA,mBAAoB,CAClB,UACF,EACA,OAAU,CACR,QACF,EACA,KAAQ,CACN,MACF,EACA,IAAO,CACL,KACF,EACA,OAAU,CACR,QACF,EACA,UAAa,CACX,YACA,QACF,EACA,OAAU,CACR,SACA,IACF,EACA,KAAM,CACJ,SACA,IACF,EACA,oBAAqB,CACnB,GACF,EACA,IAAO,CACL,KACF,EACA,KAAQ,CACN,MACF,EACA,EAAK,CACH,GACF,EACA,OAAU,CACR,SACA,KACF,EACA,WAAY,CACV,SACA,OACF,EACA,YAAa,CACX,KACF,EACA,YAAa,CACX,KACF,EACA,OAAU,CACR,QACF,EACA,KAAQ,CACN,MACF,EACA,SAAW,CACT,QACA,KACF,EACA,SAAY,CACV,WACA,KACF,EACA,0BAA2B,CACzB,MACF,EACA,IAAO,CACL,KACF,EACA,SAAY,CACV,UACF,EACA,kBAAmB,CACjB,iBACA,OACF,EACA,KAAQ,CACN,MACF,EACA,IAAO,CACL,KACF,EACA,cAAe,CACb,MACF,EACA,gBAAiB,CACf,gBACA,aACA,cACF,EACA,MAAS,CACP,OACF,EACA,UAAa,CACX,WACF,EACA,OAAU,CACR,QACF,EACA,IAAO,CACL,MACA,OACF,EACA,sBAAuB,CACrB,WACA,KACF,EACA,gBAAiB,CACf,gBACA,KACF,EACA,yBAA0B,CACxB,KACF,EACA,aAAc,CACZ,YACF,EACA,oCAAqC,CACnC,KACF,EACA,SAAY,CACV,UACF,EACA,KAAQ,CACN,MACF,EACA,YAAa,CACX,OACF,EACA,gCAAiC,CAC/B,OACF,EACA,cAAiB,CACf,gBACA,QACF,EACA,MAAS,CACP,OACF,EACA,6BAA8B,CAC5B,SACF,EACA,gBAAiB,CACf,eACF,EACA,yBAA0B,CACxB,QACA,IACF,EACA,SAAU,CACR,OACF,EACA,yBAA0B,CACxB,OACF,EACA,IAAO,CACL,KACF,EACA,IAAO,CACL,KACF,EACA,qBAAsB,CACpB,KACF,EACA,KAAQ,CACN,MACF,EACA,OAAU,CACR,SACA,UACA,MACF,EACA,WAAc,CACZ,aACA,UACF,EACA,aAAgB,CACd,eACA,UACA,IACF,EACA,kBAAmB,CACjB,SACF,EACA,EAAK,CACH,GACF,EACA,KAAQ,CACN,MACF,EACA,SAAY,CACV,UACF,EACA,QAAW,CACT,SACF,EACA,KAAQ,CACN,MACF,EACA,IAAO,CACL,KACF,EACA,eAAgB,CACd,eACA,KACA,KACF,EACA,WAAc,CACZ,YACF,EACA,YAAe,CACb,MACF,EACA,UAAW,CACT,UACA,QACF,EACA,KAAQ,CACN,MACF,EACA,cAAe,CACb,MACF,EACA,mBAAoB,CAClB,UACA,cACA,KACA,IACF,EACA,KAAQ,CACN,MACF,EACA,MAAS,CACP,QACA,WACF,EACA,mBAAoB,CAClB,MACF,EACA,O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","names":["MAIN_DOMAINS","DEFAULT_BACKGROUND_SLUG","threads","App","blurActiveElement","cancelEvent","event","IS_TOUCH_SUPPORTED","ctx","USER_AGENT","IS_APPLE","IS_ANDROID","IS_CHROMIUM","CHROMIUM_VERSION","IS_APPLE_MOBILE","IS_SAFARI","IS_FIREFOX","IS_MOBILE_SAFARI","IS_MOBILE","findUpClassName","el","className","fastRafCallbacks","fastRaf","callback","currentCallbacks","cb","fastRafConventionalCallbacks","processing","fastRafConventional","i","rafPromise","fastRafPromise","resolve","doubleRaf","fixSafariStickyInput","input","IS_STICKY_INPUT_BUGGED","key","startY","o","onTouchMove","e","touch","scrollable","y","scrolled","scrollTop","scrollHeight","clientHeight","nextScrollTop","lastFocusOutTimeStamp","fixSafariStickyInputFocusing","FontFamilyName","FontFamily","FontSize","FontWeight","FontFull","noop","pause","ms","TGICO_CLASS","_tgico","icon","texts","cache","fonts","loadFonts","types","promises","type","_texts","font","weights","weight","_promises","text","IS_EMOJI_SUPPORTED","CURRENT_ACCOUNT_QUERY_PARAM","MAX_ACCOUNTS_FREE","MAX_ACCOUNTS_PREMIUM","MAX_ACCOUNTS","makeWorkerURL","url","value","setWorkerProxy","workerHandler","target","args","w","toggleAttributePolyfill","name","force","NULL_PEER_ID","REPLIES_PEER_ID","REPLIES_HIDDEN_CHANNEL_ID","HIDDEN_PEER_ID","SERVICE_PEER_ID","MUTE_UNTIL","BOT_START_PARAM","MAX_FILE_SAVE_SIZE","THUMB_TYPE_FULL","TOPIC_COLORS","ATTACH_MENU_BOT_ICON_NAME","MESSAGE_ID_OFFSET","GENERAL_TOPIC_ID","CAN_HIDE_TOPIC","T_ME_PREFIXES","SEND_WHEN_ONLINE_TIMESTAMP","SERVER_IMAGE_MIME_TYPES","STARS_CURRENCY","FOLDER_ID_ALL","FOLDER_ID_ARCHIVE","REAL_FOLDERS","TEST_NO_STORIES","EventListenerBase","reuseResults","options","listenerObject","_a","obj","l","listener","result","error","err","collectResults","arr","listeners","Modes","IS_BETA","DEBUG","MOUNT_CLASS_TO","tabId","indexOfAndSplice","array","item","idx","IS_SERVICE_WORKER","IS_WEB_WORKER","IS_WORKER","getWindowClients","postMessage","notifyServiceWorker","all","notifyWorker","CACHED_ERRORS","makeError","_logTimer","dT","LogTypes","LOG_LEVELS","IS_WEBKIT","STYLES_SUPPORTED","LOGGER_STYLES","methods","logger","prefix","ignoreDebugReset","style","originalPrefix","originalStyle","log","method","logType","newPrefix","level","acc","v","prefixCache","_type","prefix2","USE_LOCKS","SuperMessagePort","logSuffix","task","source","taskId","deferred","payload","previousResolve","ret","reject","pingResolve","newEvent","id","innerTask","resultTaskPayload","resultTask","ackTask","isPromise","cached","port","promise","lock","port2","portTasks","tasks","batchTask","ports","transfer","withAck","_void","interval","MTProtoMessagePort","RootScope","isNew","isPremium","status","accountNumber","rootScope","deepEqual","x","ignoreKeys","ignoreSet","okok","ok","tx","safeAssign","object","fromObject","capitalizeFirstLetter","string","SKIP_PROTOCOLS","matchUrlProtocol","protocol","originalString","ALPHA_CHARS_REG_EXP","ALPHA_NUMERIC_REG_EXP","DOMAIN_ADD_CHARS","URL_ALPHANUMERIC_REG_EXP_PART","URL_PROTOCOL_REG_EXP_PART","URL_REG_EXP","USERNAME_REG_EXP","TIMESTAMP_REG_EXP","BOT_COMMAND_REG_EXP","FULL_REG_EXP","emojiRegExp","EMAIL_REG_EXP","MARKDOWN_REG_EXP","SITE_HASHTAGS","MARKDOWN_ENTITIES","PASS_CONFLICTING_ENTITIES","PASS_SINGLE_CONFLICTING_ENTITIES","PHONE_NUMBER_REG_EXP","wrapUrl","unsafe","out","tgMeMatch","tgMatch","onclick","u","fullPath","path","setInnerHTML","elem","html","setDirection","getDirection","setBlankToAnchor","anchor","sharedConfig","equalFn","a","b","$PROXY","$TRACK","signalOptions","runEffects","runQueue","STALE","PENDING","UNOWNED","NO_INIT","Owner","Transition","ExternalSourceConfig","Listener","Updates","Effects","ExecCount","createRoot","fn","detachedOwner","owner","unowned","current","root","updateFn","untrack","cleanNode","runUpdates","createSignal","s","setter","writeSignal","readSignal","createComputed","c","createComputation","updateComputation","createRenderEffect","createEffect","runUserEffects","createReaction","onInvalidate","tracking","createMemo","createResource","pSource","pFetcher","pOptions","fetcher","pr","initP","scheduled","resolved","dynamic","contexts","setValue","setError","track","trigger","state","setState","loadEnd","p","completeLoad","read","SuspenseContext","load","refetching","lookup","castError","batch","on","deps","isArray","prevInput","defer","prevValue","onMount","onCleanup","getListener","getOwner","runWithOwner","prev","prevListener","handleError","startTransition","t","transPending","setTransPending","useTransition","createContext","defaultValue","createProvider","useContext","context","children","memo","resolveChildren","updates","lookUpstream","sSlot","node","isComp","TransitionRunning","markDownstream","time","runComputation","nextValue","init","pure","runTop","ancestors","wait","res","completeUpdates","queue","userLength","ignore","index","obs","n","results","props","FALLBACK","dispose","d","mapArray","list","mapFn","items","mapped","disposers","len","indexes","newItems","j","newLen","newIndices","newIndicesNext","temp","tempdisposers","tempIndexes","start","end","newEnd","disposer","mapper","set","createComponent","Comp","trueFn","propTraps","_","property","receiver","resolveSource","resolveSources","length","mergeProps","sources","proxy","keys","sourcesMap","defined","sourceKeys","desc","definedKeys","splitProps","blocked","k","otherObject","objects","propName","isDefaultDesc","objectIndex","narrowedError","For","fallback","Show","keyed","condition","child","getOldDatabaseState","getCommonDatabaseState","getDatabaseState","deferredHelper","deferredPromise","_resolve","_reject","bindPromiseToDeferred","throttle","shouldRunFirst","isPending","clear","_args","_IDB","db","createNew","createIndexes","os","store","indexNames","indexName","createObjectStore","request","finished","calledNew","transaction","instance","preserve","storage","dbName","deleteRequest","IDB","IDBStorage","storeName","entryName","objectStore","mode","perf","onError","timeout","onComplete","requests","r","waitForTransactionComplete","callbackResult","left","onRequestFinished","entries","cursor","THROTTLE_TIME","_AppStorage","values","useCache","onlyLocal","canUseStorage","saveLocal","enabled","clearWrite","names","AppStorage","CommonStateStorage","commonStateStorage","langPack","UNSUPPORTED_LANG_PACK_KEY","I18n","pluralRules","cacheLangPackPromise","setRTL","rtl","setLangCode","langCode","getCacheLangPack","applyLangPack","loadLocalLangPack","updateAmPm","dateTimeFormat","getDateTimeFormat","date","amText","pmText","setTimeFormat","format","haveToUpdate","cachedDateTimeFormats","element","IntlDateElement","defaultCode","__vitePreload","lang","langSign","countries","strings","formatLocalStrings","saveLangPack","loadLangPack","web","managers","getStrings","pushTo","getLangPack","langPack1","langPack2","localLangPack1","localLangPack2","_Intl","currentLangCode","country","langPackKey","pushNextArgument","indexHolder","arg","superFormatter","str","regExp","lastIndex","match","p1","p2","p3","p4","offset","wrappedUrl","formatted","plain","IntlElementBase","IntlElement","json","hours","i18n","i18n_","_i18n","I18n$1","joinElementsWith","elements","joiner","isLast","join","useLast","joined","isAnyChat","peerId","isUser","isChat","newMethod","originMethod","bufferConcats","tmp","lastLength","onFinally","reason","WebpWorkerController","data","fileName","bytes","convertPromise","webpWorkerController","LocalStorage","lastError","stringified","_LocalStorageController","LocalStorageController","sessionStorage","isSwipingBackSafari","AppNavigationController","hash","wasIndex","good","single","appNavigationController","AppRuntimeManager","appRuntimeManager","copy","clonedObj","prop","IS_SHARED_WORKER_SUPPORTED","FOCUS_EVENT_NAME","IdleController","idle","idleController","CHECK_INSTANCE_INTERVAL","DEACTIVATE_TIMEOUT","MULTIPLE_TABS_THRESHOLD","IS_MULTIPLE_TABS_SUPPORTED","SingleInstance","newInstance","curInstance","build","apiManagerProxy","singleInstance","clearMessageId","messageId","toServer","getServerMessageId","PING_PUSH_INTERVAL","WebPushApiManager","reg","subscription","ACTIONS_LANG_MAP","action","successful","newSettings","subscriptionObj","mid","webPushApiManager","loadScript","script","tsNow","seconds","TelegramMeWebManager","canRedirect","curValue","ts","telegramMeWebManager","IS_WEBRTC_SUPPORTED","IS_CALL_SUPPORTED","CAN_USE_TRANSFERABLES","CAN_USE_TRANSFERABLES$1","IS_CANVAS_FILTER_SUPPORTED","IS_GEOLOCATION_SUPPORTED","IS_GROUP_CALL_SUPPORTED","IS_WEBP_SUPPORTED","IMAGE_MIME_TYPES_SUPPORTED","possible","mime","img","supported","IMAGE_MIME_TYPES_SUPPORTED_PROMISE","mimeTypes","video","IS_WEBM_SUPPORTED","IS_MOV_SUPPORTED","IS_H265_SUPPORTED","VIDEO_MIME_TYPES_SUPPORTED","MEDIA_MIME_TYPES_SUPPORTED","IS_PARALLAX_SUPPORTED","IS_SCREEN_SHARING_SUPPORTED","IS_VIBRATE_SUPPORTED","audio","IS_OPUS_SUPPORTED","IS_APPLE_MX","extension","renderer","IS_APPLE_MX$1","IS_LIVE_STREAM_SUPPORTED","ENVIRONMENT","IS_VIDEO_SUPPORTED","userAgent","getTimeFormat","offsetWidth","STATE_VERSION","BUILD","DEFAULT_THEME","makeDefaultAppTheme","baseTheme","highlightingColor","SETTINGS_INIT","STATE_INIT","COMMON_STATE_INIT","compareVersion","v1","v2","s1","s2","isObject","validateInitObject","initObject","currentObject","onReplace","previousKey","ignorePaths","_path","recordPromise","description","recordPromiseBound","StateStorage","AccountController","accountData","overrideAll","prevData","updatedData","upTo","toMove","toClear","authKeyKey","serverSaltKey","createStorages","storages","TEST_MULTI_MIGRATION","REFRESH_EVERY","ALL_KEYS","COMMON_KEYS","REFRESH_KEYS","AnyStateWriter","pushedKeys","pushToState","replaceState","_state","StateWriter","resetStorages","preserveKeys","CommonStateWriter","STATE_STEPS","writer","SKIP_VALIDATING_PATHS","missingKey","newVersion","oldVersion","authKeyFingerprint","baseDcAuthKey","_authKeyFingerprint","loadStateForAccount","stateStorage","commonWriter","loadOldState","totalPerf","auth","moveAccessKeysToMultiAccountFormat","resetKeysPromise","callbacks","userAuth","fingerprint","resetKeys","moveStoragesToMultiAccountFormat","storagesNew","users","chats","dialogs","toObject","checkIfHasMultiAccount","deleteOldDatabase","applyBuildVersionToStorage","sessionBuild","loadStateForAllAccounts","hasMultiAccount","stateForFirstAccount","restPromise","rest","loadStateForAllAccountsOnce","OpusDecodeController","typedArray","keepAlive","kill","pages","withWaveform","dataBlob","opusDecodeController","CryptoMessagePort","sendPortIndex","cryptoMessagePort","toArray","blobSafeMimeType","mimeType","blobConstruct","blobParts","safeMimeType","MemoryWriter","size","saveFileCallback","part","endOffset","newBytes","saveToStorage","blob","parts","_CacheStorageController","response","rejected","fileSize","_clearWrite","CacheStorageController","toggleStorages","ServiceMessagePort","DEEP_PATH_JOINER","joinDeepPath","splitDeepPath","setDeepProperty","deleteIfUndefined","splitted","lastObject","lastKey","FILENAME_JOINER","getFileNameByLocation","location","ext","geoPoint","isWebFileLocation","getThumbKey","media","generateEmptyThumb","getStickerThumbKey","docId","toneIndex","callbackify","smth","isLegacyMessageId","$RAW","$NODE","$HAS","$SELF","wrap$1","proxyTraps$1","isWrappable","proto","unwrap","unwrapped","getNodes","symbol","nodes","getNode","proxyDescriptor$1","trackSelf","ownKeys","tracked","setProperty","deleting","mergeStoreNode","updateArray","next","updatePath","traversed","partType","from","to","by","createStore","unwrappedStore","wrappedStore","setStore","$ROOT","applyState","parent","merge","previous","keyVal","targetKeys","previousKeys","reconcile","appState","_setAppState","setAppState","setAppStateSilent","useAppState","getObjectKeysAndSort","sort","ids","createMemoOrReturn","valueOrGetter","usePeer","useChat","chatId","useUser","userId","reconcilePeer","peer","reconcilePeers","peers","getValidatedAccount","getCurrentAccountFromURL","urlString","params","getCurrentAccount","DEBUG_MANAGER_REQUESTS","createProxy","ack","createProxyProxy","proxied","createProxiedManagersForAccount","getProxiedManagers","limitSymbols","limitFrom","getPeerActiveUsernames","usernames","username","TLD","checkBrackets","urlLength","urlOpenBrackets","urlCloseBrackets","EmojiVersions","Emoji","version","encodeEmoji","emojiText","toCodePoints","removeVS16s","vs16RegExp","zeroWidthJoiner","rawEmoji","unicodeSurrogates","points","char","getEmojiToneIndex","VIRTUAL_COUNTRIES_EMOJIS","getCountryEmoji","iso2","emojiFromCodePoints","codePoints","curr","getEmojiUnified","emojiCode","unified","parseEntities","raw","entities","matchIndex","rawOffset","tld","balanced","timestamp","splittedLength","minutes","buildURLHash","encodeEntities","hi","low","spoiler","chars","charsLength","encodeSpoiler","entity","before","spoilerBefore","spoilerAfter","after","EMOJI_VERSIONS_SUPPORTED","isEmojiSupported","emoji","inlineEl","newEmojiWidth","legacyEmojiWidth","simulateEvent","lastMouseDownElement","hasMouseMovedSinceDown","CLICK_EVENT_NAME","attachClickEvent","add","remove","simulateClickEvent","BOM","wrapTelegramUrlToAnchor","url1","isInDOM","forEachReverse","safePlay","AnimationIntersector","entry","group","animation","_animation","paused","override","found","player","observeElement","controlled","liteModeKey","locked","blurred","destroy","imitateIntersection","groups","animations","play","changed","animationItem","loop","animationIntersector","VisibilityIntersector","onVisibilityChange","change","visible","targets","findAndSpliceAll","verify","findAndSplice","PARALLEL_LIMIT","IGNORE_ERRORS","LazyLoadQueueBase","parallelLimit","LazyLoadQueueIntersector","eventListener","ANIMATION_START_EVENT","ANIMATION_END_EVENT","isAnimating","heavyAnimationPromise","promisesInQueue","dispatchHeavyAnimationEvent","_heavyAnimationPromise","onHeavyAnimationEnd","interruptHeavyAnimation","getHeavyAnimationPromise","useHeavyAnimationCheck","handleAnimationStart","handleAnimationEnd","listenerSetter","LazyLoadQueue","ignoreHeavyAnimation","getPathFromBytes","num","outCanvas","outContext","computeLockColor","canvas","width","height","skipx","skipy","imageData","sr","sg","sb","sa","color","rgba","QUALITY_FILE_MIME_TYPE","isDocumentHlsQualityFile","doc","hlsInstancesByVideo","initVideoHls","src","middleware","Hls","hls","updateStreamInUse","inUse","createVideo","pip","originalSrc","newValue","CRBUG_1250841_ERROR","isCrbug1250841Error","shouldIgnoreVideoError","isChromeBug","srcPromise","onMediaLoad","readyState","useCanplayOnIos","loadEventName","errorEventName","onLoad","loadedURLs","renderImageFromUrl","processImageOnLoad","isVideo","isImage","loader","renderImageFromUrlPromise","bytesFromHex","hexString","bytesToDataURL","convertToUint8Array","JPEG_HEADER_HEX","JPEG_HEADER","JPEG_TAIL","getPreviewBytesFromURL","needle","sliced","jpegBytes","getPreviewURLFromBytes","isSticker","getPreviewURLFromThumb","photo","thumb","heavyQueue","processingQueue","addHeavyTask","processHeavyQueue","timedChunk","todo","f","possiblePromise","realResult","RADIUS","ITERATIONS","requireBlurPromise","fastBlurFunc","m","processBlurNext","radius","iterations","CACHE_SIZE","blur","dataUri","getImageFromStrippedThumb","useBlur","loadPromise","calcImageInBox","imageW","imageH","boxW","boxH","noZoom","makeMediaSize","boxedImageW","boxedImageH","MediaSize","boxSize","fitted","ScreenSize","ScreenSize2","MOBILE_SIZE","FLOATING_LEFT_SIDEBAR_SIZE","MEDIUM_SIZE","LARGE_SIZE","CUSTOM_EMOJI_SIZE","ESG_CUSTOM_EMOJI_SIZE","EMOJI_STATUS_SIZE","MediaSizes","innerWidth","activeScreen","wasScreen","mediaSizes","clamp","min","max","IS_IMAGE_BITMAP_SUPPORTED","FramesCache","framesCache","CustomProperties","night","customProperties","getLottiePixelRatio","needUpscale","pixelRatio","applyColorOnContext","_RLottiePlayer","worker","skipRatio","clearPendingRAF","renderFirstFrame","curFrame","speed","direction","frame","frameNo","cachedSource","now","delta","frameNew","skipDelta","maxFrame","minFrame","bounds","renderIfPaused","frameCount","fps","diff","container","RLottiePlayer","savingLottiePreview","isSavingLottiePreview","saving","sharedCanvas","sharedContext","createCanvas","saveLottiePreview","SequentialDom","kind","isConnected","sequentialDom","uploadId","getFileNameForUpload","file","getDocumentInputFileLocation","thumbSize","getDocumentDownloadOptions","queueId","onlyCache","inputFileLocation","getPhotoDownloadOptions","photoSize","isDocument","isPhoto","getWebFileDownloadOptions","getWebDocumentDownloadOptions","webDocument","downloadOptions","isWebDocument","getDownloadFileNameFromOptions","getDownloadMediaDetails","createDownloadAnchor","onRemove","clickEvent","AppDownloadManager","details","download","main","downloads","getPromise","promiseBefore","justAttach","USE_SW","getOutFileName","pingPromise","iframe","_iframe","onSuccess","onFinish","onDownloadRequestReceived","downloadId","hadProgress","onProgress","appDownloadManager","choosePhotoSize","boxWidth","boxHeight","useBytes","pushDocumentSize","sizes","bestPhotoSize","getStickerEffectThumb","QueryableWorker","message","IS_WEB_ASSEMBLY_SUPPORTED","LottieLoader","reqId","remain","queryableWorker","newParams","cacheName","players","containers","playersByCacheName","lottieLoader","createDetails","MIDDLEWARE_ERROR","MiddlewareHelper","helper","additionalCallback","getMiddleware","throttleWith","schedulerFn","waiting","throttleWithRaf","createUnifiedSignal","getter","WindowSize","windowSize","emojiAnimationContainer","wrapStickerAnimation","stickerSize","side","fullThumb","withRandomOffset","relativeEffect","loopEffect","onUnmount","textColor","_addOffsetX","_addOffsetY","animationDiv","unmountAnimation","middlewareHelper","onScroll","stickerPromise","wrapSticker","render","setPosition","generateRandomSigned","randomOffsetX","randomOffsetY","rect","factor","stableOffsetX","stableOffsetY","rectX","rectY","addOffsetX","addOffsetY","LiteMode","liteMode","Icons","IconsReverse","getIconContent","Icon","classes","span","setCurrentTime","currentTime","USE_FIX","SHOULD_HANDLE_VIDEO_LEAK","onVideoLeak","firstElementChild","handleVideoLeak","testVideoLeak","isLeak","bindPromise","onTimeUpdate","eventsOrder","eventsOrderLength","sawEvents","leakVideoFallbacks","onVideoLeakListener","events","normalized","fallbackCallback","attachVideoLeakListener","attachVideoLeakListeners","STICKER_EFFECT_MULTIPLIER","locksUrls","videosCache","onAnimationEnd","onEnd","_timeout","isEmptyContainer","childElementCount","getThumbFromContainer","div","loadStickerMiddleware","lazyLoadQueue","exportLoad","onlyThumb","withThumb","loadPromises","needFadeIn","asStatic","isOut","noPremium","withLock","isCustomEmoji","syncedVideo","isEffect","showPremiumInfo","stickerType","cacheContext","getCacheContext","isAnimated","effectThumb","willHaveLock","lockUrl","customEmojiAttribute","attribute","lottieCachedThumbToneIndex","downloaded","isThumbNeededForType","lottieCachedThumb","loadThumbPromise","haveThumbCached","afterRender","thumbImage","ns","svg","middlewareError","setLockColor","onFirstFrame","isSingleVideo","cachePromise","onTimeupdate","previousTime","playedTimes","mediaLength","loaded","videoWidth","videoHeight","ratio","h","reset","detach","lastPromise","_media","attachStickerEffectHandler","fireStickerEffect","isAvailable","getVisibleRect","overflowElement","lookForSticky","overflowRect","overflowTop","overflowRight","overflowBottom","overflowLeft","sticky","overflow","windowWidth","windowHeight","getViewportSlice","selector","extraSize","extraMinLength","invisibleTop","invisibleBottom","foundVisible","visibleRect","isVisible","replaceContent","firstChild","resizeObserverMap","resizeObserver","observeResize","unobserveResize","globalLazyLoadQueue","_CustomEmojiRendererElement","syncedPlayer","syncedPlayersFrames","syncedPlayers","clearRenderInterval","emojiRenderers","offsetsMap","elementsArr","placeholders","offsets","elementRect","top","isDimensionsSet","dpr","isImageData","frameWidth","frameHeight","elementWidth","maxLeft","forceRenderAfter","newWidth","newHeight","renderEmojis","addCustomEmojis","usingOwnQueue","newElements","customEmojis","newElementsArray","isLottie","isStatic","willHaveSyncedPlayer","_loadPromises","CUSTOM_EMOJI_INSTANT_PLAY","addition","readyPromise","placeholder","_p","setRenderInterval","addElements","docIds","docs","wrapOptions","missing","cachedPromises","uncachedPromisesPromise","loadFromPromises","onRender","uncached","CustomEmojiRendererElement","emojiRenderInterval","renderers","CUSTOM_EMOJI_FPS","CUSTOM_EMOJI_FRAME_INTERVAL","CustomEmojiElement","replaceChildren","createCustomFiller","CodeLanguageMap","CodeLanguageAliases","language","aliases","importPrismLanguage","lowerCase","alias","prism","importPrism","hadBefore","module","Prism","env","highlightCode","code","_language","imported","findIndexFrom","predicate","createElementFromMarkup","markup","instances","createAnimationInstance","cancelAnimationByKey","getAnimationInstance","animateSingle","tick","animate","callbackifyAll","getUnsafeRandomInt","_BluffSpoilerController","imageURL","onReconnect","weakRef","ref","reconnectCallback","BluffSpoilerController","AnimationItemNested","getDefaultParticlesCount","_DotRenderer","multiply","config","shader","shaderTextResult","shaderText","gl","dt","draw","tempId","vertexShader","fragmentShader","program","shaders","animationGroup","rotate","flipX","flipY","transforms","instanceCanvasWidth","instanceCanvasHeight","DotRenderer","createMarkupFormatting","formatting","onQuoteResize","padding","isExpanded","makeQuoteCollapsable","collapseIcon","wrapRichText","fragment","nasty","wrapSomething","wrapElement","noFiller","lastElement","customWraps","passEntities","contextSite","contextExternal","textLength","nextEntity","startOffset","endPartOffset","fullEntityText","partText","usedText","processingBlockElement","entityLanguage","content","languageName","header","headerName","headerWrapButton","lastInnerEntityIndex","command","bot","atPos","customEmojiElement","isSupported","masked","wrapped","hostname","currentContext","href","contextUrl","hashtag","encoded","encodedLetter","foundNextLinebreakIndex","lastInnerLinebreakIndex","insertCustomFillers","notFiller","isCustomFillerNeededBySiblingNode","check","needed","previousSibling","nextSibling","wrapEmojiText","isDraft","getPeerTitle","plainText","onlyFirstName","useManagers","threadId","title","user","_limitSymbols","rgbToHsv","g","hsvToRgb","rgbaToHsla","hslaToString","hsla","hslaToRgba","hue2rgb","q","hslaStringToRgba","alpha","val","hexaToRgba","hexa","hexToRgb","hex","hexaToHsla","rgbaToHexa","hslaStringToHexa","hslaStringToHex","mixColors","color1","color2","computePerceivedBrightness","getAverageColor","getAccentColor","baseHsv","baseColor","elementColor","hsvTemp3","hsvTemp4","dist","changeColorAccent","accentHsv","isDarkTheme","colorHsv","newColor","origBrightness","newBrightness","fallbackAmount","changeBrightness","amount","getHexColorFromTelegramColor","getRgbColorFromTelegramColor","getColorsFromWallPaper","wallPaper","rgbaToRgb","bg","calculateLuminance","rgb","getTextColor","luminance","calculateOpacity","targetContrast","targetTextLuminance","adaptiveOpacity","appColorMap","colorMap","ThemeController","coordinates","themeColorElem","darkModeMediaQuery","checkDarkMode","theme","highlightingRgba","silent","isNight","wasApplied","reverse","transition","endRadius","appliedColors","_options","lightenAlpha","darkenAlpha","mixColor","saveToCache","appColor","lightenedRgb","darkenedHsla","properties","currentTheme","themes","themeSettings","newAppTheme","settings","baseColors","hsvTemp1","hsvTemp2","newAccentRgb","newAccentHex","applyAppColor","finalize","messageLightenAlpha","baseMessageColor","baseMessageOutBackgroundColor","myMessagesAccent","nextColor","accentColor2","newMessageOutBackgroundColor","messageOutBackgroundColorHsl","themePropertiesMap","themeParams","themeController","DialogColorsFg","DialogColors","_DialogColorsFg","getPeerColorIndexById","getPeerAvatarColorByPeer","getPeerColorIndexByPeer","fgColor","hue","getPeerColorsByPeer","colorIndex","replaceColors","writeIn","peerColorOptions","dark","peerColorOption","colors","makeColorsGradient","partSize","startValue","endValue","setPeerColors","newColors","peerProperty","borderBackgroundProperty","colorRgbProperty","gradient","myColors","colorProperty","borderBackground","drawCircle","fill","stroke","drawCircleFromStart","getEmojiEntityFromEmoji","EMOJI_REG_EXP","getAbbreviation","onlyFirst","firstEmojiMatch","first","lastEmojiMatch","last","NOTIFICATION_ICON_PATH","NOTIFICATION_BADGE_PATH","createAppURLForAccount","hashParams","keepHash","filteredEntries","filteredParams","hashSearchParams","appSettings","_setAppSettings","setAppSettingsSilent","ApiManagerProxy","mirror","groupedId","_mid","previousMessage","map","commonEventNames","isDifferentAccount","storageTask","notification","migrateTo","currentAccount","newAccountNumber","peerTitle","peerPhoto","avatarCanvas","avatarContext","SIZE","colorTop","colorBottom","fontSize","abbreviation","serviceWorker","ServiceWorkerURL","registration","FIX_KEY","swfix","controller","get","pathnameSplitted","pre","originals","originalUrl","createWorker","constructor","attachWorkerToPort","firstWorker","messagePort","loadedStates","stateForThisAccount","tab","reaction","availableReactions","availableReaction","minMid","mids","saved","overwrite","appConfig","isPremiumPurchaseBlocked","totalAccounts","hasSomeonePremium","apiManagerProxy$1","OverlayCounter","overlayCounter","parseUriParams","uri","parseUriParamsLine","line","IS_INSTALL_PROMPT_SUPPORTED","cacheInstallPrompt","deferredPrompt","outcome","getInstallPrompt","months","days","monthsLocalized","daysLocalized","ONE_DAY","ONE_DAY_MINUTES","ONE_WEEK_MINUTES","getWeekDays","getMonths","fillLocalizedDates","getWeekNumber","dayNum","yearStart","formatDate","today","formatDateAccordingToTodayNew","formatTimeOptions","formatFullSentTimeRaw","timeEl","formatTime","dateEl","formatFullSentTime","capitalize","noToday","getFullDate","fullYear","formatMonthsDuration","bold","isYears","minYear","yearPattern","anyLetterRegExp","monthPattern","monthYearOrDayPattern","yearOrDayAndMonthPattern","shortDate","longDate","numberOfDaysEachMonth","fillTipDates","query","dates","haystack","year","month","day","minDate","maxDate","dayOfWeek","getDayOfWeek","currentDay","distance","formatWeekLong","matches","g1","g2","k1","selectedYear","createForMonthYear","createForDayMonth","g3","currentYear","validDateForMonth","formatterYearMax","getMonth","formatterMonthYear","isLeapYear","formatterDayMonth","arrays","nextRandomUint","bits","randomLong","USE_NATIVE_SCROLL","IS_OVERLAY_SCROLL_SUPPORTED","USE_CUSTOM_SCROLL","changeAccount","newTab","newUrl","sidebarEl","storedWidth","manifest","setViewportVH","lastVH","setVH","vh","preparePrint","chat","chatClone","bubbles","bubblesInner","printable","removePrint","toggleResizeMode","wasTabId","stateResult","fadeInWhenFontsReady","authState","urlSearchParams","maxAccountNumber","isEnteringAnimationFinished","finishEnteringAnimation","webPushApiManager$1","meModule","pushModule","pagePromise","fontsPromise","page","shouldAnimate"],"ignoreList":[28],"sources":["../src/config/app.ts","../src/helpers/dom/blurActiveElement.ts","../src/helpers/dom/cancelEvent.ts","../src/environment/touchSupport.ts","../src/environment/ctx.ts","../src/environment/userAgent.ts","../src/helpers/dom/findUpClassName.ts","../src/helpers/schedulers.ts","../src/helpers/dom/fixSafariStickyInput.ts","../src/helpers/dom/fixSafariStickyInputFocusing.ts","../src/config/font.ts","../src/helpers/noop.ts","../src/helpers/schedulers/pause.ts","../src/helpers/tgico.ts","../src/helpers/dom/loadFonts.ts","../src/environment/emojiSupport.ts","../src/lib/accounts/constants.ts","../src/helpers/setWorkerProxy.ts","../src/helpers/dom/toggleAttributePolyfill.ts","../src/lib/mtproto/mtproto_config.ts","../src/helpers/eventListenerBase.ts","../src/config/modes.ts","../src/config/debug.ts","../src/config/tabId.ts","../src/helpers/array/indexOfAndSplice.ts","../src/helpers/context.ts","../src/helpers/makeError.ts","../src/helpers/dT.ts","../src/lib/logger.ts","../src/lib/mtproto/superMessagePort.ts","../src/lib/mtproto/mtprotoMessagePort.ts","../src/lib/rootScope.ts","../src/helpers/object/deepEqual.ts","../src/helpers/object/safeAssign.ts","../src/helpers/string/capitalizeFirstLetter.ts","../src/lib/richTextProcessor/matchUrlProtocol.ts","../src/vendor/emoji/regex.ts","../src/lib/richTextProcessor/index.ts","../src/lib/richTextProcessor/wrapUrl.ts","../src/helpers/dom/setInnerHTML.ts","../src/lib/richTextProcessor/setBlankToAnchor.ts","../src/vendor/solid/dist/solid.js","../src/config/databases/state.ts","../src/helpers/cancellablePromise.ts","../src/helpers/schedulers/throttle.ts","../src/lib/files/idb.ts","../src/lib/storage.ts","../src/lib/commonStateStorage.ts","../src/lib/langPack.ts","../src/lib/appManagers/utils/peers/isAnyChat.ts","../src/lib/appManagers/utils/peers/isUser.ts","../src/helpers/peerIdPolyfill.ts","../src/helpers/bytes/bufferConcats.ts","../src/lib/polyfill.ts","../src/lib/webp/webpWorkerController.ts","../src/lib/localStorage.ts","../src/lib/sessionStorage.ts","../src/helpers/dom/isSwipingBackSafari.ts","../src/components/appNavigationController.ts","../src/lib/appManagers/appRuntimeManager.ts","../src/helpers/object/copy.ts","../src/environment/sharedWorkerSupport.ts","../src/helpers/idleController.ts","../src/lib/mtproto/singleInstance.ts","../src/lib/appManagers/utils/messageId/clearMessageId.ts","../src/lib/appManagers/utils/messageId/getServerMessageId.ts","../src/lib/mtproto/webPushApiManager.ts","../src/helpers/dom/loadScript.ts","../src/helpers/tsNow.ts","../src/lib/mtproto/telegramMeWebManager.ts","../src/environment/webrtcSupport.ts","../src/environment/callSupport.ts","../src/environment/canUseTransferables.ts","../src/environment/canvasFilterSupport.ts","../src/environment/geolocationSupport.ts","../src/environment/groupCallSupport.ts","../src/environment/webpSupport.ts","../src/environment/imageMimeTypesSupport.ts","../src/environment/videoSupport.ts","../src/environment/videoMimeTypesSupport.ts","../src/environment/mediaMimeTypesSupport.ts","../src/environment/parallaxSupport.ts","../src/environment/screenSharingSupport.ts","../src/environment/vibrateSupport.ts","../src/environment/opusSupport.ts","../src/environment/appleMx.ts","../src/environment/liveStreamSupport.ts","../src/environment/index.ts","../src/helpers/getTimeFormat.ts","../src/config/state.ts","../src/helpers/compareVersion.ts","../src/helpers/object/isObject.ts","../src/helpers/object/validateInitObject.ts","../src/helpers/recordPromise.ts","../src/lib/stateStorage.ts","../src/lib/accounts/accountController.ts","../src/lib/appManagers/utils/storages/createStorages.ts","../src/lib/appManagers/utils/state/loadState.ts","../src/lib/opusDecodeController.ts","../src/lib/crypto/cryptoMessagePort.ts","../src/helpers/array/toArray.ts","../src/helpers/blob/blobSafeMimeType.ts","../src/helpers/blob/blobConstruct.ts","../src/lib/files/memoryWriter.ts","../src/lib/files/cacheStorage.ts","../src/helpers/toggleStorages.ts","../src/lib/serviceWorker/serviceMessagePort.ts","../src/helpers/object/setDeepProperty.ts","../src/helpers/fileName.ts","../src/lib/appManagers/utils/webFiles/isWebFileLocation.ts","../src/lib/storages/utils/thumbs/getThumbKey.ts","../src/lib/storages/utils/thumbs/generateEmptyThumb.ts","../src/lib/storages/utils/thumbs/getStickerThumbKey.ts","../src/helpers/callbackify.ts","../src/lib/appManagers/utils/messageId/isLegacyMessageId.ts","../src/vendor/solid/store/dist/store.js","../src/stores/appState.ts","../src/helpers/object/getObjectKeysAndSort.ts","../src/stores/peers.ts","../src/lib/accounts/getValidatedAccount.ts","../src/lib/accounts/getCurrentAccountFromURL.ts","../src/lib/accounts/getCurrentAccount.ts","../src/lib/appManagers/getProxiedManagers.ts","../src/helpers/string/limitSymbols.ts","../src/lib/appManagers/utils/peers/getPeerActiveUsernames.ts","../src/config/tld.ts","../src/lib/richTextProcessor/checkBrackets.ts","../src/config/emoji.ts","../src/vendor/emoji/index.ts","../src/lib/richTextProcessor/getEmojiUnified.ts","../src/lib/richTextProcessor/parseEntities.ts","../src/helpers/buildURLHash.ts","../src/helpers/string/encodeEntities.ts","../src/lib/richTextProcessor/spoiler.ts","../src/lib/richTextProcessor/encodeSpoiler.ts","../src/environment/emojiVersionsSupport.ts","../src/helpers/dom/dispatchEvent.ts","../src/helpers/dom/clickEvent.ts","../src/helpers/string/bom.ts","../src/lib/richTextProcessor/wrapTelegramUrlToAnchor.ts","../src/helpers/dom/isInDOM.ts","../src/helpers/array/forEachReverse.ts","../src/helpers/dom/safePlay.ts","../src/components/animationIntersector.ts","../src/components/visibilityIntersector.ts","../src/helpers/array/findAndSpliceAll.ts","../src/helpers/array/findAndSplice.ts","../src/components/lazyLoadQueueBase.ts","../src/components/lazyLoadQueueIntersector.ts","../src/hooks/useHeavyAnimationCheck.ts","../src/components/lazyLoadQueue.ts","../src/helpers/bytes/getPathFromBytes.ts","../src/helpers/computeLockColor.ts","../src/lib/hls/common.ts","../src/lib/hls/hlsInstancesByVideo.ts","../src/lib/hls/initVideoHls.ts","../src/helpers/dom/createVideo.ts","../src/helpers/fixChromiumMp4.constants.ts","../src/helpers/onMediaLoad.ts","../src/helpers/dom/renderImageFromUrl.ts","../src/helpers/bytes/bytesFromHex.ts","../src/helpers/bytes/bytesToDataURL.ts","../src/helpers/bytes/convertToUint8Array.ts","../src/helpers/bytes/getPreviewURLFromBytes.ts","../src/helpers/getPreviewURLFromThumb.ts","../src/helpers/heavyQueue.ts","../src/helpers/blur.ts","../src/helpers/getImageFromStrippedThumb.ts","../src/helpers/calcImageInBox.ts","../src/helpers/mediaSize.ts","../src/helpers/mediaSizes.ts","../src/helpers/number/clamp.ts","../src/environment/imageBitmapSupport.ts","../src/helpers/framesCache.ts","../src/helpers/dom/customProperties.ts","../src/lib/rlottie/rlottiePlayer.ts","../src/helpers/saveLottiePreview.ts","../src/helpers/sequentialDom.ts","../src/helpers/getFileNameForUpload.ts","../src/lib/appManagers/utils/docs/getDocumentInputFileLocation.ts","../src/lib/appManagers/utils/docs/getDocumentDownloadOptions.ts","../src/lib/appManagers/utils/photos/getPhotoDownloadOptions.ts","../src/lib/appManagers/utils/webFiles/getWebFileDownloadOptions.ts","../src/lib/appManagers/utils/webDocs/getWebDocumentDownloadOptions.ts","../src/lib/appManagers/utils/webDocs/isWebDocument.ts","../src/lib/appManagers/utils/download/getDownloadFileNameFromOptions.ts","../src/lib/appManagers/utils/download/getDownloadMediaDetails.ts","../src/helpers/dom/createDownloadAnchor.ts","../src/lib/appManagers/appDownloadManager.ts","../src/lib/appManagers/utils/photos/choosePhotoSize.ts","../src/lib/appManagers/utils/stickers/getStickerEffectThumb.ts","../src/lib/rlottie/queryableWorker.ts","../src/environment/webAssemblySupport.ts","../src/lib/rlottie/lottieLoader.ts","../src/helpers/middleware.ts","../src/helpers/schedulers/throttleWith.ts","../src/helpers/schedulers/throttleWithRaf.ts","../src/helpers/solid/createUnifiedSignal.ts","../src/helpers/windowSize.ts","../src/components/wrappers/stickerAnimation.ts","../src/helpers/liteMode.ts","../src/icons.ts","../src/iconsReverse.ts","../src/components/icon.ts","../src/helpers/dom/setCurrentTime.ts","../src/helpers/dom/handleVideoLeak.ts","../src/components/wrappers/sticker.ts","../src/helpers/dom/getVisibleRect.ts","../src/helpers/dom/getViewportSlice.ts","../src/helpers/dom/replaceContent.ts","../src/components/resizeObserver.ts","../src/lib/customEmoji/renderer.ts","../src/lib/customEmoji/element.ts","../src/codeLanguages.ts","../src/helpers/array/findIndexFrom.ts","../src/helpers/createElementFromMarkup.ts","../src/helpers/animation.ts","../src/helpers/callbackifyAll.ts","../src/helpers/number/getUnsafeRandomInt.ts","../src/components/bluffSpoilerController.ts","../src/components/dotRenderer.ts","../src/lib/richTextProcessor/wrapRichText.ts","../src/lib/richTextProcessor/wrapEmojiText.ts","../src/components/wrappers/getPeerTitle.ts","../src/helpers/color.ts","../src/helpers/themeController.ts","../src/lib/appManagers/utils/peers/getPeerColorById.ts","../src/helpers/canvas/drawCircle.ts","../src/lib/richTextProcessor/getEmojiEntityFromEmoji.ts","../src/lib/richTextProcessor/getAbbreviation.ts","../src/config/notifications.ts","../src/lib/accounts/createAppURLForAccount.ts","../src/stores/appSettings.ts","../src/lib/mtproto/mtprotoworker.ts","../src/helpers/overlayCounter.ts","../src/helpers/string/parseUriParams.ts","../src/environment/installPrompt.ts","../src/helpers/dom/installPrompt.ts","../src/helpers/date.ts","../src/helpers/random.ts","../src/environment/overlayScrollSupport.ts","../src/lib/accounts/changeAccount.ts","../src/index.ts"],"sourcesContent":["/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport type {TrueDcId} from '../types';\n\nexport const MAIN_DOMAINS = ['web.telegram.org', 'webk.telegram.org'];\nexport const DEFAULT_BACKGROUND_SLUG = 'pattern';\n\nconst threads = Math.min(4, navigator.hardwareConcurrency ?? 4);\n\nconst App = {\n  id: +import.meta.env.VITE_API_ID,\n  hash: import.meta.env.VITE_API_HASH,\n  version: import.meta.env.VITE_VERSION,\n  versionFull: import.meta.env.VITE_VERSION_FULL,\n  build: +import.meta.env.VITE_BUILD,\n  langPackVersion: '6.1.8',\n  langPack: 'webk',\n  langPackCode: 'en',\n  domains: MAIN_DOMAINS,\n  baseDcId: 2 as TrueDcId,\n  isMainDomain: MAIN_DOMAINS.includes(location.hostname),\n  suffix: 'K',\n  threads,\n  cryptoWorkers: threads\n};\n\nif(App.isMainDomain) { // use Webogram credentials then\n  App.id = 2496;\n  App.hash = '8da85b0d5bfe62527e5b244c209159c3';\n}\n\nexport default App;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nexport default function blurActiveElement() {\n  if((document.activeElement as HTMLInputElement)?.blur) {\n    (document.activeElement as HTMLInputElement).blur();\n    return true;\n  }\n\n  return false;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nexport default function cancelEvent(event?: Event) {\n  event ||= window.event;\n  if(event) {\n    // 'input' event will have cancelable=false, but we still need to preventDefault\n    // if(!event.cancelable) {\n    //   return false;\n    // }\n\n    // @ts-ignore\n    event = event.originalEvent || event;\n\n    try {\n      if(event.stopPropagation) event.stopPropagation();\n      if(event.preventDefault) event.preventDefault();\n      event.returnValue = false;\n      event.cancelBubble = true;\n    } catch(err) {}\n  }\n\n  return false;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n// @ts-ignore\nconst IS_TOUCH_SUPPORTED = ('ontouchstart' in window) || (window.DocumentTouch && document instanceof DocumentTouch)/*  || true */;\nexport default IS_TOUCH_SUPPORTED;\n","const ctx = typeof(window) !== 'undefined' ? window : self;\n\nexport default ctx;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport ctx from './ctx';\n\nexport const USER_AGENT = navigator ? navigator.userAgent : null;\nexport const IS_APPLE = navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i) !== -1;\nexport const IS_ANDROID = navigator.userAgent.toLowerCase().indexOf('android') !== -1;\nexport const IS_CHROMIUM = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\nexport const CHROMIUM_VERSION = (() => {\n  try {\n    return +navigator.userAgent.match(/Chrom(?:e|ium)\\/(.+?)(?:\\s|\\.)/)[1];\n  } catch(err) {\n  }\n})();\n\n// https://stackoverflow.com/a/58065241\nexport const IS_APPLE_MOBILE = (/iPad|iPhone|iPod/.test(navigator.platform) ||\n  (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1)) &&\n  !(ctx as any).MSStream;\n\nexport const IS_SAFARI = !!('safari' in ctx) || !!(USER_AGENT && (/\\b(iPad|iPhone|iPod)\\b/.test(USER_AGENT) || (!!USER_AGENT.match('Safari') && !USER_AGENT.match('Chrome'))))/*  || true */;\nexport const IS_FIREFOX = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n\nexport const IS_MOBILE_SAFARI = IS_SAFARI && IS_APPLE_MOBILE;\n\nexport const IS_MOBILE = (navigator.maxTouchPoints === undefined || navigator.maxTouchPoints > 0) && navigator.userAgent.search(/iOS|iPhone OS|Android|BlackBerry|BB10|Series ?[64]0|J2ME|MIDP|opera mini|opera mobi|mobi.+Gecko|Windows Phone/i) != -1;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n// export function findUpClassName<T>(el: any, className: string): T;\nexport default function findUpClassName(el: EventTarget | {closest: (selector: string) => any}, className: string): HTMLElement {\n  return (el as any).closest('.' + className);\n  /* if(el.classList.contains(className)) return el; // 03.02.2020\n\n  while(el.parentElement) {\n    el = el.parentElement;\n    if(el.classList.contains(className))\n      return el;\n  }\n  return null; */\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n// * Jolly Cobra's schedulers\nimport {NoneToVoidFunction} from '../types';\n\n/*\nexport function throttleWithTickEnd<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(onTickEnd, fn);\n}\n\nexport function throttleWithNow<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(runNow, fn);\n}\n\nexport function onTickEnd(cb: NoneToVoidFunction) {\n  Promise.resolve().then(cb);\n}\n\nfunction runNow(fn: NoneToVoidFunction) {\n  fn();\n} */\n\nlet fastRafCallbacks: NoneToVoidFunction[] | undefined;\nexport function fastRaf(callback: NoneToVoidFunction) {\n  if(!fastRafCallbacks) {\n    fastRafCallbacks = [callback];\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks!;\n      fastRafCallbacks = undefined;\n      currentCallbacks.forEach((cb) => cb());\n    });\n  } else {\n    fastRafCallbacks.push(callback);\n  }\n}\n\nlet fastRafConventionalCallbacks: NoneToVoidFunction[] | undefined, processing = false;\nexport function fastRafConventional(callback: NoneToVoidFunction) {\n  if(!fastRafConventionalCallbacks) {\n    fastRafConventionalCallbacks = [callback];\n\n    requestAnimationFrame(() => {\n      processing = true;\n      for(let i = 0; i < fastRafConventionalCallbacks.length; ++i) {\n        fastRafConventionalCallbacks[i]();\n      }\n\n      fastRafConventionalCallbacks = undefined;\n      processing = false;\n    });\n  } else if(processing) {\n    callback();\n  } else {\n    fastRafConventionalCallbacks.push(callback);\n  }\n}\n\nlet rafPromise: Promise<void>;\nexport function fastRafPromise() {\n  if(rafPromise) return rafPromise;\n\n  rafPromise = new Promise<void>((resolve) => fastRaf(() => resolve()));\n  rafPromise.then(() => {\n    rafPromise = undefined;\n  });\n\n  return rafPromise;\n}\n\nexport function doubleRaf() {\n  return new Promise<void>((resolve) => {\n    fastRaf(() => {\n      fastRaf(resolve);\n    });\n  });\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {doubleRaf} from '../schedulers';\n\nexport default function fixSafariStickyInput(input: HTMLElement) {\n  input.style.transform = 'translateY(-99999px)';\n  /* input.style.position = 'fixed';\n  input.style.top = '-99999px';\n  input.style.left = '0'; */\n  input.focus();\n\n  // setTimeout(() => {\n  doubleRaf().then(() => {\n    // fastSmoothScroll(findUpClassName(input, 'scrollable-y') || window as any, document.activeElement as HTMLElement, 'start', 4, undefined, FocusDirection.Static);\n    /* input.style.position = '';\n    input.style.top = ''; */\n    input.style.transform = '';\n    // fastSmoothScroll(findUpClassName(input, 'scrollable-y') || window as any, document.activeElement as HTMLElement, 'start', 4, undefined, FocusDirection.Static);\n\n    /* setTimeout(() => {\n      fastSmoothScroll(findUpClassName(input, 'scrollable-y') || window as any, document.activeElement as HTMLElement, 'start', 4);\n    }, 50); */\n  });\n  // }, 0);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport IS_TOUCH_SUPPORTED from '../../environment/touchSupport';\nimport {IS_MOBILE, IS_SAFARI} from '../../environment/userAgent';\nimport findUpClassName from './findUpClassName';\nimport fixSafariStickyInput from './fixSafariStickyInput';\n\nexport const IS_STICKY_INPUT_BUGGED = IS_SAFARI && IS_MOBILE && IS_TOUCH_SUPPORTED && false;\n\nif(IS_STICKY_INPUT_BUGGED) {\n  const key: 'clientY' | 'pageY' = 'clientY';\n  let startY = 0;\n  const o = {capture: true, passive: false};\n  const onTouchMove = (e: TouchEvent) => {\n    const touch = e.touches[0];\n\n    // console.log('touchmove y', touch[key], startY);\n\n    const scrollable = findUpClassName(touch.target, 'scrollable-y');\n    if(scrollable) {\n      const y = touch[key];\n      const scrolled = startY - y;\n\n      /* if(y < startY) {\n        startY = y;\n      } */\n\n      const scrollTop = scrollable.scrollTop;\n      const scrollHeight = scrollable.scrollHeight;\n      const clientHeight = scrollable.clientHeight;\n      const nextScrollTop = scrollTop ? Math.round(scrollTop + scrollable.clientHeight + scrolled) : scrollTop + scrolled;\n      // const needCancel = scrollHeight !== clientHeight ? (scrollTop && diff <= 1) || (scrollTop - diff) < 0 : true;\n      const needCancel = scrollHeight === clientHeight || nextScrollTop >= scrollHeight || nextScrollTop <= 0;\n      if(needCancel) {\n        e.preventDefault();\n      }\n\n      // console.log('touchmove with scrollable', scrollTop, startY, scrolled, nextScrollTop, needCancel, e.cancelable);\n    } else {\n      e.preventDefault();\n\n      // console.log('touchmove no scrollable', e, touch);\n    }\n\n    // if(e.target === document.documentElement || e.target === document.body) e.preventDefault();\n  };\n\n  // let el = document.createElement('div');\n  // document.body.prepend(el);\n  // let a = 0;\n\n  // let hasFocus = false;\n  let lastFocusOutTimeStamp = 0;\n  document.addEventListener('focusin', (e) => {\n    if(!(e.target as HTMLElement).classList.contains('is-sticky-input-bugged') || (e.timeStamp - lastFocusOutTimeStamp) < 50/*  && document.activeElement === input */) {\n      return;\n    }\n\n    // console.log('focusin', e, e.timeStamp);\n\n    // hasFocus = true;\n    // document.body.classList.add('is-keyboard-opened');\n\n    // el.innerText = 'focusin ' + ++a;\n\n    /* a < 2 &&  */fixSafariStickyInput(e.target as HTMLElement);\n\n    document.addEventListener('touchmove', onTouchMove, o);\n    document.addEventListener('touchstart', (e) => {\n      if(e.touches.length > 1) return;\n      const touchStart = e.touches[0];\n\n      startY = touchStart[key];\n    });\n  }, {passive: true});\n\n  document.addEventListener('focusout', (e) => {\n    // console.log('focusout', e, e.timeStamp);\n    document.removeEventListener('touchmove', onTouchMove, o);\n\n    lastFocusOutTimeStamp = e.timeStamp;\n\n    // el.innerText = 'focusout ' + ++a;\n\n    // if(hasFocus) {\n    //   hasFocus = false;\n    //   document.body.classList.remove('is-keyboard-opened');\n    // }\n  }, {passive: true});\n\n  document.addEventListener('visibilitychange', () => {\n    // console.log('window visibilitychange');\n    if(document.activeElement &&\n      document.activeElement.classList.contains('is-sticky-input-bugged') &&\n      (document.activeElement as HTMLElement).blur) {\n      fixSafariStickyInput(document.activeElement as HTMLElement);\n    }\n\n    /* blurActiveElement();\n    window.scrollTo(0, 0);\n    setVH(); */\n  }, {passive: true});\n}\n\nexport default function fixSafariStickyInputFocusing(input: HTMLElement) {\n  if(!IS_STICKY_INPUT_BUGGED) return;\n  input.classList.add('is-sticky-input-bugged');\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nexport const FontFamilyName = 'Roboto';\nexport const FontFamily = FontFamilyName + ', -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif';\nexport const FontSize = '16px';\nexport const FontWeight = '400';\nexport const FontFull = `${FontWeight} ${FontSize} ${FontFamily}`;\n","export default function noop() {}\n","export default function pause(ms: number) {\n  return new Promise<void>((resolve) => {\n    setTimeout(resolve, ms);\n  });\n}\n","export const TGICO_CLASS = 'tgico';\nexport default function tgico(icon: Icon) {\n  return [TGICO_CLASS, _tgico(icon)];\n}\n\nexport function _tgico(icon: Icon) {\n  return TGICO_CLASS + '-' + icon;\n}\n\nexport function tgico_(icon: Icon) {\n  return tgico(icon).join(' ');\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {FontFamilyName} from '../../config/font';\nimport noop from '../noop';\nimport pause from '../schedulers/pause';\nimport {TGICO_CLASS} from '../tgico';\n\nconst texts = ['b', 'б'];\ntype FontType = 'text' | 'icons' | 'monospace';\n\nconst cache: {\n  [key: string]: {\n    [text: string]: Promise<any>\n  }\n} = {};\n\nconst fonts: {[type in FontType]: string} = {\n  text: FontFamilyName,\n  icons: TGICO_CLASS,\n  monospace: 'Roboto Mono'\n};\n\nexport default function loadFonts(types: {[type in FontType]?: string[] | 'all'} = {\n  text: texts,\n  icons: undefined,\n  monospace: texts\n}): Promise<any> {\n  if(!('fonts' in document)) {\n    return Promise.resolve();\n  }\n\n  const promises: Promise<any>[] = [];\n  for(const type in types) {\n    let _texts = types[type as FontType];\n    if(_texts === 'all') {\n      _texts = texts;\n    }\n\n    const font = fonts[type as FontType];\n    const weights = type === 'icons' ? [500] : [400, 500];\n    for(const weight of weights) {\n      const _promises = (_texts || [undefined]).map((text) => {\n        const key = [weight, '1rem', font].join(' ');\n        const promise = (cache[key] ??= {})[text || ''] ??= document.fonts.load(key, text);\n        return promise;\n      });\n      promises.push(..._promises);\n    }\n  }\n\n  return Promise.race([\n    Promise.all(promises).catch(noop),\n    pause(1000)\n  ]);\n}\n","const IS_EMOJI_SUPPORTED = navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i) !== -1/*  && false *//*  || true */;\n\nexport default IS_EMOJI_SUPPORTED;\n","export const CURRENT_ACCOUNT_QUERY_PARAM = 'account';\n\nexport const MAX_ACCOUNTS_FREE = 3;\nexport const MAX_ACCOUNTS_PREMIUM = 4;\nexport const MAX_ACCOUNTS = MAX_ACCOUNTS_PREMIUM;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {CURRENT_ACCOUNT_QUERY_PARAM} from '../lib/accounts/constants';\n\nexport function makeWorkerURL(url: string | URL) {\n  if(!(url instanceof URL)) {\n    url = new URL(url + '', location.href);\n  }\n\n  if(location.search && url.protocol !== 'blob:') {\n    const params = new URLSearchParams(location.search);\n    params.forEach((value, key) => {\n      if(key === CURRENT_ACCOUNT_QUERY_PARAM) return;\n      (url as URL).searchParams.set(key, value);\n    });\n  }\n\n  // exclude useless params\n  (url as URL).searchParams.delete('swfix');\n\n  return url;\n}\n\nexport default function setWorkerProxy() {\n  // * hook worker constructor to set search parameters (test, debug, etc)\n  const workerHandler = {\n    construct(target: any, args: any) {\n      args[0] = makeWorkerURL(args[0]);\n      return new target(...args);\n    }\n  };\n\n  [\n    Worker,\n    typeof(SharedWorker) !== 'undefined' && SharedWorker\n  ].filter(Boolean).forEach((w) => {\n    window[w.name as any] = new Proxy(w, workerHandler);\n  });\n}\n\nsetWorkerProxy();\n","export default function toggleAttributePolyfill() {\n  if(!Element.prototype.toggleAttribute) {\n    Element.prototype.toggleAttribute = function(name, force) {\n      if(force !== void 0) force = !!force;\n\n      if(this.hasAttribute(name)) {\n        if(force) return true;\n\n        this.removeAttribute(name);\n        return false;\n      }\n      if(force === false) return false;\n\n      this.setAttribute(name, '');\n      return true;\n    };\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {MyDialogFilter} from '../storages/filters';\n\n/**\n * Legacy Webogram's format, don't change dcID to camelCase. date is timestamp\n */\nexport type UserAuth = {dcID: number | string, date: number, id: PeerId};\nexport type REAL_FOLDER_ID = 0 | 1;\n\nexport const NULL_PEER_ID: PeerId = 0;\nexport const REPLIES_PEER_ID: PeerId = 1271266957;\nexport const REPLIES_HIDDEN_CHANNEL_ID: ChatId = 777;\nexport const HIDDEN_PEER_ID: PeerId = 2666000;\nexport const SERVICE_PEER_ID: PeerId = 777000;\nexport const MUTE_UNTIL = 0x7FFFFFFF;\nexport const BOT_START_PARAM = '';\nexport const MAX_FILE_SAVE_SIZE = 20 * 1024 * 1024;\nexport const THUMB_TYPE_FULL = '';\nexport const TOPIC_COLORS = [0x6FB9F0, 0xFFD67E, 0xCB86DB, 0x8EEE98, 0xFF93B2, 0xFB6F5F];\nexport const ATTACH_MENU_BOT_ICON_NAME = 'default_static';\nexport const MESSAGE_ID_OFFSET = 0x100000000;\nexport const GENERAL_TOPIC_ID = MESSAGE_ID_OFFSET + 1;\nexport const CAN_HIDE_TOPIC = false;\nexport const T_ME_PREFIXES = new Set(['web', 'k', 'z', 'a']);\nexport const SEND_WHEN_ONLINE_TIMESTAMP = 0x7FFFFFFE;\nexport const SERVER_IMAGE_MIME_TYPES = new Set(['image/jpeg', 'image/png', 'image/bmp', 'image/gif']);\nexport const STARS_CURRENCY = 'XTR';\n\nexport const FOLDER_ID_ALL: REAL_FOLDER_ID = 0;\nexport const FOLDER_ID_ARCHIVE: REAL_FOLDER_ID = 1;\nexport const REAL_FOLDERS: Set<number> = new Set([FOLDER_ID_ALL, FOLDER_ID_ARCHIVE]);\nexport const START_LOCAL_ID = Math.max(...Array.from(REAL_FOLDERS)) + 1 as MyDialogFilter['localId'];\n\nexport const TEST_NO_STORIES = false;\nexport const TEST_NO_SAVED = false;\nexport const TEST_NO_STREAMING = false;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n// import { MOUNT_CLASS_TO } from \"../config/debug\";\nimport type {ArgumentTypes, SuperReturnType} from '../types';\n\n// class EventSystem {\n//   wm: WeakMap<any, Record<any, Set<any>>> = new WeakMap();\n\n//   add(target: any, event: any, listener: any) {\n//     let listeners = this.wm.get(target);\n//     if (listeners === undefined) {\n//         listeners = {};\n//     }\n//     let listenersForEvent = listeners[event];\n//     if (listenersForEvent === undefined) {\n//         listenersForEvent = new Set();\n//     }\n//     listenersForEvent.add(listener);\n//     listeners[event] = listenersForEvent;\n//     //target.addEventListener(event, listener);\n//     this.wm.set(target, listeners);\n//   };\n\n//   remove(target: any, event: any, listener: any) {\n//     let listeners = this.wm.get(target);\n//     if (!listeners) return;\n//     let listenersForEvent = listeners[event];\n//     if (!listenersForEvent) return;\n//     listenersForEvent.delete(listener);\n//   };\n\n//   /* fire(target, event) {\n//      let listeners = this.wm.get(target);\n//      if (!listeners) return;\n//      let listenersForEvent = listeners[event];\n//      if (!listenersForEvent) return;\n//      for (let handler of handlers) {\n//          setTimeout(handler, 0, event, target); // we use a setTimeout here because we want event triggering to be asynchronous.\n//      }\n//   }; */\n// }\n\n// console.log = () => {};\n\n// const e = new EventSystem();\n// MOUNT_CLASS_TO.e = e;\n\nexport type EventListenerListeners = Record<string, Function>;\n// export type EventListenerListeners = Record<string, (...args: any[]) => any>;\n// export type EventListenerListeners = {[name in string]: Function};\n\n/**\n * Better not to remove listeners during setting\n * Should add listener callback only once\n */\n\ntype ListenerObject<T> = {callback: T, options: boolean | AddEventListenerOptions};\n\n// type EventLitenerCallback<T> = (data: T) =>\n// export default class EventListenerBase<Listeners extends {[name: string]: Function}> {\nexport default class EventListenerBase<Listeners extends EventListenerListeners> {\n  protected listeners: Partial<{\n    [k in keyof Listeners]: Set<ListenerObject<Listeners[k]>>\n  }>;\n  protected listenerResults: Partial<{\n    [k in keyof Listeners]: ArgumentTypes<Listeners[k]>\n  }>;\n\n  private reuseResults: boolean;\n\n  constructor(reuseResults?: boolean) {\n    this._constructor(reuseResults);\n  }\n\n  public _constructor(reuseResults?: boolean): any {\n    this.reuseResults = reuseResults;\n    this.listeners = {};\n    this.listenerResults = {};\n  }\n\n  public addEventListener<T extends keyof Listeners>(name: T, callback: Listeners[T], options?: boolean | AddEventListenerOptions) {\n    const listenerObject: ListenerObject<Listeners[T]> = {callback, options};\n    (this.listeners[name] ??= new Set()).add(listenerObject); // ! add before because if you don't, you won't be able to delete it from callback\n\n    if(this.listenerResults.hasOwnProperty(name)) {\n      callback(...this.listenerResults[name]);\n\n      if((options as AddEventListenerOptions)?.once) {\n        this.listeners[name].delete(listenerObject);\n        return;\n      }\n    }\n\n    // e.add(this, name, {callback, once});\n  }\n\n  public addMultipleEventsListeners(obj: {\n    [name in keyof Listeners]?: Listeners[name]\n  }) {\n    for(const i in obj) {\n      this.addEventListener(i, obj[i]);\n    }\n  }\n\n  public removeEventListener<T extends keyof Listeners>(\n    name: T,\n    callback: Listeners[T],\n    options?: boolean | AddEventListenerOptions\n  ) {\n    if(this.listeners[name]) {\n      for(const l of this.listeners[name]) {\n        if(l.callback === callback) {\n          this.listeners[name].delete(l);\n          break;\n        }\n      }\n    }\n    // e.remove(this, name, callback);\n  }\n\n  protected invokeListenerCallback<T extends keyof Listeners, L extends ListenerObject<any>>(\n    name: T,\n    listener: L,\n    ...args: ArgumentTypes<L['callback']>\n  ) {\n    let result: any, error: any;\n    try {\n      result = listener.callback(...args);\n    } catch(err) {\n      error = err;\n      // console.error('listener callback error', err);\n    }\n\n    if((listener.options as AddEventListenerOptions)?.once) {\n      this.removeEventListener(name, listener.callback);\n    }\n\n    if(error) {\n      throw error;\n    }\n\n    return result;\n  }\n\n  private _dispatchEvent<T extends keyof Listeners>(\n    name: T,\n    collectResults: boolean,\n    ...args: ArgumentTypes<Listeners[T]>\n  ) {\n    if(this.reuseResults) {\n      this.listenerResults[name] = args;\n    }\n\n    const arr: Array<SuperReturnType<Listeners[typeof name]>> = collectResults && [];\n\n    const listeners = this.listeners[name];\n    if(listeners) {\n      for(const listener of listeners) {\n        const result = this.invokeListenerCallback(name, listener, ...args);\n        if(arr) {\n          arr.push(result);\n        }\n      }\n    }\n\n    return arr;\n  }\n\n  public dispatchResultableEvent<T extends keyof Listeners>(name: T, ...args: ArgumentTypes<Listeners[T]>) {\n    return this._dispatchEvent(name, true, ...args);\n  }\n\n  // * must be protected, but who cares\n  public dispatchEvent<L extends EventListenerListeners = Listeners, T extends keyof L = keyof L>(\n    name: T,\n    ...args: ArgumentTypes<L[T]>\n  ) {\n    // @ts-ignore\n    this._dispatchEvent(name, false, ...args);\n  }\n\n  public cleanup() {\n    this.listeners = {};\n    this.listenerResults = {};\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport type {TransportType} from '../lib/mtproto/dcConfigurator';\n\nconst Modes = {\n  test: location.search.indexOf('test=1') > 0/*  || true */,\n  debug: location.search.indexOf('debug=1') > 0,\n  http: false,\n  ssl: true, // location.search.indexOf('ssl=1') > 0 || location.protocol === 'https:' && location.search.indexOf('ssl=0') === -1,\n  asServiceWorker: !!import.meta.env.VITE_MTPROTO_SW,\n  transport: 'websocket' as TransportType,\n  noSharedWorker: location.search.indexOf('noSharedWorker=1') > 0,\n  multipleTransports: !!(import.meta.env.VITE_MTPROTO_AUTO && import.meta.env.VITE_MTPROTO_HAS_HTTP && import.meta.env.VITE_MTPROTO_HAS_WS)\n};\n\nif(import.meta.env.VITE_MTPROTO_HAS_HTTP) {\n  const httpOnly = Modes.http = location.search.indexOf('http=1') > 0;\n  if(httpOnly) {\n    Modes.multipleTransports = false;\n  }\n}\n\n// * start with HTTP first\nif(Modes.multipleTransports) {\n  Modes.http = true;\n}\n\nif(Modes.http) {\n  Modes.transport = 'https';\n}\n\nexport default Modes;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport Modes from './modes';\n\nexport const IS_BETA = import.meta.env.DEV;\nexport const DEBUG = (IS_BETA || Modes.debug)/*  && false */;\nconst ctx: any = typeof(window) !== 'undefined' ? window : self;\nexport const MOUNT_CLASS_TO: any = DEBUG || true/*  && false */ ? ctx : {};\nexport default DEBUG;\n\n// let m = DEBUG;\n/* if(!DEBUG) {\n  ctx.sandpitTurtle = () => {\n    //if(!m) {\n      for(let i in MOUNT_CLASS_TO) {\n        ctx[i] = MOUNT_CLASS_TO[i];\n      }\n      //m = true;\n    //}\n\n    //DEBUG = !DEBUG;\n  };\n} */\n\n/* export const superDebug = (object: any, key: string) => {\n  var d = object[key];\n  var beforeStr = '', afterStr = '';\n  for(var r of d) {\n    beforeStr += r.before.hex + '\\n';\n    afterStr += r.after.hex + '\\n';\n  }\n\n  beforeStr = beforeStr.trim();\n  afterStr = afterStr.trim();\n  //var beforeStr = d.map((r) => r.before.hex).join('\\n');\n  //var afterStr = d.map((r) => r.after.hex).join('\\n');\n\n  var dada = (name: string, str: string) => {\n    var a = document.createElement('a');\n    a.target = '_blank';\n    a.download = name + '.txt';\n    a.href = URL.createObjectURL(new Blob([str], {\n      type: 'text/plain'\n    }));\n    document.body.append(a);\n    a.click();\n  };\n\n  dada(key + '_' + 'before', beforeStr);\n  dada(key + '_' + 'after', afterStr);\n}\n\nMOUNT_CLASS_TO.superDebug = superDebug; */\n","const tabId = Date.now() % Math.random() * 100000000 | 0;\nexport default tabId;\n","export default function indexOfAndSplice<T>(array: Array<T>, item: T) {\n  const idx = array.indexOf(item);\n  const spliced = idx === -1 ? undefined : array.splice(idx, 1);\n  return spliced?.[0];\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n// в SW может быть сразу две переменных TRUE\nexport const IS_SERVICE_WORKER = typeof ServiceWorkerGlobalScope !== 'undefined' && self instanceof ServiceWorkerGlobalScope;\nexport const IS_WEB_WORKER = typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope && !IS_SERVICE_WORKER;\nexport const IS_WORKER = IS_WEB_WORKER || IS_SERVICE_WORKER;\n\nexport const getWindowClients = () => {\n  return (self as any as ServiceWorkerGlobalScope)\n  .clients\n  .matchAll({includeUncontrolled: false, type: 'window'});\n};\n\nexport const getLastWindowClient = () => getWindowClients().then((windowClients) => windowClients.slice(-1)[0]);\n\nconst postMessage = (listener: WindowClient | DedicatedWorkerGlobalScope, ...args: any[]) => {\n  try {\n    // @ts-ignore\n    listener.postMessage(...args);\n  } catch(err) {\n    console.error('[worker] postMessage error:', err, args);\n  }\n};\n\nconst notifyServiceWorker = (all: boolean, ...args: any[]) => {\n  getWindowClients().then((listeners) => {\n    if(!listeners.length) {\n      // console.trace('no listeners?', self, listeners);\n      return;\n    }\n\n    listeners.slice(all ? 0 : -1).forEach((listener) => {\n      postMessage(listener, ...args);\n    });\n  });\n};\n\nconst notifyWorker = (...args: any[]) => {\n  postMessage(self as any as DedicatedWorkerGlobalScope, ...args);\n};\n\nconst noop = () => {};\n\nexport const notifySomeone = IS_SERVICE_WORKER ? notifyServiceWorker.bind(null, false) : (IS_WEB_WORKER ? notifyWorker : noop);\nexport const notifyAll = IS_SERVICE_WORKER ? notifyServiceWorker.bind(null, true) : (IS_WEB_WORKER ? notifyWorker : noop);\n","const CACHED_ERRORS: {[key in Error['type']]?: ApiError} = {};\nexport default function makeError(type: Error['type']) {\n  return CACHED_ERRORS[type] ??= {\n    type\n  };\n}\n","const _logTimer = Date.now();\nexport default function dT() {\n  return '[' + ((Date.now() - _logTimer) / 1000).toFixed(3) + ']';\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport DEBUG from '../config/debug';\nimport {IS_FIREFOX, IS_SAFARI} from '../environment/userAgent';\nimport {IS_SERVICE_WORKER, IS_WEB_WORKER} from '../helpers/context';\nimport dT from '../helpers/dT';\n\nexport enum LogTypes {\n  None = 0,\n  Error = 1,\n  Warn = 2,\n  Log = 4,\n  Debug = 8\n};\n\nexport const LOG_LEVELS = [LogTypes.None, LogTypes.Error, LogTypes.Warn, LogTypes.Log, LogTypes.Debug];\n\nconst IS_WEBKIT = IS_SAFARI || IS_FIREFOX;\n\n// let getCallerFunctionNameFromLine: (line: string) => string;\n// if(IS_WEBKIT) {\n//   getCallerFunctionNameFromLine = (line) => {\n//     const splitted = line.split('@');\n//     return splitted[0];\n//   };\n// } else {\n//   getCallerFunctionNameFromLine = (line: string) => {\n//     const splitted = line.trim().split(' ');\n//     if(splitted.length === 3) {\n//       return splitted[1].slice(splitted[1].lastIndexOf('.') + 1);\n//     }\n//   };\n// }\n\nconst STYLES_SUPPORTED = !IS_WEBKIT;\n// const LINE_INDEX = IS_WEBKIT ? 2 : 3;\n\n// function getCallerFunctionName() {\n//   const stack = new Error().stack;\n//   const lines = stack.split('\\n');\n//   const line = lines[LINE_INDEX] || lines[lines.length - 1];\n//   // const match = line.match(/\\.([^\\.]+?)\\s/);\n//   // line = match ? match[1] : line.trim();\n//   const caller = getCallerFunctionNameFromLine(line) || '<anonymous>';\n//   return '[' + caller + ']';\n// }\n\nexport const LOGGER_STYLES = {\n  reset: '\\x1b[0m',\n  bright: '\\x1b[1m',\n  dim: '\\x1b[2m',\n  underscore: '\\x1b[4m',\n  blink: '\\x1b[5m',\n  reverse: '\\x1b[7m',\n  hidden: '\\x1b[8m',\n  // Foreground (text) colors\n  fg: {\n    black: '\\x1b[30m',\n    red: '\\x1b[31m',\n    green: '\\x1b[32m',\n    yellow: '\\x1b[33m',\n    blue: '\\x1b[34m',\n    magenta: '\\x1b[35m',\n    cyan: '\\x1b[36m',\n    white: '\\x1b[37m'\n  },\n  // Background colors\n  bg: {\n    black: '\\x1b[40m',\n    red: '\\x1b[41m',\n    green: '\\x1b[42m',\n    yellow: '\\x1b[43m',\n    blue: '\\x1b[44m',\n    magenta: '\\x1b[45m',\n    cyan: '\\x1b[46m',\n    white: '\\x1b[47m'\n  }\n};\n\nexport type Logger = {\n  (...args: any[]): void;\n  warn(...args: any[]): void;\n  info(...args: any[]): void;\n  error(...args: any[]): void;\n  trace(...args: any[]): void;\n  debug(...args: any[]): void;\n  assert(...args: any[]): void;\n  // log(...args: any[]): void;\n  group(...args: any[]): void;\n  groupCollapsed(...args: any[]): void;\n  groupEnd(...args: any[]): void;\n  setPrefix(newPrefix: string): void;\n  setLevel(level: 0 | 1 | 2 | 3 | 4): void;\n  bindPrefix(prefix: string, type?: LogTypes): Logger;\n};\n\nconst methods: ['debug' | 'info' | 'warn' | 'error' | 'assert' | 'trace'/*  | 'log' */ | 'group' | 'groupCollapsed' | 'groupEnd', LogTypes][] = [\n  ['debug', LogTypes.Debug],\n  ['info', LogTypes.Log],\n  ['warn', LogTypes.Warn],\n  ['error', LogTypes.Error],\n  ['assert', LogTypes.Error],\n  ['trace', LogTypes.Log],\n  ['group', LogTypes.Log],\n  ['groupCollapsed', LogTypes.Log],\n  ['groupEnd', LogTypes.Log]\n  // [\"log\", LogTypes.Log]\n];\n\nexport function logger(prefix: string, type: LogTypes = LogTypes.Log | LogTypes.Warn | LogTypes.Error, ignoreDebugReset = false, style = ''): Logger {\n  let originalPrefix: string;\n  if(!DEBUG && !ignoreDebugReset/*  || true */) {\n    type = LogTypes.Error;\n  }\n\n  if(!STYLES_SUPPORTED) {\n    style = '';\n  } else if(!style) {\n    if(IS_SERVICE_WORKER) style = LOGGER_STYLES.fg.yellow;\n    else if(IS_WEB_WORKER) style = LOGGER_STYLES.fg.cyan;\n  }\n\n  const originalStyle = style;\n  if(style) style = `%s ${style}%s`;\n  else style = '%s';\n\n  // level = LogLevels.log | LogLevels.warn | LogLevels.error | LogLevels.debug\n\n  const log: Logger = function(...args: any[]) {\n    return type & LogTypes.Log && console.log(style, dT(), prefix, /* getCallerFunctionName(), */ ...args);\n  } as any;\n\n  methods.forEach(([method, logType]) => {\n    log[method] = function(...args: any[]) {\n      return type & logType && console[method](style, dT(), prefix, /* getCallerFunctionName(), */ ...args);\n    };\n  });\n\n  log.setPrefix = function(newPrefix: string) {\n    originalPrefix = newPrefix;\n    prefix = '[' + newPrefix + ']';\n  };\n\n  log.setPrefix(prefix);\n\n  log.setLevel = function(level: 0 | 1 | 2 | 3 | 4) {\n    type = LOG_LEVELS.slice(0, level + 1).reduce((acc, v) => acc | v, 0) as any;\n  };\n\n  const prefixCache: {[prefix: string]: Logger} = {};\n  log.bindPrefix = function(prefix: string, _type = type) {\n    return prefixCache[prefix] ??= logger(\n      // `${originalPrefix}] ${LOGGER_STYLES.fg.magenta}[${prefix}`,\n      `${originalPrefix}] ${STYLES_SUPPORTED && originalStyle ? LOGGER_STYLES.reset : ''}[${prefix}`,\n      // `${originalPrefix}] [${prefix}`,\n      _type,\n      ignoreDebugReset,\n      // originalStyle || LOGGER_STYLES.reset\n      originalStyle\n      // LOGGER_STYLES.reset\n    );\n  };\n\n  return log;\n};\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport DEBUG from '../../config/debug';\nimport tabId from '../../config/tabId';\nimport ctx from '../../environment/ctx';\nimport indexOfAndSplice from '../../helpers/array/indexOfAndSplice';\nimport {IS_WORKER} from '../../helpers/context';\nimport EventListenerBase from '../../helpers/eventListenerBase';\nimport makeError from '../../helpers/makeError';\nimport {Awaited, WorkerTaskTemplate, WorkerTaskVoidTemplate} from '../../types';\nimport {logger} from '../logger';\n\ntype SuperMessagePortTask = WorkerTaskTemplate & {\n  transfer?: Transferable[]\n};\n\ninterface InvokeTask extends SuperMessagePortTask {\n  type: 'invoke',\n  payload: WorkerTaskVoidTemplate & {withAck?: boolean, void?: boolean}\n}\n\ninterface ResultTask extends SuperMessagePortTask {\n  type: 'result',\n  payload: {\n    taskId: number,\n    result?: any,\n    error?: any\n  }\n}\n\ninterface AckTask extends SuperMessagePortTask {\n  type: 'ack',\n  payload: {\n    cached: boolean,\n    taskId: number\n    result?: any,\n    error?: any,\n  }\n}\n\ninterface PingTask extends SuperMessagePortTask {\n  type: 'ping'\n}\n\ninterface PongTask extends SuperMessagePortTask {\n  type: 'pong'\n}\n\ninterface BatchTask extends SuperMessagePortTask {\n  type: 'batch',\n  payload: Task[]\n}\n\ninterface CloseTask extends SuperMessagePortTask {\n  type: 'close'\n}\n\n// interface OpenTask extends SuperMessagePortTask {\n//   type: 'open'\n// }\n\ninterface LockTask extends SuperMessagePortTask {\n  type: 'lock',\n  payload: string\n}\n\ntype Task = InvokeTask | ResultTask | AckTask | PingTask | PongTask | BatchTask | CloseTask/*  | OpenTask */ | LockTask;\ntype TaskMap = {\n  [type in Task as type['type']]?: (task: Extract<Task, type>, source: MessageEventSource, event: MessageEvent<any>) => void | Promise<any>\n};\n\nexport type AckedResult<T> = {\n  cached: boolean,\n  result: Promise<T>\n};\n// export type AckedResult<T> = {\n//   cached: true,\n//   result: T\n// } | {\n//   cached: false,\n//   result: Promise<T>\n// };\n\ntype ListenPort = WindowProxy | MessagePort | ServiceWorker | Worker | ServiceWorkerContainer;\ntype SendPort = Pick<MessageEventSource, 'postMessage'>/* WindowProxy | MessagePort | ServiceWorker | Worker */;\n\nexport type MessageListenPort = ListenPort;\nexport type MessageSendPort = SendPort;\n\ntype ListenerCallback = (payload: any, source: MessageEventSource, event: MessageEvent<any>) => any;\ntype Listeners = Record<string, ListenerCallback>;\n\nconst USE_LOCKS = true;\nconst USE_BATCHING = true;\n\n// const PING_INTERVAL = DEBUG && false ? 0x7FFFFFFF : 5000;\n// const PING_TIMEOUT = DEBUG && false ? 0x7FFFFFFF : 10000;\n\nexport default class SuperMessagePort<\n  Workers extends Listeners,\n  Masters extends Listeners,\n  IsMaster extends boolean,\n  Receive extends Listeners = IsMaster extends true ? Masters : Workers,\n  Send extends Listeners = IsMaster extends true ? Workers : Masters\n> extends EventListenerBase<Receive> {\n  protected listenPorts: Array<ListenPort>;\n  protected sendPorts: Array<SendPort>;\n  protected pingResolves: Map<SendPort, () => void>;\n\n  protected taskId: number;\n  protected awaiting: {\n    [id: number]: {\n      resolve: any,\n      reject: any,\n      taskType: string,\n      port?: SendPort\n    }\n  };\n  protected pending: Map<SendPort, Task[]>;\n\n  protected log: ReturnType<typeof logger>;\n  protected debug: boolean;\n  protected releasingPending: boolean;\n\n  protected processTaskMap: TaskMap;\n\n  protected onPortDisconnect: (source: MessageEventSource) => void;\n  // protected onPortConnect: (source: MessageEventSource) => void;\n\n  protected heldLocks: Map<SendPort, {resolve: () => void, id: string}>;\n  protected requestedLocks: Map<string, SendPort>;\n\n  constructor(protected logSuffix?: string) {\n    super(false);\n\n    this.listenPorts = [];\n    this.sendPorts = [];\n    this.pingResolves = new Map();\n    this.taskId = Math.random(); // [0 <-> 1] Have some decimals to prevent tabs from overlapping ids\n    this.awaiting = {};\n    this.pending = new Map();\n    this.log = logger('MP' + (logSuffix ? '-' + logSuffix : ''));\n    this.debug = DEBUG;\n    this.heldLocks = new Map();\n    this.requestedLocks = new Map();\n\n    this.processTaskMap = {\n      result: this.processResultTask,\n      ack: this.processAckTask,\n      invoke: this.processInvokeTask,\n      ping: this.processPingTask,\n      pong: this.processPongTask,\n      close: this.processCloseTask,\n      // open: this.processOpenTask,\n      lock: this.processLockTask,\n      batch: this.processBatchTask\n    };\n  }\n\n  public setOnPortDisconnect(callback: (source: MessageEventSource) => void) {\n    this.onPortDisconnect = callback;\n  }\n\n  // public setOnPortConnect(callback: (source: MessageEventSource) => void) {\n  //   this.onPortConnect = callback;\n  // }\n\n  public attachPort(port: MessageEventSource) {\n    this.attachListenPort(port);\n    this.attachSendPort(port);\n  }\n\n  public attachListenPort(port: ListenPort) {\n    this.listenPorts.push(port);\n    port.addEventListener('message', this.onMessage as any);\n  }\n\n  public attachSendPort(port: SendPort) {\n    this.log.warn('attaching send port');\n\n    (port as MessagePort).start?.();\n\n    this.sendPorts.push(port);\n    // this.sendPing(port);\n\n    // const task = this.createTask('open', undefined);\n    // this.postMessage(port, task);\n\n    if(typeof(window) !== 'undefined' && USE_LOCKS) {\n      if('locks' in navigator) {\n        const id = ['lock', tabId, this.logSuffix || '', Math.random() * 0x7FFFFFFF | 0].join('-');\n        this.log.warn('created lock', id);\n        const promise = new Promise<void>((resolve) => this.heldLocks.set(port, {resolve, id}))\n        .then(() => this.heldLocks.delete(port));\n        navigator.locks.request(id, () => {\n          this.resendLockTask(port);\n          return promise;\n        });\n      } else {\n        window.addEventListener('beforeunload', () => {\n          const task = this.createTask('close', undefined);\n          this.postMessage(undefined, task);\n        });\n      }\n    }\n\n    this.releasePending();\n  }\n\n  public resendLockTask(port: SendPort) {\n    const lock = this.heldLocks.get(port);\n    if(!lock) {\n      return;\n    }\n\n    this.pushTask(this.createTask('lock', lock.id), port);\n  }\n\n  // ! Can't rely on ping because timers can be suspended\n  // protected sendPing(port: SendPort, loop = IS_WORKER) {\n  //   let timeout: number;\n  //   const promise = new Promise<void>((resolve, reject) => {\n  //     this.pingResolves.set(port, resolve);\n  //     this.pushTask(this.createTask('ping', undefined), port);\n\n  //     timeout = ctx.setTimeout(() => {\n  //       reject();\n  //     }, PING_TIMEOUT);\n  //   });\n\n  //   promise.then(() => {\n  //     // this.log('got pong');\n\n  //     clearTimeout(timeout);\n  //     this.pingResolves.delete(port);\n\n  //     if(loop) {\n  //       this.sendPingWithTimeout(port);\n  //     }\n  //   }, () => {\n  //     this.pingResolves.delete(port);\n  //     this.detachPort(port);\n  //   });\n  // }\n\n  // protected sendPingWithTimeout(port: SendPort, timeout = PING_INTERVAL) {\n  //   ctx.setTimeout(() => {\n  //     if(!this.sendPorts.includes(port)) {\n  //       return;\n  //     }\n\n  //     this.sendPing(port);\n  //   }, timeout);\n  // }\n\n  public detachPort(port: ListenPort) {\n    this.log.warn('disconnecting port');\n\n    indexOfAndSplice(this.listenPorts, port);\n    indexOfAndSplice(this.sendPorts, port as any);\n\n    port.removeEventListener?.('message', this.onMessage as any);\n    (port as MessagePort).close?.();\n\n    this.onPortDisconnect?.(port as any);\n\n    const heldLock = this.heldLocks.get(port as SendPort);\n    heldLock?.resolve();\n\n    const error = makeError('PORT_DISCONNECTED');\n    for(const id in this.awaiting) {\n      const task = this.awaiting[id];\n      if(task.port === port) {\n        task.reject(error);\n        delete this.awaiting[id];\n      }\n    }\n  }\n\n  protected postMessage(port: SendPort | SendPort[], task: Task) {\n    const ports = Array.isArray(port) ? port : (port ? [port] : this.sendPorts);\n    ports.forEach((port) => {\n      if(import.meta.env.MODE === 'test') {\n        return;\n      }\n\n      port.postMessage(task, task.transfer as any);\n    });\n  }\n\n  protected onMessage = (event: MessageEvent) => {\n    const task: Task = event.data;\n    // this.log('got message', task);\n\n    const source: MessageEventSource = event.source || event.currentTarget as any; // can have no source\n\n    // @ts-ignore\n    this.processTaskMap[task.type](task, source, event);\n  };\n\n  protected async releasePending() {\n    // return;\n\n    if(/* !this.listenPorts.length || !this.sendPorts.length ||  */this.releasingPending) {\n      return;\n    }\n\n    this.releasingPending = true;\n    // const perf = performance.now();\n\n    if(USE_BATCHING) {\n      await Promise.resolve();\n    }\n    // await pause(0);\n\n    this.debug && this.log.debug('releasing tasks, length:', this.pending.size/* , performance.now() - perf */);\n\n    this.pending.forEach((portTasks, port) => {\n      let tasks: Task[] = portTasks;\n      if(USE_BATCHING) {\n        let batchTask: BatchTask;\n        tasks = [];\n        portTasks.forEach((task) => {\n          if(task.transfer) {\n            batchTask = undefined;\n            tasks.push(task);\n          } else {\n            if(!batchTask) {\n              batchTask = this.createTask('batch', []);\n              tasks.push(batchTask);\n            }\n\n            batchTask.payload.push(task);\n          }\n        });\n      }\n\n      const ports = port ? [port] : this.sendPorts;\n      if(!ports.length) {\n        return;\n      }\n\n      tasks.forEach((task) => {\n        // if(USE_BATCHING && task.type === 'batch') {\n        //   this.log(`batching ${task.payload.length} tasks`);\n        // }\n\n        try {\n          // if(IS_SERVICE_WORKER && !port) {\n          //   notifyAll(task);\n          // } else {\n          this.postMessage(ports, task);\n          // }\n        } catch(err) {\n          this.log.error('postMessage error:', err, task, ports);\n        }\n      });\n\n      this.pending.delete(port);\n    });\n\n    this.debug && this.log.debug('released tasks');\n\n    this.releasingPending = false;\n  }\n\n  protected processResultTask = (task: ResultTask) => {\n    const {taskId, result, error} = task.payload;\n    const deferred = this.awaiting[taskId];\n    if(!deferred) {\n      return;\n    }\n\n    this.debug && this.log.debug('done', deferred.taskType, result, error);\n    'error' in task.payload ? deferred.reject(error) : deferred.resolve(result);\n    delete this.awaiting[taskId];\n  };\n\n  protected processAckTask = (task: AckTask) => {\n    const payload = task.payload;\n    const deferred = this.awaiting[payload.taskId];\n    if(!deferred) {\n      return;\n    }\n\n    // * will finish the init promise with incoming result\n    const previousResolve: (acked: AckedResult<any>) => void = deferred.resolve;\n    // const previousReject = deferred.reject;\n\n    // if(payload.cached) {\n    //   if('result' in payload) {\n    //     previousResolve({\n    //       cached: true,\n    //       result: payload.result\n    //     });\n    //   } else {\n    //     previousReject(payload.error);\n    //   }\n    // } else {\n    //   const ret: AckedResult<any> = {\n    //     cached: false,\n    //     result: new Promise((resolve, reject) => {\n    //       deferred.resolve = resolve;\n    //       deferred.reject = reject;\n    //     })\n    //   };\n\n    //   previousResolve(ret);\n    // }\n\n    const ret: AckedResult<any> = {\n      cached: payload.cached,\n      result: payload.cached ? ('result' in payload ? Promise.resolve(payload.result) : Promise.reject(payload.error)) : new Promise((resolve, reject) => {\n        deferred.resolve = resolve;\n        deferred.reject = reject;\n      })\n    };\n\n    previousResolve(ret);\n\n    if(payload.cached) {\n      delete this.awaiting[payload.taskId];\n    }\n  };\n\n  protected processPingTask = (task: PingTask, source: MessageEventSource, event: MessageEvent) => {\n    this.pushTask(this.createTask('pong', undefined), event.source);\n  };\n\n  protected processPongTask = (task: PongTask, source: MessageEventSource, event: MessageEvent) => {\n    const pingResolve = this.pingResolves.get(source);\n    if(pingResolve) {\n      this.pingResolves.delete(source);\n      pingResolve();\n    }\n  };\n\n  protected processCloseTask = (task: CloseTask, source: MessageEventSource, event: MessageEvent) => {\n    this.detachPort(source);\n  };\n\n  protected processBatchTask = (task: BatchTask, source: MessageEventSource, event: MessageEvent) => {\n    if(!USE_BATCHING) {\n      return;\n    }\n\n    const newEvent: MessageEvent = {data: event.data, source: event.source, currentTarget: event.currentTarget} as any;\n    task.payload.forEach((task) => {\n      // @ts-ignore\n      newEvent.data = task;\n      this.onMessage(newEvent);\n    });\n  };\n\n  // * it's just an 'open' callback, DO NOT attach port from here\n  // protected processOpenTask = (task: OpenTask, source: MessageEventSource, event: MessageEvent) => {\n  //   this.onPortConnect?.(source);\n  // };\n\n  protected processLockTask = (task: LockTask, source: MessageEventSource, event: MessageEvent) => {\n    const id = task.payload;\n    if(this.requestedLocks.has(id)) {\n      return;\n    }\n\n    this.requestedLocks.set(id, source);\n    navigator.locks.request(id, () => {\n      this.processCloseTask(undefined, source, undefined);\n      this.requestedLocks.delete(id);\n    });\n  };\n\n  protected processInvokeTask = async(task: InvokeTask, source: MessageEventSource, event: MessageEvent) => {\n    const id = task.id;\n    const innerTask = task.payload;\n\n    let resultTaskPayload: ResultTask['payload'];\n    let resultTask: ResultTask, ackTask: AckTask;\n    if(!innerTask.void) {\n      resultTaskPayload = {taskId: id};\n      resultTask = this.createTask('result', resultTaskPayload);\n    }\n\n    if(innerTask.withAck) {\n      ackTask = this.createTask('ack', {\n        taskId: id,\n        cached: true\n      });\n    }\n\n    let isPromise: boolean;\n    try {\n      const listeners = this.listeners[innerTask.type];\n      if(!listeners?.size) {\n        throw new Error('no listener');\n      }\n\n      const listener = listeners.values().next().value;\n\n      // @ts-ignore\n      let result = this.invokeListenerCallback(innerTask.type, listener, innerTask.payload, source, event);\n      if(innerTask.void) {\n        return;\n      }\n\n      isPromise = result instanceof Promise;\n\n      if(ackTask) {\n        const cached = !isPromise;\n        ackTask.payload.cached = cached;\n        if(cached) ackTask.payload.result = result;\n        this.pushTask(ackTask, source);\n\n        if(cached) {\n          return;\n        }\n      }\n\n      if(isPromise) {\n        result = await result;\n      }\n\n      resultTaskPayload.result = result;\n    } catch(error) {\n      this.log.error('worker task error:', error, task);\n      if(innerTask.void) {\n        return;\n      }\n\n      if(ackTask && ackTask.payload.cached) {\n        ackTask.payload.error = error;\n        this.pushTask(ackTask, source);\n        return;\n      }\n\n      resultTaskPayload.error = error;\n    }\n\n    this.pushTask(resultTask, source);\n  };\n\n  protected createTask<T extends Task['type'], K extends Task = Parameters<TaskMap[T]>[0]>(type: T, payload: K['payload'], transfer?: Transferable[]): K {\n    return {\n      type,\n      payload,\n      id: this.taskId++,\n      transfer\n    } as K;\n  }\n\n  protected createInvokeTask(type: string, payload: any, withAck?: boolean, _void?: boolean, transfer?: Transferable[]): InvokeTask {\n    return this.createTask('invoke', {\n      type,\n      payload,\n      withAck,\n      void: _void\n    }, transfer);\n  }\n\n  protected pushTask(task: Task, port?: SendPort) {\n    let tasks = this.pending.get(port);\n    if(!tasks) {\n      this.pending.set(port, tasks = []);\n    }\n\n    tasks.push(task);\n    this.releasePending();\n  }\n\n  public invokeVoid<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], port?: SendPort, transfer?: Transferable[]) {\n    const task = this.createInvokeTask(type as string, payload, undefined, true, transfer);\n    this.pushTask(task, port);\n  }\n\n  public invoke<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], withAck?: false, port?: SendPort, transfer?: Transferable[]): Promise<Awaited<ReturnType<Send[T]>>>;\n  public invoke<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], withAck?: true, port?: SendPort, transfer?: Transferable[]): Promise<AckedResult<Awaited<ReturnType<Send[T]>>>>;\n  public invoke<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], withAck?: boolean, port?: SendPort, transfer?: Transferable[]) {\n    this.debug && this.log.debug('start', type, payload);\n\n    let task: InvokeTask;\n    const promise = new Promise<Awaited<ReturnType<Send[T]>>>((resolve, reject) => {\n      task = this.createInvokeTask(type as string, payload, withAck, undefined, transfer);\n      this.awaiting[task.id] = {resolve, reject, taskType: type as string, port};\n      this.pushTask(task, port);\n    });\n\n    if(IS_WORKER) {\n      promise.finally(() => {\n        clearInterval(interval);\n      });\n\n      const interval = ctx.setInterval(() => {\n        this.log.error('task still has no result', task, port);\n      }, 60e3);\n    } else if(false) {\n      // let timedOut = false;\n      const startTime = Date.now();\n      promise.finally(() => {\n        const elapsedTime = Date.now() - startTime;\n        if(elapsedTime >= TIMEOUT) {\n          this.log.error(`task was processing ${Date.now() - startTime}ms`, task.payload.payload, port);\n        }/*  else {\n          clearTimeout(timeout);\n        } */\n      });\n\n      const TIMEOUT = 10;\n      // const timeout = ctx.setTimeout(() => {\n      //   timedOut = true;\n      //   // this.log.error(`task is processing more than ${TIMEOUT} milliseconds`, task, port);\n      // }, TIMEOUT);\n    }\n\n    return promise;\n  }\n\n  public invokeExceptSource<T extends keyof Send>(type: T, payload: Parameters<Send[T]>[0], source?: SendPort) {\n    const ports = this.sendPorts.slice();\n    indexOfAndSplice(ports, source);\n\n    ports.forEach((target) => {\n      this.invokeVoid(type, payload, target);\n    });\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport type {getEnvironment} from '../../environment/utils';\nimport type {StoragesResults} from '../appManagers/utils/storages/loadStorages';\nimport type {LocalStorageProxyTask} from '../localStorage';\nimport type {MirrorTaskPayload, NotificationBuildTaskPayload, TabState} from './mtprotoworker';\nimport type toggleStorages from '../../helpers/toggleStorages';\nimport type {ActiveAccountNumber} from '../accounts/types';\nimport type {LoadStateResult} from '../appManagers/utils/state/loadState';\nimport SuperMessagePort from './superMessagePort';\n\nexport type MTProtoManagerTaskPayload = {name: string, method: string, args: any[], accountNumber: ActiveAccountNumber};\n\ntype CallNotificationPayload = {\n  callerId: string | number,\n  callId: string | number,\n  accountNumber: ActiveAccountNumber\n}\n\ntype MTProtoBroadcastEvent = {\n  event: (payload: {name: string, args: any[], accountNumber: ActiveAccountNumber}, source: MessageEventSource) => void\n};\n\nexport default class MTProtoMessagePort<Master extends boolean = true> extends SuperMessagePort<{\n  environment: (environment: ReturnType<typeof getEnvironment>) => void,\n  crypto: (payload: {method: string, args: any[]}) => Promise<any>,\n  state: (payload: {accountNumber: ActiveAccountNumber} & LoadStateResult) => void,\n  manager: (payload: MTProtoManagerTaskPayload) => any,\n  toggleStorages: (payload: {enabled: boolean, clearWrite: boolean}) => ReturnType<typeof toggleStorages>,\n  serviceWorkerOnline: (online: boolean) => void,\n  serviceWorkerPort: (payload: void, source: MessageEventSource, event: MessageEvent) => void,\n  cryptoPort: (payload: void, source: MessageEventSource, event: MessageEvent) => void,\n  createObjectURL: (blob: Blob) => string,\n  tabState: (payload: TabState, source: MessageEventSource) => void,\n  createProxyWorkerURLs: (payload: {originalUrl: string, blob: Blob}) => string[],\n} & MTProtoBroadcastEvent, {\n  convertWebp: (payload: {fileName: string, bytes: Uint8Array}) => Promise<Uint8Array>,\n  convertOpus: (payload: {fileName: string, bytes: Uint8Array}) => Promise<Uint8Array>,\n  localStorageProxy: (payload: LocalStorageProxyTask['payload']) => Promise<any>,\n  mirror: (payload: MirrorTaskPayload) => void,\n  notificationBuild: (payload: NotificationBuildTaskPayload) => void,\n  receivedServiceMessagePort: (payload: void) => void,\n  log: (payload: any) => void\n  tabsUpdated: (payload: TabState[]) => void,\n  callNotification: (payload: CallNotificationPayload) => void\n  // hello: () => void\n} & MTProtoBroadcastEvent, Master> {\n  private static INSTANCE: MTProtoMessagePort;\n\n  constructor() {\n    super('MTPROTO');\n\n    MTProtoMessagePort.INSTANCE = this;\n\n    MOUNT_CLASS_TO && (MOUNT_CLASS_TO.mtprotoMessagePort = this);\n  }\n\n  public static getInstance<Master extends boolean>() {\n    return this.INSTANCE as MTProtoMessagePort<Master>;\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {Message, StickerSet, Update, NotifyPeer, PeerNotifySettings, PollResults, Poll, WebPage, GroupCall, GroupCallParticipant, ReactionCount, MessagePeerReaction, PhoneCall, Config, Reaction, AttachMenuBot, PeerSettings, StoryItem, PeerStories, SavedDialog, SavedReactionTag} from '../layer';\nimport type {Dialog, ForumTopic, MessagesStorageKey, MyMessage} from './appManagers/appMessagesManager';\nimport type {MyDialogFilter} from './storages/filters';\nimport type {AnyDialog, Folder} from './storages/dialogs';\nimport type {UserTyping} from './appManagers/appProfileManager';\nimport type {MyDraftMessage} from './appManagers/appDraftsManager';\nimport type {ConnectionStatusChange} from './mtproto/connectionStatus';\nimport type {GroupCallId} from './appManagers/appGroupCallsManager';\nimport type {AppManagers} from './appManagers/managers';\nimport type {StateSettings} from '../config/state';\nimport type {Progress} from './appManagers/appDownloadManager';\nimport type {CallId} from './appManagers/appCallsManager';\nimport type {MyDocument} from './appManagers/appDocsManager';\nimport type {MTAppConfig} from './mtproto/appConfig';\nimport type StoriesCacheType from './appManagers/utils/stories/cacheType';\nimport type {StoriesListPosition} from './appManagers/appStoriesManager';\nimport type {ArgumentTypes} from '../types';\nimport {NULL_PEER_ID, UserAuth} from './mtproto/mtproto_config';\nimport EventListenerBase, {EventListenerListeners} from '../helpers/eventListenerBase';\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport MTProtoMessagePort from './mtproto/mtprotoMessagePort';\nimport {RtmpCallInstance} from './calls/rtmpCallsController';\nimport {ActiveAccountNumber} from './accounts/types';\n\nexport type BroadcastEvents = {\n  'chat_full_update': ChatId,\n  'chat_update': ChatId,\n  'chat_toggle_forum': {chatId: ChatId, enabled: boolean},\n  'chat_participant': Update.updateChannelParticipant,\n  'chat_participation': {chatId: ChatId, left: boolean},\n  'chat_requests': {requestsPending: number, recentRequesters: UserId[], chatId: ChatId}\n\n  'channel_update': ChatId,\n\n  'user_update': UserId,\n  'user_auth': UserAuth,\n  'user_full_update': UserId,\n\n  'attach_menu_bot': AttachMenuBot,\n\n  'emoji_status_change': void,\n\n  'peer_pinned_messages': {peerId: PeerId, mids?: number[], pinned?: boolean, unpinAll?: true},\n  'peer_pinned_hidden': {peerId: PeerId, maxId: number},\n  'peer_typings': {peerId: PeerId, threadId?: number, typings: UserTyping[]},\n  'peer_block': {peerId: PeerId, blocked?: boolean, blockedMyStoriesFrom?: boolean},\n  'peer_title_edit': {peerId: PeerId, threadId?: number},\n  'peer_bio_edit': PeerId,\n  'peer_deleted': PeerId, // left chat, deleted user dialog, left channel\n  'peer_full_update': PeerId,\n  'peer_settings': {peerId: PeerId, settings: PeerSettings},\n  'peer_stories': {peerId: PeerId, available: boolean},\n  'peer_stories_hidden': {peerId: PeerId, hidden: boolean},\n\n  'filter_delete': MyDialogFilter,\n  'filter_update': MyDialogFilter,\n  'filter_new': MyDialogFilter,\n  'filter_order': number[],\n  'filter_joined': MyDialogFilter,\n\n  'folder_unread': Omit<Folder, 'dialogs' | 'dispatchUnreadTimeout'>,\n\n  'changing_folder_from_chatlist': number,\n  'changing_folder_from_sidebar': {id: number, dontAnimate?: boolean},\n\n  'dialog_draft': {peerId: PeerId, dialog: Dialog | ForumTopic, drop: boolean, draft: MyDraftMessage | undefined},\n  'dialog_unread': {peerId: PeerId, dialog: Dialog | ForumTopic},\n  'dialog_flush': {peerId: PeerId, dialog: Dialog},\n  'dialog_drop': AnyDialog,\n  'dialog_migrate': {migrateFrom: PeerId, migrateTo: PeerId},\n  // 'dialog_top': Dialog,\n  'dialog_notify_settings': Dialog | ForumTopic,\n  // 'dialog_order': {dialog: Dialog, pos: number},\n  'dialogs_multiupdate': Map<PeerId, {dialog?: Dialog, topics?: Map<number, ForumTopic>, saved?: Map<PeerId, SavedDialog>}>,\n\n  'history_append': {storageKey: MessagesStorageKey, message: Message.message},\n  'history_update': {storageKey: MessagesStorageKey, message: MyMessage, sequential?: boolean},\n  'history_reply_markup': {peerId: PeerId},\n  'history_multiappend': MyMessage,\n  // 'history_delete': {peerId: PeerId, msgs: Map<number, {savedPeerId?: PeerId}>},\n  'history_delete': {peerId: PeerId, msgs: Set<number>},\n  'history_forbidden': PeerId,\n  'history_reload': PeerId,\n  'history_count': {historyKey: string, count: number},\n  'history_delete_key': {historyKey: string, mid: number},\n  // 'history_request': void,\n\n  'message_edit': {storageKey: MessagesStorageKey, peerId: PeerId, mid: number, message: MyMessage},\n  'message_sent': {storageKey: MessagesStorageKey, tempId: number, tempMessage: any, mid: number, message: MyMessage},\n  'message_error': {storageKey: MessagesStorageKey, peerId: PeerId, tempId: number, error: ApiError},\n  'message_transcribed': {peerId: PeerId, mid: number, text: string, pending?: boolean},\n  'messages_views': {peerId: PeerId, mid: number, views: number}[],\n  'messages_reactions': {message: Message.message, changedResults: ReactionCount[], removedResults: ReactionCount[]}[],\n  'messages_pending': void,\n  'messages_read': void,\n  'messages_downloaded': {peerId: PeerId, mids: number[]},\n  'messages_media_read': {peerId: PeerId, mids: number[]},\n\n  'story_update': {peerId: PeerId, story: StoryItem, modifiedPinned?: boolean, modifiedArchive?: boolean, modifiedPinnedToTop?: boolean},\n  'story_deleted': {peerId: PeerId, id: number},\n  'story_expired': {peerId: PeerId, id: number},\n  'story_new': {peerId: PeerId, story: StoryItem, cacheType: StoriesCacheType, maxReadId: number},\n  'stories_stories': PeerStories,\n  'stories_read': {peerId: PeerId, maxReadId: number},\n  'stories_downloaded': {peerId: PeerId, ids: number[]},\n  'stories_position': {peerId: PeerId, position: StoriesListPosition},\n\n  'replies_updated': Message.message,\n  'replies_short_update': Message.message,\n\n  'scheduled_new': Message.message,\n  'scheduled_delete': {peerId: PeerId, mids: number[]},\n\n  'grouped_edit': {peerId: PeerId, groupedId: string, deletedMids: number[], messages: Message.message[]},\n\n  'stickers_installed': StickerSet.stickerSet,\n  'stickers_deleted': StickerSet.stickerSet,\n  'stickers_updated': {type: 'recent' | 'faved', stickers: MyDocument[]},\n  'stickers_top': Long,\n  'stickers_order': {type: 'masks' | 'emojis' | 'stickers', order: Long[]},\n  'sticker_updated': {type: 'recent' | 'faved', document: MyDocument, faved: boolean},\n\n  'gifs_updated': MyDocument[],\n  'gif_updated': {document: MyDocument, saved: boolean},\n\n  'state_cleared': void,\n  'state_synchronized': void,\n  'state_synchronizing': void,\n\n  'contacts_update': UserId,\n  'avatar_update': {peerId: PeerId, threadId?: number},\n  'poll_update': {poll: Poll, results: PollResults},\n  'invalidate_participants': ChatId,\n  // 'channel_settings': {channelId: number},\n  'webpage_updated': {id: WebPage.webPage['id'], msgs: {peerId: PeerId, mid: number, isScheduled: boolean}[]},\n\n  'connection_status_change': ConnectionStatusChange,\n  'settings_updated': {key: string, value: any, settings: StateSettings},\n  'draft_updated': {peerId: PeerId, threadId: number, draft: MyDraftMessage | undefined, force?: boolean},\n\n  'background_change': void,\n\n  'privacy_update': Update.updatePrivacy,\n\n  'notify_settings': Update.updateNotifySettings,\n  'notify_peer_type_settings': {key: Exclude<NotifyPeer['_'], 'notifyPeer'>, settings: PeerNotifySettings},\n\n  'notification_reset': string,\n  'notification_cancel': string,\n\n  'notification_count_update': void,\n\n  'language_change': string,\n\n  'theme_change': {x: number, y: number} | void,\n  'theme_changed': void,\n\n  'media_play': void,\n\n  'emoji_recent': {emoji: AppEmoji, deleted?: boolean},\n\n  'download_progress': Progress,\n  'document_downloading': DocId,\n  'document_downloaded': DocId,\n\n  'choosing_sticker': boolean\n\n  'group_call_update': GroupCall,\n  'group_call_participant': {groupCallId: GroupCallId, participant: GroupCallParticipant},\n  // 'group_call_video_track_added': {instance: GroupCallInstance}\n\n  'call_update': PhoneCall,\n  'call_signaling': {callId: CallId, data: Uint8Array},\n\n  'rtmp_call_update': RtmpCallInstance,\n\n  'quick_reaction': Reaction,\n\n  'service_notification': Update.updateServiceNotification,\n\n  'logging_out': {accountNumber: ActiveAccountNumber, migrateTo?: ActiveAccountNumber},\n\n  'payment_sent': {peerId: PeerId, mid: number, receiptMessage: Message.messageService},\n\n  'web_view_result_sent': Long,\n\n  'premium_toggle': boolean,\n  'premium_toggle_private': {isNew: boolean, isPremium: boolean},\n\n  'saved_tags': {savedPeerId: PeerId, tags: SavedReactionTag[]},\n  'saved_tags_clear': void,\n\n  'stars_balance': Long,\n\n  'file_speed_limited': {increaseTimes: number, isUpload: boolean},\n\n  'config': Config,\n  'app_config': MTAppConfig,\n  'managers_ready': void, // ! inner\n\n  'account_logged_in': {accountNumber: ActiveAccountNumber, userId: UserId},\n\n  'resizing_left_sidebar': void,\n\n  'chat_background_set': void\n};\n\nexport type BroadcastEventsListeners = {\n  [name in keyof BroadcastEvents]: (e: BroadcastEvents[name]) => void\n};\n\nexport class RootScope extends EventListenerBase<BroadcastEventsListeners> {\n  public myId: PeerId;\n  private connectionStatus: {[name: string]: ConnectionStatusChange};\n  public settings: StateSettings;\n  public managers: AppManagers;\n  public premium: boolean;\n\n  constructor() {\n    super();\n\n    this.myId = NULL_PEER_ID;\n    this.connectionStatus = {};\n    this.premium = false;\n\n    this.addEventListener('user_auth', ({id}) => {\n      this.myId = id.toPeerId();\n    });\n\n    this.addEventListener('premium_toggle_private', ({isNew, isPremium}) => {\n      this.premium = isPremium;\n      if(!isNew) { // * only on change\n        this.dispatchEventSingle('premium_toggle', isPremium);\n      }\n    });\n\n    this.addEventListener('connection_status_change', (status) => {\n      this.connectionStatus[status.name] = status;\n    });\n\n    this.dispatchEvent = (e, ...args) => {\n      super.dispatchEvent(e, ...args);\n      (async() => {\n        const accountNumber = this.managers ? await this.managers.apiManager.getAccountNumber() : undefined;\n        MTProtoMessagePort.getInstance().invokeVoid('event', {\n          name: e as string,\n          args,\n          accountNumber\n        });\n      })();\n    };\n  }\n\n  public getConnectionStatus() {\n    return this.connectionStatus;\n  }\n\n  public getPremium() {\n    return this.premium;\n  }\n\n  public getMyId() {\n    return this.myId;\n  }\n\n  public dispatchEventSingle<L extends EventListenerListeners = BroadcastEventsListeners, T extends keyof L = keyof L>(\n    name: T,\n    ...args: ArgumentTypes<L[T]>\n  ) {\n    super.dispatchEvent(name, ...args);\n  }\n}\n\nconst rootScope = new RootScope();\nMOUNT_CLASS_TO.rootScope = rootScope;\nexport default rootScope;\n","/**\n * ignores `undefined` properties\n */\nexport default function deepEqual<T>(x: T, y: T, ignoreKeys?: (keyof T)[]): boolean {\n  const ignoreSet = ignoreKeys && new Set(ignoreKeys);\n  const okok = (obj: any) => Object.keys(obj).filter((key) => obj[key] !== undefined);\n  const ok = ignoreKeys ? (obj: any) => okok(obj).filter((key) => !ignoreSet.has(key as any)) : okok,\n    tx = typeof x,\n    ty = typeof y;\n  return x && y && tx === 'object' && tx === ty ? (\n    ok(x).length === ok(y).length &&\n      ok(x).every((key) => deepEqual((x as any)[key], (y as any)[key], ignoreKeys))\n  ) : (x === y);\n}\n","export default function safeAssign<T>(object: T, fromObject: any) {\n  if(fromObject) {\n    for(const i in fromObject) {\n      if(fromObject[i] !== undefined) {\n        // @ts-ignore\n        object[i] = fromObject[i];\n      }\n    }\n  }\n\n  return object;\n}\n","export default function capitalizeFirstLetter(string: string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n","const SKIP_PROTOCOLS: Set<string> = new Set([\n  'javascript:'\n]);\nexport default function matchUrlProtocol(text: string) {\n  if(!text) {\n    return null;\n  }\n\n  try {\n    const protocol = new URL(text).protocol;\n    if(SKIP_PROTOCOLS.has(protocol)) {\n      return null;\n    }\n\n    return protocol;\n  } catch(err) {\n    return null;\n  }\n}\n","// Copyright Twitter Inc. Licensed under MIT\n// https://github.com/twitter/twemoji-parser/blob/master/LICENSE.md\n\nconst originalString = '((?:\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffc-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc68\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc69\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83d\\udc69\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\u2764\\ufe0f?\\u200d\\ud83e\\uddd1\\ud83c[\\udffc-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffb\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\u2764\\ufe0f?\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffc\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\u2764\\ufe0f?\\u200d\\ud83e\\uddd1\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\uddd1\\ud83c\\udffd\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\u2764\\ufe0f?\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\uddd1\\ud83c\\udffe\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\u2764\\ufe0f?\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udffe]|\\ud83e\\uddd1\\ud83c\\udfff\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc8b\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\udef1\\ud83c\\udffb\\u200d\\ud83e\\udef2\\ud83c[\\udffc-\\udfff]|\\ud83e\\udef1\\ud83c\\udffc\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffd-\\udfff]|\\ud83e\\udef1\\ud83c\\udffd\\u200d\\ud83e\\udef2\\ud83c[\\udffb\\udffc\\udffe\\udfff]|\\ud83e\\udef1\\ud83c\\udffe\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffd\\udfff]|\\ud83e\\udef1\\ud83c\\udfff\\u200d\\ud83e\\udef2\\ud83c[\\udffb-\\udffe]|\\ud83d\\udc68\\u200d\\u2764\\ufe0f?\\u200d\\ud83d\\udc68|\\ud83d\\udc69\\u200d\\u2764\\ufe0f?\\u200d\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1\\u200d\\ud83e\\udd1d\\u200d\\ud83e\\uddd1|\\ud83d\\udc6b\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6c\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc6d\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc8f\\ud83c[\\udffb-\\udfff]|\\ud83d\\udc91\\ud83c[\\udffb-\\udfff]|\\ud83e\\udd1d\\ud83c[\\udffb-\\udfff]|\\ud83d[\\udc6b-\\udc6d\\udc8f\\udc91]|\\ud83e\\udd1d)|(?:\\ud83d[\\udc68\\udc69]|\\ud83e\\uddd1)(?:\\ud83c[\\udffb-\\udfff])?\\u200d(?:\\u2695\\ufe0f?|\\u2696\\ufe0f?|\\u2708\\ufe0f?|\\ud83c[\\udf3e\\udf73\\udf7c\\udf84\\udf93\\udfa4\\udfa8\\udfeb\\udfed]|\\ud83d[\\udcbb\\udcbc\\udd27\\udd2c\\ude80\\ude92]|\\ud83e[\\uddaf-\\uddb3\\uddbc\\uddbd])|(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75]|\\u26f9)(?:(?:\\ud83c[\\udffb-\\udfff]|\\ufe0f?)\\u200d[\\u2640\\u2642]\\ufe0f?)|(?:\\ud83c[\\udfc3\\udfc4\\udfca]|\\ud83d[\\udc6e\\udc70\\udc71\\udc73\\udc77\\udc81\\udc82\\udc86\\udc87\\ude45-\\ude47\\ude4b\\ude4d\\ude4e\\udea3\\udeb4-\\udeb6]|\\ud83e[\\udd26\\udd35\\udd37-\\udd39\\udd3d\\udd3e\\uddb8\\uddb9\\uddcd-\\uddcf\\uddd4\\uddd6-\\udddd])(?:\\ud83c[\\udffb-\\udfff])?\\u200d[\\u2640\\u2642]\\ufe0f?|(?:\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc68\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc68\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc66\\u200d\\ud83d\\udc66|\\ud83d\\udc69\\u200d\\ud83d\\udc67\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83c\\udff3\\ufe0f?\\u200d\\u26a7\\ufe0f?|\\ud83c\\udff3\\ufe0f?\\u200d\\ud83c\\udf08|\\ud83d\\ude36\\u200d\\ud83c\\udf2b\\ufe0f?|\\u2764\\ufe0f?\\u200d\\ud83d\\udd25|\\u2764\\ufe0f?\\u200d\\ud83e\\ude79|\\ud83c\\udff4\\u200d\\u2620\\ufe0f?|\\ud83d\\udc15\\u200d\\ud83e\\uddba|\\ud83d\\udc3b\\u200d\\u2744\\ufe0f?|\\ud83d\\udc41\\u200d\\ud83d\\udde8|\\ud83d\\udc68\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc69\\u200d\\ud83d[\\udc66\\udc67]|\\ud83d\\udc6f\\u200d\\u2640\\ufe0f?|\\ud83d\\udc6f\\u200d\\u2642\\ufe0f?|\\ud83d\\ude2e\\u200d\\ud83d\\udca8|\\ud83d\\ude35\\u200d\\ud83d\\udcab|\\ud83e\\udd3c\\u200d\\u2640\\ufe0f?|\\ud83e\\udd3c\\u200d\\u2642\\ufe0f?|\\ud83e\\uddde\\u200d\\u2640\\ufe0f?|\\ud83e\\uddde\\u200d\\u2642\\ufe0f?|\\ud83e\\udddf\\u200d\\u2640\\ufe0f?|\\ud83e\\udddf\\u200d\\u2642\\ufe0f?|\\ud83d\\udc08\\u200d\\u2b1b)|[#*0-9]\\ufe0f??\\u20e3|(?:[©®\\u2122\\u265f]\\ufe0f?)|(?:\\ud83c[\\udc04\\udd70\\udd71\\udd7e\\udd7f\\ude02\\ude1a\\ude2f\\ude37\\udf21\\udf24-\\udf2c\\udf36\\udf7d\\udf96\\udf97\\udf99-\\udf9b\\udf9e\\udf9f\\udfcd\\udfce\\udfd4-\\udfdf\\udff3\\udff5\\udff7]|\\ud83d[\\udc3f\\udc41\\udcfd\\udd49\\udd4a\\udd6f\\udd70\\udd73\\udd76-\\udd79\\udd87\\udd8a-\\udd8d\\udda5\\udda8\\uddb1\\uddb2\\uddbc\\uddc2-\\uddc4\\uddd1-\\uddd3\\udddc-\\uddde\\udde1\\udde3\\udde8\\uddef\\uddf3\\uddfa\\udecb\\udecd-\\udecf\\udee0-\\udee5\\udee9\\udef0\\udef3]|[\\u203c\\u2049\\u2139\\u2194-\\u2199\\u21a9\\u21aa\\u231a\\u231b\\u2328\\u23cf\\u23ed-\\u23ef\\u23f1\\u23f2\\u23f8-\\u23fa\\u24c2\\u25aa\\u25ab\\u25b6\\u25c0\\u25fb-\\u25fe\\u2600-\\u2604\\u260e\\u2611\\u2614\\u2615\\u2618\\u2620\\u2622\\u2623\\u2626\\u262a\\u262e\\u262f\\u2638-\\u263a\\u2640\\u2642\\u2648-\\u2653\\u2660\\u2663\\u2665\\u2666\\u2668\\u267b\\u267f\\u2692-\\u2697\\u2699\\u269b\\u269c\\u26a0\\u26a1\\u26a7\\u26aa\\u26ab\\u26b0\\u26b1\\u26bd\\u26be\\u26c4\\u26c5\\u26c8\\u26cf\\u26d1\\u26d3\\u26d4\\u26e9\\u26ea\\u26f0-\\u26f5\\u26f8\\u26fa\\u26fd\\u2702\\u2708\\u2709\\u270f\\u2712\\u2714\\u2716\\u271d\\u2721\\u2733\\u2734\\u2744\\u2747\\u2757\\u2763\\u2764\\u27a1\\u2934\\u2935\\u2b05-\\u2b07\\u2b1b\\u2b1c\\u2b50\\u2b55\\u3030\\u303d\\u3297\\u3299])(?:\\ufe0f?|(?!\\ufe0e))|(?:(?:\\ud83c[\\udfcb\\udfcc]|\\ud83d[\\udd74\\udd75\\udd90]|[\\u261d\\u26f7\\u26f9\\u270c\\u270d])(?:\\ufe0f?|(?!\\ufe0e))|(?:\\ud83c[\\udf85\\udfc2-\\udfc4\\udfc7\\udfca]|\\ud83d[\\udc42\\udc43\\udc46-\\udc50\\udc66-\\udc69\\udc6e\\udc70-\\udc78\\udc7c\\udc81-\\udc83\\udc85-\\udc87\\udcaa\\udd7a\\udd95\\udd96\\ude45-\\ude47\\ude4b-\\ude4f\\udea3\\udeb4-\\udeb6\\udec0\\udecc]|\\ud83e[\\udd0c\\udd0f\\udd18-\\udd1c\\udd1e\\udd1f\\udd26\\udd30-\\udd39\\udd3d\\udd3e\\udd77\\uddb5\\uddb6\\uddb8\\uddb9\\uddbb\\uddcd-\\uddcf\\uddd1-\\udddd\\udec3-\\udec5\\udef0-\\udef6]|[\\u270a\\u270b]))(?:\\ud83c[\\udffb-\\udfff])?|(?:\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc65\\udb40\\udc6e\\udb40\\udc67\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc73\\udb40\\udc63\\udb40\\udc74\\udb40\\udc7f|\\ud83c\\udff4\\udb40\\udc67\\udb40\\udc62\\udb40\\udc77\\udb40\\udc6c\\udb40\\udc73\\udb40\\udc7f|\\ud83c\\udde6\\ud83c[\\udde8-\\uddec\\uddee\\uddf1\\uddf2\\uddf4\\uddf6-\\uddfa\\uddfc\\uddfd\\uddff]|\\ud83c\\udde7\\ud83c[\\udde6\\udde7\\udde9-\\uddef\\uddf1-\\uddf4\\uddf6-\\uddf9\\uddfb\\uddfc\\uddfe\\uddff]|\\ud83c\\udde8\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\uddee\\uddf0-\\uddf5\\uddf7\\uddfa-\\uddff]|\\ud83c\\udde9\\ud83c[\\uddea\\uddec\\uddef\\uddf0\\uddf2\\uddf4\\uddff]|\\ud83c\\uddea\\ud83c[\\udde6\\udde8\\uddea\\uddec\\udded\\uddf7-\\uddfa]|\\ud83c\\uddeb\\ud83c[\\uddee-\\uddf0\\uddf2\\uddf4\\uddf7]|\\ud83c\\uddec\\ud83c[\\udde6\\udde7\\udde9-\\uddee\\uddf1-\\uddf3\\uddf5-\\uddfa\\uddfc\\uddfe]|\\ud83c\\udded\\ud83c[\\uddf0\\uddf2\\uddf3\\uddf7\\uddf9\\uddfa]|\\ud83c\\uddee\\ud83c[\\udde8-\\uddea\\uddf1-\\uddf4\\uddf6-\\uddf9]|\\ud83c\\uddef\\ud83c[\\uddea\\uddf2\\uddf4\\uddf5]|\\ud83c\\uddf0\\ud83c[\\uddea\\uddec-\\uddee\\uddf2\\uddf3\\uddf5\\uddf7\\uddfc\\uddfe\\uddff]|\\ud83c\\uddf1\\ud83c[\\udde6-\\udde8\\uddee\\uddf0\\uddf7-\\uddfb\\uddfe]|\\ud83c\\uddf2\\ud83c[\\udde6\\udde8-\\udded\\uddf0-\\uddff]|\\ud83c\\uddf3\\ud83c[\\udde6\\udde8\\uddea-\\uddec\\uddee\\uddf1\\uddf4\\uddf5\\uddf7\\uddfa\\uddff]|\\ud83c\\uddf4\\ud83c\\uddf2|\\ud83c\\uddf5\\ud83c[\\udde6\\uddea-\\udded\\uddf0-\\uddf3\\uddf7-\\uddf9\\uddfc\\uddfe]|\\ud83c\\uddf6\\ud83c\\udde6|\\ud83c\\uddf7\\ud83c[\\uddea\\uddf4\\uddf8\\uddfa\\uddfc]|\\ud83c\\uddf8\\ud83c[\\udde6-\\uddea\\uddec-\\uddf4\\uddf7-\\uddf9\\uddfb\\uddfd-\\uddff]|\\ud83c\\uddf9\\ud83c[\\udde6\\udde8\\udde9\\uddeb-\\udded\\uddef-\\uddf4\\uddf7\\uddf9\\uddfb\\uddfc\\uddff]|\\ud83c\\uddfa\\ud83c[\\udde6\\uddec\\uddf2\\uddf3\\uddf8\\uddfe\\uddff]|\\ud83c\\uddfb\\ud83c[\\udde6\\udde8\\uddea\\uddec\\uddee\\uddf3\\uddfa]|\\ud83c\\uddfc\\ud83c[\\uddeb\\uddf8]|\\ud83c\\uddfd\\ud83c\\uddf0|\\ud83c\\uddfe\\ud83c[\\uddea\\uddf9]|\\ud83c\\uddff\\ud83c[\\udde6\\uddf2\\uddfc]|\\ud83c[\\udccf\\udd8e\\udd91-\\udd9a\\udde6-\\uddff\\ude01\\ude32-\\ude36\\ude38-\\ude3a\\ude50\\ude51\\udf00-\\udf20\\udf2d-\\udf35\\udf37-\\udf7c\\udf7e-\\udf84\\udf86-\\udf93\\udfa0-\\udfc1\\udfc5\\udfc6\\udfc8\\udfc9\\udfcf-\\udfd3\\udfe0-\\udff0\\udff4\\udff8-\\udfff]|\\ud83d[\\udc00-\\udc3e\\udc40\\udc44\\udc45\\udc51-\\udc65\\udc6a\\udc6f\\udc79-\\udc7b\\udc7d-\\udc80\\udc84\\udc88-\\udc8e\\udc90\\udc92-\\udca9\\udcab-\\udcfc\\udcff-\\udd3d\\udd4b-\\udd4e\\udd50-\\udd67\\udda4\\uddfb-\\ude44\\ude48-\\ude4a\\ude80-\\udea2\\udea4-\\udeb3\\udeb7-\\udebf\\udec1-\\udec5\\uded0-\\uded2\\uded5-\\uded7\\udedd-\\udedf\\udeeb\\udeec\\udef4-\\udefc\\udfe0-\\udfeb\\udff0]|\\ud83e[\\udd0d\\udd0e\\udd10-\\udd17\\udd20-\\udd25\\udd27-\\udd2f\\udd3a\\udd3c\\udd3f-\\udd45\\udd47-\\udd76\\udd78-\\uddb4\\uddb7\\uddba\\uddbc-\\uddcc\\uddd0\\uddde-\\uddff\\ude70-\\ude74\\ude78-\\ude7c\\ude80-\\ude86\\ude90-\\udeac\\udeb0-\\udeba\\udec0-\\udec2\\uded0-\\uded9\\udee0-\\udee7]|[\\u23e9-\\u23ec\\u23f0\\u23f3\\u267e\\u26ce\\u2705\\u2728\\u274c\\u274e\\u2753-\\u2755\\u2795-\\u2797\\u27b0\\u27bf\\ue50a])|\\ufe0f)';\nexport default originalString;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport emojiRegExp from '../../vendor/emoji/regex';\nimport {MessageEntity} from '../../layer';\n\nconst EmojiHelper = {\n  emojiMap: (code: string) => { return code; },\n  shortcuts: [] as any,\n  emojis: [] as any\n};\n\nexport const ALPHA_CHARS_REG_EXP = 'a-z' +\n  '\\\\u00c0-\\\\u00d6\\\\u00d8-\\\\u00f6\\\\u00f8-\\\\u00ff' + // Latin-1\n  '\\\\u0100-\\\\u024f' + // Latin Extended A and B\n  '\\\\u0253\\\\u0254\\\\u0256\\\\u0257\\\\u0259\\\\u025b\\\\u0263\\\\u0268\\\\u026f\\\\u0272\\\\u0289\\\\u028b' + // IPA Extensions\n  '\\\\u02bb' + // Hawaiian\n  '\\\\u0300-\\\\u036f' + // Combining diacritics\n  '\\\\u1e00-\\\\u1eff' + // Latin Extended Additional (mostly for Vietnamese)\n  '\\\\u0400-\\\\u04ff\\\\u0500-\\\\u0527' + // Cyrillic\n  '\\\\u2de0-\\\\u2dff\\\\ua640-\\\\ua69f' + // Cyrillic Extended A/B\n  '\\\\u0591-\\\\u05bf\\\\u05c1-\\\\u05c2\\\\u05c4-\\\\u05c5\\\\u05c7' +\n  '\\\\u05d0-\\\\u05ea\\\\u05f0-\\\\u05f4' + // Hebrew\n  '\\\\ufb1d-\\\\ufb28\\\\ufb2a-\\\\ufb36\\\\ufb38-\\\\ufb3c\\\\ufb3e\\\\ufb40-\\\\ufb41' +\n  '\\\\ufb43-\\\\ufb44\\\\ufb46-\\\\ufb4f' + // Hebrew Pres. Forms\n  '\\\\u0610-\\\\u061a\\\\u0620-\\\\u065f\\\\u066e-\\\\u06d3\\\\u06d5-\\\\u06dc' +\n  '\\\\u06de-\\\\u06e8\\\\u06ea-\\\\u06ef\\\\u06fa-\\\\u06fc\\\\u06ff' + // Arabic\n  '\\\\u0750-\\\\u077f\\\\u08a0\\\\u08a2-\\\\u08ac\\\\u08e4-\\\\u08fe' + // Arabic Supplement and Extended A\n  '\\\\ufb50-\\\\ufbb1\\\\ufbd3-\\\\ufd3d\\\\ufd50-\\\\ufd8f\\\\ufd92-\\\\ufdc7\\\\ufdf0-\\\\ufdfb' + // Pres. Forms A\n  '\\\\ufe70-\\\\ufe74\\\\ufe76-\\\\ufefc' + // Pres. Forms B\n  '\\\\u200c' + // Zero-Width Non-Joiner\n  '\\\\u0e01-\\\\u0e3a\\\\u0e40-\\\\u0e4e' + // Thai\n  '\\\\u1100-\\\\u11ff\\\\u3130-\\\\u3185\\\\uA960-\\\\uA97F\\\\uAC00-\\\\uD7AF\\\\uD7B0-\\\\uD7FF' + // Hangul (Korean)\n  '\\\\u3003\\\\u3005\\\\u303b' + // Kanji/Han iteration marks\n  '\\\\uff21-\\\\uff3a\\\\uff41-\\\\uff5a' + // full width Alphabet\n  '\\\\uff66-\\\\uff9f' + // half width Katakana\n  '\\\\uffa1-\\\\uffdc'; // half width Hangul (Korean)\nexport const ALPHA_NUMERIC_REG_EXP = '0-9\\_' + ALPHA_CHARS_REG_EXP;\nexport const DOMAIN_ADD_CHARS = '\\u00b7';\n// Based on Regular Expression for URL validation by Diego Perini\nexport const URL_ALPHANUMERIC_REG_EXP_PART = '[' + ALPHA_CHARS_REG_EXP + '0-9]';\nexport const URL_PROTOCOL_REG_EXP_PART = '((?:https?|ftp)://|mailto:)?';\nexport const URL_REG_EXP = URL_PROTOCOL_REG_EXP_PART +\n  // user:pass authentication\n  '(?:' + URL_ALPHANUMERIC_REG_EXP_PART + '{1,64}(?::' + URL_ALPHANUMERIC_REG_EXP_PART + '{0,64})?@)?' +\n  '(?:' +\n  // sindresorhus/ip-regexp\n  '(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}' +\n  '|' +\n  // host name\n  URL_ALPHANUMERIC_REG_EXP_PART + '[' + ALPHA_CHARS_REG_EXP + DOMAIN_ADD_CHARS + '0-9\\-]{0,64}' +\n  // domain name\n  '(?:\\\\.' + URL_ALPHANUMERIC_REG_EXP_PART + '[' + ALPHA_CHARS_REG_EXP + DOMAIN_ADD_CHARS + '0-9\\-]{0,64}){0,10}' +\n  // TLD identifier\n  '(?:\\\\.(xn--[0-9a-z]{2,16}|[' + ALPHA_CHARS_REG_EXP + ']{2,24}))' +\n  ')' +\n  // port number\n  '(?::\\\\d{2,5})?' +\n  // resource path\n  '(?:/(?:\\\\S{0,255}[^\\\\s.;,(\\\\[\\\\]{}<>\"\\'])?)?';\nexport const URL_PROTOCOL_REG_EXP = new RegExp('^' + URL_PROTOCOL_REG_EXP_PART.slice(0, -1), 'i');\nexport const USERNAME_REG_EXP = '[a-zA-Z\\\\d_]{5,32}';\n// export const TIMESTAMP_REG_EXP = '(?:\\\\s|^)((?:\\\\d{1,2}:)?(?:[0-5]?[0-9]):(?:[0-5][0-9]))(?:\\\\s|$)';\nexport const TIMESTAMP_REG_EXP = '(?:\\\\s|^)((?:(\\\\d{1,2}):(?:[0-5]?[0-9])|(?:\\\\d{1,2}|\\\\d{3,})):(?:[0-5][0-9]))(?:\\\\s|$)';\nexport const BOT_COMMAND_REG_EXP = '\\\\/([a-zA-Z\\\\d_]{1,32})(?:@(' + USERNAME_REG_EXP + '))?(\\\\b|$)';\nexport const FULL_REG_EXP = new RegExp('(^| )(@)(' + USERNAME_REG_EXP + ')|(' + URL_REG_EXP + ')|(\\\\n)|(' + emojiRegExp + ')|(^|[\\\\s\\\\(\\\\]])(#[' + ALPHA_NUMERIC_REG_EXP + ']{2,64})|(^|\\\\s)' + BOT_COMMAND_REG_EXP + '|' + TIMESTAMP_REG_EXP + '', 'i');\nexport const EMAIL_REG_EXP = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n// const markdownTestRegExp = /[`_*@~]/;\nexport const MARKDOWN_REG_EXP = /(^|\\s|\\n)(````?)([\\s\\S]+?)(````?)([\\s\\n\\.,:?!;]|$)|(^|\\s|\\x01)(`|~~|\\*\\*|__|_-_|\\|\\|)([^\\n]+?)\\7([\\x01\\s\\.,:?!;]|$)|@(\\d+)\\s*\\((.+?)\\)|(\\[(.+?)\\]\\((.+?)\\))/m;\nexport const SITE_HASHTAGS: {[siteName: string]: string} = {\n  'Telegram': 'tg://search_hashtag?hashtag={1}',\n  'Twitter': 'https://twitter.com/hashtag/{1}',\n  'Instagram': 'https://instagram.com/explore/tags/{1}/',\n  'Google Plus': 'https://plus.google.com/explore/{1}'\n};\n\n// export const SITE_MENTIONS: {[siteName in 'Telegram' | 'Twitter' | 'Instagram' | 'GitHub']: string} = {\n//   Telegram: '#{1}',\n//   Twitter: 'https://twitter.com/{1}',\n//   Instagram: 'https://instagram.com/{1}/',\n//   GitHub: 'https://github.com/{1}'\n// };\n\nexport const MARKDOWN_ENTITIES: {[markdown: string]: MessageEntity['_']} = {\n  '`': 'messageEntityCode',\n  '``': 'messageEntityPre',\n  '**': 'messageEntityBold',\n  '__': 'messageEntityItalic',\n  '~~': 'messageEntityStrike',\n  '_-_': 'messageEntityUnderline',\n  '||': 'messageEntitySpoiler'\n};\n\nexport const MARKDOWN_ENTITIES_TYPES = new Set(Object.values(MARKDOWN_ENTITIES));\n\nexport const PASS_CONFLICTING_ENTITIES: Set<MessageEntity['_']> = new Set([\n  'messageEntityEmoji',\n  'messageEntityLinebreak',\n  'messageEntityCaret'\n]);\nexport const PASS_SINGLE_CONFLICTING_ENTITIES = new Set(PASS_CONFLICTING_ENTITIES);\nfor(const i in MARKDOWN_ENTITIES) {\n  PASS_CONFLICTING_ENTITIES.add(MARKDOWN_ENTITIES[i]);\n}\n\nexport const PHONE_NUMBER_REG_EXP = /^\\+\\d+$/;\n\nexport const LOCAL_ENTITIES = new Set<MessageEntity['_']>([\n  'messageEntityLinebreak',\n  'messageEntityCaret',\n  'messageEntityHighlight',\n  'messageEntityBotCommand',\n  'messageEntityTimestamp'\n]);\n\n/* export function parseEmojis(text: string) {\n  return text.replace(/:([a-z0-9\\-\\+\\*_]+?):/gi, function (all, shortcut) {\n    var emojiCode = EmojiHelper.shortcuts[shortcut]\n    if (emojiCode !== undefined) {\n      return EmojiHelper.emojis[emojiCode][0]\n    }\n    return all\n  })\n} */\n\n\n/* export function replaceUrlEncodings(urlWithEncoded: string) {\n  return urlWithEncoded.replace(/(%[A-Z\\d]{2})+/g, (str) => {\n    try {\n      return decodeURIComponent(str);\n    } catch (e) {\n      return str;\n    }\n  });\n} */\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type addAnchorListener from '../../helpers/addAnchorListener';\nimport {PHONE_NUMBER_REG_EXP} from '.';\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport matchUrlProtocol from './matchUrlProtocol';\nimport {T_ME_PREFIXES} from '../mtproto/mtproto_config';\n\nexport default function wrapUrl(url: string, unsafe?: number | boolean) {\n  if(!matchUrlProtocol(url)) {\n    url = 'https://' + url;\n  }\n\n  const out: {url: string, onclick?: Parameters<typeof addAnchorListener>[0]['name']} = {url};\n  let tgMeMatch, telescoPeMatch, tgMatch;\n  let onclick: typeof out['onclick'];\n  /* if(unsafe === 2) {\n    url = 'tg://unsafe_url?url=' + encodeURIComponent(url);\n  } else  */if((tgMeMatch = url.match(/^(?:https?:\\/\\/)?(?:(.+?)\\.)?(?:(?:web|k|z|a)\\.)?t(?:elegram)?\\.me(?:\\/(.+))?/))) {\n    const u = new URL(url);\n    let prefix = tgMeMatch[1];\n    if(prefix && T_ME_PREFIXES.has(tgMeMatch[1])) {\n      prefix = undefined;\n    }\n\n    if(prefix) {\n      u.pathname = prefix + (u.pathname === '/' ? '' : u.pathname);\n    }\n\n    const fullPath = u.pathname.slice(1);\n    const path = fullPath.split('/');\n\n    if(path[0] && path[0][0] === '$' && path[0].length > 1) {\n      onclick = 'invoice';\n    } else if(/^\\+/.test(fullPath) && !PHONE_NUMBER_REG_EXP.test(fullPath)) { // second regexp is for phone numbers (t.me/+38050...)\n      onclick = 'joinchat';\n    } else if(path[0]) switch(path[0]) {\n      case 'm':\n      case 'addlist':\n      case 'joinchat':\n      case 'addstickers':\n      case 'addemoji':\n      case 'voicechat':\n      case 'invoice':\n      case 'boost':\n      case 'giftcode':\n      case 'share':\n        if(path.length !== 1 && !prefix) {\n          onclick = path[0];\n          break;\n        }\n\n      default:\n        if(path.length <= 2 || path[1]?.match(/^\\d+(?:\\?(?:comment|thread)=\\d+)?$/) || path[1] === 's') {\n          onclick = 'im';\n          break;\n        }\n\n        break;\n    }\n  } else if((telescoPeMatch = url.match(/^(?:https?:\\/\\/)?telesco\\.pe\\/([^/?]+)\\/(\\d+)/))) {\n    onclick = 'im';\n  } else if((tgMatch = url.match(/tg:(?:\\/\\/)?(.+?)(?:\\?|$)/))) {\n    onclick = 'tg_' + tgMatch[1] as any;\n  }/*  else if(unsafe) {\n    url = 'tg://unsafe_url?url=' + encodeURIComponent(url);\n  } */\n\n  if(!(window as any)[onclick]) {\n    onclick = undefined;\n  }\n\n  out.onclick = onclick;\n  return out;\n}\n\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.wrapUrl = wrapUrl);\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n// import I18n from '../../lib/langPack';\n\nexport default function setInnerHTML(elem: Element, html: string | DocumentFragment | Element) {\n  setDirection(elem);\n  if(html === undefined) {\n    elem.replaceChildren();\n  } else if(typeof(html) === 'string') {\n    if(!html) elem.replaceChildren();\n    else elem.textContent = html;\n  } else {\n    elem.replaceChildren(html);\n  }\n}\n\nexport function setDirection(elem: Element) {\n  // if(!I18n.isRTL) {\n  elem.setAttribute('dir', 'auto');\n  // }\n}\n\nexport function getDirection(): 'auto' {\n  return 'auto';\n}\n","export default function setBlankToAnchor(anchor: HTMLAnchorElement) {\n  anchor.target = '_blank';\n  anchor.rel = 'noopener noreferrer';\n  return anchor;\n}\n","let taskIdCounter = 1,\n  isCallbackScheduled = false,\n  isPerformingWork = false,\n  taskQueue = [],\n  currentTask = null,\n  shouldYieldToHost = null,\n  yieldInterval = 5,\n  deadline = 0,\n  maxYieldInterval = 300,\n  scheduleCallback = null,\n  scheduledCallback = null;\nconst maxSigned31BitInt = 1073741823;\nfunction setupScheduler() {\n  const channel = new MessageChannel(),\n    port = channel.port2;\n  scheduleCallback = () => port.postMessage(null);\n  channel.port1.onmessage = () => {\n    if (scheduledCallback !== null) {\n      const currentTime = performance.now();\n      deadline = currentTime + yieldInterval;\n      const hasTimeRemaining = true;\n      try {\n        const hasMoreWork = scheduledCallback(hasTimeRemaining, currentTime);\n        if (!hasMoreWork) {\n          scheduledCallback = null;\n        } else port.postMessage(null);\n      } catch (error) {\n        port.postMessage(null);\n        throw error;\n      }\n    }\n  };\n  if (navigator && navigator.scheduling && navigator.scheduling.isInputPending) {\n    const scheduling = navigator.scheduling;\n    shouldYieldToHost = () => {\n      const currentTime = performance.now();\n      if (currentTime >= deadline) {\n        if (scheduling.isInputPending()) {\n          return true;\n        }\n        return currentTime >= maxYieldInterval;\n      } else {\n        return false;\n      }\n    };\n  } else {\n    shouldYieldToHost = () => performance.now() >= deadline;\n  }\n}\nfunction enqueue(taskQueue, task) {\n  function findIndex() {\n    let m = 0;\n    let n = taskQueue.length - 1;\n    while (m <= n) {\n      const k = n + m >> 1;\n      const cmp = task.expirationTime - taskQueue[k].expirationTime;\n      if (cmp > 0) m = k + 1;else if (cmp < 0) n = k - 1;else return k;\n    }\n    return m;\n  }\n  taskQueue.splice(findIndex(), 0, task);\n}\nfunction requestCallback(fn, options) {\n  if (!scheduleCallback) setupScheduler();\n  let startTime = performance.now(),\n    timeout = maxSigned31BitInt;\n  if (options && options.timeout) timeout = options.timeout;\n  const newTask = {\n    id: taskIdCounter++,\n    fn,\n    startTime,\n    expirationTime: startTime + timeout\n  };\n  enqueue(taskQueue, newTask);\n  if (!isCallbackScheduled && !isPerformingWork) {\n    isCallbackScheduled = true;\n    scheduledCallback = flushWork;\n    scheduleCallback();\n  }\n  return newTask;\n}\nfunction cancelCallback(task) {\n  task.fn = null;\n}\nfunction flushWork(hasTimeRemaining, initialTime) {\n  isCallbackScheduled = false;\n  isPerformingWork = true;\n  try {\n    return workLoop(hasTimeRemaining, initialTime);\n  } finally {\n    currentTask = null;\n    isPerformingWork = false;\n  }\n}\nfunction workLoop(hasTimeRemaining, initialTime) {\n  let currentTime = initialTime;\n  currentTask = taskQueue[0] || null;\n  while (currentTask !== null) {\n    if (currentTask.expirationTime > currentTime && (!hasTimeRemaining || shouldYieldToHost())) {\n      break;\n    }\n    const callback = currentTask.fn;\n    if (callback !== null) {\n      currentTask.fn = null;\n      const didUserCallbackTimeout = currentTask.expirationTime <= currentTime;\n      callback(didUserCallbackTimeout);\n      currentTime = performance.now();\n      if (currentTask === taskQueue[0]) {\n        taskQueue.shift();\n      }\n    } else taskQueue.shift();\n    currentTask = taskQueue[0] || null;\n  }\n  return currentTask !== null;\n}\n\nconst sharedConfig = {\n  context: undefined,\n  registry: undefined\n};\nfunction setHydrateContext(context) {\n  sharedConfig.context = context;\n}\nfunction nextHydrateContext() {\n  return {\n    ...sharedConfig.context,\n    id: `${sharedConfig.context.id}${sharedConfig.context.count++}-`,\n    count: 0\n  };\n}\n\nconst equalFn = (a, b) => a === b;\nconst $PROXY = Symbol(\"solid-proxy\");\nconst $TRACK = Symbol(\"solid-track\");\nconst $DEVCOMP = Symbol(\"solid-dev-component\");\nconst signalOptions = {\n  equals: equalFn\n};\nlet ERROR = null;\nlet runEffects = runQueue;\nconst STALE = 1;\nconst PENDING = 2;\nconst UNOWNED = {\n  owned: null,\n  cleanups: null,\n  context: null,\n  owner: null\n};\nconst NO_INIT = {};\nvar Owner = null;\nlet Transition = null;\nlet Scheduler = null;\nlet ExternalSourceConfig = null;\nlet Listener = null;\nlet Updates = null;\nlet Effects = null;\nlet ExecCount = 0;\nfunction createRoot(fn, detachedOwner) {\n  const listener = Listener,\n    owner = Owner,\n    unowned = fn.length === 0,\n    current = detachedOwner === undefined ? owner : detachedOwner,\n    root = unowned ? UNOWNED : {\n      owned: null,\n      cleanups: null,\n      context: current ? current.context : null,\n      owner: current\n    },\n    updateFn = unowned ? fn : () => fn(() => untrack(() => cleanNode(root)));\n  Owner = root;\n  Listener = null;\n  try {\n    return runUpdates(updateFn, true);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n}\nfunction createSignal(value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const s = {\n    value,\n    observers: null,\n    observerSlots: null,\n    comparator: options.equals || undefined\n  };\n  const setter = value => {\n    if (typeof value === \"function\") {\n      if (Transition && Transition.running && Transition.sources.has(s)) value = value(s.tValue);else value = value(s.value);\n    }\n    return writeSignal(s, value);\n  };\n  return [readSignal.bind(s), setter];\n}\nfunction createComputed(fn, value, options) {\n  const c = createComputation(fn, value, true, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createRenderEffect(fn, value, options) {\n  const c = createComputation(fn, value, false, STALE);\n  if (Scheduler && Transition && Transition.running) Updates.push(c);else updateComputation(c);\n}\nfunction createEffect(fn, value, options) {\n  runEffects = runUserEffects;\n  const c = createComputation(fn, value, false, STALE),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  if (!options || !options.render) c.user = true;\n  Effects ? Effects.push(c) : updateComputation(c);\n}\nfunction createReaction(onInvalidate, options) {\n  let fn;\n  const c = createComputation(() => {\n      fn ? fn() : untrack(onInvalidate);\n      fn = undefined;\n    }, undefined, false, 0),\n    s = SuspenseContext && useContext(SuspenseContext);\n  if (s) c.suspense = s;\n  c.user = true;\n  return tracking => {\n    fn = tracking;\n    updateComputation(c);\n  };\n}\nfunction createMemo(fn, value, options) {\n  options = options ? Object.assign({}, signalOptions, options) : signalOptions;\n  const c = createComputation(fn, value, true, 0);\n  c.observers = null;\n  c.observerSlots = null;\n  c.comparator = options.equals || undefined;\n  if (Scheduler && Transition && Transition.running) {\n    c.tState = STALE;\n    Updates.push(c);\n  } else updateComputation(c);\n  return readSignal.bind(c);\n}\nfunction isPromise(v) {\n  return v && typeof v === \"object\" && \"then\" in v;\n}\nfunction createResource(pSource, pFetcher, pOptions) {\n  let source;\n  let fetcher;\n  let options;\n  if (arguments.length === 2 && typeof pFetcher === \"object\" || arguments.length === 1) {\n    source = true;\n    fetcher = pSource;\n    options = pFetcher || {};\n  } else {\n    source = pSource;\n    fetcher = pFetcher;\n    options = pOptions || {};\n  }\n  let pr = null,\n    initP = NO_INIT,\n    id = null,\n    loadedUnderTransition = false,\n    scheduled = false,\n    resolved = (\"initialValue\" in options),\n    dynamic = typeof source === \"function\" && createMemo(source);\n  const contexts = new Set(),\n    [value, setValue] = (options.storage || createSignal)(options.initialValue),\n    [error, setError] = createSignal(undefined),\n    [track, trigger] = createSignal(undefined, {\n      equals: false\n    }),\n    [state, setState] = createSignal(resolved ? \"ready\" : \"unresolved\");\n  if (sharedConfig.context) {\n    id = `${sharedConfig.context.id}${sharedConfig.context.count++}`;\n    let v;\n    if (options.ssrLoadFrom === \"initial\") initP = options.initialValue;else if (sharedConfig.load && (v = sharedConfig.load(id))) initP = v;\n  }\n  function loadEnd(p, v, error, key) {\n    if (pr === p) {\n      pr = null;\n      key !== undefined && (resolved = true);\n      if ((p === initP || v === initP) && options.onHydrated) queueMicrotask(() => options.onHydrated(key, {\n        value: v\n      }));\n      initP = NO_INIT;\n      if (Transition && p && loadedUnderTransition) {\n        Transition.promises.delete(p);\n        loadedUnderTransition = false;\n        runUpdates(() => {\n          Transition.running = true;\n          completeLoad(v, error);\n        }, false);\n      } else completeLoad(v, error);\n    }\n    return v;\n  }\n  function completeLoad(v, err) {\n    runUpdates(() => {\n      if (err === undefined) setValue(() => v);\n      setState(err !== undefined ? \"errored\" : resolved ? \"ready\" : \"unresolved\");\n      setError(err);\n      for (const c of contexts.keys()) c.decrement();\n      contexts.clear();\n    }, false);\n  }\n  function read() {\n    const c = SuspenseContext && useContext(SuspenseContext),\n      v = value(),\n      err = error();\n    if (err !== undefined && !pr) throw err;\n    if (Listener && !Listener.user && c) {\n      createComputed(() => {\n        track();\n        if (pr) {\n          if (c.resolved && Transition && loadedUnderTransition) Transition.promises.add(pr);else if (!contexts.has(c)) {\n            c.increment();\n            contexts.add(c);\n          }\n        }\n      });\n    }\n    return v;\n  }\n  function load(refetching = true) {\n    if (refetching !== false && scheduled) return;\n    scheduled = false;\n    const lookup = dynamic ? dynamic() : source;\n    loadedUnderTransition = Transition && Transition.running;\n    if (lookup == null || lookup === false) {\n      loadEnd(pr, untrack(value));\n      return;\n    }\n    if (Transition && pr) Transition.promises.delete(pr);\n    const p = initP !== NO_INIT ? initP : untrack(() => fetcher(lookup, {\n      value: value(),\n      refetching\n    }));\n    if (!isPromise(p)) {\n      loadEnd(pr, p, undefined, lookup);\n      return p;\n    }\n    pr = p;\n    if (\"value\" in p) {\n      if (p.status === \"success\") loadEnd(pr, p.value, undefined, lookup);else loadEnd(pr, undefined, undefined, lookup);\n      return p;\n    }\n    scheduled = true;\n    queueMicrotask(() => scheduled = false);\n    runUpdates(() => {\n      setState(resolved ? \"refreshing\" : \"pending\");\n      trigger();\n    }, false);\n    return p.then(v => loadEnd(p, v, undefined, lookup), e => loadEnd(p, undefined, castError(e), lookup));\n  }\n  Object.defineProperties(read, {\n    state: {\n      get: () => state()\n    },\n    error: {\n      get: () => error()\n    },\n    loading: {\n      get() {\n        const s = state();\n        return s === \"pending\" || s === \"refreshing\";\n      }\n    },\n    latest: {\n      get() {\n        if (!resolved) return read();\n        const err = error();\n        if (err && !pr) throw err;\n        return value();\n      }\n    }\n  });\n  if (dynamic) createComputed(() => load(false));else load(false);\n  return [read, {\n    refetch: load,\n    mutate: setValue\n  }];\n}\nfunction createDeferred(source, options) {\n  let t,\n    timeout = options ? options.timeoutMs : undefined;\n  const node = createComputation(() => {\n    if (!t || !t.fn) t = requestCallback(() => setDeferred(() => node.value), timeout !== undefined ? {\n      timeout\n    } : undefined);\n    return source();\n  }, undefined, true);\n  const [deferred, setDeferred] = createSignal(Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value, options);\n  updateComputation(node);\n  setDeferred(() => Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value);\n  return deferred;\n}\nfunction createSelector(source, fn = equalFn, options) {\n  const subs = new Map();\n  const node = createComputation(p => {\n    const v = source();\n    for (const [key, val] of subs.entries()) if (fn(key, v) !== fn(key, p)) {\n      for (const c of val.values()) {\n        c.state = STALE;\n        if (c.pure) Updates.push(c);else Effects.push(c);\n      }\n    }\n    return v;\n  }, undefined, true, STALE);\n  updateComputation(node);\n  return key => {\n    const listener = Listener;\n    if (listener) {\n      let l;\n      if (l = subs.get(key)) l.add(listener);else subs.set(key, l = new Set([listener]));\n      onCleanup(() => {\n        l.delete(listener);\n        !l.size && subs.delete(key);\n      });\n    }\n    return fn(key, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value);\n  };\n}\nfunction batch(fn) {\n  return runUpdates(fn, false);\n}\nfunction untrack(fn) {\n  if (!ExternalSourceConfig && Listener === null) return fn();\n  const listener = Listener;\n  Listener = null;\n  try {\n    if (ExternalSourceConfig) return ExternalSourceConfig.untrack(fn);\n    return fn();\n  } finally {\n    Listener = listener;\n  }\n}\nfunction on(deps, fn, options) {\n  const isArray = Array.isArray(deps);\n  let prevInput;\n  let defer = options && options.defer;\n  return prevValue => {\n    let input;\n    if (isArray) {\n      input = Array(deps.length);\n      for (let i = 0; i < deps.length; i++) input[i] = deps[i]();\n    } else input = deps();\n    if (defer) {\n      defer = false;\n      return prevValue;\n    }\n    const result = untrack(() => fn(input, prevInput, prevValue));\n    prevInput = input;\n    return result;\n  };\n}\nfunction onMount(fn) {\n  createEffect(() => untrack(fn));\n}\nfunction onCleanup(fn) {\n  if (Owner === null) ;else if (Owner.cleanups === null) Owner.cleanups = [fn];else Owner.cleanups.push(fn);\n  return fn;\n}\nfunction catchError(fn, handler) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  Owner = createComputation(undefined, undefined, true);\n  Owner.context = {\n    ...Owner.context,\n    [ERROR]: [handler]\n  };\n  if (Transition && Transition.running) Transition.sources.add(Owner);\n  try {\n    return fn();\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = Owner.owner;\n  }\n}\nfunction getListener() {\n  return Listener;\n}\nfunction getOwner() {\n  return Owner;\n}\nfunction runWithOwner(o, fn) {\n  const prev = Owner;\n  const prevListener = Listener;\n  Owner = o;\n  Listener = null;\n  try {\n    return runUpdates(fn, true);\n  } catch (err) {\n    handleError(err);\n  } finally {\n    Owner = prev;\n    Listener = prevListener;\n  }\n}\nfunction enableScheduling(scheduler = requestCallback) {\n  Scheduler = scheduler;\n}\nfunction startTransition(fn) {\n  if (Transition && Transition.running) {\n    fn();\n    return Transition.done;\n  }\n  const l = Listener;\n  const o = Owner;\n  return Promise.resolve().then(() => {\n    Listener = l;\n    Owner = o;\n    let t;\n    if (Scheduler || SuspenseContext) {\n      t = Transition || (Transition = {\n        sources: new Set(),\n        effects: [],\n        promises: new Set(),\n        disposed: new Set(),\n        queue: new Set(),\n        running: true\n      });\n      t.done || (t.done = new Promise(res => t.resolve = res));\n      t.running = true;\n    }\n    runUpdates(fn, false);\n    Listener = Owner = null;\n    return t ? t.done : undefined;\n  });\n}\nconst [transPending, setTransPending] = /*@__PURE__*/createSignal(false);\nfunction useTransition() {\n  return [transPending, startTransition];\n}\nfunction resumeEffects(e) {\n  Effects.push.apply(Effects, e);\n  e.length = 0;\n}\nfunction createContext(defaultValue, options) {\n  const id = Symbol(\"context\");\n  return {\n    id,\n    Provider: createProvider(id),\n    defaultValue\n  };\n}\nfunction useContext(context) {\n  return Owner && Owner.context && Owner.context[context.id] !== undefined ? Owner.context[context.id] : context.defaultValue;\n}\nfunction children(fn) {\n  const children = createMemo(fn);\n  const memo = createMemo(() => resolveChildren(children()));\n  memo.toArray = () => {\n    const c = memo();\n    return Array.isArray(c) ? c : c != null ? [c] : [];\n  };\n  return memo;\n}\nlet SuspenseContext;\nfunction getSuspenseContext() {\n  return SuspenseContext || (SuspenseContext = createContext());\n}\nfunction enableExternalSource(factory, untrack = fn => fn()) {\n  if (ExternalSourceConfig) {\n    const {\n      factory: oldFactory,\n      untrack: oldUntrack\n    } = ExternalSourceConfig;\n    ExternalSourceConfig = {\n      factory: (fn, trigger) => {\n        const oldSource = oldFactory(fn, trigger);\n        const source = factory(x => oldSource.track(x), trigger);\n        return {\n          track: x => source.track(x),\n          dispose() {\n            source.dispose();\n            oldSource.dispose();\n          }\n        };\n      },\n      untrack: fn => oldUntrack(() => untrack(fn))\n    };\n  } else {\n    ExternalSourceConfig = {\n      factory,\n      untrack\n    };\n  }\n}\nfunction readSignal() {\n  const runningTransition = Transition && Transition.running;\n  if (this.sources && (runningTransition ? this.tState : this.state)) {\n    if ((runningTransition ? this.tState : this.state) === STALE) updateComputation(this);else {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(this), false);\n      Updates = updates;\n    }\n  }\n  if (Listener) {\n    const sSlot = this.observers ? this.observers.length : 0;\n    if (!Listener.sources) {\n      Listener.sources = [this];\n      Listener.sourceSlots = [sSlot];\n    } else {\n      Listener.sources.push(this);\n      Listener.sourceSlots.push(sSlot);\n    }\n    if (!this.observers) {\n      this.observers = [Listener];\n      this.observerSlots = [Listener.sources.length - 1];\n    } else {\n      this.observers.push(Listener);\n      this.observerSlots.push(Listener.sources.length - 1);\n    }\n  }\n  if (runningTransition && Transition.sources.has(this)) return this.tValue;\n  return this.value;\n}\nfunction writeSignal(node, value, isComp) {\n  let current = Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value;\n  if (!node.comparator || !node.comparator(current, value)) {\n    if (Transition) {\n      const TransitionRunning = Transition.running;\n      if (TransitionRunning || !isComp && Transition.sources.has(node)) {\n        Transition.sources.add(node);\n        node.tValue = value;\n      }\n      if (!TransitionRunning) node.value = value;\n    } else node.value = value;\n    if (node.observers && node.observers.length) {\n      runUpdates(() => {\n        for (let i = 0; i < node.observers.length; i += 1) {\n          const o = node.observers[i];\n          const TransitionRunning = Transition && Transition.running;\n          if (TransitionRunning && Transition.disposed.has(o)) continue;\n          if (TransitionRunning ? !o.tState : !o.state) {\n            if (o.pure) Updates.push(o);else Effects.push(o);\n            if (o.observers) markDownstream(o);\n          }\n          if (!TransitionRunning) o.state = STALE;else o.tState = STALE;\n        }\n        if (Updates.length > 10e5) {\n          Updates = [];\n          if (false) ;\n          throw new Error();\n        }\n      }, false);\n    }\n  }\n  return value;\n}\nfunction updateComputation(node) {\n  if (!node.fn) return;\n  cleanNode(node);\n  const time = ExecCount;\n  runComputation(node, Transition && Transition.running && Transition.sources.has(node) ? node.tValue : node.value, time);\n  if (Transition && !Transition.running && Transition.sources.has(node)) {\n    queueMicrotask(() => {\n      runUpdates(() => {\n        Transition && (Transition.running = true);\n        Listener = Owner = node;\n        runComputation(node, node.tValue, time);\n        Listener = Owner = null;\n      }, false);\n    });\n  }\n}\nfunction runComputation(node, value, time) {\n  let nextValue;\n  const owner = Owner,\n    listener = Listener;\n  Listener = Owner = node;\n  try {\n    nextValue = node.fn(value);\n  } catch (err) {\n    if (node.pure) {\n      if (Transition && Transition.running) {\n        node.tState = STALE;\n        node.tOwned && node.tOwned.forEach(cleanNode);\n        node.tOwned = undefined;\n      } else {\n        node.state = STALE;\n        node.owned && node.owned.forEach(cleanNode);\n        node.owned = null;\n      }\n    }\n    node.updatedAt = time + 1;\n    return handleError(err);\n  } finally {\n    Listener = listener;\n    Owner = owner;\n  }\n  if (!node.updatedAt || node.updatedAt <= time) {\n    if (node.updatedAt != null && \"observers\" in node) {\n      writeSignal(node, nextValue, true);\n    } else if (Transition && Transition.running && node.pure) {\n      Transition.sources.add(node);\n      node.tValue = nextValue;\n    } else node.value = nextValue;\n    node.updatedAt = time;\n  }\n}\nfunction createComputation(fn, init, pure, state = STALE, options) {\n  const c = {\n    fn,\n    state: state,\n    updatedAt: null,\n    owned: null,\n    sources: null,\n    sourceSlots: null,\n    cleanups: null,\n    value: init,\n    owner: Owner,\n    context: Owner ? Owner.context : null,\n    pure\n  };\n  if (Transition && Transition.running) {\n    c.state = 0;\n    c.tState = state;\n  }\n  if (Owner === null) ;else if (Owner !== UNOWNED) {\n    if (Transition && Transition.running && Owner.pure) {\n      if (!Owner.tOwned) Owner.tOwned = [c];else Owner.tOwned.push(c);\n    } else {\n      if (!Owner.owned) Owner.owned = [c];else Owner.owned.push(c);\n    }\n  }\n  if (ExternalSourceConfig && c.fn) {\n    const [track, trigger] = createSignal(undefined, {\n      equals: false\n    });\n    const ordinary = ExternalSourceConfig.factory(c.fn, trigger);\n    onCleanup(() => ordinary.dispose());\n    const triggerInTransition = () => startTransition(trigger).then(() => inTransition.dispose());\n    const inTransition = ExternalSourceConfig.factory(c.fn, triggerInTransition);\n    c.fn = x => {\n      track();\n      return Transition && Transition.running ? inTransition.track(x) : ordinary.track(x);\n    };\n  }\n  return c;\n}\nfunction runTop(node) {\n  const runningTransition = Transition && Transition.running;\n  if ((runningTransition ? node.tState : node.state) === 0) return;\n  if ((runningTransition ? node.tState : node.state) === PENDING) return lookUpstream(node);\n  if (node.suspense && untrack(node.suspense.inFallback)) return node.suspense.effects.push(node);\n  const ancestors = [node];\n  while ((node = node.owner) && (!node.updatedAt || node.updatedAt < ExecCount)) {\n    if (runningTransition && Transition.disposed.has(node)) return;\n    if (runningTransition ? node.tState : node.state) ancestors.push(node);\n  }\n  for (let i = ancestors.length - 1; i >= 0; i--) {\n    node = ancestors[i];\n    if (runningTransition) {\n      let top = node,\n        prev = ancestors[i + 1];\n      while ((top = top.owner) && top !== prev) {\n        if (Transition.disposed.has(top)) return;\n      }\n    }\n    if ((runningTransition ? node.tState : node.state) === STALE) {\n      updateComputation(node);\n    } else if ((runningTransition ? node.tState : node.state) === PENDING) {\n      const updates = Updates;\n      Updates = null;\n      runUpdates(() => lookUpstream(node, ancestors[0]), false);\n      Updates = updates;\n    }\n  }\n}\nfunction runUpdates(fn, init) {\n  if (Updates) return fn();\n  let wait = false;\n  if (!init) Updates = [];\n  if (Effects) wait = true;else Effects = [];\n  ExecCount++;\n  try {\n    const res = fn();\n    completeUpdates(wait);\n    return res;\n  } catch (err) {\n    if (!wait) Effects = null;\n    Updates = null;\n    handleError(err);\n  }\n}\nfunction completeUpdates(wait) {\n  if (Updates) {\n    if (Scheduler && Transition && Transition.running) scheduleQueue(Updates);else runQueue(Updates);\n    Updates = null;\n  }\n  if (wait) return;\n  let res;\n  if (Transition) {\n    if (!Transition.promises.size && !Transition.queue.size) {\n      const sources = Transition.sources;\n      const disposed = Transition.disposed;\n      Effects.push.apply(Effects, Transition.effects);\n      res = Transition.resolve;\n      for (const e of Effects) {\n        \"tState\" in e && (e.state = e.tState);\n        delete e.tState;\n      }\n      Transition = null;\n      runUpdates(() => {\n        for (const d of disposed) cleanNode(d);\n        for (const v of sources) {\n          v.value = v.tValue;\n          if (v.owned) {\n            for (let i = 0, len = v.owned.length; i < len; i++) cleanNode(v.owned[i]);\n          }\n          if (v.tOwned) v.owned = v.tOwned;\n          delete v.tValue;\n          delete v.tOwned;\n          v.tState = 0;\n        }\n        setTransPending(false);\n      }, false);\n    } else if (Transition.running) {\n      Transition.running = false;\n      Transition.effects.push.apply(Transition.effects, Effects);\n      Effects = null;\n      setTransPending(true);\n      return;\n    }\n  }\n  const e = Effects;\n  Effects = null;\n  if (e.length) runUpdates(() => runEffects(e), false);\n  if (res) res();\n}\nfunction runQueue(queue) {\n  for (let i = 0; i < queue.length; i++) runTop(queue[i]);\n}\nfunction scheduleQueue(queue) {\n  for (let i = 0; i < queue.length; i++) {\n    const item = queue[i];\n    const tasks = Transition.queue;\n    if (!tasks.has(item)) {\n      tasks.add(item);\n      Scheduler(() => {\n        tasks.delete(item);\n        runUpdates(() => {\n          Transition.running = true;\n          runTop(item);\n        }, false);\n        Transition && (Transition.running = false);\n      });\n    }\n  }\n}\nfunction runUserEffects(queue) {\n  let i,\n    userLength = 0;\n  for (i = 0; i < queue.length; i++) {\n    const e = queue[i];\n    if (!e.user) runTop(e);else queue[userLength++] = e;\n  }\n  if (sharedConfig.context) {\n    if (sharedConfig.count) {\n      sharedConfig.effects || (sharedConfig.effects = []);\n      sharedConfig.effects.push(...queue.slice(0, userLength));\n      return;\n    } else if (sharedConfig.effects) {\n      queue = [...sharedConfig.effects, ...queue];\n      userLength += sharedConfig.effects.length;\n      delete sharedConfig.effects;\n    }\n    setHydrateContext();\n  }\n  for (i = 0; i < userLength; i++) runTop(queue[i]);\n}\nfunction lookUpstream(node, ignore) {\n  const runningTransition = Transition && Transition.running;\n  if (runningTransition) node.tState = 0;else node.state = 0;\n  for (let i = 0; i < node.sources.length; i += 1) {\n    const source = node.sources[i];\n    if (source.sources) {\n      const state = runningTransition ? source.tState : source.state;\n      if (state === STALE) {\n        if (source !== ignore && (!source.updatedAt || source.updatedAt < ExecCount)) runTop(source);\n      } else if (state === PENDING) lookUpstream(source, ignore);\n    }\n  }\n}\nfunction markDownstream(node) {\n  const runningTransition = Transition && Transition.running;\n  for (let i = 0; i < node.observers.length; i += 1) {\n    const o = node.observers[i];\n    if (runningTransition ? !o.tState : !o.state) {\n      if (runningTransition) o.tState = PENDING;else o.state = PENDING;\n      if (o.pure) Updates.push(o);else Effects.push(o);\n      o.observers && markDownstream(o);\n    }\n  }\n}\nfunction cleanNode(node) {\n  let i;\n  if (node.sources) {\n    while (node.sources.length) {\n      const source = node.sources.pop(),\n        index = node.sourceSlots.pop(),\n        obs = source.observers;\n      if (obs && obs.length) {\n        const n = obs.pop(),\n          s = source.observerSlots.pop();\n        if (index < obs.length) {\n          n.sourceSlots[s] = index;\n          obs[index] = n;\n          source.observerSlots[index] = s;\n        }\n      }\n    }\n  }\n  if (Transition && Transition.running && node.pure) {\n    if (node.tOwned) {\n      for (i = node.tOwned.length - 1; i >= 0; i--) cleanNode(node.tOwned[i]);\n      delete node.tOwned;\n    }\n    reset(node, true);\n  } else if (node.owned) {\n    for (i = node.owned.length - 1; i >= 0; i--) cleanNode(node.owned[i]);\n    node.owned = null;\n  }\n  if (node.cleanups) {\n    for (i = node.cleanups.length - 1; i >= 0; i--) node.cleanups[i]();\n    node.cleanups = null;\n  }\n  if (Transition && Transition.running) node.tState = 0;else node.state = 0;\n}\nfunction reset(node, top) {\n  if (!top) {\n    node.tState = 0;\n    Transition.disposed.add(node);\n  }\n  if (node.owned) {\n    for (let i = 0; i < node.owned.length; i++) reset(node.owned[i]);\n  }\n}\nfunction castError(err) {\n  if (err instanceof Error) return err;\n  return new Error(typeof err === \"string\" ? err : \"Unknown error\", {\n    cause: err\n  });\n}\nfunction runErrors(err, fns, owner) {\n  try {\n    for (const f of fns) f(err);\n  } catch (e) {\n    handleError(e, owner && owner.owner || null);\n  }\n}\nfunction handleError(err, owner = Owner) {\n  const fns = ERROR && owner && owner.context && owner.context[ERROR];\n  const error = castError(err);\n  if (!fns) {\n    console.error(\"solid error\", error);\n    return;\n  }\n  if (Effects) Effects.push({\n    fn() {\n      runErrors(error, fns, owner);\n    },\n    state: STALE\n  });else runErrors(error, fns, owner);\n}\nfunction resolveChildren(children) {\n  if (typeof children === \"function\" && !children.length) return resolveChildren(children());\n  if (Array.isArray(children)) {\n    const results = [];\n    for (let i = 0; i < children.length; i++) {\n      const result = resolveChildren(children[i]);\n      Array.isArray(result) ? results.push.apply(results, result) : results.push(result);\n    }\n    return results;\n  }\n  return children;\n}\nfunction createProvider(id, options) {\n  return function provider(props) {\n    let res;\n    createRenderEffect(() => res = untrack(() => {\n      Owner.context = {\n        ...Owner.context,\n        [id]: props.value\n      };\n      return children(() => props.children);\n    }), undefined);\n    return res;\n  };\n}\nfunction onError(fn) {\n  ERROR || (ERROR = Symbol(\"error\"));\n  if (Owner === null) ;else if (Owner.context === null || !Owner.context[ERROR]) {\n    Owner.context = {\n      ...Owner.context,\n      [ERROR]: [fn]\n    };\n    mutateContext(Owner, ERROR, [fn]);\n  } else Owner.context[ERROR].push(fn);\n}\nfunction mutateContext(o, key, value) {\n  if (o.owned) {\n    for (let i = 0; i < o.owned.length; i++) {\n      if (o.owned[i].context === o.context) mutateContext(o.owned[i], key, value);\n      if (!o.owned[i].context) {\n        o.owned[i].context = o.context;\n        mutateContext(o.owned[i], key, value);\n      } else if (!o.owned[i].context[key]) {\n        o.owned[i].context[key] = value;\n        mutateContext(o.owned[i], key, value);\n      }\n    }\n  }\n}\n\nfunction observable(input) {\n  return {\n    subscribe(observer) {\n      if (!(observer instanceof Object) || observer == null) {\n        throw new TypeError(\"Expected the observer to be an object.\");\n      }\n      const handler = typeof observer === \"function\" ? observer : observer.next && observer.next.bind(observer);\n      if (!handler) {\n        return {\n          unsubscribe() {}\n        };\n      }\n      const dispose = createRoot(disposer => {\n        createEffect(() => {\n          const v = input();\n          untrack(() => handler(v));\n        });\n        return disposer;\n      });\n      if (getOwner()) onCleanup(dispose);\n      return {\n        unsubscribe() {\n          dispose();\n        }\n      };\n    },\n    [Symbol.observable || \"@@observable\"]() {\n      return this;\n    }\n  };\n}\nfunction from(producer) {\n  const [s, set] = createSignal(undefined, {\n    equals: false\n  });\n  if (\"subscribe\" in producer) {\n    const unsub = producer.subscribe(v => set(() => v));\n    onCleanup(() => \"unsubscribe\" in unsub ? unsub.unsubscribe() : unsub());\n  } else {\n    const clean = producer(set);\n    onCleanup(clean);\n  }\n  return s;\n}\n\nconst FALLBACK = Symbol(\"fallback\");\nfunction dispose(d) {\n  for (let i = 0; i < d.length; i++) d[i]();\n}\nfunction mapArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    len = 0,\n    indexes = mapFn.length > 1 ? [] : null;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    let newItems = list() || [],\n      i,\n      j;\n    newItems[$TRACK];\n    return untrack(() => {\n      let newLen = newItems.length,\n        newIndices,\n        newIndicesNext,\n        temp,\n        tempdisposers,\n        tempIndexes,\n        start,\n        end,\n        newEnd,\n        item;\n      if (newLen === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          indexes && (indexes = []);\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n      }\n      else if (len === 0) {\n        mapped = new Array(newLen);\n        for (j = 0; j < newLen; j++) {\n          items[j] = newItems[j];\n          mapped[j] = createRoot(mapper);\n        }\n        len = newLen;\n      } else {\n        temp = new Array(newLen);\n        tempdisposers = new Array(newLen);\n        indexes && (tempIndexes = new Array(newLen));\n        for (start = 0, end = Math.min(len, newLen); start < end && items[start] === newItems[start]; start++);\n        for (end = len - 1, newEnd = newLen - 1; end >= start && newEnd >= start && items[end] === newItems[newEnd]; end--, newEnd--) {\n          temp[newEnd] = mapped[end];\n          tempdisposers[newEnd] = disposers[end];\n          indexes && (tempIndexes[newEnd] = indexes[end]);\n        }\n        newIndices = new Map();\n        newIndicesNext = new Array(newEnd + 1);\n        for (j = newEnd; j >= start; j--) {\n          item = newItems[j];\n          i = newIndices.get(item);\n          newIndicesNext[j] = i === undefined ? -1 : i;\n          newIndices.set(item, j);\n        }\n        for (i = start; i <= end; i++) {\n          item = items[i];\n          j = newIndices.get(item);\n          if (j !== undefined && j !== -1) {\n            temp[j] = mapped[i];\n            tempdisposers[j] = disposers[i];\n            indexes && (tempIndexes[j] = indexes[i]);\n            j = newIndicesNext[j];\n            newIndices.set(item, j);\n          } else disposers[i]();\n        }\n        for (j = start; j < newLen; j++) {\n          if (j in temp) {\n            mapped[j] = temp[j];\n            disposers[j] = tempdisposers[j];\n            if (indexes) {\n              indexes[j] = tempIndexes[j];\n              indexes[j](j);\n            }\n          } else mapped[j] = createRoot(mapper);\n        }\n        mapped = mapped.slice(0, len = newLen);\n        items = newItems.slice(0);\n      }\n      return mapped;\n    });\n    function mapper(disposer) {\n      disposers[j] = disposer;\n      if (indexes) {\n        const [s, set] = createSignal(j);\n        indexes[j] = set;\n        return mapFn(newItems[j], s);\n      }\n      return mapFn(newItems[j]);\n    }\n  };\n}\nfunction indexArray(list, mapFn, options = {}) {\n  let items = [],\n    mapped = [],\n    disposers = [],\n    signals = [],\n    len = 0,\n    i;\n  onCleanup(() => dispose(disposers));\n  return () => {\n    const newItems = list() || [];\n    newItems[$TRACK];\n    return untrack(() => {\n      if (newItems.length === 0) {\n        if (len !== 0) {\n          dispose(disposers);\n          disposers = [];\n          items = [];\n          mapped = [];\n          len = 0;\n          signals = [];\n        }\n        if (options.fallback) {\n          items = [FALLBACK];\n          mapped[0] = createRoot(disposer => {\n            disposers[0] = disposer;\n            return options.fallback();\n          });\n          len = 1;\n        }\n        return mapped;\n      }\n      if (items[0] === FALLBACK) {\n        disposers[0]();\n        disposers = [];\n        items = [];\n        mapped = [];\n        len = 0;\n      }\n      for (i = 0; i < newItems.length; i++) {\n        if (i < items.length && items[i] !== newItems[i]) {\n          signals[i](() => newItems[i]);\n        } else if (i >= items.length) {\n          mapped[i] = createRoot(mapper);\n        }\n      }\n      for (; i < items.length; i++) {\n        disposers[i]();\n      }\n      len = signals.length = disposers.length = newItems.length;\n      items = newItems.slice(0);\n      return mapped = mapped.slice(0, len);\n    });\n    function mapper(disposer) {\n      disposers[i] = disposer;\n      const [s, set] = createSignal(newItems[i]);\n      signals[i] = set;\n      return mapFn(s, i);\n    }\n  };\n}\n\nlet hydrationEnabled = false;\nfunction enableHydration() {\n  hydrationEnabled = true;\n}\nfunction createComponent(Comp, props) {\n  if (hydrationEnabled) {\n    if (sharedConfig.context) {\n      const c = sharedConfig.context;\n      setHydrateContext(nextHydrateContext());\n      const r = untrack(() => Comp(props || {}));\n      setHydrateContext(c);\n      return r;\n    }\n  }\n  return untrack(() => Comp(props || {}));\n}\nfunction trueFn() {\n  return true;\n}\nconst propTraps = {\n  get(_, property, receiver) {\n    if (property === $PROXY) return receiver;\n    return _.get(property);\n  },\n  has(_, property) {\n    if (property === $PROXY) return true;\n    return _.has(property);\n  },\n  set: trueFn,\n  deleteProperty: trueFn,\n  getOwnPropertyDescriptor(_, property) {\n    return {\n      configurable: true,\n      enumerable: true,\n      get() {\n        return _.get(property);\n      },\n      set: trueFn,\n      deleteProperty: trueFn\n    };\n  },\n  ownKeys(_) {\n    return _.keys();\n  }\n};\nfunction resolveSource(s) {\n  return !(s = typeof s === \"function\" ? s() : s) ? {} : s;\n}\nfunction resolveSources() {\n  for (let i = 0, length = this.length; i < length; ++i) {\n    const v = this[i]();\n    if (v !== undefined) return v;\n  }\n}\nfunction mergeProps(...sources) {\n  let proxy = false;\n  for (let i = 0; i < sources.length; i++) {\n    const s = sources[i];\n    proxy = proxy || !!s && $PROXY in s;\n    sources[i] = typeof s === \"function\" ? (proxy = true, createMemo(s)) : s;\n  }\n  if (proxy) {\n    return new Proxy({\n      get(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          const v = resolveSource(sources[i])[property];\n          if (v !== undefined) return v;\n        }\n      },\n      has(property) {\n        for (let i = sources.length - 1; i >= 0; i--) {\n          if (property in resolveSource(sources[i])) return true;\n        }\n        return false;\n      },\n      keys() {\n        const keys = [];\n        for (let i = 0; i < sources.length; i++) keys.push(...Object.keys(resolveSource(sources[i])));\n        return [...new Set(keys)];\n      }\n    }, propTraps);\n  }\n  const sourcesMap = {};\n  const defined = Object.create(null);\n  for (let i = sources.length - 1; i >= 0; i--) {\n    const source = sources[i];\n    if (!source) continue;\n    const sourceKeys = Object.getOwnPropertyNames(source);\n    for (let i = sourceKeys.length - 1; i >= 0; i--) {\n      const key = sourceKeys[i];\n      if (key === \"__proto__\" || key === \"constructor\") continue;\n      const desc = Object.getOwnPropertyDescriptor(source, key);\n      if (!defined[key]) {\n        defined[key] = desc.get ? {\n          enumerable: true,\n          configurable: true,\n          get: resolveSources.bind(sourcesMap[key] = [desc.get.bind(source)])\n        } : desc.value !== undefined ? desc : undefined;\n      } else {\n        const sources = sourcesMap[key];\n        if (sources) {\n          if (desc.get) sources.push(desc.get.bind(source));else if (desc.value !== undefined) sources.push(() => desc.value);\n        }\n      }\n    }\n  }\n  const target = {};\n  const definedKeys = Object.keys(defined);\n  for (let i = definedKeys.length - 1; i >= 0; i--) {\n    const key = definedKeys[i],\n      desc = defined[key];\n    if (desc && desc.get) Object.defineProperty(target, key, desc);else target[key] = desc ? desc.value : undefined;\n  }\n  return target;\n}\nfunction splitProps(props, ...keys) {\n  if ($PROXY in props) {\n    const blocked = new Set(keys.length > 1 ? keys.flat() : keys[0]);\n    const res = keys.map(k => {\n      return new Proxy({\n        get(property) {\n          return k.includes(property) ? props[property] : undefined;\n        },\n        has(property) {\n          return k.includes(property) && property in props;\n        },\n        keys() {\n          return k.filter(property => property in props);\n        }\n      }, propTraps);\n    });\n    res.push(new Proxy({\n      get(property) {\n        return blocked.has(property) ? undefined : props[property];\n      },\n      has(property) {\n        return blocked.has(property) ? false : property in props;\n      },\n      keys() {\n        return Object.keys(props).filter(k => !blocked.has(k));\n      }\n    }, propTraps));\n    return res;\n  }\n  const otherObject = {};\n  const objects = keys.map(() => ({}));\n  for (const propName of Object.getOwnPropertyNames(props)) {\n    const desc = Object.getOwnPropertyDescriptor(props, propName);\n    const isDefaultDesc = !desc.get && !desc.set && desc.enumerable && desc.writable && desc.configurable;\n    let blocked = false;\n    let objectIndex = 0;\n    for (const k of keys) {\n      if (k.includes(propName)) {\n        blocked = true;\n        isDefaultDesc ? objects[objectIndex][propName] = desc.value : Object.defineProperty(objects[objectIndex], propName, desc);\n      }\n      ++objectIndex;\n    }\n    if (!blocked) {\n      isDefaultDesc ? otherObject[propName] = desc.value : Object.defineProperty(otherObject, propName, desc);\n    }\n  }\n  return [...objects, otherObject];\n}\nfunction lazy(fn) {\n  let comp;\n  let p;\n  const wrap = props => {\n    const ctx = sharedConfig.context;\n    if (ctx) {\n      const [s, set] = createSignal();\n      sharedConfig.count || (sharedConfig.count = 0);\n      sharedConfig.count++;\n      (p || (p = fn())).then(mod => {\n        setHydrateContext(ctx);\n        sharedConfig.count--;\n        set(() => mod.default);\n        setHydrateContext();\n      });\n      comp = s;\n    } else if (!comp) {\n      const [s] = createResource(() => (p || (p = fn())).then(mod => mod.default));\n      comp = s;\n    }\n    let Comp;\n    return createMemo(() => (Comp = comp()) && untrack(() => {\n      if (false) ;\n      if (!ctx) return Comp(props);\n      const c = sharedConfig.context;\n      setHydrateContext(ctx);\n      const r = Comp(props);\n      setHydrateContext(c);\n      return r;\n    }));\n  };\n  wrap.preload = () => p || ((p = fn()).then(mod => comp = () => mod.default), p);\n  return wrap;\n}\nlet counter = 0;\nfunction createUniqueId() {\n  const ctx = sharedConfig.context;\n  return ctx ? `${ctx.id}${ctx.count++}` : `cl-${counter++}`;\n}\n\nconst narrowedError = name => `Stale read from <${name}>.`;\nfunction For(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(mapArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Index(props) {\n  const fallback = \"fallback\" in props && {\n    fallback: () => props.fallback\n  };\n  return createMemo(indexArray(() => props.each, props.children, fallback || undefined));\n}\nfunction Show(props) {\n  const keyed = props.keyed;\n  const condition = createMemo(() => props.when, undefined, {\n    equals: (a, b) => keyed ? a === b : !a === !b\n  });\n  return createMemo(() => {\n    const c = condition();\n    if (c) {\n      const child = props.children;\n      const fn = typeof child === \"function\" && child.length > 0;\n      return fn ? untrack(() => child(keyed ? c : () => {\n        if (!untrack(condition)) throw narrowedError(\"Show\");\n        return props.when;\n      })) : child;\n    }\n    return props.fallback;\n  }, undefined, undefined);\n}\nfunction Switch(props) {\n  let keyed = false;\n  const equals = (a, b) => (keyed ? a[1] === b[1] : !a[1] === !b[1]) && a[2] === b[2];\n  const conditions = children(() => props.children),\n    evalConditions = createMemo(() => {\n      let conds = conditions();\n      if (!Array.isArray(conds)) conds = [conds];\n      for (let i = 0; i < conds.length; i++) {\n        const c = conds[i].when;\n        if (c) {\n          keyed = !!conds[i].keyed;\n          return [i, c, conds[i]];\n        }\n      }\n      return [-1];\n    }, undefined, {\n      equals\n    });\n  return createMemo(() => {\n    const [index, when, cond] = evalConditions();\n    if (index < 0) return props.fallback;\n    const c = cond.children;\n    const fn = typeof c === \"function\" && c.length > 0;\n    return fn ? untrack(() => c(keyed ? when : () => {\n      if (untrack(evalConditions)[0] !== index) throw narrowedError(\"Match\");\n      return cond.when;\n    })) : c;\n  }, undefined, undefined);\n}\nfunction Match(props) {\n  return props;\n}\nlet Errors;\nfunction resetErrorBoundaries() {\n  Errors && [...Errors].forEach(fn => fn());\n}\nfunction ErrorBoundary(props) {\n  let err;\n  if (sharedConfig.context && sharedConfig.load) err = sharedConfig.load(sharedConfig.context.id + sharedConfig.context.count);\n  const [errored, setErrored] = createSignal(err, undefined);\n  Errors || (Errors = new Set());\n  Errors.add(setErrored);\n  onCleanup(() => Errors.delete(setErrored));\n  return createMemo(() => {\n    let e;\n    if (e = errored()) {\n      const f = props.fallback;\n      return typeof f === \"function\" && f.length ? untrack(() => f(e, () => setErrored())) : f;\n    }\n    return catchError(() => props.children, setErrored);\n  }, undefined, undefined);\n}\n\nconst suspenseListEquals = (a, b) => a.showContent === b.showContent && a.showFallback === b.showFallback;\nconst SuspenseListContext = createContext();\nfunction SuspenseList(props) {\n  let [wrapper, setWrapper] = createSignal(() => ({\n      inFallback: false\n    })),\n    show;\n  const listContext = useContext(SuspenseListContext);\n  const [registry, setRegistry] = createSignal([]);\n  if (listContext) {\n    show = listContext.register(createMemo(() => wrapper()().inFallback));\n  }\n  const resolved = createMemo(prev => {\n    const reveal = props.revealOrder,\n      tail = props.tail,\n      {\n        showContent = true,\n        showFallback = true\n      } = show ? show() : {},\n      reg = registry(),\n      reverse = reveal === \"backwards\";\n    if (reveal === \"together\") {\n      const all = reg.every(inFallback => !inFallback());\n      const res = reg.map(() => ({\n        showContent: all && showContent,\n        showFallback\n      }));\n      res.inFallback = !all;\n      return res;\n    }\n    let stop = false;\n    let inFallback = prev.inFallback;\n    const res = [];\n    for (let i = 0, len = reg.length; i < len; i++) {\n      const n = reverse ? len - i - 1 : i,\n        s = reg[n]();\n      if (!stop && !s) {\n        res[n] = {\n          showContent,\n          showFallback\n        };\n      } else {\n        const next = !stop;\n        if (next) inFallback = true;\n        res[n] = {\n          showContent: next,\n          showFallback: !tail || next && tail === \"collapsed\" ? showFallback : false\n        };\n        stop = true;\n      }\n    }\n    if (!stop) inFallback = false;\n    res.inFallback = inFallback;\n    return res;\n  }, {\n    inFallback: false\n  });\n  setWrapper(() => resolved);\n  return createComponent(SuspenseListContext.Provider, {\n    value: {\n      register: inFallback => {\n        let index;\n        setRegistry(registry => {\n          index = registry.length;\n          return [...registry, inFallback];\n        });\n        return createMemo(() => resolved()[index], undefined, {\n          equals: suspenseListEquals\n        });\n      }\n    },\n    get children() {\n      return props.children;\n    }\n  });\n}\nfunction Suspense(props) {\n  let counter = 0,\n    show,\n    ctx,\n    p,\n    flicker,\n    error;\n  const [inFallback, setFallback] = createSignal(false),\n    SuspenseContext = getSuspenseContext(),\n    store = {\n      increment: () => {\n        if (++counter === 1) setFallback(true);\n      },\n      decrement: () => {\n        if (--counter === 0) setFallback(false);\n      },\n      inFallback,\n      effects: [],\n      resolved: false\n    },\n    owner = getOwner();\n  if (sharedConfig.context && sharedConfig.load) {\n    const key = sharedConfig.context.id + sharedConfig.context.count;\n    let ref = sharedConfig.load(key);\n    if (ref) {\n      if (typeof ref !== \"object\" || ref.status !== \"success\") p = ref;else sharedConfig.gather(key);\n    }\n    if (p && p !== \"$$f\") {\n      const [s, set] = createSignal(undefined, {\n        equals: false\n      });\n      flicker = s;\n      p.then(() => {\n        if (sharedConfig.done) return set();\n        sharedConfig.gather(key);\n        setHydrateContext(ctx);\n        set();\n        setHydrateContext();\n      }, err => {\n        error = err;\n        set();\n      });\n    }\n  }\n  const listContext = useContext(SuspenseListContext);\n  if (listContext) show = listContext.register(store.inFallback);\n  let dispose;\n  onCleanup(() => dispose && dispose());\n  return createComponent(SuspenseContext.Provider, {\n    value: store,\n    get children() {\n      return createMemo(() => {\n        if (error) throw error;\n        ctx = sharedConfig.context;\n        if (flicker) {\n          flicker();\n          return flicker = undefined;\n        }\n        if (ctx && p === \"$$f\") setHydrateContext();\n        const rendered = createMemo(() => props.children);\n        return createMemo(prev => {\n          const inFallback = store.inFallback(),\n            {\n              showContent = true,\n              showFallback = true\n            } = show ? show() : {};\n          if ((!inFallback || p && p !== \"$$f\") && showContent) {\n            store.resolved = true;\n            dispose && dispose();\n            dispose = ctx = p = undefined;\n            resumeEffects(store.effects);\n            return rendered();\n          }\n          if (!showFallback) return;\n          if (dispose) return prev;\n          return createRoot(disposer => {\n            dispose = disposer;\n            if (ctx) {\n              setHydrateContext({\n                id: ctx.id + \"f\",\n                count: 0\n              });\n              ctx = undefined;\n            }\n            return props.fallback;\n          }, owner);\n        });\n      });\n    }\n  });\n}\n\nconst DEV = undefined;\n\nexport { $DEVCOMP, $PROXY, $TRACK, DEV, ErrorBoundary, For, Index, Match, Show, Suspense, SuspenseList, Switch, batch, cancelCallback, catchError, children, createComponent, createComputed, createContext, createDeferred, createEffect, createMemo, createReaction, createRenderEffect, createResource, createRoot, createSelector, createSignal, createUniqueId, enableExternalSource, enableHydration, enableScheduling, equalFn, from, getListener, getOwner, indexArray, lazy, mapArray, mergeProps, observable, on, onCleanup, onError, onMount, requestCallback, resetErrorBoundaries, runWithOwner, sharedConfig, splitProps, startTransition, untrack, useContext, useTransition };\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {Database} from '.';\nimport {ActiveAccountNumber} from '../../lib/accounts/types';\nimport {MOUNT_CLASS_TO} from '../debug';\n\nexport type AccountDatabase = Database<'session' | 'stickerSets' | 'users' | 'chats' | 'messages' | 'dialogs'>;\nexport type CommonDatabase = Database<'session'>;\n\nexport const getOldDatabaseState = (): AccountDatabase => ({\n  name: `tweb`,\n  version: 7,\n  stores: [\n    {\n      name: 'session'\n    },\n    {\n      name: 'stickerSets'\n    },\n    {\n      name: 'users'\n    },\n    {\n      name: 'chats'\n    },\n    {\n      name: 'dialogs'\n    },\n    {\n      name: 'messages'\n    }\n  ]\n});\n\nexport const getCommonDatabaseState = (): Database<'session'> => ({\n  name: `tweb-common`,\n  version: 7,\n  stores: [\n    {\n      name: 'session'\n    }\n  ]\n});\n\nexport const getDatabaseState = (\n  accountNumber: ActiveAccountNumber\n): Database<'session' | 'stickerSets' | 'users' | 'chats' | 'messages' | 'dialogs'> => ({\n  name: `tweb-account-${accountNumber}`,\n  version: 7,\n  stores: [\n    {\n      name: 'session'\n    },\n    {\n      name: 'stickerSets'\n    },\n    {\n      name: 'users'\n    },\n    {\n      name: 'chats'\n    },\n    {\n      name: 'dialogs'\n    },\n    {\n      name: 'messages'\n    }\n  ]\n});\n\nMOUNT_CLASS_TO.getDatabaseState = getDatabaseState;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport noop from './noop';\n\nexport interface CancellablePromise<T> extends Promise<T> {\n  resolve?: (value: T) => void,\n  reject?: (...args: any[]) => void,\n  cancel?: (reason?: any) => void,\n\n  notify?: (...args: any[]) => void,\n  notifyAll?: (...args: any[]) => void,\n  lastNotify?: any,\n  listeners?: Array<(...args: any[]) => void>,\n  addNotifyListener?: (callback: (...args: any[]) => void) => void,\n\n  isFulfilled?: boolean,\n  isRejected?: boolean,\n\n  onFinish?: () => void,\n  _resolve?: (value: T) => void,\n  _reject?: (...args: any[]) => void\n}\n\nconst deferredHelper = {\n  isFulfilled: false,\n  isRejected: false,\n\n  notify: () => {},\n  notifyAll: function(...args: any[]) {\n    this.lastNotify = args;\n    this.listeners?.forEach((callback: any) => callback(...args));\n  },\n\n  addNotifyListener: function(callback: (...args: any[]) => void) {\n    if(this.lastNotify) {\n      callback(...this.lastNotify);\n    }\n\n    (this.listeners ??= []).push(callback);\n  },\n\n  resolve: function(value) {\n    if(this.isFulfilled || this.isRejected) return;\n\n    this.isFulfilled = true;\n    this._resolve(value);\n    this.onFinish();\n  },\n\n  reject: function(...args) {\n    if(this.isRejected || this.isFulfilled) return;\n\n    this.isRejected = true;\n    this._reject(...args);\n    this.onFinish();\n  },\n\n  onFinish: function() {\n    this.notify = this.notifyAll = this.lastNotify = null;\n    if(this.listeners) this.listeners.length = 0;\n\n    if(this.cancel) {\n      this.cancel = noop;\n    }\n  }\n} as CancellablePromise<any>;\n\nexport default function deferredPromise<T>() {\n  let resolve: (value: T) => void, reject: (...args: any[]) => void;\n  const deferred: CancellablePromise<T> = new Promise<T>((_resolve, _reject) => {\n    resolve = _resolve, reject = _reject;\n  });\n\n  Object.assign(deferred, deferredHelper);\n  deferred._resolve = resolve;\n  deferred._reject = reject;\n\n  return deferred;\n}\n\nexport function bindPromiseToDeferred<T>(promise: Promise<T>, deferred: CancellablePromise<T>) {\n  promise.then(deferred.resolve.bind(deferred), deferred.reject.bind(deferred));\n}\n\n(self as any).deferredPromise = deferredPromise;\n","// * Jolly Cobra's schedulers\n\nimport {AnyToVoidFunction} from '../../types';\n\nexport default function throttle<F extends AnyToVoidFunction>(\n  fn: F,\n  ms: number,\n  shouldRunFirst = true\n) {\n  let interval: number | null = null;\n  let isPending: boolean;\n  let args: Parameters<F>;\n\n  const clear = () => {\n    clearInterval(interval!);\n    interval = null;\n  };\n\n  const ret = (..._args: Parameters<F>) => {\n    isPending = true;\n    args = _args;\n\n    if(!interval) {\n      if(shouldRunFirst) {\n        isPending = false;\n        // @ts-ignore\n        fn(...args);\n      }\n\n      interval = setInterval(() => {\n        if(!isPending) {\n          clear();\n          return;\n        }\n\n        isPending = false;\n        // @ts-ignore\n        fn(...args);\n      }, ms) as any;\n    }\n  };\n\n  ret.clear = clear;\n\n  return ret;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport {Database} from '../../config/databases';\nimport Modes from '../../config/modes';\nimport makeError from '../../helpers/makeError';\nimport safeAssign from '../../helpers/object/safeAssign';\nimport {logger} from '../logger';\n\n/**\n * https://developer.mozilla.org/en-US/docs/Web/API/IDBObjectStore/createIndex\n */\nexport type IDBIndex = {\n  indexName: string,\n  keyPath: string,\n  objectParameters: IDBIndexParameters\n};\n\nexport type IDBStore = {\n  name: string,\n  indexes?: IDBIndex[]\n};\n\nexport type IDBOptions = {\n  name?: string,\n  storeName: string,\n  stores?: IDBStore[],\n  version?: number\n};\n\nconst DEBUG = false;\n\nexport class IDB {\n  private static INSTANCES: IDB[] = [];\n  private openDbPromise: Promise<IDBDatabase>;\n  private db: IDBDatabase;\n  private storageIsAvailable: boolean;\n  private log: ReturnType<typeof logger>;\n  private name: string;\n  private version: number;\n  private stores: IDBStore[];\n\n  constructor(db: Database<any>) {\n    safeAssign(this, db);\n\n    if(Modes.test) {\n      this.name += '_test';\n    }\n\n    this.storageIsAvailable = true;\n    this.log = logger(['IDB', db.name].join('-'));\n    this.log('constructor');\n\n    this.openDatabase(true);\n\n    IDB.INSTANCES.push(this);\n  }\n\n  public isAvailable() {\n    return this.storageIsAvailable;\n  }\n\n  public openDatabase(createNew = false): Promise<IDBDatabase> {\n    if(this.openDbPromise && !createNew) {\n      return this.openDbPromise;\n    }\n\n    const createIndexes = (os: IDBObjectStore, store: IDBStore) => {\n      const indexNames = Array.from(os.indexNames);\n      for(const indexName of indexNames) {\n        os.deleteIndex(indexName);\n      }\n\n      if(!store.indexes?.length) {\n        return;\n      }\n\n      for(const index of store.indexes) {\n        if(os.indexNames.contains(index.indexName)) {\n          continue;\n        }\n\n        os.createIndex(index.indexName, index.keyPath, index.objectParameters);\n      }\n    };\n\n    const createObjectStore = (db: IDBDatabase, store: IDBStore) => {\n      const os = db.createObjectStore(store.name);\n      createIndexes(os, store);\n    };\n\n    try {\n      var request = indexedDB.open(this.name, this.version);\n\n      if(!request) {\n        return Promise.reject();\n      }\n    } catch(error) {\n      this.log.error('error opening db', (error as Error).message);\n      this.storageIsAvailable = false;\n      return Promise.reject(error);\n    }\n\n    let finished = false;\n    setTimeout(() => {\n      if(!finished) {\n        request.onerror(makeError('IDB_CREATE_TIMEOUT') as Event);\n      }\n    }, 3000);\n\n    return this.openDbPromise = new Promise<IDBDatabase>((resolve, reject) => {\n      request.onsuccess = (event) => {\n        finished = true;\n        const db = request.result;\n        let calledNew = false;\n\n        this.log('Opened');\n\n        db.onerror = (error) => {\n          this.storageIsAvailable = false;\n          this.log.error('Error creating/accessing IndexedDB database', error);\n          reject(error);\n        };\n\n        db.onclose = (e) => {\n          this.log.error('closed:', e);\n          !calledNew && this.openDatabase();\n        };\n\n        db.onabort = (e) => {\n          this.log.error('abort:', e);\n          const transaction = e.target as IDBTransaction;\n\n          this.openDatabase(calledNew = true);\n\n          if(transaction.onerror) {\n            transaction.onerror(e);\n          }\n\n          db.close();\n        };\n\n        db.onversionchange = (e) => {\n          this.log.error('onversionchange, lol?');\n        };\n\n        resolve(this.db = db);\n      };\n\n      request.onerror = (event) => {\n        finished = true;\n        this.storageIsAvailable = false;\n        this.log.error('Error creating/accessing IndexedDB database', event);\n        reject(event);\n      };\n\n      request.onupgradeneeded = (event) => {\n        finished = true;\n        this.log.warn('performing idb upgrade from', event.oldVersion, 'to', event.newVersion);\n\n        const target = event.target as IDBOpenDBRequest;\n        const db = target.result;\n        this.stores.forEach((store) => {\n          /* if(db.objectStoreNames.contains(store.name)) {\n            //if(event.oldVersion === 1) {\n              db.deleteObjectStore(store.name);\n            //}\n          } */\n\n          if(!db.objectStoreNames.contains(store.name)) {\n            createObjectStore(db, store);\n          } else {\n            const txn = target.transaction;\n            const os = txn.objectStore(store.name);\n            createIndexes(os, store);\n          }\n        });\n      };\n    });\n  }\n\n  public closeDatabase() {\n    if(!this.db) {\n      return;\n    }\n\n    this.db.onclose = () => {};\n    this.db.close();\n  }\n\n  public static create<T extends Database<any>>(db: T) {\n    return this.INSTANCES.find((instance) => instance.name === db.name) ?? new IDB(db);\n  }\n\n  public static closeDatabases(preserve?: IDB) {\n    this.INSTANCES.forEach((storage) => {\n      if(preserve && preserve === storage) {\n        return;\n      }\n\n      storage.closeDatabase();\n    });\n  }\n\n  /**\n   * ! WARNING ! function requires at least one opened connection\n   */\n  /* public static clearObjectStores() {\n    const storage = this.STORAGES[0];\n    this.closeDatabases(storage);\n\n    const names = Array.from(storage.db.objectStoreNames);\n    const promises = names.map((name) => storage.clear(name));\n    return Promise.all(promises);\n  } */\n\n  /* public static deleteDatabase() {\n    this.closeDatabases();\n\n    const storages = this.STORAGES;\n    const dbNames = Array.from(new Set(storages.map((storage) => storage.name)));\n    const promises = dbNames.map((dbName) => {\n      this.deleteDatabaseByName(dbName);\n    });\n\n    return Promise.all(promises);\n  } */\n\n  public static deleteDatabaseByName(dbName: string) {\n    return new Promise<void>((resolve, reject) => {\n      const deleteRequest = indexedDB.deleteDatabase(dbName);\n\n      deleteRequest.onerror = () => {\n        reject();\n      };\n\n      deleteRequest.onsuccess = () => {\n        resolve();\n      };\n    });\n  }\n}\n\nnamespace IDBStorage {\n  export type Entries = Array<[IDBValidKey, any]>\n}\n\nclass IDBStorage<T extends Database<any>, StoreName extends string = T['stores'][0]['name']> {\n  private log: ReturnType<typeof logger>;\n  private storeName: T['stores'][0]['name'];\n  private idb: IDB;\n\n  constructor(db: T, storeName: typeof db['stores'][0]['name']) {\n    this.storeName = storeName;\n    this.log = logger(['IDB', db.name, storeName].join('-'));\n    this.idb = IDB.create(db);\n  }\n\n  public close() {\n    return this.idb.closeDatabase();\n  }\n\n  public delete(entryName: string | string[], storeName?: StoreName): Promise<void> {\n    // return Promise.resolve();\n    const isArray = Array.isArray(entryName);\n    if(!isArray) {\n      entryName = [].concat(entryName);\n    }\n\n    return this.getObjectStore('readwrite', (objectStore) => {\n      const promises = (entryName as string[]).map((entryName) => objectStore.delete(entryName));\n      return isArray ? promises : promises[0];\n    }, DEBUG ? 'delete: ' + (entryName as string[]).join(', ') : '', storeName);\n  }\n\n  public clear(storeName?: StoreName): Promise<void> {\n    return this.getObjectStore('readwrite', (objectStore) => objectStore.clear(), DEBUG ? 'clear' : '', storeName);\n  }\n\n  public save(entryName: string | string[], value: any | any[], storeName?: StoreName) {\n    // const handleError = (error: Error) => {\n    //   this.log.error('save: transaction error:', entryName, value, db, error, error && error.name);\n    //   if((!error || error.name === 'InvalidStateError')/*  && false */) {\n    //     setTimeout(() => {\n    //       this.save(entryName, value);\n    //     }, 2e3);\n    //   } else {\n    //     //console.error('IndexedDB saveFile transaction error:', error, error && error.name);\n    //   }\n    // };\n\n    const isArray = Array.isArray(entryName);\n    if(!isArray) {\n      entryName = [].concat(entryName);\n      value = [].concat(value);\n    }\n\n    return this.getObjectStore('readwrite', (objectStore) => {\n      const promises = (entryName as string[]).map((entryName, idx) => objectStore.put(value[idx], entryName));\n      return isArray ? promises : promises[0];\n    }, DEBUG ? 'save: ' + (entryName as string[]).join(', ') : '', storeName);\n  }\n\n  // public saveFile(fileName: string, blob: Blob | Uint8Array) {\n  //   //return Promise.resolve(blobConstruct([blob]));\n  //   if(!(blob instanceof Blob)) {\n  //     blob = blobConstruct(blob);\n  //   }\n\n  //   return this.save(fileName, blob);\n  // }\n\n  /* public saveFileBase64(db: IDBDatabase, fileName: string, blob: Blob | any): Promise<Blob> {\n    if(this.getBlobSize(blob) > 10 * 1024 * 1024) {\n      return Promise.reject();\n    }\n\n    if(!(blob instanceof Blob)) {\n      var safeMimeType = blobSafeMimeType(blob.type || 'image/jpeg');\n      var address = 'data:' + safeMimeType + ';base64,' + bytesToBase64(blob);\n      return this.storagePutB64String(db, fileName, address).then(() => {\n        return blob;\n      });\n    }\n\n    try {\n      var reader = new FileReader();\n    } catch (e) {\n      this.storageIsAvailable = false;\n      return Promise.reject();\n    }\n\n    let promise = new Promise<Blob>((resolve, reject) => {\n      reader.onloadend = () => {\n        this.storagePutB64String(db, fileName, reader.result as string).then(() => {\n          resolve(blob);\n        }, reject);\n      }\n\n      reader.onerror = reject;\n    });\n\n\n    try {\n      reader.readAsDataURL(blob);\n    } catch (e) {\n      this.storageIsAvailable = false;\n      return Promise.reject();\n    }\n\n    return promise;\n  }\n\n  public storagePutB64String(db: IDBDatabase, fileName: string, b64string: string) {\n    try {\n      var objectStore = db.transaction([this.storeName], 'readwrite')\n        .objectStore(this.storeName);\n      var request = objectStore.put(b64string, fileName);\n    } catch(error) {\n      this.storageIsAvailable = false;\n      return Promise.reject(error);\n    }\n\n    return new Promise((resolve, reject) => {\n      request.onsuccess = function(event) {\n        resolve();\n      };\n\n      request.onerror = reject;\n    });\n  }\n\n  public getBlobSize(blob: any) {\n    return blob.size || blob.byteLength || blob.length;\n  } */\n\n  public get<T>(entryName: string[], storeName?: StoreName): Promise<T[]>;\n  public get<T>(entryName: string, storeName?: StoreName): Promise<T>;\n  public get<T>(entryName: string | string[], storeName?: StoreName): Promise<T> | Promise<T[]> {\n    // return Promise.reject();\n\n    const isArray = Array.isArray(entryName);\n    if(!isArray) {\n      if(!entryName) {\n        return undefined;\n      }\n\n      entryName = [].concat(entryName);\n    } else if(!entryName.length) {\n      return Promise.resolve([]) as any;\n    }\n\n    return this.getObjectStore<T>('readonly', (objectStore) => {\n      const promises = (entryName as string[]).map((entryName) => objectStore.get(entryName));\n      return isArray ? promises : promises[0];\n    }, DEBUG ? 'get: ' + (entryName as string[]).join(', ') : '', storeName);\n  }\n\n  private getObjectStore<T>(\n    mode: IDBTransactionMode,\n    callback: (objectStore: IDBObjectStore, onComplete: () => void, onError: () => void) => IDBRequest | IDBRequest[],\n    log?: string,\n    storeName = this.storeName\n  ) {\n    let perf: number;\n\n    if(log) {\n      perf = performance.now();\n      this.log(log + ': start');\n    }\n\n    return this.idb.openDatabase().then((db) => {\n      return new Promise<T>((resolve, reject) => {\n        /* if(mode === 'readwrite') {\n          return;\n        } */\n\n        // * https://developer.chrome.com/blog/indexeddb-durability-mode-now-defaults-to-relaxed\n        const transaction = db.transaction([storeName], mode, {durability: 'relaxed'});\n\n        const onError = () => {\n          clearTimeout(timeout);\n          reject(transaction.error);\n        };\n\n        // let resolved = false;\n        const onComplete = (/* what: string */) => {\n          clearTimeout(timeout);\n\n          if(log) {\n            this.log(log + ': end', performance.now() - perf/* , what */);\n          }\n\n          // if(resolved) {\n          //   return;\n          // }\n\n          // resolved = true;\n          const results = requests.map((r) => r.result);\n          resolve(isArray ? results : results[0]);\n\n          if(log) {\n            this.log(log + ': resolved', isArray ? results : results[0]);\n          }\n        };\n\n        transaction.onerror = onError;\n\n        // * have to wait while clearing or setting something\n        const waitForTransactionComplete = mode === 'readwrite';\n        if(waitForTransactionComplete) {\n          transaction.oncomplete = () => onComplete(/* 'transaction' */);\n        }\n\n        const timeout = setTimeout(() => {\n          this.log.error('transaction not finished', transaction, log);\n        }, 10000);\n\n        /* transaction.addEventListener('abort', (e) => {\n          //handleError();\n          this.log.error('IndexedDB: transaction abort!', transaction.error);\n        }); */\n\n        const callbackResult = callback(transaction.objectStore(storeName), onComplete, onError);\n\n        const isArray = Array.isArray(callbackResult);\n        const requests: IDBRequest[] = isArray ? callbackResult : [].concat(callbackResult) as any;\n\n        if(waitForTransactionComplete) {\n          return;\n        }\n\n        const length = requests.length;\n        let left = length;\n\n        const onRequestFinished = () => {\n          if(transaction.error) {\n            return;\n          }\n\n          if(!--left) {\n            onComplete(/* 'requests' */);\n          }\n        };\n\n        for(let i = 0; i < length; ++i) {\n          const request = requests[i];\n          request.onerror = onError;\n          request.onsuccess = onRequestFinished;\n        }\n      });\n    });\n  }\n\n  public getAll<T>(storeName?: StoreName): Promise<T[]> {\n    return this.getObjectStore<T[]>('readonly', (objectStore) => objectStore.getAll(), DEBUG ? 'getAll' : '', storeName);\n  }\n\n  public getAllEntries(storeName?: StoreName) {\n    const entries: IDBStorage.Entries = [];\n    return new Promise<IDBStorage.Entries>((resolve, reject) => {\n      this.getObjectStore<T[]>('readonly', (objectStore, onComplete, onError) => {\n        const request = objectStore.openCursor();\n        request.onsuccess = (event) => {\n          const cursor = (event.target as IDBRequest<IDBCursorWithValue | null>).result;\n          if(cursor) {\n            entries.push([cursor.key, cursor.value])\n            cursor.continue();\n          } else {\n            onComplete();\n            resolve(entries);\n          }\n        };\n        request.onerror = onError;\n        return [];\n      }, DEBUG ? 'getAllEntries' : '', storeName).catch(reject);\n    });\n  }\n\n  /* public getAllKeys(): Promise<Array<string>> {\n    console.time('getAllEntries');\n    return this.openDatabase().then((db) => {\n      var objectStore = db.transaction([this.storeName], 'readonly')\n        .objectStore(this.storeName);\n      var request = objectStore.getAllKeys();\n\n      return new Promise((resolve, reject) => {\n        request.onsuccess = function(event) {\n          // @ts-ignore\n          var result = event.target.result;\n          resolve(result);\n          console.timeEnd('getAllEntries');\n        }\n\n        request.onerror = reject;\n      });\n    });\n  } */\n\n  /* public isFileExists(fileName: string): Promise<boolean> {\n    console.time('isFileExists');\n    return this.openDatabase().then((db) => {\n      var objectStore = db.transaction([this.storeName], 'readonly')\n        .objectStore(this.storeName);\n      var request = objectStore.openCursor(fileName);\n\n      return new Promise((resolve, reject) => {\n        request.onsuccess = function(event) {\n          // @ts-ignore\n          var cursor = event.target.result;\n          resolve(!!cursor);\n          console.timeEnd('isFileExists');\n        }\n\n        request.onerror = reject;\n      });\n    });\n  } */\n\n  /* public getFileWriter(fileName: string, mimeType: string) {\n    var fakeWriter = FileManager.getFakeFileWriter(mimeType, (blob) => {\n      return this.saveFile(fileName, blob);\n    });\n\n    return Promise.resolve(fakeWriter);\n  } */\n}\n\nexport default IDBStorage;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport {Database} from '../config/databases';\nimport {MOUNT_CLASS_TO} from '../config/debug';\n// import DATABASE_SESSION from \"../config/databases/session\";\nimport deferredPromise, {CancellablePromise} from '../helpers/cancellablePromise';\nimport {IS_WORKER} from '../helpers/context';\nimport throttle from '../helpers/schedulers/throttle';\n// import { WorkerTaskTemplate } from \"../types\";\nimport IDBStorage from './files/idb';\n\nfunction noop() {}\n\n/* export interface LocalStorageProxySetTask extends WorkerTaskTemplate {\n  type: 'localStorageProxy',\n  payload: {\n    type: 'set',\n    keys: string[],\n    values: any[]\n  }\n};\n\nexport interface LocalStorageProxyDeleteTask extends WorkerTaskTemplate {\n  type: 'localStorageProxy',\n  payload: {\n    type: 'delete',\n    keys: string[]\n  }\n}; */\n\nconst THROTTLE_TIME = 16;\n\n/* Storage extends {[name: string]: any} *//* Storage extends Record<string, any> */\nexport default class AppStorage<\n  Storage extends Record<string, any>,\n  T extends Database<any>\n> {\n  private static STORAGES: AppStorage<any, Database<any>>[] = [];\n  private storage: IDBStorage<T>;// new CacheStorageController('session');\n\n  // private cache: Partial<{[key: string]: Storage[typeof key]}> = {};\n  private cache: Partial<Storage> = {};\n  private useStorage: boolean;\n  private savingFreezed: boolean;\n\n  private getPromises: Map<keyof Storage, CancellablePromise<Storage[keyof Storage]>> = new Map();\n  private getThrottled: () => void;\n\n  private keysToSet: Set<keyof Storage> = new Set();\n  private saveThrottled: () => void;\n  private saveDeferred = deferredPromise<void>();\n\n  private keysToDelete: Set<keyof Storage> = new Set();\n  private deleteThrottled: () => void;\n  private deleteDeferred = deferredPromise<void>();\n\n  constructor(private db: T, private storeName: typeof db['stores'][number]['name']) {\n    this.storage = new IDBStorage<T>(db, storeName);\n\n    if(AppStorage.STORAGES.length) {\n      this.useStorage = AppStorage.STORAGES[0].useStorage;\n    } else {\n      this.useStorage = true;\n    }\n\n    this.savingFreezed = false;\n\n    AppStorage.STORAGES.push(this);\n\n    this.saveThrottled = throttle(async() => {\n      const deferred = this.saveDeferred;\n      this.saveDeferred = deferredPromise();\n\n      const set = this.keysToSet;\n      if(set.size) {\n        const keys = Array.from(set.values()) as string[];\n        set.clear();\n\n        const values = keys.map((key) => this.cache[key]);\n        try {\n          // console.log('setItem: will set', key/* , value */);\n          // await this.cacheStorage.delete(key); // * try to prevent memory leak in Chrome leading to 'Unexpected internal error.'\n          // await this.storage.save(key, new Response(value, {headers: {'Content-Type': 'application/json'}}));\n\n          /* if(db === DATABASE_SESSION && !('localStorage' in self)) { // * support legacy Webogram's localStorage\n            self.postMessage({\n              type: 'localStorageProxy',\n              payload: {\n                type: 'set',\n                keys,\n                values\n              }\n            } as LocalStorageProxySetTask);\n          } */\n\n          await this.storage.save(keys, values);\n          // console.log('setItem: have set', key/* , value */);\n        } catch(e) {\n          // this.useCS = false;\n          console.error('[AS]: set error:', e, keys, values);\n        }\n      }\n\n      deferred.resolve();\n\n      if(set.size) {\n        this.saveThrottled();\n      }\n    }, THROTTLE_TIME, false);\n\n    this.deleteThrottled = throttle(async() => {\n      const deferred = this.deleteDeferred;\n      this.deleteDeferred = deferredPromise();\n\n      const set = this.keysToDelete;\n      if(set.size) {\n        const keys = Array.from(set.values()) as string[];\n        set.clear();\n\n        try {\n          /* if(db === DATABASE_SESSION && !('localStorage' in self)) { // * support legacy Webogram's localStorage\n            self.postMessage({\n              type: 'localStorageProxy',\n              payload: {\n                type: 'delete',\n                keys\n              }\n            } as LocalStorageProxyDeleteTask);\n          } */\n\n          await this.storage.delete(keys);\n        } catch(e) {\n          console.error('[AS]: delete error:', e, keys);\n        }\n      }\n\n      deferred.resolve();\n\n      if(set.size) {\n        this.deleteThrottled();\n      }\n    }, THROTTLE_TIME, false);\n\n    this.getThrottled = throttle(async() => {\n      const keys = Array.from(this.getPromises.keys());\n\n      // const perf = performance.now();\n      this.storage.get(keys as string[]).then((values) => {\n        for(let i = 0, length = keys.length; i < length; ++i) {\n          const key = keys[i];\n          const deferred = this.getPromises.get(key);\n          if(deferred) {\n            // @ts-ignore\n            deferred.resolve(this.cache[key] = values[i]);\n            this.getPromises.delete(key);\n          }\n        }\n\n        // console.log('[AS]: get time', keys, performance.now() - perf);\n      }, (error: ApiError) => {\n        const ignoreErrors: Set<ErrorType> = new Set(['NO_ENTRY_FOUND', 'STORAGE_OFFLINE']);\n        if(!ignoreErrors.has(error.type)) {\n          this.useStorage = false;\n          console.error('[AS]: get error:', error, keys, storeName);\n        }\n\n        for(let i = 0, length = keys.length; i < length; ++i) {\n          const key = keys[i];\n          const deferred = this.getPromises.get(key);\n          if(deferred) {\n            // deferred.reject(error);\n            deferred.resolve(undefined);\n            this.getPromises.delete(key);\n          }\n        }\n      }).finally(() => {\n        if(this.getPromises.size) {\n          this.getThrottled();\n        }\n      });\n    }, THROTTLE_TIME, false);\n  }\n\n  public isAvailable() {\n    return this.useStorage;\n  }\n\n  public getCache() {\n    return this.cache;\n  }\n\n  public getFromCache<T extends keyof Storage>(key: T) {\n    return this.cache[key];\n  }\n\n  public setToCache(key: keyof Storage, value: Storage[typeof key]) {\n    return this.cache[key] = value;\n  }\n\n  public async get<T extends keyof Storage>(key: T, useCache = true): Promise<Storage[T]> {\n    if(this.cache.hasOwnProperty(key) && useCache) {\n      return this.getFromCache(key);\n    } else if(this.useStorage) {\n      const r = this.getPromises.get(key);\n      if(r) return r as any;\n\n      const p = deferredPromise<Storage[T]>();\n      this.getPromises.set(key, p as any);\n\n      this.getThrottled();\n\n      return p;\n    }/*  else {\n      throw 'something went wrong';\n    } */\n  }\n\n  public getAll(): Promise<any[]> {\n    return this.storage.getAll().catch(() => [] as any[]);\n  }\n\n  public getAllEntries() {\n    return this.storage.getAllEntries().catch(() => [] as IDBStorage.Entries);\n  }\n\n  public set(obj: Partial<Storage>, onlyLocal = false) {\n    // console.log('storageSetValue', obj, callback, arguments);\n\n    const canUseStorage = this.useStorage && !onlyLocal && !this.savingFreezed;\n    for(const key in obj) {\n      if(obj.hasOwnProperty(key)) {\n        const value = obj[key];\n        this.setToCache(key, value);\n\n        // let perf = /* DEBUG */false ? performance.now() : 0;\n        // value = JSON.stringify(value);\n\n        // if(perf) {\n        //   let elapsedTime = performance.now() - perf;\n        //   if(elapsedTime > 10) {\n        //     console.warn('LocalStorage set: stringify time by JSON.stringify:', elapsedTime, key);\n        //   }\n        // }\n\n        /* perf = performance.now();\n        value = stringify(value);\n        console.log('LocalStorage set: stringify time by own stringify:', performance.now() - perf); */\n\n        if(canUseStorage) {\n          this.keysToSet.add(key);\n          this.keysToDelete.delete(key);\n          this.saveThrottled();\n        }\n      }\n    }\n\n    return canUseStorage ? this.saveDeferred : Promise.resolve();\n  }\n\n  public delete(key: keyof Storage, saveLocal = false) {\n    /* if(!this.cache.hasOwnProperty(key)) {\n      return;\n    } */\n\n    // ! it is needed here\n    key = '' + (key as string);\n\n    if(!saveLocal) {\n      delete this.cache[key];\n    }\n\n    if(this.useStorage) {\n      this.keysToSet.delete(key);\n      this.keysToDelete.add(key);\n      this.deleteThrottled();\n    }\n\n    return this.useStorage ? this.deleteDeferred : Promise.resolve();\n  }\n\n  public clear(saveLocal = false) {\n    if(!saveLocal) {\n      for(const i in this.cache) {\n        delete this.cache[i];\n      }\n    }\n\n    return this.storage.clear().catch(noop);\n  }\n\n  public close() {\n    return this.storage.close();\n  }\n\n  public static toggleStorage(enabled: boolean, clearWrite: boolean) {\n    return Promise.all(this.STORAGES.map((storage) => {\n      storage.useStorage = enabled;\n\n      if(!IS_WORKER || !clearWrite) {\n        return;\n      }\n\n      if(!enabled) {\n        storage.keysToSet.clear();\n        storage.keysToDelete.clear();\n        storage.getPromises.forEach((deferred) => deferred.resolve(undefined));\n        storage.getPromises.clear();\n      } else {\n        return storage.set(storage.cache);\n      }\n    })).catch(noop);\n  }\n\n  public static freezeSaving<T extends Database<any>>(callback: () => any, names: T['stores'][number]['name'][]) {\n    this.STORAGES.forEach((storage) => storage.savingFreezed = true);\n    try {\n      callback();\n    } catch(err) {\n      console.error('freezeSaving callback error:', err);\n    }\n    this.STORAGES.forEach((storage) => storage.savingFreezed = false);\n  }\n\n  /* public deleteDatabase() {\n    return IDBStorage.deleteDatabase().catch(noop);\n  } */\n}\n\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.AppStorage = AppStorage);\n","import {LangPackDifference} from '../layer';\nimport {CommonDatabase, getCommonDatabaseState} from '../config/databases/state';\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport {StateSettings} from '../config/state';\n\nimport AppStorage from './storage';\nimport {ActiveAccountNumber} from './accounts/types';\n\nclass CommonStateStorage extends AppStorage<\n  {\n    langPack: LangPackDifference;\n    settings: StateSettings;\n    notificationsCount: Partial<Record<ActiveAccountNumber, number>>\n  },\n  CommonDatabase\n> {\n  constructor() {\n    super(getCommonDatabaseState(), 'session');\n  }\n}\n\nconst commonStateStorage = new CommonStateStorage();\nMOUNT_CLASS_TO.commonStateStorage = commonStateStorage;\nexport default commonStateStorage;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type lang from '../lang';\nimport type langSign from '../langSign';\nimport type {State} from '../config/state';\nimport DEBUG, {MOUNT_CLASS_TO} from '../config/debug';\nimport {HelpCountriesList, HelpCountry, LangPackDifference, LangPackString} from '../layer';\nimport App from '../config/app';\nimport rootScope from './rootScope';\nimport {IS_MOBILE} from '../environment/userAgent';\nimport deepEqual from '../helpers/object/deepEqual';\nimport safeAssign from '../helpers/object/safeAssign';\nimport capitalizeFirstLetter from '../helpers/string/capitalizeFirstLetter';\nimport matchUrlProtocol from './richTextProcessor/matchUrlProtocol';\nimport wrapUrl from './richTextProcessor/wrapUrl';\nimport {setDirection} from '../helpers/dom/setInnerHTML';\nimport setBlankToAnchor from './richTextProcessor/setBlankToAnchor';\nimport {createSignal} from 'solid-js';\nimport commonStateStorage from './commonStateStorage';\n\nexport const langPack: {[actionType: string]: LangPackKey} = {\n  'messageActionChatCreate': 'ActionCreateGroup',\n  'messageActionChatCreateYou': 'ActionYouCreateGroup',\n  'messageActionChatEditTitle': 'ActionChangedTitle',\n  'messageActionChatEditPhoto': 'ActionChangedPhoto',\n  'messageActionChatEditVideo': 'ActionChangedVideo',\n  'messageActionChatDeletePhoto': 'ActionRemovedPhoto',\n  'messageActionChatReturn': 'ActionAddUserSelf',\n  'messageActionChatReturnYou': 'ActionAddUserSelfYou',\n  'messageActionChatJoined': 'ActionAddUserSelfMega',\n  'messageActionChatJoinedYou': 'ChannelMegaJoined',\n  'messageActionChatAddUser': 'ActionAddUser',\n  'messageActionChatAddUsers': 'ActionAddUser',\n  'messageActionChatLeave': 'ActionLeftUser',\n  'messageActionChatLeaveYou': 'YouLeft',\n  'messageActionChatDeleteUser': 'ActionKickUser',\n  'messageActionChatJoinedByLink': 'ActionInviteUser',\n  'messageActionPinMessage': 'Chat.Service.Group.UpdatedPinnedMessage',\n  'messageActionContactSignUp': 'Chat.Service.PeerJoinedTelegram',\n  'messageActionChannelCreate': 'ActionCreateChannel',\n  'messageActionChannelEditTitle': 'Chat.Service.Channel.UpdatedTitle',\n  'messageActionChannelEditPhoto': 'Chat.Service.Channel.UpdatedPhoto',\n  'messageActionChannelEditVideo': 'Chat.Service.Channel.UpdatedVideo',\n  'messageActionChannelDeletePhoto': 'Chat.Service.Channel.RemovedPhoto',\n  'messageActionHistoryClear': 'HistoryCleared',\n  'messageActionDiscussionStarted': 'DiscussionStarted',\n  'messageActionChannelJoined': 'ChannelJoined',\n\n  'messageActionChannelMigrateFrom': 'ActionMigrateFromGroup',\n\n  'messageActionPhoneCall.video_in_ok': 'ChatList.Service.VideoCall.incoming',\n  'messageActionPhoneCall.video_out_ok': 'ChatList.Service.VideoCall.outgoing',\n  'messageActionPhoneCall.video_missed': 'ChatList.Service.VideoCall.Missed',\n  'messageActionPhoneCall.video_cancelled': 'ChatList.Service.VideoCall.Cancelled',\n  'messageActionPhoneCall.in_ok': 'ChatList.Service.Call.incoming',\n  'messageActionPhoneCall.out_ok': 'ChatList.Service.Call.outgoing',\n  'messageActionPhoneCall.missed': 'ChatList.Service.Call.Missed',\n  'messageActionPhoneCall.cancelled': 'ChatList.Service.Call.Cancelled',\n\n  'messageActionGroupCall.started': 'Chat.Service.VoiceChatStarted.Channel',\n  'messageActionGroupCall.started_by': 'Chat.Service.VoiceChatStarted',\n  'messageActionGroupCall.started_byYou': 'Chat.Service.VoiceChatStartedYou',\n  'messageActionGroupCall.ended': 'Chat.Service.VoiceChatFinished.Channel',\n  'messageActionGroupCall.ended_by': 'Chat.Service.VoiceChatFinished',\n  'messageActionGroupCall.ended_byYou': 'Chat.Service.VoiceChatFinishedYou',\n\n  'messageActionBotAllowed': 'Chat.Service.BotPermissionAllowed'\n};\n\nexport type LangPackKey = /* string |  */keyof typeof lang | keyof typeof langSign;\n\nexport type FormatterArgument = string | number | Node | FormatterArgument[];\nexport type FormatterArguments = FormatterArgument[];\n\nexport const UNSUPPORTED_LANG_PACK_KEY: LangPackKey = IS_MOBILE ? 'Message.Unsupported.Mobile' : 'Message.Unsupported.Desktop';\n\nnamespace I18n {\n  export const strings: Map<LangPackKey, LangPackString> = new Map();\n  export const countriesList: HelpCountry[] = [];\n  let pluralRules: Intl.PluralRules;\n\n  let cacheLangPackPromise: Promise<LangPackDifference>;\n  export let lastRequestedLangCode: string;\n  export let lastRequestedNormalizedLangCode: string;\n  export let lastAppliedLangCode: string;\n  export let requestedServerLanguage = false;\n  export let timeFormat: State['settings']['timeFormat'];\n  export let isRTL = false;\n\n  export const [langCodeNormalized, setLangCodeNormalized] = createSignal<TranslatableLanguageISO>();\n\n  export function setRTL(rtl: boolean) {\n    isRTL = rtl;\n  }\n\n  function setLangCode(langCode: string) {\n    lastRequestedLangCode = langCode;\n    lastRequestedNormalizedLangCode = langCode.split('-')[0];\n    setLangCodeNormalized(lastRequestedNormalizedLangCode.split('-')[0] as any);\n  }\n\n  export function getCacheLangPack(): Promise<LangPackDifference> {\n    if(cacheLangPackPromise) return cacheLangPackPromise;\n    return cacheLangPackPromise = Promise.all([\n      commonStateStorage.get('langPack') as Promise<LangPackDifference>,\n      polyfillPromise\n    ]).then(([langPack]) => {\n      if(!langPack/*  || true */) {\n        return loadLocalLangPack();\n      } else if(DEBUG && false) {\n        return getLangPack(langPack.lang_code);\n      }/*  else if(langPack.appVersion !== App.langPackVersion) {\n        return getLangPack(langPack.lang_code);\n      } */\n\n      if(!lastRequestedLangCode) {\n        setLangCode(langPack.lang_code);\n      }\n\n      applyLangPack(langPack);\n      return langPack;\n    }).finally(() => {\n      cacheLangPackPromise = undefined;\n    });\n  }\n\n  function updateAmPm() {\n    if(timeFormat === 'h12') {\n      try {\n        const dateTimeFormat = getDateTimeFormat({hour: 'numeric', minute: 'numeric', hour12: true});\n        const date = new Date();\n        date.setHours(0);\n        const amText = dateTimeFormat.format(date);\n        amPmCache.am = amText.split(/\\s/)[1];\n        date.setHours(12);\n        const pmText = dateTimeFormat.format(date);\n        amPmCache.pm = pmText.split(/\\s/)[1];\n      } catch(err) {\n        console.error('cannot get am/pm', err);\n        amPmCache = {am: 'AM', pm: 'PM'};\n      }\n    }\n  }\n\n  export function setTimeFormat(\n    format: State['settings']['timeFormat'],\n    haveToUpdate = !!timeFormat && timeFormat !== format\n  ) {\n    timeFormat = format;\n\n    updateAmPm();\n\n    if(haveToUpdate) {\n      cachedDateTimeFormats.clear();\n      const elements = Array.from(document.querySelectorAll(`.i18n`)) as HTMLElement[];\n      elements.forEach((element) => {\n        const instance = weakMap.get(element);\n\n        if(instance instanceof IntlDateElement) {\n          instance.update();\n        }\n      });\n    }\n  }\n\n  export function loadLocalLangPack() {\n    const defaultCode = App.langPackCode;\n    setLangCode(defaultCode);\n    return Promise.all([\n      import('../lang'),\n      import('../langSign'),\n      import('../countries')\n    ]).then(([lang, langSign, countries]) => {\n      const strings: LangPackString[] = [];\n      formatLocalStrings(lang.default, strings);\n      formatLocalStrings(langSign.default, strings);\n\n      const langPack: LangPackDifference = {\n        _: 'langPackDifference',\n        from_version: 0,\n        lang_code: defaultCode,\n        strings,\n        version: 0,\n        local: true,\n        countries: countries.default\n      };\n      return saveLangPack(langPack);\n    });\n  }\n\n  export function loadLangPack(langCode: string, web?: boolean) {\n    web = true;\n    requestedServerLanguage = true;\n    const managers = rootScope.managers;\n    return Promise.all([\n      managers.apiManager.invokeApiCacheable('langpack.getLangPack', {\n        lang_code: langCode,\n        lang_pack: web ? 'web' : App.langPack\n      }),\n      !web && managers.apiManager.invokeApiCacheable('langpack.getLangPack', {\n        lang_code: langCode,\n        lang_pack: 'android'\n      }),\n      import('../lang'),\n      import('../langSign'),\n      managers.apiManager.invokeApiCacheable('help.getCountriesList', {\n        lang_code: langCode,\n        hash: 0\n      }) as Promise<HelpCountriesList.helpCountriesList>,\n      polyfillPromise\n    ]);\n  }\n\n  export function getStrings(langCode: string, strings: string[]) {\n    return rootScope.managers.apiManager.invokeApi('langpack.getStrings', {\n      lang_pack: App.langPack,\n      lang_code: langCode,\n      keys: strings\n    });\n  }\n\n  export function formatLocalStrings(strings: any, pushTo: LangPackString[] = []) {\n    for(const i in strings) {\n      // @ts-ignore\n      const v = strings[i];\n      if(typeof(v) === 'string') {\n        pushTo.push({\n          _: 'langPackString',\n          key: i,\n          value: v\n        });\n      } else {\n        pushTo.push({\n          _: 'langPackStringPluralized',\n          key: i,\n          ...v\n        });\n      }\n    }\n\n    return pushTo;\n  }\n\n  export function getLangPack(langCode: string, web?: boolean) {\n    setLangCode(langCode);\n    return loadLangPack(langCode, web).then(([langPack1, langPack2, localLangPack1, localLangPack2, countries, _]) => {\n      let strings: LangPackString[] = [];\n\n      [localLangPack1, localLangPack2].forEach((l) => {\n        formatLocalStrings(l.default as any, strings);\n      });\n\n      strings = strings.concat(...[langPack1.strings, langPack2.strings].filter(Boolean));\n\n      langPack1.strings = strings;\n      langPack1.countries = countries;\n      return saveLangPack(langPack1);\n    });\n  }\n\n  export function saveLangPack(langPack: LangPackDifference) {\n    langPack.appVersion = App.langPackVersion;\n\n    return commonStateStorage.set({langPack}).then(() => {\n      applyLangPack(langPack);\n      return langPack;\n    });\n  }\n\n  export const polyfillPromise = (function checkIfPolyfillNeeded() {\n    if(typeof(Intl) !== 'undefined' && typeof(Intl.PluralRules) !== 'undefined'/*  && false */) {\n      return Promise.resolve();\n    } else {\n      return import('./pluralPolyfill').then((_Intl) => {\n        (window as any).Intl = Object.assign(typeof(Intl) !== 'undefined' ? Intl : {}, _Intl.default);\n      });\n    }\n  })();\n\n  export function applyLangPack(langPack: LangPackDifference) {\n    const currentLangCode = lastRequestedLangCode;\n    if(langPack.lang_code !== currentLangCode) {\n      return;\n    }\n\n    try {\n      pluralRules = new Intl.PluralRules(lastRequestedNormalizedLangCode);\n    } catch(err) {\n      console.error('pluralRules error', err);\n      pluralRules = new Intl.PluralRules(lastRequestedNormalizedLangCode.split('-', 1)[0]);\n    }\n\n    try {\n      pluralRules = new Intl.PluralRules(langPack.lang_code);\n    } catch(err) {\n      console.error('pluralRules error', err);\n      pluralRules = new Intl.PluralRules(langPack.lang_code.split('-', 1)[0]);\n    }\n\n    strings.clear();\n\n    for(const string of langPack.strings) {\n      strings.set(string.key as LangPackKey, string);\n    }\n\n    if(langPack.countries) {\n      countriesList.length = 0;\n      countriesList.push(...langPack.countries.countries);\n\n      langPack.countries.countries.forEach((country) => {\n        if(country.name) {\n          const langPackKey: any = country.default_name;\n          strings.set(langPackKey, {\n            _: 'langPackString',\n            key: langPackKey,\n            value: country.name\n          });\n        }\n      });\n    }\n\n    if(lastAppliedLangCode !== currentLangCode) {\n      if(lastAppliedLangCode && rootScope.myId) {\n        rootScope.managers.appReactionsManager.resetAvailableReactions();\n        rootScope.managers.appUsersManager.indexMyself();\n        rootScope.managers.dialogsStorage.indexMyDialog();\n      }\n\n      lastAppliedLangCode = currentLangCode;\n      cachedDateTimeFormats.clear();\n      updateAmPm();\n      rootScope.dispatchEvent('language_change', currentLangCode);\n    }\n\n    const elements = Array.from(document.querySelectorAll(`.i18n`)) as HTMLElement[];\n    elements.forEach((element) => {\n      const instance = weakMap.get(element);\n\n      if(instance) {\n        instance.update();\n      }\n    });\n  }\n\n  function pushNextArgument(out: ReturnType<typeof superFormatter>, args: FormatterArguments, indexHolder: {i: number}, i?: number) {\n    const arg = args[i === undefined ? indexHolder.i++ : i];\n    if(Array.isArray(arg)) {\n      out.push(...arg as any);\n    } else {\n      out.push(arg);\n    }\n  }\n\n  export function superFormatter(input: string, args?: FormatterArguments, indexHolder?: {i: number}): Exclude<FormatterArgument, FormatterArgument[]>[] {\n    if(!indexHolder) { // set starting index for arguments without order\n      indexHolder = {i: 0};\n      const indexes = input.match(/(%|un)\\d+/g);\n      if(indexes?.length) {\n        indexHolder.i = Math.max(...indexes.map((str) => +str.replace(/\\D/g, '')));\n      }\n    }\n\n    const out: ReturnType<typeof superFormatter> = [];\n    const regExp = /(\\*\\*|__)(.+?)\\1|(\\n)|(\\[.+?\\]\\(.*?\\))|un\\d|%\\d\\$.|%\\S/g;\n\n    let lastIndex = 0;\n    input.replace(regExp, (match, p1: any, p2: any, p3: any, p4: string, offset: number, string: string) => {\n      // console.table({match, p1, p2, offset, string});\n\n      if(offset > lastIndex) {\n        out.push(string.slice(lastIndex, offset));\n      }\n\n      if(p1) {\n        // offset += p1.length;\n        let element: HTMLElement;\n        switch(p1) {\n          case '**': {\n            element = document.createElement('b');\n            break;\n          }\n\n          case '__': {\n            element = document.createElement('i');\n            break;\n          }\n        }\n\n        element.append(...superFormatter(p2, args, indexHolder) as any);\n        out.push(element);\n      } else if(p3) {\n        out.push(document.createElement('br'));\n      } else if(p4) {\n        const idx = p4.lastIndexOf(']');\n        const text = p4.slice(1, idx);\n\n        const url = p4.slice(idx + 2, p4.length - 1);\n        let a: HTMLAnchorElement;\n        if(url && matchUrlProtocol(url)) {\n          a = document.createElement('a');\n          const wrappedUrl = wrapUrl(url);\n          a.href = wrappedUrl.url;\n          if(wrappedUrl.onclick) a.setAttribute('onclick', wrappedUrl.onclick + '(this)');\n          setBlankToAnchor(a);\n        } else {\n          a = args[indexHolder.i++] as HTMLAnchorElement;\n\n          if(a instanceof DocumentFragment) { // right after wrapRichText\n            a = a.firstChild as any;\n          }\n\n          if(typeof(a) !== 'string') {\n            a.textContent = ''; // reset content\n          }\n        }\n\n        const formatted = superFormatter(text, args, indexHolder) as any;\n        if(typeof(a) === 'string') {\n          out.push(...formatted);\n        } else {\n          a.append(...formatted);\n          out.push(a);\n        }\n      } else if(args) {\n        const index = match.replace(/\\D/g, '');\n        pushNextArgument(\n          out,\n          args,\n          indexHolder,\n          !index || Number.isNaN(+index) ? undefined : Math.min(args.length - 1, +index - 1)\n        );\n      }\n\n      lastIndex = offset + match.length;\n      return '';\n    });\n\n    if(lastIndex !== input.length) {\n      out.push(input.slice(lastIndex));\n    }\n\n    return out;\n  }\n\n  export function format(key: LangPackKey, plain: true, args?: FormatterArguments): string;\n  export function format(key: LangPackKey, plain?: false, args?: FormatterArguments): ReturnType<typeof superFormatter>;\n  export function format(key: LangPackKey, plain = false, args?: FormatterArguments): ReturnType<typeof superFormatter> | string {\n    const str = strings.get(key);\n    let input: string;\n    if(str) {\n      if(str._ === 'langPackStringPluralized' && args?.length) {\n        let v = args[0] as number | string;\n        if(typeof(v) === 'string') v = +v.replace(/\\D/g, '');\n        const s = pluralRules.select(v);\n        // @ts-ignore\n        input = str[s + '_value'] || str['other_value'];\n      } else if(str._ === 'langPackString') {\n        input = str.value;\n      } else {\n        // input = '[' + key + ']';\n        input = key;\n      }\n    } else {\n      // input = '[' + key + ']';\n      input = key;\n    }\n\n    const result = superFormatter(input, args);\n    if(plain) { // * let's try a hack now... (don't want to replace []() entity)\n      return result.map((item) => item instanceof Node ? item.textContent : item).join('');\n    } else {\n      return result;\n    }\n\n    /* if(plain) {\n      if(args?.length) {\n        const regExp = /un\\d|%\\d\\$.|%./g;\n        let i = 0;\n        input = input.replace(regExp, (match, offset, string) => {\n          return '' + args[i++];\n        });\n      }\n\n      return input;\n    } else {\n      return superFormatter(input, args);\n    } */\n  }\n\n  export const weakMap: WeakMap<HTMLElement, IntlElementBase<IntlElementBaseOptions>> = new WeakMap();\n\n  export type IntlElementBaseOptions = {\n    element?: HTMLElement,\n    property?: 'innerText' | 'innerHTML' | 'placeholder' | 'textContent',\n  };\n\n  abstract class IntlElementBase<Options extends IntlElementBaseOptions> {\n    public element: IntlElementBaseOptions['element'];\n    public property: IntlElementBaseOptions['property'];\n\n    constructor(options?: Options) {\n      this.element = options?.element || document.createElement('span');\n      this.element.classList.add('i18n');\n\n      this.property = options?.property;\n\n      weakMap.set(this.element, this);\n    }\n\n    abstract update(options?: Options): void;\n  }\n\n  export type IntlElementOptions = IntlElementBaseOptions & {\n    key?: LangPackKey,\n    args?: FormatterArguments\n  };\n  export class IntlElement extends IntlElementBase<IntlElementOptions> {\n    public key: IntlElementOptions['key'];\n    public args: IntlElementOptions['args'];\n\n    constructor(options: IntlElementOptions = {}) {\n      super({...options, property: options.property ?? 'innerHTML'});\n\n      if(options?.key) {\n        this.update(options);\n      }\n    }\n\n    public update(options?: IntlElementOptions) {\n      safeAssign(this, options);\n\n      if(!this.key) {\n        this.element.replaceChildren();\n        return;\n      }\n\n      if(this.property === 'innerHTML') {\n        this.element.replaceChildren(...format(this.key, false, this.args) as any);\n        if(this.args?.length) {\n          this.element.normalize();\n        }\n      } else {\n        // @ts-ignore\n        const v = this.element[this.property];\n        const formatted = format(this.key, true, this.args);\n\n        // * hasOwnProperty won't work here\n        if(v === undefined) this.element.dataset[this.property] = formatted;\n        else (this.element as HTMLInputElement)[this.property] = formatted;\n      }\n    }\n\n    public compareAndUpdate(options?: IntlElementOptions) {\n      if(this.key === options.key && deepEqual(this.args, options.args)) {\n        return;\n      }\n\n      return this.update(options);\n    }\n  }\n\n  const cachedDateTimeFormats: Map<string, Intl.DateTimeFormat> = new Map();\n  export function getDateTimeFormat(options: Intl.DateTimeFormatOptions = {}) {\n    const json = JSON.stringify(options);\n    let dateTimeFormat = cachedDateTimeFormats.get(json);\n    if(!dateTimeFormat) {\n      dateTimeFormat = new Intl.DateTimeFormat(lastRequestedNormalizedLangCode + '-u-hc-' + timeFormat, options);\n      cachedDateTimeFormats.set(json, dateTimeFormat);\n    }\n\n    return dateTimeFormat;\n  }\n\n  export let amPmCache = {am: 'AM', pm: 'PM'};\n  export type IntlDateElementOptions = IntlElementBaseOptions & {\n    date?: Date,\n    options: Intl.DateTimeFormatOptions\n  };\n  export class IntlDateElement extends IntlElementBase<IntlDateElementOptions> {\n    public date: IntlDateElementOptions['date'];\n    public options: IntlDateElementOptions['options'];\n\n    constructor(options: IntlDateElementOptions) {\n      super({...options, property: options.property ?? 'textContent'});\n      setDirection(this.element);\n\n      if(options?.date) {\n        this.update(options);\n      }\n    }\n\n    public update(options?: IntlDateElementOptions) {\n      safeAssign(this, options);\n\n      let text: string;\n      if(this.options.hour && this.options.minute && Object.keys(this.options).length === 2/*  && false */) {\n        const hours = this.date.getHours();\n        text = ('0' + (timeFormat === 'h12' ? (hours % 12) || 12 : hours)).slice(-2) + ':' + ('0' + this.date.getMinutes()).slice(-2);\n        // if(this.options.second) {\n        //   text += ':' + ('0' + this.date.getSeconds()).slice(-2);\n        // }\n\n        if(timeFormat === 'h12') {\n          text += ' ' + (hours < 12 ? amPmCache.am : amPmCache.pm);\n        }\n      } else {\n        // * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/hourCycle#adding_an_hour_cycle_via_the_locale_string\n        const dateTimeFormat = getDateTimeFormat(this.options);\n        text = capitalizeFirstLetter(dateTimeFormat.format(this.date));\n      }\n\n      (this.element as any)[this.property] = text;\n    }\n  }\n\n  export function i18n(key: LangPackKey, args?: FormatterArguments) {\n    return new IntlElement({key, args}).element;\n  }\n\n  export function i18n_(options: IntlElementOptions) {\n    return new IntlElement(options).element;\n  }\n\n  export function _i18n(element: HTMLElement, key: LangPackKey, args?: FormatterArguments, property?: IntlElementOptions['property']) {\n    return new IntlElement({element, key, args, property}).element;\n  }\n}\n\nexport {I18n};\nexport default I18n;\n\nconst i18n = I18n.i18n;\nexport {i18n};\n\nconst i18n_ = I18n.i18n_;\nexport {i18n_};\n\nconst _i18n = I18n._i18n;\nexport {_i18n};\n\nexport function joinElementsWith<T extends Node | string | Array<Node | string>>(\n  elements: T[],\n  joiner: T | string | ((isLast: boolean) => T)\n): T[] {\n  const arr = elements.slice(0, 1) as T[];\n  for(let i = 1; i < elements.length; ++i) {\n    const isLast = (elements.length - 1) === i;\n    arr.push(typeof(joiner) === 'function' ? (joiner as any)(isLast) : joiner);\n    arr.push(elements[i]);\n  }\n\n  return arr;\n}\n\n\nexport function join(elements: (Node | string)[], useLast: boolean, plain: true): string;\nexport function join(elements: (Node | string)[], useLast?: boolean, plain?: false): (string | Node)[];\nexport function join(elements: (Node | string)[], useLast: boolean, plain: boolean): string | (string | Node)[];\nexport function join(elements: (Node | string)[], useLast = true, plain?: boolean): string | (string | Node)[] {\n  const joined = joinElementsWith(elements, (isLast) => {\n    const langPackKey: LangPackKey = isLast && useLast ? 'AutoDownloadSettings.LastDelimeter' : 'AutoDownloadSettings.Delimeter';\n    return plain ? I18n.format(langPackKey, true) : i18n(langPackKey);\n  });\n\n  return plain ? joined.join('') : joined;\n}\n\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.I18n = I18n);\n","export default function isAnyChat(peerId: PeerId) {\n  return +peerId < 0;\n}\n","export default function isUser(peerId: PeerId) {\n  return +peerId >= 0;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport isAnyChat from '../lib/appManagers/utils/peers/isAnyChat';\nimport isUser from '../lib/appManagers/utils/peers/isUser';\n\nString.prototype.toUserId = function() {\n  return (+this).toUserId();\n};\n\nString.prototype.toChatId = function() {\n  return (+this).toChatId();\n};\n\nString.prototype.toPeerId = function(isChat?: boolean) {\n  return (+this).toPeerId(isChat);\n};\n\nString.prototype.isPeerId = function() {\n  return /^[\\d-]/.test(this.toString());\n};\n\n// * don't return just 'this', because Firefox returns empty `Number` class\nNumber.prototype.toUserId = function() {\n  return +this;\n};\n\nNumber.prototype.toChatId = function() {\n  return Math.abs(this as any);\n};\n\n// * don't return just 'this', because Firefox returns empty `Number` class\nNumber.prototype.toPeerId = function(isChat?: boolean) {\n  return isChat === undefined ? +this : (isChat ? -Math.abs(this as number) : +this);\n};\n\nNumber.prototype.isPeerId = function() {\n  return true;\n};\n\n[\n  ['isUser' as const, isUser],\n  ['isAnyChat' as const, isAnyChat]\n].forEach((value) => {\n  const newMethod = Array.isArray(value) ? value[0] : value;\n  const originMethod = Array.isArray(value) ? value[1] : value;\n  // @ts-ignore\n  String.prototype[newMethod] = function() {\n    // @ts-ignore\n    // eslint-disable-next-line no-useless-call\n    return originMethod.call(null, this.toString());\n  };\n\n  // @ts-ignore\n  Number.prototype[newMethod] = function() {\n    // * don't use just 'this', because Firefox returns empty `Number` class\n    // @ts-ignore\n    // eslint-disable-next-line no-useless-call\n    return originMethod.call(null, +this);\n  };\n});\n\ndeclare global {\n  interface String {\n    toUserId(): UserId;\n    toChatId(): ChatId;\n    toPeerId(isChat?: boolean): PeerId;\n    isPeerId(): this is string;\n\n    isUser(): boolean;\n    isAnyChat(): boolean;\n  }\n\n  interface Number {\n    toUserId(): UserId;\n    toChatId(): ChatId;\n    toPeerId(isChat?: boolean): PeerId;\n    isPeerId(): this is PeerId;\n\n    isUser(): boolean;\n    isAnyChat(): boolean;\n  }\n}\n\nexport {};\n","export default function bufferConcats(...args: (ArrayBuffer | Uint8Array | number[])[]) {\n  const length = args.reduce((acc, v) => acc + ((v as ArrayBuffer).byteLength || (v as Uint8Array).length), 0);\n\n  const tmp = new Uint8Array(length);\n\n  let lastLength = 0;\n  args.forEach((b) => {\n    tmp.set(b instanceof ArrayBuffer ? new Uint8Array(b) : b, lastLength);\n    lastLength += (b as ArrayBuffer).byteLength || (b as Uint8Array).length;\n  });\n\n  return tmp/* .buffer */;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport bufferConcats from '../helpers/bytes/bufferConcats';\n\nUint8Array.prototype.concat = function(...args: Array<Uint8Array | ArrayBuffer | number[]>) {\n  return bufferConcats(this, ...args);\n};\n\n/* Uint8Array.prototype.toString = function() {\n  return String.fromCharCode.apply(null, [...this]);\n}; */\n\nUint8Array.prototype.toJSON = function() {\n  return [...this];\n  // return {type: 'bytes', value: [...this]};\n};\n\nPromise.prototype.finally = Promise.prototype.finally || function<T>(this: Promise<T>, fn: () => any) {\n  const onFinally = (callback: typeof fn) => Promise.resolve(fn()).then(callback);\n  return this.then(\n    result => onFinally(() => result),\n    reason => onFinally(() => Promise.reject(reason))\n  );\n};\n\ndeclare global {\n  interface Uint8Array {\n    concat: (...args: Array<Uint8Array | ArrayBuffer | number[]>) => Uint8Array,\n    // toString: () => string,\n    toJSON: () => number[],\n    // toJSON: () => {type: 'bytes', value: number[]},\n  }\n\n  interface Promise<T> {\n    finally: (onfinally?: () => void) => Promise<T>;\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport deferredPromise, {CancellablePromise} from '../../helpers/cancellablePromise';\nimport {WorkerTaskVoidTemplate} from '../../types';\n\nexport interface ConvertWebPTask extends WorkerTaskVoidTemplate {\n  type: 'convertWebp',\n  payload: {\n    fileName: string,\n    bytes: Uint8Array\n  }\n};\n\nexport class WebpWorkerController {\n  private worker: Worker;\n  private convertPromises: {[fileName: string]: CancellablePromise<Uint8Array>} = {};\n\n  private init() {\n    this.worker = new Worker(new URL('./webp.worker.ts', import.meta.url), {type: 'module'});\n    this.worker.addEventListener('message', (e) => {\n      const task = e.data as ConvertWebPTask;\n      const payload = task.payload;\n\n      const promise = this.convertPromises[payload.fileName];\n      if(promise) {\n        payload.bytes ? promise.resolve(payload.bytes) : promise.reject();\n        delete this.convertPromises[payload.fileName];\n      }\n    });\n  }\n\n  private postMessage(data: ConvertWebPTask) {\n    if(this.init) {\n      this.init();\n      this.init = null;\n    }\n\n    this.worker.postMessage(data);\n  }\n\n  public convert(fileName: string, bytes: Uint8Array) {\n    if(this.convertPromises.hasOwnProperty(fileName)) {\n      return this.convertPromises[fileName];\n    }\n\n    const convertPromise = deferredPromise<Uint8Array>();\n\n    this.postMessage({type: 'convertWebp', payload: {fileName, bytes}});\n\n    return this.convertPromises[fileName] = convertPromise;\n  }\n}\n\nconst webpWorkerController = new WebpWorkerController();\nMOUNT_CLASS_TO.webpWorkerController = webpWorkerController;\nexport default webpWorkerController;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport Modes from '../config/modes';\nimport {IS_WORKER} from '../helpers/context';\nimport makeError from '../helpers/makeError';\nimport {WorkerTaskTemplate} from '../types';\nimport MTProtoMessagePort from './mtproto/mtprotoMessagePort';\n// import { stringify } from '../helpers/json';\n\nclass LocalStorage<Storage extends Record<string, any>> {\n  private prefix = '';\n  private cache: Partial<Storage> = {};\n  private useStorage = true;\n\n  constructor(/* private preserveKeys: (keyof Storage)[] */) {\n    if(Modes.test) {\n      this.prefix = 't_';\n    }\n  }\n\n  public get<T extends keyof Storage>(key: T, useCache = true): Storage[T] {\n    if(this.cache.hasOwnProperty(key) && useCache) {\n      return this.cache[key];\n    } else if(this.useStorage) {\n      let value: Storage[T];\n      try {\n        value = localStorage.getItem(this.prefix + (key as string)) as any;\n      } catch(err) {\n        this.useStorage = false;\n        throw makeError('STORAGE_OFFLINE');\n      }\n\n      if(value !== null) {\n        try {\n          value = JSON.parse(value);\n        } catch(err) {\n          // console.error(err);\n        }\n      } else {\n        value = undefined;\n      }\n\n      return value;\n    } else {\n      throw makeError('STORAGE_OFFLINE');\n    }\n  }\n\n  public set(obj: Partial<Storage>, onlyLocal = false) {\n    let lastError: any;\n    for(const key in obj) {\n      if(obj.hasOwnProperty(key)) {\n        const value = obj[key];\n        this.cache[key] = value;\n\n        if(!onlyLocal) {\n          try {\n            if(!this.useStorage) {\n              throw makeError('STORAGE_OFFLINE');\n            }\n\n            const stringified = JSON.stringify(value);\n            localStorage.setItem(this.prefix + key, stringified);\n          } catch(err) {\n            this.useStorage = false;\n            lastError = err;\n          }\n        }\n      }\n    }\n\n    if(lastError) {\n      throw lastError;\n    }\n  }\n\n  public delete(key: keyof Storage, saveLocal = false) {\n    // ! it is needed here\n    key = '' + (key as string);\n\n    if(!saveLocal) {\n      delete this.cache[key];\n    }\n\n    // if(this.useStorage) {\n    try {\n      localStorage.removeItem(this.prefix + (key as string));\n    } catch(err) {\n\n    }\n    // }\n  }\n\n  /* public clear(preserveKeys: (keyof Storage)[] = this.preserveKeys) {\n    // if(this.useStorage) {\n      try {\n        let obj: Partial<Storage> = {};\n        if(preserveKeys) {\n          preserveKeys.forEach((key) => {\n            const value = this.get(key);\n            if(value !== undefined) {\n              obj[key] = value;\n            }\n          });\n        }\n\n        localStorage.clear();\n\n        if(preserveKeys) {\n          this.set(obj);\n        }\n      } catch(err) {\n\n      }\n    // }\n  } */\n\n  public toggleStorage(enabled: boolean, clearWrite: boolean) {\n    this.useStorage = enabled;\n\n    if(!clearWrite) {\n      return;\n    }\n\n    if(enabled) {\n      return this.set(this.cache);\n    }\n  }\n}\n\nexport interface LocalStorageProxyTask extends WorkerTaskTemplate {\n  type: 'localStorageProxy',\n  payload: {\n    type: 'set' | 'get' | 'delete' /* | 'clear'  */| 'toggleStorage',\n    args: any[]\n  }\n};\n\nexport interface LocalStorageProxyTaskResponse extends WorkerTaskTemplate {\n  type: 'localStorageProxy',\n  payload: any\n};\n\nexport default class LocalStorageController<Storage extends Record<string, any>> {\n  private static STORAGES: LocalStorageController<any>[] = [];\n  // private log = (...args: any[]) => console.log('[SW LS]', ...args);\n  // private log = (...args: any[]) => {};\n\n  private storage: LocalStorage<Storage>;\n\n  constructor(/* private preserveKeys: (keyof Storage)[] = [] */) {\n    LocalStorageController.STORAGES.push(this);\n\n    if(!IS_WORKER) {\n      this.storage = new LocalStorage(/* preserveKeys */);\n    }\n  }\n\n  private async proxy<T>(type: LocalStorageProxyTask['payload']['type'], ...args: LocalStorageProxyTask['payload']['args']): Promise<T> {\n    if(IS_WORKER) {\n      const port = MTProtoMessagePort.getInstance<false>();\n      return port.invoke('localStorageProxy', {type, args});\n    }\n\n    args = Array.prototype.slice.call(args);\n\n    // @ts-ignore\n    return this.storage[type].apply(this.storage, args as any);\n  }\n\n  public get<T extends keyof Storage>(key: T, useCache?: boolean) {\n    return this.proxy<Storage[T]>('get', key, useCache);\n  }\n\n  public set(obj: Partial<Storage>, onlyLocal?: boolean) {\n    return this.proxy<void>('set', obj, onlyLocal);\n  }\n\n  public delete(key: keyof Storage, saveLocal?: boolean) {\n    return this.proxy<void>('delete', key, saveLocal);\n  }\n\n  // public clear(/* preserveKeys?: (keyof Storage)[] */) {\n  //   return this.proxy<void>('clear'/* , preserveKeys */);\n  // }\n\n  public toggleStorage(enabled: boolean, clearWrite: boolean) {\n    return this.proxy<void>('toggleStorage', enabled, clearWrite);\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {AppInstance} from './mtproto/singleInstance';\nimport type {UserAuth} from './mtproto/mtproto_config';\nimport type {DcId} from '../types';\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport LocalStorageController from './localStorage';\nimport {AccountSessionData} from './accounts/types';\n\nconst sessionStorage = new LocalStorageController<{\n  state_id: number,\n\n  account1: AccountSessionData,\n  account2: AccountSessionData,\n  account3: AccountSessionData,\n  account4: AccountSessionData,\n\n  // <-- DEPRECATED, use only for going to and from 'A' (a.k.a. 'Z') version\n  dc: DcId,\n  user_auth: UserAuth,\n  dc1_auth_key: string,\n  dc2_auth_key: string,\n  dc3_auth_key: string,\n  dc4_auth_key: string,\n  dc5_auth_key: string,\n  dc1_server_salt: string,\n  dc2_server_salt: string,\n  dc3_server_salt: string,\n  dc4_server_salt: string,\n  dc5_server_salt: string,\n  dc1_hash: string, // WebA only\n  dc2_hash: string, // WebA only\n  dc3_hash: string, // WebA only\n  dc4_hash: string, // WebA only\n  dc5_hash: string, // WebA only\n  auth_key_fingerprint: string, // = dc${App.baseDcId}_auth_key.slice(0, 8)\n  // -->\n\n  server_time_offset: number,\n  xt_instance: AppInstance,\n  kz_version: 'K' | 'Z',\n  tgme_sync: {\n    canRedirect: boolean,\n    ts: number\n  },\n  k_build: number,\n\n  // auth options\n  previous_account?: number, // only for back button when logging in to another account\n  current_account?: number, // 1 if not set\n  should_animate_auth?: number,\n  should_animate_main?: number\n}>(/* ['kz_version'] */);\nMOUNT_CLASS_TO.appStorage = sessionStorage;\nexport default sessionStorage;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {IS_MOBILE_SAFARI} from '../../environment/userAgent';\n\nexport default function isSwipingBackSafari(e: TouchEvent | MouseEvent) {\n  return IS_MOBILE_SAFARI && e instanceof TouchEvent && e.touches[0].clientX < 30;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport {IS_MOBILE_SAFARI} from '../environment/userAgent';\nimport {logger} from '../lib/logger';\nimport blurActiveElement from '../helpers/dom/blurActiveElement';\nimport cancelEvent from '../helpers/dom/cancelEvent';\nimport isSwipingBackSafari from '../helpers/dom/isSwipingBackSafari';\nimport indexOfAndSplice from '../helpers/array/indexOfAndSplice';\n\nexport type NavigationItem = {\n  type: 'left' | 'right' | 'im' | 'chat' | 'popup' | 'media' | 'menu' |\n    'esg' | 'multiselect' | 'input-helper' | 'autocomplete-helper' | 'markup' |\n    'global-search' | 'voice' | 'mobile-search' | 'filters' | 'global-search-focus' |\n    'toast' | 'dropdown' | 'forum' | 'stories' | 'stories-focus' | 'topbar-search' |\n    'settings-popup',\n  onPop: (canAnimate: boolean) => boolean | void,\n  onEscape?: () => boolean,\n  noHistory?: boolean,\n  noBlurOnPop?: boolean,\n};\n\nexport class AppNavigationController {\n  private navigations: Array<NavigationItem>;\n  private id: number;\n  private manual: boolean;\n  private log: ReturnType<typeof logger>;\n  private debug: boolean;\n  private currentHash: string; // have to start with # if not empty\n  private overriddenHash: string; // have to start with # if not empty\n  private isPossibleSwipe: boolean;\n  public onHashChange: () => void;\n\n  constructor() {\n    this.navigations = [];\n    this.id = Date.now();\n    this.manual = false;\n    this.log = logger('NC');\n    this.debug = true;\n    this.currentHash = window.location.hash;\n    this.overriddenHash = '';\n    this.isPossibleSwipe = false;\n\n    window.addEventListener('popstate', this.onPopState);\n    window.addEventListener('keydown', this.onKeyDown, {capture: true, passive: false});\n\n    if(IS_MOBILE_SAFARI) {\n      const options = {passive: true};\n      window.addEventListener('touchstart', this.onTouchStart, options);\n    }\n\n    history.scrollRestoration = 'manual';\n\n    this.pushState(); // * push init state\n  }\n\n  private onPopState = (e: PopStateEvent) => {\n    const hash = window.location.hash;\n    const id: number = e.state;\n    this.debug && this.log('popstate', e, this.isPossibleSwipe, hash);\n    if(hash !== this.currentHash) {\n      this.debug && this.log.warn(`hash changed, new=${hash}, current=${this.currentHash}, overridden=${this.overriddenHash}`);\n      // fix for returning to wrong hash (e.g. chat -> archive -> chat -> 3x back)\n      if(id === this.id && this.overriddenHash && this.overriddenHash !== hash) {\n        this.overrideHash(this.overriddenHash);\n      } else if(id/*  === this.id */ && !this.overriddenHash && hash) {\n        this.overrideHash();\n      } else {\n        this.currentHash = hash;\n        this.onHashChange && this.onHashChange();\n        // this.replaceState();\n        return;\n      }\n    }\n\n    if(id !== this.id/*  && !this.navigations.length */) {\n      this.pushState();\n\n      if(!this.navigations.length) {\n        return;\n      }\n    }\n\n    const item = this.navigations.pop();\n    if(!item) {\n      this.pushState();\n      return;\n    }\n\n    this.manual = !this.isPossibleSwipe;\n    this.handleItem(item, this.navigations.length);\n    // this.pushState(); // * prevent adding forward arrow\n  };\n\n  private onKeyDown = (e: KeyboardEvent) => {\n    const item = this.navigations[this.navigations.length - 1];\n    if(!item) return;\n    if(e.key === 'Escape' && (item.onEscape ? item.onEscape() : true)) {\n      cancelEvent(e);\n      this.back(item.type);\n    }\n  };\n\n  private onTouchStart = (e: TouchEvent) => {\n    if(e.touches.length > 1) return;\n    this.debug && this.log('touchstart');\n\n    if(isSwipingBackSafari(e)) {\n      this.isPossibleSwipe = true;\n\n      window.addEventListener('touchend', () => {\n        setTimeout(() => {\n          this.isPossibleSwipe = false;\n        }, 100);\n      }, {passive: true, once: true});\n    }\n\n    /* const detach = () => {\n      window.removeEventListener('touchend', onTouchEnd);\n      window.removeEventListener('touchmove', onTouchMove);\n    };\n\n    let moved = false;\n    const onTouchMove = (e: TouchEvent) => {\n      this.debug && this.log('touchmove');\n      if(e.touches.length > 1) {\n        detach();\n        return;\n      }\n\n      moved = true;\n    };\n\n    const onTouchEnd = (e: TouchEvent) => {\n      this.debug && this.log('touchend');\n      if(e.touches.length > 1 || !moved) {\n        detach();\n        return;\n      }\n\n      isPossibleSwipe = true;\n      doubleRaf().then(() => {\n        isPossibleSwipe = false;\n      });\n\n      detach();\n    };\n\n    window.addEventListener('touchend', onTouchEnd, options);\n    window.addEventListener('touchmove', onTouchMove, options); */\n  };\n\n  public overrideHash(hash: string = '') {\n    if(hash && hash[0] !== '#') hash = '#' + hash;\n    else if(hash === '#') hash = '';\n\n    if(this.currentHash === hash) {\n      return;\n    }\n\n    this.overriddenHash = this.currentHash = hash;\n    this.replaceState();\n    this.pushState();\n  }\n\n  private handleItem(item: NavigationItem, wasIndex = this.navigations.indexOf(item)) {\n    const good = item.onPop(!this.manual ? false : undefined);\n    this.debug && this.log('popstate, navigation:', item, this.navigations);\n    if(good === false) { // insert item on the same place, because .push can have different index if new item has appeared\n      this.spliceItems(Math.min(this.navigations.length, wasIndex), 0, item);\n    } else if(!item.noBlurOnPop) {\n      blurActiveElement(); // no better place for it\n    }\n\n    this.manual = false;\n  }\n\n  public findItemByType(type: NavigationItem['type']) {\n    for(let i = this.navigations.length - 1; i >= 0; --i) {\n      const item = this.navigations[i];\n      if(item.type === type) {\n        return {item, index: i};\n      }\n    }\n  }\n\n  public back(type?: NavigationItem['type']) {\n    if(type) {\n      const ret = this.findItemByType(type);\n      if(ret) {\n        this.backByItem(ret.item, ret.index);\n        return;\n      }\n    }\n\n    history.back();\n  }\n\n  public backByItem(item: NavigationItem, index = this.navigations.indexOf(item)) {\n    if(index === -1) {\n      return;\n    }\n\n    this.manual = true;\n    // ! commented because 'popstate' event will be fired with delay\n    // if(index !== (this.navigations.length - 1)) {\n    this.navigations.splice(index, 1);\n    this.handleItem(item, index);\n    // }\n  }\n\n  private onItemAdded(item: NavigationItem) {\n    this.debug && this.log('onItemAdded', item, this.navigations);\n\n    if(!item.noHistory) {\n      this.pushState();\n    }\n  }\n\n  public pushItem(item: NavigationItem) {\n    this.navigations.push(item);\n    this.onItemAdded(item);\n  }\n\n  public unshiftItem(item: NavigationItem) {\n    this.navigations.unshift(item);\n    this.onItemAdded(item);\n  }\n\n  public spliceItems(index: number, length: number, ...items: NavigationItem[]) {\n    this.navigations.splice(index, length, ...items);\n    items.forEach((item) => {\n      this.onItemAdded(item);\n    });\n  }\n\n  public pushState() {\n    this.debug && this.log('push');\n    this.manual = false;\n    history.pushState(this.id, '');\n  }\n\n  public replaceState() {\n    this.debug && this.log.warn('replace');\n\n    const url = location.origin + location.pathname + location.search + this.overriddenHash;\n    history.replaceState(this.id, '', url);\n  }\n\n  public removeItem(item: NavigationItem) {\n    if(!item) {\n      return;\n    }\n\n    indexOfAndSplice(this.navigations, item);\n  }\n\n  public removeByType(type: NavigationItem['type'], single = false) {\n    for(let i = this.navigations.length - 1; i >= 0; --i) {\n      const item = this.navigations[i];\n      if(item.type === type) {\n        this.navigations.splice(i, 1);\n\n        if(single) {\n          break;\n        }\n      }\n    }\n  }\n}\n\nconst appNavigationController = new AppNavigationController();\nMOUNT_CLASS_TO.appNavigationController = appNavigationController;\nexport default appNavigationController;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport appNavigationController from '../../components/appNavigationController';\n\nexport class AppRuntimeManager {\n  public reload() {\n    try {\n      appNavigationController.spliceItems(0, Infinity);\n      appNavigationController.overrideHash();\n      location.reload();\n    } catch(e) {};\n\n    // if(window.chrome && chrome.runtime && chrome.runtime.reload) {\n    //   chrome.runtime.reload();\n    // }\n  }\n\n  public close() {\n    try {\n      window.close();\n    } catch(e) {}\n  }\n\n  /**\n   * Better to call from event\n   */\n  public focus() {\n    // // @ts-ignore\n    // if(window.navigator.mozApps && document.hidden) {\n    //   // Get app instance and launch it to bring app to foreground\n    //   // @ts-ignore\n    //   window.navigator.mozApps.getSelf().onsuccess = function() {\n    //     this.result.launch();\n    //   };\n    // } else {\n    //   // @ts-ignore\n    //   if(window.chrome && chrome.app && chrome.app.window) {\n    //     // @ts-ignore\n    //     chrome.app.window.current().focus();\n    //   }\n\n    window.focus();\n    // }\n  }\n}\n\nconst appRuntimeManager = new AppRuntimeManager();\nexport default appRuntimeManager;\n","export default function copy<T>(obj: T): T {\n  // in case of premitives\n  if(obj === null || typeof(obj) !== 'object') {\n    return obj;\n  }\n\n  // date objects should be\n  if(obj instanceof Date) {\n    return new Date(obj.getTime()) as any;\n  }\n\n  // handle Array\n  if(Array.isArray(obj)) {\n    // @ts-ignore\n    const clonedArr: T = obj.map((el) => copy(el)) as any as T;\n    return clonedArr;\n  }\n\n  if(ArrayBuffer.isView(obj)) {\n    // @ts-ignore\n    return obj.slice();\n  }\n\n  // lastly, handle objects\n  // @ts-ignore\n  const clonedObj = new obj.constructor();\n  for(var prop in obj) {\n    if(obj.hasOwnProperty(prop)) {\n      clonedObj[prop] = copy(obj[prop]);\n    }\n  }\n  return clonedObj;\n}\n","import Modes from '../config/modes';\n\nconst IS_SHARED_WORKER_SUPPORTED = typeof(SharedWorker) !== 'undefined' && !Modes.noSharedWorker/*  && false */;\n\nexport default IS_SHARED_WORKER_SUPPORTED;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport IS_TOUCH_SUPPORTED from '../environment/touchSupport';\nimport EventListenerBase from './eventListenerBase';\n\nconst FOCUS_EVENT_NAME = IS_TOUCH_SUPPORTED ? 'touchstart' : 'mousemove';\nconst DO_NOT_IDLE = false;\n\nexport class IdleController extends EventListenerBase<{\n  change: (idle: boolean) => void\n}> {\n  private _isIdle: boolean;\n\n  private focusPromise: Promise<void>;\n  private focusResolve: () => void;\n\n  constructor() {\n    super();\n\n    this._isIdle = true;\n    this.focusPromise = Promise.resolve();\n    this.focusResolve = () => {};\n\n    window.addEventListener('blur', () => {\n      this.isIdle = true;\n\n      window.addEventListener('focus', () => {\n        this.isIdle = false;\n      }, {once: true});\n    });\n\n    // * Prevent setting online after reloading page\n    window.addEventListener(FOCUS_EVENT_NAME, () => {\n      this.isIdle = false;\n    }, {once: true, passive: true});\n\n    this.addEventListener('change', (idle) => {\n      if(idle) {\n        this.focusPromise = new Promise((resolve) => {\n          this.focusResolve = resolve;\n        });\n      } else {\n        this.focusResolve();\n      }\n    });\n  }\n\n  public getFocusPromise() {\n    return this.focusPromise;\n  }\n\n  public get isIdle() {\n    return this._isIdle;\n  }\n\n  public set isIdle(value: boolean) {\n    if(this._isIdle === value) {\n      return;\n    }\n\n    if(DO_NOT_IDLE && value) {\n      return;\n    }\n\n    this._isIdle = value;\n    this.dispatchEvent('change', value);\n  }\n}\n\nconst idleController = new IdleController();\nexport default idleController;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport App from '../../config/app';\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport tabId from '../../config/tabId';\nimport IS_SHARED_WORKER_SUPPORTED from '../../environment/sharedWorkerSupport';\nimport EventListenerBase from '../../helpers/eventListenerBase';\nimport idleController from '../../helpers/idleController';\nimport {logger} from '../logger';\nimport rootScope from '../rootScope';\nimport sessionStorage from '../sessionStorage';\nimport apiManagerProxy from './mtprotoworker';\n\nexport type AppInstance = {\n  id: number,\n  idle: boolean,\n  time: number\n};\n\nexport type InstanceDeactivateReason = 'version' | 'tabs';\n\nconst CHECK_INSTANCE_INTERVAL = 5000;\nconst DEACTIVATE_TIMEOUT = 30000;\nconst MULTIPLE_TABS_THRESHOLD = 20000;\nconst IS_MULTIPLE_TABS_SUPPORTED = IS_SHARED_WORKER_SUPPORTED;\n\nexport class SingleInstance extends EventListenerBase<{\n  activated: () =>  void,\n  deactivated: (reason: InstanceDeactivateReason) => void\n}> {\n  private instanceId: number;\n  private started: boolean;\n  private masterInstance: boolean;\n  private deactivateTimeout: number;\n  private deactivated: InstanceDeactivateReason;\n  private log = logger('INSTANCE');\n\n  constructor() {\n    super(false);\n\n    this.log = logger('INSTANCE');\n    this.instanceId = tabId;\n  }\n\n  public get deactivatedReason() {\n    return this.deactivated;\n  }\n\n  public start() {\n    this.reset();\n\n    if(!this.started/*  && !Config.Navigator.mobile && !Config.Modes.packed */) {\n      this.started = true;\n\n      idleController.addEventListener('change', this.checkInstance);\n      setInterval(this.checkInstance, CHECK_INSTANCE_INTERVAL);\n      this.checkInstance();\n\n      try {\n        document.documentElement.addEventListener('beforeunload', this.clearInstance);\n      } catch(e) {}\n    }\n  }\n\n  private reset() {\n    this.masterInstance = false;\n    this.clearDeactivateTimeout();\n    this.deactivated = undefined;\n  }\n\n  private clearInstance = () => {\n    if(this.masterInstance && !this.deactivated) {\n      this.log.warn('clear master instance');\n      sessionStorage.delete('xt_instance');\n    }\n  };\n\n  public activateInstance() {\n    if(this.deactivated) {\n      this.reset();\n      this.checkInstance(false);\n      this.dispatchEvent('activated');\n    }\n  }\n\n  private deactivateInstance(reason: InstanceDeactivateReason) {\n    if(this.masterInstance || this.deactivated) {\n      return;\n    }\n\n    this.log.warn('deactivate', reason);\n    this.clearDeactivateTimeout();\n    this.deactivated = reason;\n\n    this.dispatchEvent('deactivated', reason);\n  }\n\n  private clearDeactivateTimeout() {\n    if(this.deactivateTimeout) {\n      clearTimeout(this.deactivateTimeout);\n      this.deactivateTimeout = 0;\n    }\n  }\n\n  private checkInstance = async(idle = idleController.isIdle) => {\n    if(this.deactivated) {\n      return;\n    }\n\n    const time = Date.now();\n    const newInstance: AppInstance = {\n      id: this.instanceId,\n      idle,\n      time\n    };\n\n    const [curInstance, build = App.build] = await Promise.all([\n      sessionStorage.get('xt_instance', false),\n      sessionStorage.get('k_build', false)\n    ]);\n\n    if(build > App.build) {\n      this.masterInstance = false;\n      rootScope.managers.networkerFactory.stopAll();\n      this.deactivateInstance('version');\n      apiManagerProxy.toggleStorages(false, false);\n      return;\n    } else if(IS_MULTIPLE_TABS_SUPPORTED) {\n      sessionStorage.set({xt_instance: newInstance});\n      return;\n    }\n\n    // this.log('check instance', newInstance, curInstance)\n    if(!idle ||\n        !curInstance ||\n        curInstance.id === this.instanceId ||\n        curInstance.time < (time - MULTIPLE_TABS_THRESHOLD)) {\n      sessionStorage.set({xt_instance: newInstance});\n\n      if(!this.masterInstance) {\n        this.masterInstance = true;\n        rootScope.managers.networkerFactory.startAll();\n        this.log.warn('now master instance', newInstance);\n      }\n\n      this.clearDeactivateTimeout();\n    } else if(this.masterInstance) {\n      this.masterInstance = false;\n      rootScope.managers.networkerFactory.stopAll();\n      this.log.warn('now idle instance', newInstance);\n      this.deactivateTimeout ||= window.setTimeout(() => this.deactivateInstance('tabs'), DEACTIVATE_TIMEOUT);\n    }\n  };\n}\n\nconst singleInstance = new SingleInstance();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.singleInstance = singleInstance);\nexport default singleInstance;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MESSAGE_ID_OFFSET} from '../../../mtproto/mtproto_config';\n\nexport default function clearMessageId(messageId: number, toServer?: boolean) {\n  if(messageId === undefined) {\n    return;\n  }\n\n  messageId = +messageId.toFixed(0);\n  if(!toServer) {\n    return messageId;\n  }\n\n  return messageId < MESSAGE_ID_OFFSET ? messageId : messageId % MESSAGE_ID_OFFSET;\n  // const q = MESSAGE_ID_OFFSET;\n  // if(messageId < q) { // id 0 -> mid 0xFFFFFFFF, so 0xFFFFFFFF must convert to 0\n  //   return messageId;\n  // }\n\n  // const l = MESSAGE_ID_INCREMENT - 1;\n  // const used = messageId & l;\n  // if(used !== l) {\n  //   messageId -= used + 1;\n  // }\n\n  // return toServer ? (messageId - q) / MESSAGE_ID_INCREMENT : messageId;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport clearMessageId from './clearMessageId';\n\n/**\n * * will ignore outgoing offset\n */\nexport default function getServerMessageId(messageId: number) {\n  return clearMessageId(messageId, true);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport type {PushNotificationObject} from '../serviceWorker/push';\nimport type {ServicePushPingTaskPayload} from '../serviceWorker/serviceMessagePort';\nimport type {NotificationSettings} from '../appManagers/uiNotificationsManager';\nimport type ServiceMessagePort from '../serviceWorker/serviceMessagePort';\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport {logger} from '../logger';\nimport I18n, {LangPackKey} from '../langPack';\nimport {IS_MOBILE} from '../../environment/userAgent';\nimport appRuntimeManager from '../appManagers/appRuntimeManager';\nimport copy from '../../helpers/object/copy';\nimport singleInstance from './singleInstance';\nimport EventListenerBase from '../../helpers/eventListenerBase';\nimport getServerMessageId from '../appManagers/utils/messageId/getServerMessageId';\n\nexport type PushSubscriptionNotifyType = 'init' | 'subscribe' | 'unsubscribe';\nexport type PushSubscriptionNotifyEvent = `push_${PushSubscriptionNotifyType}`;\n\nexport type PushSubscriptionNotify = {\n  tokenType: number,\n  tokenValue: string\n};\n\nconst PING_PUSH_INTERVAL = 10000;\n\nexport class WebPushApiManager extends EventListenerBase<{\n  push_notification_click: (n: PushNotificationObject) => void,\n  push_init: (n: PushSubscriptionNotify) => void,\n  push_subscribe: (n: PushSubscriptionNotify) => void,\n  push_unsubscribe: (n: PushSubscriptionNotify) => void\n}> {\n  public isAvailable = true;\n  private isPushEnabled = false;\n  private localNotificationsAvailable = true;\n  private started = false;\n  private settings: NotificationSettings & {baseUrl?: string} = {} as any;\n  private isAliveTO: any;\n  private isFirefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;\n  private userVisibleOnly = this.isFirefox ? false : true;\n  private log = logger('PUSH-API');\n\n  public serviceMessagePort: ServiceMessagePort<true>;\n\n  constructor() {\n    super(false);\n\n    if(!('PushManager' in window) ||\n      !('Notification' in window) ||\n      !('serviceWorker' in navigator)) {\n      this.log.warn('Push messaging is not supported.');\n      this.isAvailable = false;\n      this.localNotificationsAvailable = false;\n    }\n\n    if(this.isAvailable && Notification.permission === 'denied') {\n      this.log.warn('The user has blocked notifications.');\n    }\n  }\n\n  public start() {\n    if(!this.started) {\n      this.started = true;\n      this.getSubscription();\n      this.setUpServiceWorkerChannel();\n    }\n  }\n\n  public setLocalNotificationsDisabled() {\n    this.localNotificationsAvailable = false;\n  }\n\n  public getSubscription() {\n    if(!this.isAvailable) {\n      return;\n    }\n\n    navigator.serviceWorker.ready.then((reg) => {\n      reg.pushManager.getSubscription().then((subscription) => {\n        this.isPushEnabled = !!subscription;\n        this.pushSubscriptionNotify('init', subscription);\n      }).catch((err) => {\n        this.log.error('Error during getSubscription()', err);\n      });\n    });\n  }\n\n  public subscribe = () => {\n    if(!this.isAvailable) {\n      return;\n    }\n\n    navigator.serviceWorker.ready.then((reg) => {\n      reg.pushManager.subscribe({userVisibleOnly: this.userVisibleOnly}).then((subscription) => {\n        // The subscription was successful\n        this.isPushEnabled = true;\n        this.pushSubscriptionNotify('subscribe', subscription);\n      }).catch((e) => {\n        if(Notification.permission === 'denied') {\n          this.log('Permission for Notifications was denied');\n        } else {\n          this.log('Unable to subscribe to push.', e);\n          if(!this.userVisibleOnly) {\n            this.userVisibleOnly = true;\n            setTimeout(this.subscribe, 0);\n          }\n        }\n      });\n    });\n  }\n\n  public unsubscribe() {\n    if(!this.isAvailable) {\n      return;\n    }\n\n    navigator.serviceWorker.ready.then((reg) => {\n      reg.pushManager.getSubscription().then((subscription) => {\n        this.isPushEnabled = false;\n\n        if(subscription) {\n          this.pushSubscriptionNotify('unsubscribe', subscription);\n\n          setTimeout(() => {\n            subscription.unsubscribe().then((successful) => {\n              this.isPushEnabled = false;\n            }).catch((e) => {\n              this.log.error('Unsubscription error: ', e);\n            });\n          }, 3000);\n        }\n      }).catch((e) => {\n        this.log.error('Error thrown while unsubscribing from ' +\n          'push messaging.', e);\n      });\n    });\n  }\n\n  public forceUnsubscribe() {\n    if(!this.isAvailable) {\n      return;\n    }\n\n    navigator.serviceWorker.ready.then((reg) => {\n      reg.pushManager.getSubscription().then((subscription) => {\n        this.log.warn('force unsubscribe', subscription);\n        if(!subscription) {\n          return;\n        }\n\n        subscription.unsubscribe().then((successful) => {\n          this.log.warn('force unsubscribe successful', successful);\n          this.isPushEnabled = false;\n        }).catch((e) => {\n          this.log.error('Unsubscription error: ', e);\n        });\n      }).catch((e) => {\n        this.log.error('Error thrown while unsubscribing from ' +\n          'push messaging.', e);\n      });\n    });\n  }\n\n  public isAliveNotify = () => {\n    if(!this.isAvailable || singleInstance.deactivatedReason) {\n      return;\n    }\n\n    this.settings.baseUrl = (location.href || '').replace(/#.*$/, '');\n\n    const lang: ServicePushPingTaskPayload['lang'] = {} as any;\n    const ACTIONS_LANG_MAP: Record<keyof ServicePushPingTaskPayload['lang'], LangPackKey> = {\n      push_action_mute1d: IS_MOBILE ? 'PushNotification.Action.Mute1d.Mobile' : 'PushNotification.Action.Mute1d',\n      push_action_settings: IS_MOBILE ? 'PushNotification.Action.Settings.Mobile' : 'PushNotification.Action.Settings',\n      push_message_nopreview: 'PushNotification.Message.NoPreview'\n    };\n\n    for(const action in ACTIONS_LANG_MAP) {\n      lang[action as keyof typeof ACTIONS_LANG_MAP] = I18n.format(ACTIONS_LANG_MAP[action as keyof typeof ACTIONS_LANG_MAP], true);\n    }\n\n    this.serviceMessagePort.invokeVoid('pushPing', {\n      localNotifications: this.localNotificationsAvailable,\n      lang: lang,\n      settings: this.settings\n    });\n\n    this.isAliveTO = setTimeout(this.isAliveNotify, PING_PUSH_INTERVAL);\n  }\n\n  public setSettings(newSettings: WebPushApiManager['settings']) {\n    this.settings = copy(newSettings);\n    clearTimeout(this.isAliveTO);\n    this.isAliveNotify();\n  }\n\n  public hidePushNotifications() {\n    if(!this.isAvailable) {\n      return;\n    }\n\n    this.serviceMessagePort.invokeVoid('notificationsClear', undefined);\n  }\n\n  public setUpServiceWorkerChannel() {\n    if(!this.isAvailable) {\n      return;\n    }\n\n    this.serviceMessagePort.addEventListener('pushClick', (payload) => {\n      if(singleInstance.deactivatedReason) {\n        appRuntimeManager.reload();\n        return;\n      }\n\n      this.dispatchEvent('push_notification_click', payload);\n    });\n\n    navigator.serviceWorker.ready.then(this.isAliveNotify);\n  }\n\n  public pushSubscriptionNotify(event: PushSubscriptionNotifyType, subscription?: PushSubscription) {\n    if(subscription) {\n      const subscriptionObj: PushSubscriptionJSON = subscription.toJSON();\n      if(!subscriptionObj ||\n        !subscriptionObj.endpoint ||\n        !subscriptionObj.keys ||\n        !subscriptionObj.keys.p256dh ||\n        !subscriptionObj.keys.auth) {\n        this.log.warn('Invalid push subscription', subscriptionObj);\n        this.unsubscribe();\n        this.isAvailable = false;\n        this.pushSubscriptionNotify(event);\n        return;\n      }\n\n      this.log.warn('Push', event, subscriptionObj);\n      this.dispatchEvent(('push_' + event) as PushSubscriptionNotifyEvent, {\n        tokenType: 10,\n        tokenValue: JSON.stringify(subscriptionObj)\n      });\n    } else {\n      this.log.warn('Push', event, false);\n      this.dispatchEvent(('push_' + event) as PushSubscriptionNotifyEvent, false as any);\n    }\n  }\n\n  public ignorePushByMid(peerId: PeerId, mid: number) {\n    if(!this.isAvailable) {\n      return;\n    }\n\n    this.serviceMessagePort.invokeVoid('shownNotification', peerId + '_' + getServerMessageId(mid));\n  }\n}\n\nconst webPushApiManager = new WebPushApiManager();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.webPushApiManager = webPushApiManager);\nexport default webPushApiManager;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nexport default function loadScript(url: string) {\n  const script = document.createElement('script');\n  const promise = new Promise<HTMLScriptElement>((resolve) => {\n    script.onload = script.onerror = () => {\n      resolve(script);\n    };\n  });\n  script.src = url;\n  document.body.appendChild(script);\n  return promise;\n}\n","export default function tsNow(seconds?: true) {\n  const t = Date.now();\n  return seconds ? t / 1000 | 0 : t;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport App from '../../config/app';\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport Modes from '../../config/modes';\nimport loadScript from '../../helpers/dom/loadScript';\nimport tsNow from '../../helpers/tsNow';\nimport sessionStorage from '../sessionStorage';\n\nexport class TelegramMeWebManager {\n  private disabled = /* false &&  */(Modes.test || !App.domains.includes(location.hostname));\n\n  public setAuthorized(canRedirect: boolean) {\n    if(this.disabled) {\n      return;\n    }\n\n    return sessionStorage.get('tgme_sync').then((curValue) => {\n      const ts = tsNow(true);\n      if(\n        canRedirect &&\n        curValue?.canRedirect === canRedirect &&\n        (curValue.ts + 86400) > ts\n      ) {\n        return;\n      }\n\n      sessionStorage.set({\n        tgme_sync: {\n          canRedirect,\n          ts\n        }\n      });\n\n      const path = `_websync_?authed=${canRedirect ? '1' : '0'}&version=${encodeURIComponent(App.version + ' ' + App.suffix)}`;\n      const urls = [\n        '//telegram.me/' + path,\n        '//t.me/' + path\n      ];\n\n      const promises = urls.map((url) => {\n        return loadScript(url).then((script) => {\n          script.remove();\n        });\n      });\n\n      return Promise.all(promises);\n    });\n  }\n}\n\nconst telegramMeWebManager = new TelegramMeWebManager();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.telegramMeWebManager = telegramMeWebManager);\nexport default telegramMeWebManager;\n","import {IS_FIREFOX} from './userAgent';\n\nconst IS_WEBRTC_SUPPORTED = !!(typeof(RTCPeerConnection) !== 'undefined' && !IS_FIREFOX);\n\nexport default IS_WEBRTC_SUPPORTED;\n","import IS_WEBRTC_SUPPORTED from './webrtcSupport';\n\nconst IS_CALL_SUPPORTED = IS_WEBRTC_SUPPORTED;\n\nexport default IS_CALL_SUPPORTED;\n","import {IS_SAFARI} from './userAgent';\n\n/*\n * This is used as a workaround for a memory leak in Safari caused by using Transferable objects to\n * transfer data between WebWorkers and the main thread.\n * https://github.com/mapbox/mapbox-gl-js/issues/8771\n *\n * This should be removed once the underlying Safari issue is fixed.\n */\n\nlet CAN_USE_TRANSFERABLES: boolean;\nif(!IS_SAFARI) CAN_USE_TRANSFERABLES = true;\nelse {\n  try {\n    const match = navigator.userAgent.match(/Version\\/(.+?) /);\n    CAN_USE_TRANSFERABLES = +match[1] >= 14;\n  } catch(err) {\n    CAN_USE_TRANSFERABLES = false;\n  }\n}\n\nexport default CAN_USE_TRANSFERABLES;\n","const IS_CANVAS_FILTER_SUPPORTED = 'filter' in (document.createElement('canvas').getContext('2d') || {});\n\nexport default IS_CANVAS_FILTER_SUPPORTED;\n","const IS_GEOLOCATION_SUPPORTED = !!navigator?.geolocation?.getCurrentPosition && false;\n\nexport default IS_GEOLOCATION_SUPPORTED;\n","import IS_WEBRTC_SUPPORTED from './webrtcSupport';\n\nconst IS_GROUP_CALL_SUPPORTED = IS_WEBRTC_SUPPORTED;\n\nexport default IS_GROUP_CALL_SUPPORTED;\n","const IS_WEBP_SUPPORTED = document.createElement('canvas').toDataURL('image/webp').startsWith('data:image/webp');\n\nexport default IS_WEBP_SUPPORTED;\n","import IS_WEBP_SUPPORTED from './webpSupport';\n\nconst IMAGE_MIME_TYPES_SUPPORTED = new Set([\n  'image/jpeg',\n  'image/png',\n  'image/bmp'\n]);\n\nif(IS_WEBP_SUPPORTED) {\n  IMAGE_MIME_TYPES_SUPPORTED.add('image/webp');\n}\n\nconst possible: [string, string][] = [\n  ['image/jxl', 'data:image/jxl;base64,/woIAAAMABKIAgC4AF3lEgAAFSqjjBu8nOv58kOHxbSN6wxttW1hSaLIODZJJ3BIEkkaoCUzGM6qJAE='],\n  ['image/avif', 'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=']\n];\n\nconst promises = possible.map(([mime, data]) => {\n  const img = new Image();\n  const promise = new Promise<string>((resolve) => {\n    img.onload = img.onerror = () => {\n      const supported = img.height === 2;\n      resolve(supported ? mime : undefined);\n    };\n  });\n  img.src = data;\n  return promise;\n});\n\nexport const IMAGE_MIME_TYPES_SUPPORTED_PROMISE = Promise.all(promises).then((mimeTypes) => mimeTypes.filter(Boolean));\n\nexport default IMAGE_MIME_TYPES_SUPPORTED;\n","import {IS_SAFARI, IS_APPLE_MOBILE} from './userAgent';\n\nconst video = document.createElement('video');\nconst IS_WEBM_SUPPORTED = !!video.canPlayType('video/webm') && !IS_SAFARI && !IS_APPLE_MOBILE;\n// mov is not supported in Chrome on macOS\nconst IS_MOV_SUPPORTED = !!video.canPlayType('video/quicktime') || IS_SAFARI || IS_APPLE_MOBILE;\nconst IS_H265_SUPPORTED = !!video.canPlayType('video/mp4; codecs=\"hev1\"');\n\nexport {\n  IS_WEBM_SUPPORTED,\n  IS_MOV_SUPPORTED,\n  IS_H265_SUPPORTED\n};\n","import {IS_MOV_SUPPORTED} from './videoSupport';\n\nexport type VIDEO_MIME_TYPE = 'image/gif' | 'video/mp4' | 'video/webm' | 'video/quicktime';\nconst VIDEO_MIME_TYPES_SUPPORTED: Set<VIDEO_MIME_TYPE> = new Set([\n  'image/gif', // have to display it as video\n  'video/mp4',\n  'video/webm'\n]);\n\nif(IS_MOV_SUPPORTED) {\n  VIDEO_MIME_TYPES_SUPPORTED.add('video/quicktime');\n}\n\nexport default VIDEO_MIME_TYPES_SUPPORTED;\n","import IMAGE_MIME_TYPES_SUPPORTED from './imageMimeTypesSupport';\nimport VIDEO_MIME_TYPES_SUPPORTED from './videoMimeTypesSupport';\n\nconst arr = [...IMAGE_MIME_TYPES_SUPPORTED].concat([...VIDEO_MIME_TYPES_SUPPORTED]);\n\nconst MEDIA_MIME_TYPES_SUPPORTED = new Set(arr);\n\nexport default MEDIA_MIME_TYPES_SUPPORTED;\n","import {IS_FIREFOX} from './userAgent';\n\nconst IS_PARALLAX_SUPPORTED = !IS_FIREFOX && false;\n\nexport default IS_PARALLAX_SUPPORTED;\n","const IS_SCREEN_SHARING_SUPPORTED = !!('getDisplayMedia' in (navigator?.mediaDevices || {}));\n\nexport default IS_SCREEN_SHARING_SUPPORTED;\n","const IS_VIBRATE_SUPPORTED = !!navigator?.vibrate;\n\nexport default IS_VIBRATE_SUPPORTED;\n","const audio = document.createElement('audio');\nconst IS_OPUS_SUPPORTED = !!(audio.canPlayType && audio.canPlayType('audio/ogg;').replace(/no/, ''))/*  && false */;\n\nexport default IS_OPUS_SUPPORTED;\n","let IS_APPLE_MX = false;\n\ntry {\n  // Awesome detect from https://stackoverflow.com/a/65412357\n  const ctx = document.createElement('canvas').getContext('webgl');\n  const extension = ctx.getExtension('WEBGL_debug_renderer_info');\n  const renderer: string = extension && ctx.getParameter(extension.UNMASKED_RENDERER_WEBGL) || '';\n  if((renderer.match(/Apple/) && !renderer.match(/Apple GPU/)) ||\n    ctx.getSupportedExtensions().indexOf('WEBGL_compressed_texture_s3tc_srgb') === -1) {\n    IS_APPLE_MX = true;\n  }\n} catch(err) {\n\n}\n\nexport default IS_APPLE_MX;\n","const IS_LIVE_STREAM_SUPPORTED = 'serviceWorker' in navigator;\n\nexport default IS_LIVE_STREAM_SUPPORTED;\n","import IS_CALL_SUPPORTED from './callSupport';\nimport CAN_USE_TRANSFERABLES from './canUseTransferables';\nimport IS_CANVAS_FILTER_SUPPORTED from './canvasFilterSupport';\nimport IS_EMOJI_SUPPORTED from './emojiSupport';\nimport IS_GEOLOCATION_SUPPORTED from './geolocationSupport';\nimport IS_GROUP_CALL_SUPPORTED from './groupCallSupport';\nimport IMAGE_MIME_TYPES_SUPPORTED from './imageMimeTypesSupport';\nimport MEDIA_MIME_TYPES_SUPPORTED from './mediaMimeTypesSupport';\nimport IS_PARALLAX_SUPPORTED from './parallaxSupport';\nimport IS_SCREEN_SHARING_SUPPORTED from './screenSharingSupport';\nimport IS_TOUCH_SUPPORTED from './touchSupport';\nimport IS_VIBRATE_SUPPORTED from './vibrateSupport';\nimport VIDEO_MIME_TYPES_SUPPORTED from './videoMimeTypesSupport';\nimport IS_WEBP_SUPPORTED from './webpSupport';\nimport IS_WEBRTC_SUPPORTED from './webrtcSupport';\nimport * as userAgent from './userAgent';\nimport IS_OPUS_SUPPORTED from './opusSupport';\nimport IS_SHARED_WORKER_SUPPORTED from './sharedWorkerSupport';\nimport IS_APPLE_MX from './appleMx';\nimport IS_LIVE_STREAM_SUPPORTED from './liveStreamSupport';\nimport * as IS_VIDEO_SUPPORTED from './videoSupport';\n\nconst ENVIRONMENT = {\n  CAN_USE_TRANSFERABLES,\n  IS_APPLE_MX,\n  IS_CALL_SUPPORTED,\n  IS_CANVAS_FILTER_SUPPORTED,\n  IS_EMOJI_SUPPORTED,\n  IS_GEOLOCATION_SUPPORTED,\n  IS_GROUP_CALL_SUPPORTED,\n  IS_PARALLAX_SUPPORTED,\n  IS_SCREEN_SHARING_SUPPORTED,\n  IS_TOUCH_SUPPORTED,\n  ...IS_VIDEO_SUPPORTED,\n  IS_VIBRATE_SUPPORTED,\n  IS_OPUS_SUPPORTED,\n  IS_SHARED_WORKER_SUPPORTED,\n  IS_WEBP_SUPPORTED,\n  IS_WEBRTC_SUPPORTED,\n  IS_LIVE_STREAM_SUPPORTED,\n  IMAGE_MIME_TYPES_SUPPORTED,\n  MEDIA_MIME_TYPES_SUPPORTED,\n  VIDEO_MIME_TYPES_SUPPORTED,\n  ...userAgent\n};\n\nexport default ENVIRONMENT;\n","// https://stackoverflow.com/a/61676104\nexport default function getTimeFormat(): 'h12' | 'h23' {\n  const t = document.createElement('input');\n  t.type = 'time';\n  t.value = '15:00';\n  t.style.visibility = 'hidden';\n  document.body.append(t);\n  const offsetWidth = t.offsetWidth;\n  t.remove();\n  const timeFormat = offsetWidth > 110 ? 'h12' : 'h23';\n  // console.log('timeFormat', timeFormat, offsetWidth);\n  return timeFormat;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {LiteModeKey} from '../helpers/liteMode';\nimport type {AppMediaPlaybackController} from '../components/appMediaPlaybackController';\nimport type {TopPeerType, MyTopPeer} from '../lib/appManagers/appUsersManager';\nimport type {AccountThemes, AutoDownloadSettings, BaseTheme, NotifyPeer, PeerNotifySettings, Theme, ThemeSettings, WallPaper} from '../layer';\nimport type DialogsStorage from '../lib/storages/dialogs';\nimport type FiltersStorage from '../lib/storages/filters';\nimport type {AuthState, Modify} from '../types';\nimport {IS_MOBILE} from '../environment/userAgent';\nimport getTimeFormat from '../helpers/getTimeFormat';\nimport {nextRandomUint} from '../helpers/random';\nimport App from './app';\nimport {MTAppConfig} from '../lib/mtproto/appConfig';\n\nconst STATE_VERSION = App.version;\nconst BUILD = App.build;\n\n// ! DEPRECATED\nexport type Background = {\n  type?: 'color' | 'image' | 'default', // ! DEPRECATED\n  blur: boolean,\n  highlightingColor?: string,\n  color?: string,\n  slug?: string,        // image slug\n  intensity?: number,   // pattern intensity\n  id: string | number,  // wallpaper id\n};\n\nexport type AppTheme = Modify<Theme, {\n  name: 'day' | 'night' | 'system',\n  settings?: Modify<ThemeSettings, {\n    highlightingColor: string\n  }>\n}>;\n\nexport type AutoDownloadPeerTypeSettings = {\n  contacts: boolean,\n  private: boolean,\n  groups: boolean,\n  channels: boolean\n};\n\nexport type StateSettings = {\n  messagesTextSize: number,\n  distanceUnit: 'kilometers' | 'miles',\n  sendShortcut: 'enter' | 'ctrlEnter',\n  animationsEnabled?: boolean, // ! DEPRECATED\n  autoDownload: {\n    contacts?: boolean, // ! DEPRECATED\n    private?: boolean, // ! DEPRECATED\n    groups?: boolean, // ! DEPRECATED\n    channels?: boolean, // ! DEPRECATED\n    photo: AutoDownloadPeerTypeSettings,\n    video: AutoDownloadPeerTypeSettings,\n    file: AutoDownloadPeerTypeSettings\n  },\n  autoDownloadNew: AutoDownloadSettings,\n  autoPlay?: { // ! DEPRECATED\n    gifs: boolean,\n    videos: boolean\n  },\n  stickers: {\n    suggest: 'all' | 'installed' | 'none',\n    dynamicPackOrder: boolean,\n    loop: boolean\n  },\n  emoji: {\n    suggest: boolean,\n    big: boolean\n  },\n  background?: Background, // ! DEPRECATED\n  themes: AppTheme[],\n  theme: AppTheme['name'],\n  notifications: {\n    sound: boolean\n  },\n  nightTheme?: boolean, // ! DEPRECATED\n  timeFormat: 'h12' | 'h23',\n  liteMode: {[key in LiteModeKey]: boolean},\n  savedAsForum: boolean,\n  notifyAllAccounts: boolean,\n  tabsInSidebar: boolean\n};\n\nexport type State = {\n  allDialogsLoaded: DialogsStorage['allDialogsLoaded'],\n  pinnedOrders: DialogsStorage['pinnedOrders'],\n  // contactsList: UserId[],\n  contactsListCachedTime: number,\n  updates: Partial<{\n    seq: number,\n    pts: number,\n    date: number\n  }>,\n  // filters?: FiltersStorage['filters'], // ! DEPRECATED\n  filtersArr?: FiltersStorage['filtersArr'],\n  maxSeenMsgId: number,\n  stateCreatedTime: number,\n  recentEmoji: string[],\n  recentCustomEmoji: DocId[],\n  topPeersCache: {\n    [type in TopPeerType]?: {\n      peers: MyTopPeer[],\n      cachedTime: number\n    }\n  },\n  recentSearch: PeerId[],\n  version: typeof STATE_VERSION,\n  build: typeof BUILD,\n  authState: AuthState,\n  hiddenPinnedMessages: {[peerId: PeerId]: number},\n  playbackParams: ReturnType<AppMediaPlaybackController['getPlaybackParams']>,\n  chatContextMenuHintWasShown: boolean,\n  hideChatJoinRequests: {[peerId: PeerId]: number},\n  // stateId?: number, // ! DEPRECATED\n  notifySettings: {[k in Exclude<NotifyPeer['_'], 'notifyPeer'>]?: PeerNotifySettings.peerNotifySettings},\n  confirmedWebViews: BotId[],\n  seenTooltips: {\n    storySound: boolean\n  },\n  hiddenSimilarChannels: number[],\n  appConfig: MTAppConfig,\n  accountThemes: AccountThemes.accountThemes,\n  translations: {\n    peers: {[peerId: PeerId]: string},\n    enabledPeers: {[peerId: PeerId]: boolean},\n    enabled: boolean,\n    showInMenu: boolean,\n    doNotTranslate: TranslatableLanguageISO[]\n  },\n  shownUploadSpeedTimestamp?: number,\n  settings?: StateSettings // ! DEPRECATED, BUT DON'T REMOVE BEFORE FULL MIGRATION\n};\n\nexport type CommonState = {\n  settings: StateSettings\n};\n\n// const BACKGROUND_DAY_MOBILE: Background = {\n//   blur: false,\n//   slug: '',\n//   color: '#dbddbb,#6ba587,#d5d88d,#88b884',\n//   highlightingColor: 'hsla(86.4, 43.846153%, 45.117647%, .4)',\n//   intensity: 0,\n//   id: '1'\n// };\n\n// const BACKGROUND_NIGHT_MOBILE: Background = {\n//   blur: false,\n//   slug: '',\n//   color: '#0f0f0f',\n//   highlightingColor: 'hsla(0, 0%, 3.82353%, 0.4)',\n//   intensity: 0,\n//   id: '-1'\n// };\n\nexport const DEFAULT_THEME: Theme = {\n  _: 'theme',\n  access_hash: '',\n  id: '',\n  settings: [{\n    _: 'themeSettings',\n    pFlags: {},\n    base_theme: {_: 'baseThemeClassic'},\n    accent_color: 0x3390ec,\n    message_colors: [0x5CA853],\n    wallpaper: {\n      _: 'wallPaper',\n      pFlags: {\n        default: true,\n        pattern: true\n      },\n      access_hash: '',\n      document: undefined,\n      id: '',\n      slug: 'pattern',\n      settings: {\n        _: 'wallPaperSettings',\n        pFlags: {},\n        intensity: 50,\n        background_color: 0xdbddbb,\n        second_background_color: 0x6ba587,\n        third_background_color: 0xd5d88d,\n        fourth_background_color: 0x88b884\n      }\n    }\n  }, {\n    _: 'themeSettings',\n    pFlags: {},\n    base_theme: {_: 'baseThemeNight'},\n    accent_color: 0x8774E1,\n    message_colors: [0x8774E1],\n    wallpaper: {\n      _: 'wallPaper',\n      pFlags: {\n        default: true,\n        pattern: true,\n        dark: true\n      },\n      access_hash: '',\n      document: undefined,\n      id: '',\n      slug: 'pattern',\n      settings: {\n        _: 'wallPaperSettings',\n        pFlags: {},\n        intensity: -50,\n        background_color: 0xfec496,\n        second_background_color: 0xdd6cb9,\n        third_background_color: 0x962fbf,\n        fourth_background_color: 0x4f5bd5\n      }\n    }\n  }],\n  slug: '',\n  title: '',\n  emoticon: '🏠',\n  pFlags: {default: true}\n};\n\nconst makeDefaultAppTheme = (\n  name: AppTheme['name'],\n  baseTheme: BaseTheme['_'],\n  highlightingColor: string\n): AppTheme => {\n  return {\n    ...DEFAULT_THEME,\n    name,\n    settings: {\n      ...DEFAULT_THEME.settings.find((s) => s.base_theme._ === baseTheme),\n      highlightingColor\n    }\n  };\n};\n\nexport const SETTINGS_INIT: StateSettings = {\n  messagesTextSize: 16,\n  distanceUnit: 'kilometers',\n  sendShortcut: 'enter',\n  autoDownload: {\n    photo: {\n      contacts: true,\n      private: true,\n      groups: true,\n      channels: true\n    },\n    video: {\n      contacts: true,\n      private: true,\n      groups: true,\n      channels: true\n    },\n    file: {\n      contacts: true,\n      private: true,\n      groups: true,\n      channels: true\n    }\n  },\n  autoDownloadNew: {\n    _: 'autoDownloadSettings',\n    file_size_max: 3145728,\n    pFlags: {\n      video_preload_large: true,\n      audio_preload_next: true\n    },\n    photo_size_max: 1048576,\n    video_size_max: 15728640,\n    video_upload_maxbitrate: 100,\n    small_queue_active_operations_max: 0,\n    large_queue_active_operations_max: 0\n  },\n  stickers: {\n    suggest: 'all',\n    dynamicPackOrder: true,\n    loop: true\n  },\n  emoji: {\n    suggest: true,\n    big: true\n  },\n  themes: [\n    makeDefaultAppTheme('day', 'baseThemeClassic', 'hsla(86.4, 43.846153%, 45.117647%, .4)'),\n    makeDefaultAppTheme('night', 'baseThemeNight', 'hsla(299.142857, 44.166666%, 37.470588%, .4)')\n  ],\n  theme: 'system',\n  notifications: {\n    sound: false\n  },\n  timeFormat: getTimeFormat(),\n  liteMode: {\n    all: false,\n    animations: false,\n    chat: false,\n    chat_background: false,\n    chat_spoilers: false,\n    effects: false,\n    effects_premiumstickers: false,\n    effects_reactions: false,\n    effects_emoji: false,\n    emoji: false,\n    emoji_messages: false,\n    emoji_panel: false,\n    gif: false,\n    stickers: false,\n    stickers_chat: false,\n    stickers_panel: false,\n    video: false\n  },\n  savedAsForum: false,\n  notifyAllAccounts: true,\n  tabsInSidebar: false\n};\n\nexport const STATE_INIT: State = {\n  allDialogsLoaded: {},\n  pinnedOrders: {},\n  // contactsList: [],\n  contactsListCachedTime: 0,\n  updates: {},\n  filtersArr: [],\n  maxSeenMsgId: 0,\n  stateCreatedTime: Date.now(),\n  recentEmoji: [],\n  recentCustomEmoji: [],\n  topPeersCache: {},\n  recentSearch: [],\n  version: STATE_VERSION,\n  build: BUILD,\n  authState: {\n    _: IS_MOBILE ? 'authStateSignIn' : 'authStateSignQr'\n  },\n  hiddenPinnedMessages: {},\n  playbackParams: {\n    volume: 1,\n    muted: false,\n    playbackRate: 1,\n    playbackRates: {\n      voice: 1,\n      video: 1,\n      audio: 1\n    },\n    loop: false,\n    round: false\n  },\n  chatContextMenuHintWasShown: false,\n  hideChatJoinRequests: {},\n  // stateId: nextRandomUint(32),\n  notifySettings: {},\n  confirmedWebViews: [],\n  seenTooltips: {\n    storySound: false\n  },\n  hiddenSimilarChannels: [],\n  appConfig: {} as any,\n  accountThemes: {} as any,\n  translations: {\n    peers: {},\n    enabledPeers: {},\n    enabled: true,\n    showInMenu: true,\n    doNotTranslate: []\n  }\n};\n\nexport const COMMON_STATE_INIT: CommonState = {\n  settings: SETTINGS_INIT\n};\n","export default function compareVersion(v1: string, v2: string): number {\n  v1 = v1.split(' ', 1)[0];\n  v2 = v2.split(' ', 1)[0];\n  const s1 = v1.split('.');\n  const s2 = v2.split('.');\n\n  for(let i = 0; i < s1.length; ++i) {\n    const v1 = +s1[i];\n    const v2 = +s2[i];\n    if(v1 > v2) return 1;\n    else if(v1 < v2) return -1;\n  }\n\n  return 0;\n}\n","export default function isObject<T extends Record<any, any>>(object: any): object is T {\n  return typeof(object) === 'object' && object !== null;\n}\n","import copy from './copy';\nimport isObject from './isObject';\n\nexport default function validateInitObject(\n  initObject: any,\n  currentObject: any,\n  onReplace?: (key: string) => void,\n  previousKey?: string,\n  ignorePaths?: Set<string>,\n  path?: string\n) {\n  for(const key in initObject) {\n    const _path = path ? `${path}.${key}` : key;\n    if(ignorePaths?.has(_path)) {\n      continue;\n    }\n\n    if(typeof(currentObject[key]) !== typeof(initObject[key])) {\n      currentObject[key] = copy(initObject[key]);\n      onReplace?.(previousKey || key);\n    } else if(isObject(initObject[key])) {\n      validateInitObject(initObject[key], currentObject[key], onReplace, previousKey || key, ignorePaths, _path);\n    }\n  }\n}\n","import {logger} from '../lib/logger';\nimport dT from './dT';\n\nexport function recordPromise<T extends Promise<any>>(promise: T, description: string, log?: ReturnType<typeof logger> | Console) {\n  const perf = performance.now();\n  (log || console).warn(dT(), 'start', description);\n  promise.then(() => {\n    (log || console).warn(dT(), 'end', description, performance.now() - perf);\n  });\n  return promise;\n}\n\nexport function recordPromiseBound(log: ReturnType<typeof logger> | Console) {\n  return (...args: [Parameters<typeof recordPromise>[0], Parameters<typeof recordPromise>[1]]) => {\n    return recordPromise(...args, log);\n  };\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {ChatSavedPosition} from './appManagers/appImManager';\nimport type {AppDraftsManager} from './appManagers/appDraftsManager';\nimport type {State} from '../config/state';\nimport AppStorage from './storage';\nimport {AccountDatabase, getDatabaseState, getOldDatabaseState} from '../config/databases/state';\nimport {ActiveAccountNumber} from './accounts/types';\n\nexport default class StateStorage extends AppStorage<{\n  chatPositions: {\n    [peerId_threadId: string]: ChatSavedPosition\n  },\n  drafts: AppDraftsManager['drafts']\n} & State, AccountDatabase> {\n  constructor(accountNumber: ActiveAccountNumber | 'old') {\n    const db = accountNumber === 'old' ?\n      getOldDatabaseState() :\n      getDatabaseState(accountNumber);\n\n    super(db, 'session');\n  }\n}\n","import {MOUNT_CLASS_TO} from '../../config/debug';\n\nimport sessionStorage from '../sessionStorage';\n\nimport {AccountSessionData, ActiveAccountNumber} from './types';\nimport {MAX_ACCOUNTS} from './constants';\nimport {TrueDcId} from '../../types';\nimport tsNow from '../../helpers/tsNow';\nimport App from '../../config/app';\n\nexport class AccountController {\n  static async getTotalAccounts() {\n    const promises = ([1, 2, 3, 4] as const).map((accountNumber) => sessionStorage.get(`account${accountNumber}`));\n\n    const allAccountsData = await Promise.all(promises);\n\n    return allAccountsData.filter((accountData) => !!accountData?.userId).length;\n  }\n\n  static async getUserIds() {\n    const promises = ([1, 2, 3, 4] as const).map((accountNumber) => sessionStorage.get(`account${accountNumber}`));\n\n    const allAccountsData = await Promise.all(promises);\n\n    return allAccountsData.map(accountData => accountData?.userId).filter(Boolean);\n  }\n\n  static async get(accountNumber: ActiveAccountNumber) {\n    const data = await sessionStorage.get(`account${accountNumber}`);\n    this.fillFingerprint(data);\n    return data;\n  }\n\n  static fillFingerprint(data: AccountSessionData) {\n    if(data && !data.auth_key_fingerprint) {\n      const key = `dc${App.baseDcId}_auth_key` as const;\n      const value = data[key];\n      data.auth_key_fingerprint = value ? data[key].slice(0, 8) : undefined;\n    }\n  }\n\n  static async update(accountNumber: ActiveAccountNumber, data: Partial<AccountSessionData>, overrideAll = false) {\n    const prevData = await this.get(accountNumber);\n    this.fillFingerprint(data as AccountSessionData);\n\n    const updatedData = {\n      ...(overrideAll ? {} : prevData),\n      ...data\n    };\n\n    await sessionStorage.set({\n      [`account${accountNumber}`]: updatedData\n    });\n\n    if(accountNumber === 1) {\n      await this.updateStorageForLegacy(updatedData);\n    }\n\n    return updatedData;\n  }\n\n  /**\n   * Shifts 4 -> 3, 3 -> 2 ... depending on which account you need to delete\n   * @param upTo Account to delete basically\n   */\n  static async shiftAccounts(upTo: ActiveAccountNumber) {\n    for(let i = upTo; i <= MAX_ACCOUNTS; i++) {\n      await sessionStorage.delete(`account${i as ActiveAccountNumber}`);\n      if(i < MAX_ACCOUNTS) {\n        const toMove = await this.get((i + 1) as ActiveAccountNumber);\n        toMove?.userId && (await this.update(i as ActiveAccountNumber, toMove, true));\n      }\n    }\n  }\n\n  static async updateStorageForLegacy(accountData: Partial<AccountSessionData>) {\n    const obj: Parameters<typeof sessionStorage['set']>[0] = {};\n    const toClear: (keyof typeof obj)[] = [];\n\n    const set = <T extends keyof typeof obj>(key: T, value: typeof obj[T]) => {\n      if(value) obj[key] = value;\n      else toClear.push(key);\n    };\n\n    for(let i = 1; i <= 5; i++) {\n      const authKeyKey = `dc${i as TrueDcId}_auth_key` as const;\n      const serverSaltKey = `dc${i as TrueDcId}_server_salt` as const;\n\n      set(authKeyKey, accountData[authKeyKey]);\n      set(serverSaltKey, accountData[serverSaltKey]);\n    }\n\n    accountData['auth_key_fingerprint'] && set('auth_key_fingerprint', accountData['auth_key_fingerprint']);\n    set('user_auth', accountData['userId'] && {\n      date: tsNow(true),\n      id: accountData.userId,\n      dcID: accountData.dcId || 0\n    });\n    set('dc', accountData.dcId);\n\n    await Promise.all([\n      sessionStorage.set(obj),\n      Promise.all(toClear.map((key) => sessionStorage.delete(key)))\n    ]);\n  }\n}\n\nMOUNT_CLASS_TO.AccountController = AccountController;\n\nexport default AccountController;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {Chat} from '../../../../layer';\nimport type {Dialog} from '../../appMessagesManager';\nimport type {User} from '../../appUsersManager';\nimport {AccountDatabase, getDatabaseState, getOldDatabaseState} from '../../../../config/databases/state';\nimport AppStorage from '../../../storage';\nimport {ActiveAccountNumber} from '../../../accounts/types';\n\nexport type StoragesStorages = {\n  users: AppStorage<Record<UserId, User>, AccountDatabase>,\n  chats: AppStorage<Record<ChatId, Chat>, AccountDatabase>,\n  dialogs: AppStorage<Record<PeerId, Dialog>, AccountDatabase>\n};\n\nexport default function createStorages(accountNumber: ActiveAccountNumber) {\n  const names: (keyof StoragesStorages)[] = ['users', 'chats', 'dialogs'];\n  const storages: StoragesStorages = {} as any;\n  for(const name of names) {\n    // @ts-ignore\n    storages[name] = new AppStorage(accountNumber === undefined ? getOldDatabaseState() : getDatabaseState(accountNumber), name);\n  }\n\n  console.log('createStorages typeof window', typeof window)\n\n  return storages;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport App from '../../../../config/app';\nimport DEBUG from '../../../../config/debug';\nimport {CommonState as StateCommon, State, COMMON_STATE_INIT, STATE_INIT} from '../../../../config/state';\nimport compareVersion from '../../../../helpers/compareVersion';\nimport copy from '../../../../helpers/object/copy';\nimport validateInitObject from '../../../../helpers/object/validateInitObject';\nimport {UserAuth} from '../../../mtproto/mtproto_config';\nimport sessionStorage from '../../../sessionStorage';\nimport {recordPromiseBound} from '../../../../helpers/recordPromise';\nimport {StoragesResults} from '../storages/loadStorages';\nimport {LogTypes, logger} from '../../../logger';\nimport {AccountSessionData, ActiveAccountNumber} from '../../../accounts/types';\nimport StateStorage from '../../../stateStorage';\nimport AccountController from '../../../accounts/accountController';\nimport commonStateStorage from '../../../commonStateStorage';\nimport {TrueDcId} from '../../../../types';\nimport {getOldDatabaseState} from '../../../../config/databases/state';\nimport {IDB} from '../../../files/idb';\nimport createStorages from '../storages/createStorages';\n\nexport type LoadStateResult = {\n  state: State,\n  common: StateCommon,\n  resetStorages: Map<keyof StoragesResults, (PeerId | UserId | ChatId)[]>,\n  newVersion: string,\n  oldVersion: string,\n  pushedKeys: (keyof State)[],\n  userId: UserId\n};\n\nconst TEST_MULTI_MIGRATION = false;\n\nconst REFRESH_EVERY = 24 * 60 * 60 * 1000; // 1 day\n// const REFRESH_EVERY = 1e3;\n// const REFRESH_EVERY_WEEK = 24 * 60 * 60 * 1000 * 7; // 7 days\n\nconst STATE_VERSION = STATE_INIT.version;\nconst BUILD = STATE_INIT.build;\n\nconst ALL_KEYS = Object.keys(STATE_INIT) as any as Array<keyof State>;\nconst COMMON_KEYS = Object.keys(COMMON_STATE_INIT) as any as Array<keyof StateCommon>;\n\nconst REFRESH_KEYS: Array<keyof State> = [\n  'contactsListCachedTime',\n  'stateCreatedTime',\n  'maxSeenMsgId',\n  'filtersArr'\n];\n\n// const REFRESH_KEYS_WEEK = ['dialogs', 'allDialogsLoaded', 'updates', 'pinnedOrders'] as any as Array<keyof State>;\n\nfunction AnyStateWriter<S>(log: ReturnType<typeof logger>, keys: string[], init: S) {\n  const pushedKeys: (keyof S)[] = [];\n  const pushToState = <T extends keyof S>(key: T, value: S[T]) => {\n    state[key] = value;\n    pushedKeys.push(key);\n  };\n\n  const replaceState = (_state: S) => {\n    pushedKeys.length = 0;\n    state = _state;\n    pushedKeys.push(...Object.keys(state) as any as typeof pushedKeys);\n  };\n\n  let state: S = {} as any;\n\n  const readFromArray = (arr: any[]) => {\n    // ! then can't store false values\n    for(let i = 0, length = keys.length; i < length; ++i) {\n      const key = keys[i];\n      const value = arr[i];\n      if(value !== undefined) {\n        // @ts-ignore\n        state[key] = value;\n      } else {\n        // @ts-ignore\n        pushToState(key, copy(init[key]));\n      }\n    }\n  };\n\n  return {\n    push: pushToState,\n    replace: replaceState,\n    readFromArray,\n    get state() {\n      return state;\n    },\n    set state(_state: S) {\n      state = _state;\n    },\n    pushedKeys,\n    log\n  };\n}\n\nfunction StateWriter(log: ReturnType<typeof logger>) {\n  const w = AnyStateWriter<State>(log, ALL_KEYS, STATE_INIT);\n\n  const resetStorages: Map<keyof StoragesResults, []> = new Map();\n  const resetState = ({\n    preserveKeys = []\n    // preserveCommonKeys = []\n  }: Partial<{\n    preserveKeys: (keyof State)[]\n    // preserveCommonKeys: typeof COMMON_KEYS[number][]\n  }> = {}) => {\n    preserveKeys.push('authState'/* , 'stateId' */);\n    const preserve: Map<keyof State, State[keyof State]> = new Map(\n      preserveKeys.map((key) => [key, w.state[key]])\n    );\n\n    w.state = copy(STATE_INIT);\n\n    preserve.forEach((value, key) => {\n      // @ts-ignore\n      w.state[key] = value;\n    });\n\n    const r: (keyof StoragesResults)[] = ['chats', 'dialogs', 'users'];\n    for(const key of r) {\n      resetStorages.set(key, []);\n    }\n\n    w.replace(w.state);\n  };\n\n  return {\n    ...w,\n    get state() {\n      return w.state;\n    },\n    set state(_state) {\n      w.state = _state;\n    },\n    resetStorages,\n    reset: resetState\n  };\n}\n\nfunction CommonStateWriter(log: ReturnType<typeof logger>) {\n  const w = AnyStateWriter<StateCommon>(log, COMMON_KEYS, COMMON_STATE_INIT);\n  return w;\n}\n\nconst STATE_STEPS = {\n  REFRESH: (writer: ReturnType<typeof StateWriter>) => {\n    const time = Date.now();\n    if((writer.state.stateCreatedTime + REFRESH_EVERY) < time) {\n      if(DEBUG) {\n        writer.log('will refresh state', writer.state.stateCreatedTime, time);\n      }\n\n      REFRESH_KEYS.forEach((key) => {\n        writer.push(key, copy(STATE_INIT[key]));\n      });\n    }\n  },\n  VALIDATE: (writer: ReturnType<typeof AnyStateWriter>) => {\n    const SKIP_VALIDATING_PATHS: Set<string> = new Set([\n      'settings.themes'\n    ]);\n    validateInitObject(STATE_INIT, writer.state, (missingKey) => {\n      writer.push(missingKey as keyof State, writer.state[missingKey as keyof State]);\n    }, undefined, SKIP_VALIDATING_PATHS);\n  },\n  VERSION: (writer: ReturnType<typeof StateWriter>) => {\n    let newVersion: string, oldVersion: string;\n    if(writer.state.version !== STATE_VERSION || writer.state.build !== BUILD/*  || true */) {\n      if(writer.state.build < 526) { // * drop all previous migrations\n        writer.reset();\n      }\n\n      if(compareVersion(writer.state.version, STATE_VERSION) !== 0) {\n        newVersion = STATE_VERSION;\n        oldVersion = writer.state.version;\n      }\n\n      writer.push('appConfig', copy(STATE_INIT.appConfig));\n      writer.push('version', STATE_VERSION);\n      writer.push('build', BUILD);\n    }\n\n    return {newVersion, oldVersion};\n  },\n  CHANGED_AUTH: async(writer: ReturnType<typeof StateWriter>) => {\n    const [authKeyFingerprint, baseDcAuthKey] = await Promise.all([\n      sessionStorage.get('auth_key_fingerprint'),\n      sessionStorage.get(`dc${App.baseDcId}_auth_key`)\n    ]);\n\n    if(!baseDcAuthKey) {\n      return;\n    }\n\n    const _authKeyFingerprint = baseDcAuthKey.slice(0, 8);\n    if(!authKeyFingerprint) { // * migration, preserve settings\n      writer.reset(/* {preserveCommonKeys: ['settings']} */);\n    } else if(authKeyFingerprint !== _authKeyFingerprint) {\n      writer.reset();\n    }\n\n    if(authKeyFingerprint !== _authKeyFingerprint) {\n      await sessionStorage.set({\n        auth_key_fingerprint: _authKeyFingerprint\n      });\n    }\n  }\n  // STATE_ID: async(writer: ReturnType<typeof StateWriter>) => {\n  //   const stateId = await sessionStorage.get('state_id');\n  //   if(writer.state.stateId !== stateId) {\n  //     if(stateId !== undefined) {\n  //       writer.reset([]);\n  //     }\n\n  //     await sessionStorage.set({\n  //       state_id: writer.state.stateId\n  //     });\n  //   }\n  // }\n};\n\nasync function loadStateForAccount(accountNumber: ActiveAccountNumber): Promise<LoadStateResult> {\n  const log = logger(`STATE-LOADER-ACCOUNT-${accountNumber}`, LogTypes.Error);\n  const stateStorage = new StateStorage(accountNumber);\n\n  const [accountData, ...arr] = await Promise.all([\n    AccountController.get(accountNumber),\n    ...COMMON_KEYS.map((key) => commonStateStorage.get(key)),\n    ...ALL_KEYS.map((key) => stateStorage.get(key))\n  ]);\n\n  const commonWriter = CommonStateWriter(log);\n  commonWriter.readFromArray(arr.splice(0, COMMON_KEYS.length));\n\n  const writer = StateWriter(log);\n  writer.readFromArray(arr);\n\n  if(accountData?.userId) {\n    writer.state.authState = {_: 'authStateSignedIn'};\n  }\n\n  // await STATE_STEPS.STATE_ID(writer);\n  if(accountNumber === 1) await STATE_STEPS.CHANGED_AUTH(writer);\n  STATE_STEPS.REFRESH(writer);\n  STATE_STEPS.VALIDATE(writer);\n  STATE_STEPS.VALIDATE(commonWriter);\n  const {newVersion, oldVersion} = STATE_STEPS.VERSION(writer);\n\n  return {\n    state: writer.state,\n    pushedKeys: writer.pushedKeys,\n    newVersion,\n    oldVersion,\n    resetStorages: writer.resetStorages,\n    common: commonWriter.state,\n    userId: accountData?.userId\n  };\n}\n\nasync function loadOldState(): Promise<LoadStateResult> {\n  const log = logger('STATE-LOADER', LogTypes.Error);\n  const stateStorage = new StateStorage('old');\n\n  const totalPerf = performance.now();\n  const recordPromise = recordPromiseBound(log);\n\n  const arr = await Promise.all([\n    ...COMMON_KEYS.map((key) => (stateStorage as typeof commonStateStorage).get(key)),\n    ...ALL_KEYS.map((key) => recordPromise(stateStorage.get(key), 'state ' + key)),\n    (stateStorage as typeof commonStateStorage).get('langPack'),\n    recordPromise(sessionStorage.get('user_auth'), 'auth')\n  ]);\n\n  log.warn('promises', performance.now() - totalPerf);\n\n  const commonWriter = CommonStateWriter(log);\n  commonWriter.readFromArray(arr.splice(0, COMMON_KEYS.length));\n\n  const writer = StateWriter(log);\n  writer.readFromArray(arr.splice(0, ALL_KEYS.length));\n\n  const langPack = arr.shift();\n  const auth = arr.shift() as UserAuth | number;\n  if(auth) {\n    // ! Warning ! DON'T delete this\n    writer.state.authState = {_: 'authStateSignedIn'};\n  }\n\n  // await STATE_STEPS.STATE_ID(writer);\n  await STATE_STEPS.CHANGED_AUTH(writer);\n  STATE_STEPS.REFRESH(writer);\n  STATE_STEPS.VALIDATE(writer);\n  STATE_STEPS.VALIDATE(commonWriter);\n  const {newVersion, oldVersion} = STATE_STEPS.VERSION(writer);\n\n  if(DEBUG) {\n    log('state res', writer.state, copy(writer.state));\n  }\n\n  log.warn('total', performance.now() - totalPerf);\n\n  // * set to pushed keys so it'll migrate to new state\n  for(const key in writer.state) {\n    writer.push(key as keyof State, writer.state[key as keyof State]);\n  }\n\n  // * migrate langPack\n  if(langPack) {\n    await commonStateStorage.set({langPack});\n  }\n\n  return {\n    state: writer.state,\n    pushedKeys: writer.pushedKeys,\n    newVersion,\n    oldVersion,\n    resetStorages: writer.resetStorages,\n    common: commonWriter.state,\n    userId: typeof(auth) === 'number' ? auth : auth?.id\n  };\n}\n\nasync function moveAccessKeysToMultiAccountFormat() {\n  const data: Partial<AccountSessionData> = {};\n\n  const resetKeysPromise = (async() => {\n    const callbacks: (() => Promise<any>)[] = [];\n    for(let i = 1; i <= 5; i++) {\n      const authKeyKey = `dc${i as TrueDcId}_auth_key` as const;\n      const serverSaltKey = `dc${i as TrueDcId}_server_salt` as const;\n\n      [data[authKeyKey], data[serverSaltKey]] = await Promise.all([\n        sessionStorage.get(authKeyKey),\n        sessionStorage.get(serverSaltKey)\n      ]);\n\n      callbacks.push(() => {\n        return Promise.all([\n          sessionStorage.delete(authKeyKey),\n          sessionStorage.delete(serverSaltKey)\n        ]);\n      });\n    }\n\n    return () => {\n      return Promise.all(callbacks.map((cb) => cb()));\n    };\n  })();\n\n  const [userAuth, fingerprint, resetKeys] = await Promise.all([\n    sessionStorage.get(`user_auth`),\n    sessionStorage.get(`auth_key_fingerprint`),\n    resetKeysPromise\n  ]);\n\n  // ! not clearing old keys for legacy\n  // * clear old keys\n  // await Promise.all([\n  //   sessionStorage.delete('user_auth'),\n  //   sessionStorage.delete('auth_key_fingerprint'),\n  //   resetKeys()\n  // ]);\n\n  data['auth_key_fingerprint'] = fingerprint;\n  data['userId'] = typeof(userAuth) === 'string' || typeof(userAuth) === 'number' ? +userAuth : userAuth?.id;\n\n  await AccountController.update(1, data, true);\n}\n\nasync function moveStoragesToMultiAccountFormat() {\n  const storages = createStorages(undefined);\n  const storagesNew = createStorages(1);\n  const [users, chats, dialogs] = await Promise.all([\n    storages.users.getAll(),\n    storages.chats.getAll(),\n    storages.dialogs.getAll()\n  ]);\n\n  const toObject = (arr: any[], prop: string) => {\n    return arr.reduce((acc, item) => {\n      acc[item[prop]] = item;\n      return acc;\n    }, {});\n  };\n\n  await Promise.all([\n    storagesNew.users.set(toObject(users, 'id')),\n    storagesNew.chats.set(toObject(chats, 'id')),\n    storagesNew.dialogs.set(toObject(dialogs, 'peerId'))\n  ]);\n}\n\nasync function checkIfHasMultiAccount() {\n  return !!(await AccountController.get(1));\n}\n\nfunction deleteOldDatabase() {\n  return IDB.deleteDatabaseByName(getOldDatabaseState().name);\n}\n\nasync function applyBuildVersionToStorage() {\n  const sessionBuild = await sessionStorage.get('k_build');\n  if(sessionBuild !== BUILD && (!sessionBuild || sessionBuild < BUILD)) {\n    await sessionStorage.set({k_build: BUILD});\n  }\n}\n\nasync function loadStateForAllAccounts() {\n  if(TEST_MULTI_MIGRATION) {\n    // * clear all storages to test migration\n    await Promise.all([1, 2, 3, 4].map(async(i) => {\n      const storages = createStorages(i as ActiveAccountNumber);\n      for(const key in storages) {\n        await storages[key as keyof typeof storages].clear();\n      }\n      await new StateStorage(i as ActiveAccountNumber).clear();\n    }));\n    await commonStateStorage.clear();\n  }\n\n  const perf = performance.now();\n  const hasMultiAccount = await checkIfHasMultiAccount() && !TEST_MULTI_MIGRATION;\n\n  // await pause(15000);\n\n  let stateForFirstAccount: LoadStateResult;\n\n  const restPromise = Promise.all([\n    loadStateForAccount(2),\n    loadStateForAccount(3),\n    loadStateForAccount(4)\n  ]);\n\n  if(!hasMultiAccount) {\n    stateForFirstAccount = await loadOldState();\n    await Promise.all([\n      moveAccessKeysToMultiAccountFormat(),\n      moveStoragesToMultiAccountFormat()\n    ]);\n\n    if(!TEST_MULTI_MIGRATION) {\n      await deleteOldDatabase();\n    }\n  } else {\n    stateForFirstAccount = await loadStateForAccount(1);\n  }\n\n  applyBuildVersionToStorage();\n\n  const [...rest] = await restPromise;\n\n  if(DEBUG) {\n    console.log('loadStateForAllAccounts time', performance.now() - perf);\n  }\n\n  return {\n    1: stateForFirstAccount,\n    2: rest[0],\n    3: rest[1],\n    4: rest[2]\n  };\n}\n\nlet promise: ReturnType<typeof loadStateForAllAccounts>;\nexport default function loadStateForAllAccountsOnce() {\n  return promise ??= loadStateForAllAccounts();\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport IS_OPUS_SUPPORTED from '../environment/opusSupport';\nimport {IS_SAFARI} from '../environment/userAgent';\nimport {Modify} from '../types';\nimport {logger, LogTypes} from './logger';\nimport apiManagerProxy from './mtproto/mtprotoworker';\nimport type {ConvertWebPTask} from './webp/webpWorkerController';\n\ntype Result = {\n  bytes: Uint8Array,\n  waveform?: Uint8Array\n};\n\ntype Task = {\n  pages: Uint8Array,\n  withWaveform: boolean,\n  waveform?: Uint8Array,\n  callback: {resolve: (result: Result) => void, reject: (err: any) => void},\n  timeout: number\n};\n\nexport interface ConvertOpusTask extends Modify<ConvertWebPTask, {type: 'convertOpus'}> {\n  type: 'convertOpus'\n}\n\nexport class OpusDecodeController {\n  private worker: Worker;\n  private wavWorker: Worker;\n  private sampleRate = 48000;\n  private tasks: Array<Task> = [];\n  private keepAlive = false;\n  private log = logger('OPUS', LogTypes.Error);\n\n  public isPlaySupported() {\n    return IS_OPUS_SUPPORTED;\n  }\n\n  public loadWavWorker() {\n    if(this.wavWorker) return;\n\n    this.wavWorker = new Worker('waveWorker.min.js');\n    this.wavWorker.addEventListener('message', (e) => {\n      const data = e.data;\n\n      this.log('[WAV] got message:', data);\n      if(data && data.page) {\n        const bytes = data.page;\n        this.onTaskEnd(this.tasks.shift(), bytes);\n      }\n    });\n  }\n\n  public loadWorker() {\n    if(this.worker) return;\n\n    this.worker = new Worker('decoderWorker.min.js');\n    this.worker.addEventListener('message', (e) => {\n      const data = e.data;\n\n      this.log('[DECODER] got message', data);\n      if(data.type === 'done') {\n        // this.log('[DECODER] send done to wav');\n        this.wavWorker.postMessage({command: 'done'});\n\n        if(data.waveform) {\n          this.tasks[0].waveform = data.waveform;\n        }\n      } else { // e.data contains decoded buffers as float32 values\n        // this.log('[DECODER] send encode to wav');\n        this.wavWorker.postMessage({\n          command: 'encode',\n          buffers: e.data\n        }, IS_SAFARI ? undefined : data.map((typedArray: Uint8Array) => typedArray.buffer));\n      }\n    });\n  }\n\n  public setKeepAlive(keepAlive: boolean) {\n    this.keepAlive = keepAlive;\n    if(this.keepAlive) {\n      this.loadWorker();\n      this.loadWavWorker();\n    } else if(!this.tasks.length) {\n      this.terminateWorkers();\n    }\n  }\n\n  public onTaskEnd(task: Task, result?: Uint8Array) {\n    if(!result) {\n      task.callback.reject('timeout');\n    } else {\n      clearTimeout(task.timeout);\n      task.callback.resolve({bytes: result, waveform: task.waveform});\n    }\n\n    if(this.tasks.length) {\n      this.executeNewTask(this.tasks[0]);\n    }\n\n    this.terminateWorkers();\n  }\n\n  public terminateWorkers(kill = false) {\n    if((this.keepAlive || this.tasks.length) && !kill) return;\n\n    if(this.worker) {\n      this.worker.terminate();\n      this.worker = null;\n    }\n\n    if(this.wavWorker) {\n      this.wavWorker.terminate();\n      this.wavWorker = null;\n    }\n  }\n\n  public executeNewTask(task: Task) {\n    this.worker.postMessage({\n      command: 'init',\n      decoderSampleRate: this.sampleRate,\n      outputBufferSampleRate: this.sampleRate\n    });\n\n    this.wavWorker.postMessage({\n      command: 'init',\n      wavBitDepth: 16,\n      wavSampleRate: this.sampleRate\n    });\n\n    // console.log('sending command to worker:', task);\n    // setTimeout(() => {\n    this.log('[DECODER] send decode');\n    this.worker.postMessage({\n      command: 'decode',\n      pages: task.pages,\n      waveform: task.withWaveform\n    }, IS_SAFARI ? undefined : [task.pages.buffer]);\n    // }, 1e3);\n\n    task.timeout = window.setTimeout(() => {\n      this.log.error('decode timeout'/* , task */);\n\n      this.terminateWorkers(true);\n      if(this.tasks.length) {\n        this.loadWorker();\n        this.loadWavWorker();\n      }\n\n      this.onTaskEnd(this.tasks.shift());\n    }, 10e3);\n  }\n\n  public pushDecodeTask(pages: Uint8Array, withWaveform: boolean) {\n    return new Promise<Result>((resolve, reject) => {\n      const task = {\n        pages,\n        withWaveform,\n        callback: {resolve, reject},\n        timeout: 0\n      };\n\n      this.loadWorker();\n      this.loadWavWorker();\n\n      if(this.tasks.push(task) === 1) {\n        this.executeNewTask(task);\n      }\n    });\n  }\n\n  public async decode(typedArray: Uint8Array, withWaveform = false) {\n    return this.pushDecodeTask(typedArray, withWaveform).then(async(result) => {\n      const dataBlob = new Blob([result.bytes], {type: 'audio/wav'});\n      return {url: await apiManagerProxy.invoke('createObjectURL', dataBlob), waveform: result.waveform};\n    });\n  }\n}\n\nconst opusDecodeController = new OpusDecodeController();\nMOUNT_CLASS_TO.opusDecodeController = opusDecodeController;\nexport default opusDecodeController;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {CryptoMethods} from './crypto_methods';\nimport SuperMessagePort from '../mtproto/superMessagePort';\nimport {Awaited} from '../../types';\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport {IS_WORKER} from '../../helpers/context';\n\ntype CryptoEvent = {\n  invoke: <T extends keyof CryptoMethods>(payload: {method: T, args: Parameters<CryptoMethods[T]>}) => ReturnType<CryptoMethods[T]>,\n  port: (payload: void, source: MessageEventSource, event: MessageEvent) => void,\n  terminate: () => void\n};\n\nexport class CryptoMessagePort<Master extends boolean = false> extends SuperMessagePort<CryptoEvent, CryptoEvent, Master> {\n  private lastIndex: number;\n\n  constructor() {\n    super('CRYPTO');\n    this.lastIndex = -1;\n  }\n\n  public invokeCryptoNew<T extends keyof CryptoMethods>({method, args, transfer}: {\n    method: T,\n    args: Parameters<CryptoMethods[T]>,\n    transfer?: Transferable[]\n  }): Promise<Awaited<ReturnType<CryptoMethods[T]>>> {\n    const payload = {method, args};\n    const listeners = this.listeners['invoke'];\n    if(listeners?.size) { // already in worker\n      // try {\n      let result: any = listeners.values().next().value.callback(payload);\n      if(!IS_WORKER && !(result instanceof Promise)) {\n        result = Promise.resolve(result);\n      }\n\n      return result;\n      // } catch(err) {\n      //   return Promise.reject(err);\n      // }\n    }\n\n    const sendPortIndex = method === 'aes-encrypt' || method === 'aes-decrypt' ?\n      this.lastIndex = (this.lastIndex + 1) % this.sendPorts.length :\n      0;\n    // @ts-ignore\n    return this.invoke('invoke', payload, undefined, this.sendPorts[sendPortIndex], transfer);\n  }\n\n  public invokeCrypto<T extends keyof CryptoMethods>(method: T, ...args: Parameters<CryptoMethods[T]>): Promise<Awaited<ReturnType<CryptoMethods[T]>>> {\n    return this.invokeCryptoNew({method, args});\n  }\n}\n\nconst cryptoMessagePort = new CryptoMessagePort<false>();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.cryptoMessagePort = cryptoMessagePort);\nexport default cryptoMessagePort;\n","export default function toArray<T>(value: T | T[]): T[] {\n  return Array.isArray(value) ? value : [value];\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\n// https://www.iana.org/assignments/media-types/media-types.xhtml\nexport default function blobSafeMimeType(mimeType: string) {\n  if([\n    'image/jpeg',\n    'image/png',\n    'image/gif',\n    'image/svg+xml',\n    'image/webp',\n    'image/bmp',\n    'image/avif',\n    'image/jxl',\n    'video/mp4',\n    'video/webm',\n    'video/quicktime',\n    'audio/ogg',\n    'audio/mpeg',\n    'audio/mp4',\n    'audio/wav', // though it is not in list\n    'application/json',\n    'application/pdf'\n  ].indexOf(mimeType) === -1) {\n    return 'application/octet-stream';\n  }\n\n  return mimeType;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport toArray from '../array/toArray';\nimport blobSafeMimeType from './blobSafeMimeType';\n\nexport default function blobConstruct<T extends Uint8Array | string>(blobParts: Array<T> | T, mimeType: string = ''): Blob {\n  blobParts = toArray(blobParts);\n  const safeMimeType = blobSafeMimeType(mimeType);\n  const blob = new Blob(blobParts, {type: safeMimeType});\n  return blob;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport blobConstruct from '../../helpers/blob/blobConstruct';\nimport StreamWriter from './streamWriter';\n\nexport default class MemoryWriter implements StreamWriter {\n  private bytes: Uint8Array;\n\n  constructor(\n    private mimeType: string,\n    private size: number,\n    private saveFileCallback?: (blob: Blob) => Promise<Blob>\n  ) {\n    this.bytes = new Uint8Array(size);\n  }\n\n  public async write(part: Uint8Array, offset: number) {\n    // sometimes file size can be bigger than the prov\n    const endOffset = offset + part.byteLength;\n    if(endOffset > this.bytes.byteLength) {\n      const newBytes = new Uint8Array(endOffset);\n      newBytes.set(this.bytes, 0);\n      this.bytes = newBytes;\n    }\n\n    this.bytes.set(part, offset);\n  };\n\n  public truncate() {\n    this.bytes = new Uint8Array();\n  }\n\n  public trim(size: number) {\n    this.bytes = this.bytes.slice(0, size);\n  }\n\n  public finalize(saveToStorage = true) {\n    const blob = blobConstruct(this.bytes, this.mimeType);\n\n    if(saveToStorage && this.saveFileCallback) {\n      this.saveFileCallback(blob);\n    }\n\n    return blob;\n  }\n\n  public getParts() {\n    return this.bytes;\n  }\n\n  public replaceParts(parts: Uint8Array) {\n    this.bytes = parts;\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport Modes from '../../config/modes';\nimport blobConstruct from '../../helpers/blob/blobConstruct';\nimport MemoryWriter from './memoryWriter';\nimport FileManager from './memoryWriter';\nimport FileStorage from './fileStorage';\nimport makeError from '../../helpers/makeError';\nimport deferredPromise from '../../helpers/cancellablePromise';\n\nexport type CacheStorageDbName = 'cachedFiles' | 'cachedStreamChunks' | 'cachedAssets' | 'cachedHlsQualityFiles' | 'cachedHlsStreamChunks';\n\nexport default class CacheStorageController implements FileStorage {\n  private static STORAGES: CacheStorageController[] = [];\n  private openDbPromise: Promise<Cache>;\n\n  private useStorage = true;\n\n  // private log: ReturnType<typeof logger> = logger('CS');\n\n  constructor(private dbName: CacheStorageDbName) {\n    if(Modes.test) {\n      this.dbName += '_test';\n    }\n\n    if(CacheStorageController.STORAGES.length) {\n      this.useStorage = CacheStorageController.STORAGES[0].useStorage;\n    }\n\n    this.openDatabase();\n    CacheStorageController.STORAGES.push(this);\n  }\n\n  private openDatabase(): Promise<Cache> {\n    return this.openDbPromise ?? (this.openDbPromise = caches.open(this.dbName));\n  }\n\n  public delete(entryName: string) {\n    return this.timeoutOperation((cache) => cache.delete('/' + entryName));\n  }\n\n  public deleteAll() {\n    return caches.delete(this.dbName);\n  }\n\n  public get(entryName: string) {\n    return this.timeoutOperation((cache) => cache.match('/' + entryName));\n  }\n\n  public save(entryName: string, response: Response) {\n    // return new Promise((resolve) => {}); // DEBUG\n    return this.timeoutOperation((cache) => cache.put('/' + entryName, response));\n  }\n\n  public getFile(fileName: string, method: 'blob' | 'json' | 'text' = 'blob'): Promise<any> {\n    // if(method === 'blob') {\n    //   return Promise.reject(makeError('NO_ENTRY_FOUND'));\n    // }\n\n    // const str = `get fileName: ${fileName}`;\n    // console.time(str);\n    return this.get(fileName).then((response) => {\n      if(!response) {\n        // console.warn('getFile:', response, fileName);\n        throw makeError('NO_ENTRY_FOUND');\n      }\n\n      const promise = response[method]();\n      // promise.then(() => {\n      //   console.timeEnd(str);\n      // });\n      return promise;\n    });\n  }\n\n  public saveFile(fileName: string, blob: Blob | Uint8Array) {\n    // return Promise.resolve(blobConstruct([blob]));\n    if(!(blob instanceof Blob)) {\n      blob = blobConstruct(blob);\n    }\n\n    const response = new Response(blob, {\n      headers: {\n        'Content-Length': '' + blob.size\n      }\n    });\n\n    return this.save(fileName, response).then(() => blob as Blob);\n  }\n\n  public timeoutOperation<T>(callback: (cache: Cache) => Promise<T>) {\n    if(!this.useStorage) {\n      return Promise.reject(makeError('STORAGE_OFFLINE'));\n    }\n\n    return new Promise<T>(async(resolve, reject) => {\n      let rejected = false;\n      const timeout = setTimeout(() => {\n        reject();\n        // console.warn('CACHESTORAGE TIMEOUT');\n        rejected = true;\n      }, 15e3);\n\n      try {\n        const cache = await this.openDatabase();\n        if(!cache) {\n          this.useStorage = false;\n          this.openDbPromise = undefined;\n          throw 'no cache?';\n        }\n\n        const res = await callback(cache);\n\n        if(rejected) return;\n        resolve(res);\n      } catch(err) {\n        reject(err);\n      }\n\n      clearTimeout(timeout);\n    });\n  }\n\n  public prepareWriting(fileName: string, fileSize: number, mimeType: string) {\n    return {\n      deferred: deferredPromise<Blob>(),\n      getWriter: () => {\n        const writer = new MemoryWriter(mimeType, fileSize, (blob) => {\n          return this.saveFile(fileName, blob).catch(() => blob);\n        });\n\n        return writer;\n      }\n    };\n  }\n\n  public static toggleStorage(enabled: boolean, _clearWrite: boolean) {\n    this.STORAGES.forEach((storage) => {\n      storage.useStorage = enabled;\n    });\n    return Promise.resolve();\n  }\n\n  public static deleteAllStorages() {\n    return Promise.all(this.STORAGES.map((storage) => {\n      return storage.deleteAll();\n    }));\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport CacheStorageController from '../lib/files/cacheStorage';\nimport AppStorage from '../lib/storage';\nimport sessionStorage from '../lib/sessionStorage';\nimport noop from './noop';\n\nexport default function toggleStorages(enabled: boolean, clearWrite: boolean) {\n  return Promise.all([\n    AppStorage.toggleStorage(enabled, clearWrite),\n    CacheStorageController.toggleStorage(enabled, clearWrite),\n    sessionStorage.toggleStorage(enabled, clearWrite)\n  ]).then(noop, noop);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {WebPushApiManager} from '../mtproto/webPushApiManager';\nimport type {PushNotificationObject} from './push';\nimport type {MyUploadFile} from '../mtproto/apiFileManager';\nimport SuperMessagePort from '../mtproto/superMessagePort';\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport {Document, InputFileLocation, InputGroupCall} from '../../layer';\nimport {GroupCallRtmpState} from '../appManagers/appGroupCallsManager';\nimport {ActiveAccountNumber} from '../accounts/types';\nimport {ThumbCache} from '../storages/thumbs';\n\nexport type ServicePushPingTaskPayload = {\n  localNotifications: boolean,\n  lang: {\n    push_action_mute1d: string\n    push_action_settings: string\n    push_message_nopreview: string\n  },\n  settings: WebPushApiManager['settings']\n};\n\nexport type ServiceRequestFilePartTaskPayload = {\n  docId: DocId,\n  dcId: number,\n  offset: number,\n  limit: number,\n  accountNumber: ActiveAccountNumber\n};\n\nexport type ServiceRequestRtmpPartTaskPayload = {\n  request: InputFileLocation.inputGroupCallStream,\n  dcId: number,\n  accountNumber: ActiveAccountNumber\n};\n\nexport type ServiceDownloadTaskPayload = {\n  headers: any,\n  id: string\n};\n\nexport type ServiceEvent = {\n  port: (payload: void, source: MessageEventSource, event: MessageEvent) => void\n};\n\nexport default class ServiceMessagePort<Master extends boolean = false> extends SuperMessagePort<{\n  // from main thread to service worker\n  notificationsClear: () => void,\n  toggleStorages: (payload: {enabled: boolean, clearWrite: boolean}) => void,\n  pushPing: (payload: ServicePushPingTaskPayload, source: MessageEventSource, event: MessageEvent) => void,\n  hello: (payload: void, source: MessageEventSource, event: MessageEvent) => void,\n  shownNotification: (payload: string) => void,\n  leaveRtmpCall: (payload: [Long, boolean]) => void,\n  toggleStreamInUse: (payload: {url: string, inUse: boolean, accountNumber: ActiveAccountNumber}) => void,\n\n  // from mtproto worker\n  download: (payload: ServiceDownloadTaskPayload) => void,\n  downloadChunk: (payload: {id: ServiceDownloadTaskPayload['id'], chunk: Uint8Array}) => void\n  downloadFinalize: (payload: ServiceDownloadTaskPayload['id']) => void,\n  downloadCancel: (payload: ServiceDownloadTaskPayload['id']) => void\n}, {\n  // to main thread\n  pushClick: (payload: PushNotificationObject) => void,\n  hello: (payload: void, source: MessageEventSource) => void,\n  share: (payload: ShareData) => void,\n  rtmpStreamTime: (payload: {callId: Long, time: string}) => void,\n  rtmpStreamDestroyed: (payload: Long) => void,\n  downloadRequestReceived: (payload: string) => void,\n\n  // to mtproto worker\n  requestFilePart: (payload: ServiceRequestFilePartTaskPayload) => MaybePromise<MyUploadFile>,\n  cancelFilePartRequests: (payload: {docId: DocId, accountNumber: ActiveAccountNumber}) => void,\n  requestRtmpState: (payload: {call: InputGroupCall, accountNumber: ActiveAccountNumber}) => MaybePromise<GroupCallRtmpState>,\n  requestRtmpPart: (payload: ServiceRequestRtmpPartTaskPayload) => MaybePromise<MyUploadFile>,\n  downloadDoc: (payload: {docId: DocId, accountNumber: ActiveAccountNumber}) => MaybePromise<Blob>,\n  requestDoc: (payload: {docId: DocId, accountNumber: ActiveAccountNumber}) => MaybePromise<Document.document>,\n  requestAltDocsByDoc: (payload: {docId: DocId, accountNumber: ActiveAccountNumber}) => MaybePromise<Document.document[]>,\n} & ServiceEvent, Master> {\n  constructor() {\n    super('SERVICE');\n\n    MOUNT_CLASS_TO && (MOUNT_CLASS_TO.serviceMessagePort = this);\n  }\n}\n","export const DEEP_PATH_JOINER = '\\x01';\n\nexport function joinDeepPath(...args: any[]) {\n  return args.join(DEEP_PATH_JOINER);\n}\n\nexport function splitDeepPath(path: string) {\n  return path.split(DEEP_PATH_JOINER);\n}\n\nexport default function setDeepProperty(\n  object: any,\n  key: string,\n  value?: any,\n  deleteIfUndefined?: boolean\n) {\n  const splitted = key.split(DEEP_PATH_JOINER);\n  const length = splitted.length;\n  let lastObject = object/* , fractalPart: string */; // fix fractal number key\n  for(let i = 0; i < length - 1; ++i) {\n    const part = splitted[i];\n    // if(fractalPart) {\n    //   part = fractalPart + '.' + part;\n    //   fractalPart = undefined;\n    // } else if(!Number.isNaN(+part)) {\n    //   fractalPart = part;\n    //   continue;\n    // }\n    lastObject = lastObject[part] ??= {};\n  }\n\n  const lastKey = /* (fractalPart ? fractalPart + '.' : '') +  */splitted[length - 1];\n  if(value === undefined && deleteIfUndefined/*  && arguments.length === 2 */) {\n    delete lastObject[lastKey];\n  } else {\n    lastObject[lastKey] = value;\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {InputFileLocation, InputGeoPoint, InputStickerSet, InputWebFileLocation} from '../layer';\nimport type {DownloadOptions} from '../lib/mtproto/apiFileManager';\n\nconst FILENAME_JOINER = '_';\n\nexport function getFileNameByLocation(location: InputFileLocation | InputWebFileLocation, options?: Partial<{\n  fileName: string,\n  downloadId: string\n}>) {\n  const fileName = '';// (options?.fileName || '').split('.');\n  const ext = fileName[fileName.length - 1] || '';\n\n  let str: string;\n  switch(location._) {\n    case 'inputPhotoFileLocation': {\n      str = ['photo', fileName[0], location.id, location.thumb_size].filter(Boolean).join(FILENAME_JOINER);\n      break;\n    }\n\n    case 'inputDocumentFileLocation': {\n      str = ['document', fileName[0], location.id, location.thumb_size].filter(Boolean).join(FILENAME_JOINER);\n      break;\n    }\n\n    case 'inputPeerPhotoFileLocation':\n      str = ['peerPhoto', location.photo_id, location.pFlags.big ? 'big' : 'small'].join(FILENAME_JOINER);\n      break;\n\n    case 'inputStickerSetThumb': {\n      const id = (location.stickerset as InputStickerSet.inputStickerSetID).id ||\n        (location.stickerset as InputStickerSet.inputStickerSetShortName).short_name ||\n        (location.stickerset as InputStickerSet.inputStickerSetDice).emoticon ||\n        location.stickerset._;\n      str = ['stickerSetThumb', id, location.thumb_version].join(FILENAME_JOINER);\n      break;\n    }\n\n    case 'inputFileLocation': {\n      str = [location.volume_id, location.local_id].join(FILENAME_JOINER);\n      break;\n    }\n\n    case 'inputWebFileLocation': {\n      str = ['webFile', location.url].join(FILENAME_JOINER);\n      break;\n    }\n\n    case 'inputWebFileGeoPointLocation': {\n      const geoPoint = location.geo_point as InputGeoPoint.inputGeoPoint;\n      str = ['geoPoint', geoPoint.lat, geoPoint.long, location.w, location.h, location.zoom, location.scale].join(FILENAME_JOINER);\n      break;\n    }\n\n    default: {\n      console.error('Unrecognized location:', location);\n      str = '';\n      break;\n    }\n  }\n\n  return str + (options?.downloadId ? '_download' : '') + (ext ? '.' + ext : ext);\n}\n\nexport type FileURLType = 'photo' | 'thumb' | 'document' | 'stream' | 'download' | 'hls';\nexport function getFileURL(type: FileURLType, options: DownloadOptions) {\n  // console.log('getFileURL', location);\n  // const perf = performance.now();\n  const encoded = encodeURIComponent(JSON.stringify(options));\n  // console.log('getFileURL encode:', performance.now() - perf, encoded);\n\n  return /* '/' +  */type + '/' + encoded;\n}\n","import {InputWebFileLocation} from '../../../../layer';\n\nexport default function isWebFileLocation(location: any): location is InputWebFileLocation {\n  return location?._.includes('inputWebFile');\n}\n","import type {MyPhoto} from '../../../appManagers/appPhotosManager';\nimport type {ThumbStorageMedia} from '../../thumbs';\nimport type {WebDocument} from '../../../../layer';\nimport {getFileNameByLocation} from '../../../../helpers/fileName';\nimport isWebFileLocation from '../../../appManagers/utils/webFiles/isWebFileLocation';\n\nexport default function getThumbKey(media: ThumbStorageMedia) {\n  if(isWebFileLocation(media)) {\n    return getFileNameByLocation(media);\n  }\n\n  return media._ + ((media as MyPhoto).id ?? (media as WebDocument).url);\n}\n","import type {ThumbCache} from '../../thumbs';\n\nexport default function generateEmptyThumb(type: string): ThumbCache {\n  return {downloaded: 0, url: '', type};\n}\n","export default function getStickerThumbKey(docId: DocId, toneIndex?: number | string) {\n  return docId + (toneIndex !== undefined ? '-' + toneIndex : '');\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {Awaited} from '../types';\n\nexport default function callbackify<T extends Awaited<any>, R>(\n  smth: T,\n  callback: (result: Awaited<T>) => R\n): T extends Promise<any> ? Promise<Awaited<R>> : R {\n  if(smth instanceof Promise) {\n    // @ts-ignore\n    return smth.then(callback);\n  } else {\n    return callback(smth as any) as any;\n  }\n}\n","import {MESSAGE_ID_OFFSET} from '../../../mtproto/mtproto_config';\n\nexport default function isLegacyMessageId(messageId: number) {\n  return typeof(messageId) === 'number' && messageId < MESSAGE_ID_OFFSET;\n}\n","import { $PROXY, $TRACK, getListener, batch, createSignal } from 'solid-js';\n\nconst $RAW = Symbol(\"store-raw\"),\n  $NODE = Symbol(\"store-node\"),\n  $HAS = Symbol(\"store-has\"),\n  $SELF = Symbol(\"store-self\");\nfunction wrap$1(value) {\n  let p = value[$PROXY];\n  if (!p) {\n    Object.defineProperty(value, $PROXY, {\n      value: p = new Proxy(value, proxyTraps$1)\n    });\n    if (!Array.isArray(value)) {\n      const keys = Object.keys(value),\n        desc = Object.getOwnPropertyDescriptors(value);\n      for (let i = 0, l = keys.length; i < l; i++) {\n        const prop = keys[i];\n        if (desc[prop].get) {\n          Object.defineProperty(value, prop, {\n            enumerable: desc[prop].enumerable,\n            get: desc[prop].get.bind(p)\n          });\n        }\n      }\n    }\n  }\n  return p;\n}\nfunction isWrappable(obj) {\n  let proto;\n  return obj != null && typeof obj === \"object\" && (obj[$PROXY] || !(proto = Object.getPrototypeOf(obj)) || proto === Object.prototype || Array.isArray(obj));\n}\nfunction unwrap(item, set = new Set()) {\n  let result, unwrapped, v, prop;\n  if (result = item != null && item[$RAW]) return result;\n  if (!isWrappable(item) || set.has(item)) return item;\n  if (Array.isArray(item)) {\n    if (Object.isFrozen(item)) item = item.slice(0);else set.add(item);\n    for (let i = 0, l = item.length; i < l; i++) {\n      v = item[i];\n      if ((unwrapped = unwrap(v, set)) !== v) item[i] = unwrapped;\n    }\n  } else {\n    if (Object.isFrozen(item)) item = Object.assign({}, item);else set.add(item);\n    const keys = Object.keys(item),\n      desc = Object.getOwnPropertyDescriptors(item);\n    for (let i = 0, l = keys.length; i < l; i++) {\n      prop = keys[i];\n      if (desc[prop].get) continue;\n      v = item[prop];\n      if ((unwrapped = unwrap(v, set)) !== v) item[prop] = unwrapped;\n    }\n  }\n  return item;\n}\nfunction getNodes(target, symbol) {\n  let nodes = target[symbol];\n  if (!nodes) Object.defineProperty(target, symbol, {\n    value: nodes = Object.create(null)\n  });\n  return nodes;\n}\nfunction getNode(nodes, property, value) {\n  if (nodes[property]) return nodes[property];\n  const [s, set] = createSignal(value, {\n    equals: false,\n    internal: true\n  });\n  s.$ = set;\n  return nodes[property] = s;\n}\nfunction proxyDescriptor$1(target, property) {\n  const desc = Reflect.getOwnPropertyDescriptor(target, property);\n  if (!desc || desc.get || !desc.configurable || property === $PROXY || property === $NODE) return desc;\n  delete desc.value;\n  delete desc.writable;\n  desc.get = () => target[$PROXY][property];\n  return desc;\n}\nfunction trackSelf(target) {\n  getListener() && getNode(getNodes(target, $NODE), $SELF)();\n}\nfunction ownKeys(target) {\n  trackSelf(target);\n  return Reflect.ownKeys(target);\n}\nconst proxyTraps$1 = {\n  get(target, property, receiver) {\n    if (property === $RAW) return target;\n    if (property === $PROXY) return receiver;\n    if (property === $TRACK) {\n      trackSelf(target);\n      return receiver;\n    }\n    const nodes = getNodes(target, $NODE);\n    const tracked = nodes[property];\n    let value = tracked ? tracked() : target[property];\n    if (property === $NODE || property === $HAS || property === \"__proto__\") return value;\n    if (!tracked) {\n      const desc = Object.getOwnPropertyDescriptor(target, property);\n      if (getListener() && (typeof value !== \"function\" || target.hasOwnProperty(property)) && !(desc && desc.get)) value = getNode(nodes, property, value)();\n    }\n    return isWrappable(value) ? wrap$1(value) : value;\n  },\n  has(target, property) {\n    if (property === $RAW || property === $PROXY || property === $TRACK || property === $NODE || property === $HAS || property === \"__proto__\") return true;\n    getListener() && getNode(getNodes(target, $HAS), property)();\n    return property in target;\n  },\n  set() {\n    return true;\n  },\n  deleteProperty() {\n    return true;\n  },\n  ownKeys: ownKeys,\n  getOwnPropertyDescriptor: proxyDescriptor$1\n};\nfunction setProperty(state, property, value, deleting = false) {\n  if (!deleting && state[property] === value) return;\n  const prev = state[property],\n    len = state.length;\n  if (value === undefined) {\n    delete state[property];\n    if (state[$HAS] && state[$HAS][property] && prev !== undefined) state[$HAS][property].$();\n  } else {\n    state[property] = value;\n    if (state[$HAS] && state[$HAS][property] && prev === undefined) state[$HAS][property].$();\n  }\n  let nodes = getNodes(state, $NODE),\n    node;\n  if (node = getNode(nodes, property, prev)) node.$(() => value);\n  if (Array.isArray(state) && state.length !== len) {\n    for (let i = state.length; i < len; i++) (node = nodes[i]) && node.$();\n    (node = getNode(nodes, \"length\", len)) && node.$(state.length);\n  }\n  (node = nodes[$SELF]) && node.$();\n}\nfunction mergeStoreNode(state, value) {\n  const keys = Object.keys(value);\n  for (let i = 0; i < keys.length; i += 1) {\n    const key = keys[i];\n    setProperty(state, key, value[key]);\n  }\n}\nfunction updateArray(current, next) {\n  if (typeof next === \"function\") next = next(current);\n  next = unwrap(next);\n  if (Array.isArray(next)) {\n    if (current === next) return;\n    let i = 0,\n      len = next.length;\n    for (; i < len; i++) {\n      const value = next[i];\n      if (current[i] !== value) setProperty(current, i, value);\n    }\n    setProperty(current, \"length\", len);\n  } else mergeStoreNode(current, next);\n}\nfunction updatePath(current, path, traversed = []) {\n  let part,\n    prev = current;\n  if (path.length > 1) {\n    part = path.shift();\n    const partType = typeof part,\n      isArray = Array.isArray(current);\n    if (Array.isArray(part)) {\n      for (let i = 0; i < part.length; i++) {\n        updatePath(current, [part[i]].concat(path), traversed);\n      }\n      return;\n    } else if (isArray && partType === \"function\") {\n      for (let i = 0; i < current.length; i++) {\n        if (part(current[i], i)) updatePath(current, [i].concat(path), traversed);\n      }\n      return;\n    } else if (isArray && partType === \"object\") {\n      const {\n        from = 0,\n        to = current.length - 1,\n        by = 1\n      } = part;\n      for (let i = from; i <= to; i += by) {\n        updatePath(current, [i].concat(path), traversed);\n      }\n      return;\n    } else if (path.length > 1) {\n      updatePath(current[part], path, [part].concat(traversed));\n      return;\n    }\n    prev = current[part];\n    traversed = [part].concat(traversed);\n  }\n  let value = path[0];\n  if (typeof value === \"function\") {\n    value = value(prev, traversed);\n    if (value === prev) return;\n  }\n  if (part === undefined && value == undefined) return;\n  value = unwrap(value);\n  if (part === undefined || isWrappable(prev) && isWrappable(value) && !Array.isArray(value)) {\n    mergeStoreNode(prev, value);\n  } else setProperty(current, part, value);\n}\nfunction createStore(...[store, options]) {\n  const unwrappedStore = unwrap(store || {});\n  const isArray = Array.isArray(unwrappedStore);\n  const wrappedStore = wrap$1(unwrappedStore);\n  function setStore(...args) {\n    batch(() => {\n      isArray && args.length === 1 ? updateArray(unwrappedStore, args[0]) : updatePath(unwrappedStore, args);\n    });\n  }\n  return [wrappedStore, setStore];\n}\n\nfunction proxyDescriptor(target, property) {\n  const desc = Reflect.getOwnPropertyDescriptor(target, property);\n  if (!desc || desc.get || desc.set || !desc.configurable || property === $PROXY || property === $NODE) return desc;\n  delete desc.value;\n  delete desc.writable;\n  desc.get = () => target[$PROXY][property];\n  desc.set = v => target[$PROXY][property] = v;\n  return desc;\n}\nconst proxyTraps = {\n  get(target, property, receiver) {\n    if (property === $RAW) return target;\n    if (property === $PROXY) return receiver;\n    if (property === $TRACK) {\n      trackSelf(target);\n      return receiver;\n    }\n    const nodes = getNodes(target, $NODE);\n    const tracked = nodes[property];\n    let value = tracked ? tracked() : target[property];\n    if (property === $NODE || property === $HAS || property === \"__proto__\") return value;\n    if (!tracked) {\n      const desc = Object.getOwnPropertyDescriptor(target, property);\n      const isFunction = typeof value === \"function\";\n      if (getListener() && (!isFunction || target.hasOwnProperty(property)) && !(desc && desc.get)) value = getNode(nodes, property, value)();else if (value != null && isFunction && value === Array.prototype[property]) {\n        return (...args) => batch(() => Array.prototype[property].apply(receiver, args));\n      }\n    }\n    return isWrappable(value) ? wrap(value) : value;\n  },\n  has(target, property) {\n    if (property === $RAW || property === $PROXY || property === $TRACK || property === $NODE || property === $HAS || property === \"__proto__\") return true;\n    getListener() && getNode(getNodes(target, $HAS), property)();\n    return property in target;\n  },\n  set(target, property, value) {\n    batch(() => setProperty(target, property, unwrap(value)));\n    return true;\n  },\n  deleteProperty(target, property) {\n    batch(() => setProperty(target, property, undefined, true));\n    return true;\n  },\n  ownKeys: ownKeys,\n  getOwnPropertyDescriptor: proxyDescriptor\n};\nfunction wrap(value) {\n  let p = value[$PROXY];\n  if (!p) {\n    Object.defineProperty(value, $PROXY, {\n      value: p = new Proxy(value, proxyTraps)\n    });\n    const keys = Object.keys(value),\n      desc = Object.getOwnPropertyDescriptors(value);\n    const proto = Object.getPrototypeOf(value);\n    const isClass = value !== null && typeof value === \"object\" && !Array.isArray(value) && proto !== Object.prototype;\n    if (isClass) {\n      const descriptors = Object.getOwnPropertyDescriptors(proto);\n      keys.push(...Object.keys(descriptors));\n      Object.assign(desc, descriptors);\n    }\n    for (let i = 0, l = keys.length; i < l; i++) {\n      const prop = keys[i];\n      if (isClass && prop === \"constructor\") continue;\n      if (desc[prop].get) {\n        const get = desc[prop].get.bind(p);\n        Object.defineProperty(value, prop, {\n          get,\n          configurable: true\n        });\n      }\n      if (desc[prop].set) {\n        const og = desc[prop].set,\n          set = v => batch(() => og.call(p, v));\n        Object.defineProperty(value, prop, {\n          set,\n          configurable: true\n        });\n      }\n    }\n  }\n  return p;\n}\nfunction createMutable(state, options) {\n  const unwrappedStore = unwrap(state || {});\n  const wrappedStore = wrap(unwrappedStore);\n  return wrappedStore;\n}\nfunction modifyMutable(state, modifier) {\n  batch(() => modifier(unwrap(state)));\n}\n\nconst $ROOT = Symbol(\"store-root\");\nfunction applyState(target, parent, property, merge, key) {\n  const previous = parent[property];\n  if (target === previous) return;\n  const isArray = Array.isArray(target);\n  if (property !== $ROOT && (!isWrappable(target) || !isWrappable(previous) || isArray !== Array.isArray(previous) || key && target[key] !== previous[key])) {\n    setProperty(parent, property, target);\n    return;\n  }\n  if (isArray) {\n    if (target.length && previous.length && (!merge || key && target[0] && target[0][key] != null)) {\n      let i, j, start, end, newEnd, item, newIndicesNext, keyVal;\n      for (start = 0, end = Math.min(previous.length, target.length); start < end && (previous[start] === target[start] || key && previous[start] && target[start] && previous[start][key] === target[start][key]); start++) {\n        applyState(target[start], previous, start, merge, key);\n      }\n      const temp = new Array(target.length),\n        newIndices = new Map();\n      for (end = previous.length - 1, newEnd = target.length - 1; end >= start && newEnd >= start && (previous[end] === target[newEnd] || key && previous[start] && target[start] && previous[end][key] === target[newEnd][key]); end--, newEnd--) {\n        temp[newEnd] = previous[end];\n      }\n      if (start > newEnd || start > end) {\n        for (j = start; j <= newEnd; j++) setProperty(previous, j, target[j]);\n        for (; j < target.length; j++) {\n          setProperty(previous, j, temp[j]);\n          applyState(target[j], previous, j, merge, key);\n        }\n        if (previous.length > target.length) setProperty(previous, \"length\", target.length);\n        return;\n      }\n      newIndicesNext = new Array(newEnd + 1);\n      for (j = newEnd; j >= start; j--) {\n        item = target[j];\n        keyVal = key && item ? item[key] : item;\n        i = newIndices.get(keyVal);\n        newIndicesNext[j] = i === undefined ? -1 : i;\n        newIndices.set(keyVal, j);\n      }\n      for (i = start; i <= end; i++) {\n        item = previous[i];\n        keyVal = key && item ? item[key] : item;\n        j = newIndices.get(keyVal);\n        if (j !== undefined && j !== -1) {\n          temp[j] = previous[i];\n          j = newIndicesNext[j];\n          newIndices.set(keyVal, j);\n        }\n      }\n      for (j = start; j < target.length; j++) {\n        if (j in temp) {\n          setProperty(previous, j, temp[j]);\n          applyState(target[j], previous, j, merge, key);\n        } else setProperty(previous, j, target[j]);\n      }\n    } else {\n      for (let i = 0, len = target.length; i < len; i++) {\n        applyState(target[i], previous, i, merge, key);\n      }\n    }\n    if (previous.length > target.length) setProperty(previous, \"length\", target.length);\n    return;\n  }\n  const targetKeys = Object.keys(target);\n  for (let i = 0, len = targetKeys.length; i < len; i++) {\n    applyState(target[targetKeys[i]], previous, targetKeys[i], merge, key);\n  }\n  const previousKeys = Object.keys(previous);\n  for (let i = 0, len = previousKeys.length; i < len; i++) {\n    if (target[previousKeys[i]] === undefined) setProperty(previous, previousKeys[i], undefined);\n  }\n}\nfunction reconcile(value, options = {}) {\n  const {\n      merge,\n      key = \"id\"\n    } = options,\n    v = unwrap(value);\n  return state => {\n    if (!isWrappable(state) || !isWrappable(v)) return v;\n    const res = applyState(v, {\n      [$ROOT]: state\n    }, $ROOT, merge, key);\n    return res === undefined ? state : res;\n  };\n}\nconst producers = new WeakMap();\nconst setterTraps = {\n  get(target, property) {\n    if (property === $RAW) return target;\n    const value = target[property];\n    let proxy;\n    return isWrappable(value) ? producers.get(value) || (producers.set(value, proxy = new Proxy(value, setterTraps)), proxy) : value;\n  },\n  set(target, property, value) {\n    setProperty(target, property, unwrap(value));\n    return true;\n  },\n  deleteProperty(target, property) {\n    setProperty(target, property, undefined, true);\n    return true;\n  }\n};\nfunction produce(fn) {\n  return state => {\n    if (isWrappable(state)) {\n      let proxy;\n      if (!(proxy = producers.get(state))) {\n        producers.set(state, proxy = new Proxy(state, setterTraps));\n      }\n      fn(proxy);\n    }\n    return state;\n  };\n}\n\nconst DEV = undefined;\n\nexport { $RAW, DEV, createMutable, createStore, modifyMutable, produce, reconcile, unwrap };\n","import {createRoot} from 'solid-js';\nimport {createStore, reconcile, unwrap} from 'solid-js/store';\nimport {State} from '../config/state';\nimport rootScope from '../lib/rootScope';\n\nconst [appState, _setAppState] = createRoot(() => createStore<State>({} as any));\n\nconst setAppState: typeof _setAppState = (...args: any[]) => {\n  const key = args[0];\n  // @ts-ignore\n  _setAppState(...args);\n  // @ts-ignore\n  rootScope.managers.appStateManager.setByKey(key, unwrap(appState[key]));\n};\n\nconst setAppStateSilent = (key: any, value?: any) => {\n  if(typeof(key) === 'object') {\n    _setAppState(key);\n    return;\n  }\n\n  _setAppState(key, reconcile(value));\n};\n\nconst useAppState = () => [appState, setAppState] as const;\n\nexport {\n  appState,\n  useAppState,\n  setAppState,\n  setAppStateSilent\n};\n","export default function getObjectKeysAndSort(object: {[key: string]: any} | Map<number, any>, sort: 'asc' | 'desc' = 'asc') {\n  if(!object) return [];\n  const ids = object instanceof Map ? [...object.keys()] : Object.keys(object).map((i) => +i);\n  if(sort === 'asc') return ids.sort((a, b) => a - b);\n  else return ids.sort((a, b) => b - a);\n}\n","// import {Accessor, createMemo} from 'solid-js';\nimport {Accessor, createMemo} from 'solid-js';\nimport {createStore, reconcile} from 'solid-js/store';\nimport {Chat, User} from '../layer';\n\ntype Peer = Chat | User;\n\nconst [state, setState] = createStore<{[peerId: PeerId]: Peer}>({});\n\ntype ValueOrGetter<T> = T | Accessor<T>;\n\nfunction createMemoOrReturn<T extends ValueOrGetter<any>, R, V = T extends Accessor<infer V> ? V : T>(valueOrGetter: T, callback: (value: V) => R): T extends Accessor<any> ? Accessor<R> : R {\n  // @ts-ignore\n  return typeof(valueOrGetter) === 'function' ? createMemo(() => callback((valueOrGetter as Accessor<T>)())) : callback(valueOrGetter);\n}\n\nexport function usePeer<T extends ValueOrGetter<PeerId>>(peerId: T) {\n  return createMemoOrReturn(peerId, (peerId) => state[peerId]);\n}\n\nexport function useChat<T extends ValueOrGetter<ChatId>>(chatId: T) {\n  return createMemoOrReturn<T, Chat>(chatId, (chatId) => state[chatId?.toPeerId(true)] as Chat);\n}\n\nexport function useUser<T extends ValueOrGetter<UserId>>(userId: T) {\n  return createMemoOrReturn<T, User>(userId, (userId) => state[userId?.toPeerId(false)] as User);\n}\n\nexport function reconcilePeer(peerId: PeerId, peer: Peer) {\n  setState(peerId, reconcile(peer));\n}\n\nexport function reconcilePeers(peers: {[peerId: PeerId]: Peer}) {\n  setState(/* reconcile */(peers));\n}\n","import {ActiveAccountNumber} from './types';\n\nexport function getValidatedAccount(input: string | number) {\n  input = parseInt((input || '1') + '');\n  return (input <= 4 && input >= 1 ? input : 1) as ActiveAccountNumber;\n}\n","import {getValidatedAccount} from './getValidatedAccount';\nimport {CURRENT_ACCOUNT_QUERY_PARAM} from './constants';\n\nexport function getCurrentAccountFromURL(urlString: string) {\n  const params = new URL(urlString).searchParams;\n  return getValidatedAccount(params.get(CURRENT_ACCOUNT_QUERY_PARAM) || '');\n}\n","import {getCurrentAccountFromURL} from './getCurrentAccountFromURL';\nimport {ActiveAccountNumber} from './types';\n\nexport const getCurrentAccount = (() => {\n  let result: ActiveAccountNumber;\n  return () => (result ??= getCurrentAccountFromURL(window.location.href));\n})();\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type createManagers from './createManagers';\nimport type {AckedResult} from '../mtproto/superMessagePort';\nimport {ModifyFunctionsToAsync} from '../../types';\nimport apiManagerProxy from '../mtproto/mtprotoworker';\nimport DEBUG, {MOUNT_CLASS_TO} from '../../config/debug';\nimport {getCurrentAccount} from '../accounts/getCurrentAccount';\nimport {ActiveAccountNumber} from '../accounts/types';\n\n// let stats: {\n//   [manager: string]: {\n//     [method: string]: {\n//       times: number[],\n//       byArgs: {\n//         [args: string]: number[]\n//       }\n//     }\n//   }\n// } = {};\n\n// let sentCount = 0;\n// let sentMethods: {[key: string]: number} = {};\n// let sentMethods2: {[key: string]: number} = {};\n// function collectStats(manager: string, method: string, args: any[], promise: Promise<any>) {\n//   ++sentCount;\n\n//   const key = [manager, method].join('-');\n//   if(!sentMethods[key]) sentMethods[key] = 0;\n//   ++sentMethods[key];\n\n//   const key2 = [('00000' + sentCount).slice(-5), key].join('-');\n\n//   const byManager = stats[manager] ??= {};\n//   const byMethod = byManager[method] ??= {times: [], byArgs: {}};\n\n//   const perf = performance.now();\n//   promise.catch(noop).finally(() => {\n//     const time = performance.now() - perf;\n//     byMethod.times.push(time);\n\n//     sentMethods2[key2] = time;\n\n//     try {\n//       const argsString = JSON.stringify(args);\n//       byMethod.byArgs[argsString].push(time);\n//     } catch(err) {}\n//   });\n// }\n\n// setInterval(() => {\n//   console.log(\n//     dT(),\n//     '[PROXY] stats',\n//     ...[\n//       stats,\n//       sentCount,\n//       sentMethods,\n//       sentMethods2\n//     ].map(copy),\n//     Object.entries(sentMethods).sort((a, b) => b[1] - a[1])\n//   );\n//   sentCount = 0;\n//   stats = {};\n//   sentMethods = {};\n//   sentMethods2 = {};\n// }, 2000);\n\nconst DEBUG_MANAGER_REQUESTS: {[managerName: string]: Set<string>} = {\n  // appProfileManager: new Set(['getProfile', 'getProfileByPeerId'])\n  // appPeersManager: new Set(['getPeer'])\n  // appChatsManager: new Set(['getChat'])\n  // appMessagesManager: new Set(['getMessageByPeer', 'getGroupsFirstMessage'])\n};\n\nfunction createProxy(/* source: T,  */name: string, accountNumber: ActiveAccountNumber, ack?: boolean) {\n  const proxy = new Proxy({}, {\n    get: (target, p, receiver) => {\n      // console.log('get', target, p, receiver);\n      // @ts-ignore\n      // const value = source[p];\n      // if(typeof(value) !== 'function') {\n      //   return value;\n      // }\n\n      return (...args: any[]) => {\n        const promise = apiManagerProxy.invoke('manager', {\n          name,\n          method: p as string,\n          args,\n          accountNumber\n        }, ack as any);\n\n        if(DEBUG) {\n          if(DEBUG_MANAGER_REQUESTS[name]?.has(p as any)) {\n            console.warn('manager request', name, p, args, ack);\n          }\n        }\n\n        // collectStats(name, p as string, args, promise);\n\n        return promise;\n\n        // @ts-ignore\n        // return Promise.resolve(value.call(source, ...args));\n      };\n    }\n  });\n\n  return proxy;\n}\n\ntype AA<T> = {\n  [key in keyof T]: T[key] extends (...args: infer A) => infer R ? (...args: A) => Promise<AckedResult<Awaited<R>>> : never\n};\n\ntype T = Awaited<ReturnType<typeof createManagers>>;\nexport type ProxiedManagers = {\n  [name in keyof T]?: ModifyFunctionsToAsync<T[name]>;\n};\n\ntype ProxiedAndAcknowledgedManagers = ProxiedManagers & {\n  acknowledged?: {\n    [name in keyof T]?: AA<T[name]>;\n  }\n};\n\nfunction createProxyProxy(proxied: any, accountNumber: ActiveAccountNumber, ack?: boolean) {\n  return new Proxy(proxied, {\n    get: (target, p, receiver) => {\n      // @ts-ignore\n      return target[p] ??= createProxy(p as string, accountNumber, ack);\n    }\n  });\n}\n\nexport function createProxiedManagersForAccount(accountNumber: ActiveAccountNumber): ProxiedManagers {\n  return createProxyProxy({}, accountNumber);\n}\n\nMOUNT_CLASS_TO.createProxiedManagersForAccount = createProxiedManagersForAccount;\n\nlet proxied: ProxiedAndAcknowledgedManagers;\nexport default function getProxiedManagers() {\n  if(proxied) {\n    return proxied;\n  }\n\n  proxied = createProxyProxy({}, getCurrentAccount(), false);\n  proxied.acknowledged = createProxyProxy({}, getCurrentAccount(), true);\n  return proxied;\n}\n","export default function limitSymbols(str: string, length: number, limitFrom = length + 10) {\n  str = str.trim();\n  if(str.length > limitFrom) {\n    str = str.slice(0, length)/* .replace(/\\s*$/, '') */ + '...';\n  }\n\n  return str;\n}\n","import {Chat, User} from '../../../../layer';\n\nexport default function getPeerActiveUsernames(peer: User | Chat) {\n  if(!peer) {\n    return [];\n  }\n\n  const usernames = (peer as Chat.channel).usernames;\n  if(usernames) {\n    return usernames\n    .filter((username) => username.pFlags.active)\n    // .sort((a, b) => +!!b.pFlags.editable - +!!a.pFlags.editable)\n    .map((username) => username.username);\n  }\n\n  return (peer as Chat.channel).username ? [(peer as Chat.channel).username] : [];\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\n// From https://github.com/stephenmathieson/node-tlds/blob/master/index.js\nconst TLD = ['abogado', 'ac', 'academy', 'accountants', 'active', 'actor', 'ad', 'adult', 'ae', 'aero', 'af', 'ag', 'agency', 'ai', 'airforce', 'al', 'allfinanz', 'alsace', 'am', 'amsterdam', 'an', 'android', 'ao', 'apartments', 'aq', 'aquarelle', 'ar', 'archi', 'army', 'arpa', 'as', 'asia', 'associates', 'at', 'attorney', 'au', 'auction', 'audio', 'autos', 'aw', 'ax', 'axa', 'az', 'ba', 'band', 'bank', 'bar', 'barclaycard', 'barclays', 'bargains', 'bayern', 'bb', 'bd', 'be', 'beer', 'berlin', 'best', 'bf', 'bg', 'bh', 'bi', 'bid', 'bike', 'bingo', 'bio', 'biz', 'bj', 'black', 'blackfriday', 'bloomberg', 'blue', 'bm', 'bmw', 'bn', 'bnpparibas', 'bo', 'boo', 'boutique', 'br', 'brussels', 'bs', 'bt', 'budapest', 'build', 'builders', 'business', 'buzz', 'bv', 'bw', 'by', 'bz', 'bzh', 'ca', 'cab', 'cal', 'camera', 'camp', 'cancerresearch', 'canon', 'capetown', 'capital', 'caravan', 'cards', 'care', 'career', 'careers', 'cartier', 'casa', 'cash', 'cat', 'catering', 'cc', 'cd', 'center', 'ceo', 'cern', 'cf', 'cg', 'ch', 'channel', 'chat', 'cheap', 'christmas', 'chrome', 'church', 'ci', 'citic', 'city', 'ck', 'cl', 'claims', 'cleaning', 'click', 'clinic', 'clothing', 'club', 'cm', 'cn', 'co', 'coach', 'codes', 'coffee', 'college', 'cologne', 'com', 'community', 'company', 'computer', 'condos', 'construction', 'consulting', 'contractors', 'cooking', 'cool', 'coop', 'country', 'cr', 'credit', 'creditcard', 'cricket', 'crs', 'cruises', 'cu', 'cuisinella', 'cv', 'cw', 'cx', 'cy', 'cymru', 'cz', 'dabur', 'dad', 'dance', 'dating', 'day', 'dclk', 'de', 'deals', 'degree', 'delivery', 'democrat', 'dental', 'dentist', 'desi', 'design', 'dev', 'diamonds', 'diet', 'digital', 'direct', 'directory', 'discount', 'dj', 'dk', 'dm', 'dnp', 'do', 'docs', 'domains', 'doosan', 'durban', 'dvag', 'dz', 'eat', 'ec', 'edu', 'education', 'ee', 'eg', 'email', 'emerck', 'energy', 'engineer', 'engineering', 'enterprises', 'equipment', 'er', 'es', 'esq', 'estate', 'et', 'eu', 'eurovision', 'eus', 'events', 'everbank', 'exchange', 'expert', 'exposed', 'fail', 'farm', 'fashion', 'feedback', 'fi', 'finance', 'financial', 'firmdale', 'fish', 'fishing', 'fit', 'fitness', 'fj', 'fk', 'flights', 'florist', 'flowers', 'flsmidth', 'fly', 'fm', 'fo', 'foo', 'forsale', 'foundation', 'fr', 'frl', 'frogans', 'fund', 'furniture', 'futbol', 'ga', 'gal', 'gallery', 'garden', 'gb', 'gbiz', 'gd', 'ge', 'gent', 'gf', 'gg', 'ggee', 'gh', 'gi', 'gift', 'gifts', 'gives', 'gl', 'glass', 'gle', 'global', 'globo', 'gm', 'gmail', 'gmo', 'gmx', 'gn', 'goog', 'google', 'gop', 'gov', 'gp', 'gq', 'gr', 'graphics', 'gratis', 'green', 'gripe', 'gs', 'gt', 'gu', 'guide', 'guitars', 'guru', 'gw', 'gy', 'hamburg', 'hangout', 'haus', 'healthcare', 'help', 'here', 'hermes', 'hiphop', 'hiv', 'hk', 'hm', 'hn', 'holdings', 'holiday', 'homes', 'horse', 'host', 'hosting', 'house', 'how', 'hr', 'ht', 'hu', 'ibm', 'id', 'ie', 'ifm', 'il', 'im', 'immo', 'immobilien', 'in', 'industries', 'info', 'ing', 'ink', 'institute', 'insure', 'int', 'international', 'investments', 'io', 'iq', 'ir', 'irish', 'is', 'it', 'iwc', 'jcb', 'je', 'jetzt', 'jm', 'jo', 'jobs', 'joburg', 'jp', 'juegos', 'kaufen', 'kddi', 'ke', 'kg', 'kh', 'ki', 'kim', 'kitchen', 'kiwi', 'km', 'kn', 'koeln', 'kp', 'kr', 'krd', 'kred', 'kw', 'ky', 'kyoto', 'kz', 'la', 'lacaixa', 'land', 'lat', 'latrobe', 'lawyer', 'lb', 'lc', 'lds', 'lease', 'legal', 'lgbt', 'li', 'lidl', 'life', 'lighting', 'limited', 'limo', 'link', 'lk', 'loans', 'london', 'lotte', 'lotto', 'lr', 'ls', 'lt', 'ltda', 'lu', 'luxe', 'luxury', 'lv', 'ly', 'ma', 'madrid', 'maison', 'management', 'mango', 'market', 'marketing', 'marriott', 'mc', 'md', 'me', 'media', 'meet', 'melbourne', 'meme', 'memorial', 'menu', 'mg', 'mh', 'miami', 'mil', 'mini', 'mk', 'ml', 'mm', 'mn', 'mo', 'mobi', 'moda', 'moe', 'monash', 'money', 'mormon', 'mortgage', 'moscow', 'motorcycles', 'mov', 'mp', 'mq', 'mr', 'ms', 'mt', 'mu', 'museum', 'mv', 'mw', 'mx', 'my', 'mz', 'na', 'nagoya', 'name', 'navy', 'nc', 'ne', 'net', 'network', 'neustar', 'new', 'nexus', 'nf', 'ng', 'ngo', 'nhk', 'ni', 'nico', 'ninja', 'nl', 'no', 'np', 'nr', 'nra', 'nrw', 'ntt', 'nu', 'nyc', 'nz', 'okinawa', 'om', 'one', 'ong', 'onl', 'ooo', 'org', 'organic', 'osaka', 'otsuka', 'ovh', 'pa', 'paris', 'partners', 'parts', 'party', 'pe', 'pf', 'pg', 'ph', 'pharmacy', 'photo', 'photography', 'photos', 'physio', 'pics', 'pictures', 'pink', 'pizza', 'pk', 'pl', 'place', 'plumbing', 'pm', 'pn', 'pohl', 'poker', 'porn', 'post', 'pr', 'praxi', 'press', 'pro', 'prod', 'productions', 'prof', 'properties', 'property', 'ps', 'pt', 'pub', 'pw', 'py', 'qa', 'qpon', 'quebec', 're', 'realtor', 'recipes', 'red', 'rehab', 'reise', 'reisen', 'reit', 'ren', 'rentals', 'repair', 'report', 'republican', 'rest', 'restaurant', 'reviews', 'rich', 'rio', 'rip', 'ro', 'rocks', 'rodeo', 'rs', 'rsvp', 'ru', 'ruhr', 'rw', 'ryukyu', 'sa', 'saarland', 'sale', 'samsung', 'sarl', 'saxo', 'sb', 'sc', 'sca', 'scb', 'schmidt', 'schule', 'schwarz', 'science', 'scot', 'sd', 'se', 'services', 'sew', 'sexy', 'sg', 'sh', 'shiksha', 'shoes', 'shriram', 'si', 'singles', 'sj', 'sk', 'sky', 'sl', 'sm', 'sn', 'so', 'social', 'software', 'sohu', 'solar', 'solutions', 'soy', 'space', 'spiegel', 'sr', 'st', 'style', 'su', 'supplies', 'supply', 'support', 'surf', 'surgery', 'suzuki', 'sv', 'sx', 'sy', 'sydney', 'systems', 'sz', 'taipei', 'tatar', 'tattoo', 'tax', 'tc', 'td', 'technology', 'tel', 'temasek', 'tennis', 'tf', 'tg', 'th', 'tienda', 'tips', 'tires', 'tirol', 'tj', 'tk', 'tl', 'tm', 'tn', 'to', 'today', 'tokyo', 'tools', 'top', 'toshiba', 'town', 'toys', 'tp', 'tr', 'trade', 'training', 'travel', 'trust', 'tt', 'tui', 'tv', 'tw', 'tz', 'ua', 'ug', 'uk', 'university', 'uno', 'uol', 'us', 'uy', 'uz', 'va', 'vacations', 'vc', 've', 'vegas', 'ventures', 'versicherung', 'vet', 'vg', 'vi', 'viajes', 'video', 'villas', 'vision', 'vlaanderen', 'vn', 'vodka', 'vote', 'voting', 'voto', 'voyage', 'vu', 'wales', 'wang', 'watch', 'webcam', 'website', 'wed', 'wedding', 'wf', 'whoswho', 'wien', 'wiki', 'williamhill', 'wme', 'work', 'works', 'world', 'ws', 'wtc', 'wtf', '佛山', '集团', '在线', '한국', 'ভারত', '八卦', 'موقع', '公益', '公司', '移动', '我爱你', 'москва', 'қаз', 'онлайн', 'сайт', 'срб', '淡马锡', 'орг', '삼성', 'சிங்கப்பூர்', '商标', '商店', '商城', 'дети', 'мкд', '中文网', '中信', '中国', '中國', '谷歌', 'భారత్', 'ලංකා', 'ભારત', 'भारत', '网店', 'संगठन', '网络', 'укр', '香港', '台湾', '台灣', '手机', 'мон', 'الجزائر', 'عمان', 'ایران', 'امارات', 'بازار', 'الاردن', 'بھارت', 'المغرب', 'السعودية', 'مليسيا', 'شبكة', 'გე', '机构', '组织机构', 'ไทย', 'سورية', 'рус', 'рф', 'تونس', 'みんな', 'グーグル', '世界', 'ਭਾਰਤ', '网址', '游戏', 'vermögensberater', 'vermögensberatung', '企业', 'مصر', 'قطر', '广东', 'இலங்கை', 'இந்தியா', '新加坡', 'فلسطين', '政务', 'xxx', 'xyz', 'yachts', 'yandex', 'ye', 'yoga', 'yokohama', 'youtube', 'yt', 'za', 'zip', 'zm', 'zone', 'zuerich', 'zw'];\n\nexport default TLD;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nexport default function checkBrackets(url: string) {\n  var urlLength = url.length;\n  var urlOpenBrackets = url.split('(').length - 1;\n  var urlCloseBrackets = url.split(')').length - 1;\n  while(urlCloseBrackets > urlOpenBrackets &&\n    url.charAt(urlLength - 1) === ')') {\n    url = url.substr(0, urlLength - 1)\n    urlCloseBrackets--;\n    urlLength--;\n  }\n  if(urlOpenBrackets > urlCloseBrackets) {\n    url = url.replace(/\\)+$/, '');\n  }\n  return url;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {EMOJI_VERSION} from '../environment/emojiVersionsSupport';\n\nexport const EmojiVersions: {[version in EMOJI_VERSION]: {[emoji: string]: number}} = {'14':{'1f6dd':4867, '1f6de':4916, '1f6df':4923, '1f7f0':62832, '1f979':183, '1f9cc':1557, '1fa7b':61332, '1fa7c':61330, '1faa9':51093, '1faaa':61364, '1faab':61189, '1faac':51085, '1fab7':2651, '1fab8':2631, '1fab9':2672, '1faba':2673, '1fac3':1520, '1fac4':1521, '1fac5':1505, '1fad7':3793, '1fad8':3707, '1fad9':3804, '1fae0':111, '1fae1':136, '1fae2':132, '1fae3':133, '1fae4':174, '1fae5':142, '1fae6':1385, '1fae7':61353, '1faf0':1341, '1faf1':1332, '1faf2':1333, '1faf3':1334, '1faf4':1335, '1faf5':1351, '1faf6':1360, '1faf1-1f3fb-200d-1faf2-1f3fc':0, '1faf1-1f3fb-200d-1faf2-1f3fd':0, '1faf1-1f3fb-200d-1faf2-1f3fe':0, '1faf1-1f3fb-200d-1faf2-1f3ff':0, '1faf1-1f3fc-200d-1faf2-1f3fb':0, '1faf1-1f3fc-200d-1faf2-1f3fd':0, '1faf1-1f3fc-200d-1faf2-1f3fe':0, '1faf1-1f3fc-200d-1faf2-1f3ff':0, '1faf1-1f3fd-200d-1faf2-1f3fb':0, '1faf1-1f3fd-200d-1faf2-1f3fc':0, '1faf1-1f3fd-200d-1faf2-1f3fe':0, '1faf1-1f3fd-200d-1faf2-1f3ff':0, '1faf1-1f3fe-200d-1faf2-1f3fb':0, '1faf1-1f3fe-200d-1faf2-1f3fc':0, '1faf1-1f3fe-200d-1faf2-1f3fd':0, '1faf1-1f3fe-200d-1faf2-1f3ff':0, '1faf1-1f3ff-200d-1faf2-1f3fb':0, '1faf1-1f3ff-200d-1faf2-1f3fc':0, '1faf1-1f3ff-200d-1faf2-1f3fd':0, '1faf1-1f3ff-200d-1faf2-1f3fe':0, '1fac3-1f3fb':0, '1fac3-1f3fc':0, '1fac3-1f3fd':0, '1fac3-1f3fe':0, '1fac3-1f3ff':0, '1fac4-1f3fb':0, '1fac4-1f3fc':0, '1fac4-1f3fd':0, '1fac4-1f3fe':0, '1fac4-1f3ff':0, '1fac5-1f3fb':0, '1fac5-1f3fc':0, '1fac5-1f3fd':0, '1fac5-1f3fe':0, '1fac5-1f3ff':0, '1faf0-1f3fb':0, '1faf0-1f3fc':0, '1faf0-1f3fd':0, '1faf0-1f3fe':0, '1faf0-1f3ff':0, '1faf1-1f3fb':0, '1faf1-1f3fc':0, '1faf1-1f3fd':0, '1faf1-1f3fe':0, '1faf1-1f3ff':0, '1faf2-1f3fb':0, '1faf2-1f3fc':0, '1faf2-1f3fd':0, '1faf2-1f3fe':0, '1faf2-1f3ff':0, '1faf3-1f3fb':0, '1faf3-1f3fc':0, '1faf3-1f3fd':0, '1faf3-1f3fe':0, '1faf3-1f3ff':0, '1faf4-1f3fb':0, '1faf4-1f3fc':0, '1faf4-1f3fd':0, '1faf4-1f3fe':0, '1faf4-1f3ff':0, '1faf5-1f3fb':0, '1faf5-1f3fc':0, '1faf5-1f3fd':0, '1faf5-1f3fe':0, '1faf5-1f3ff':0, '1faf6-1f3fb':0, '1faf6-1f3fc':0, '1faf6-1f3fd':0, '1faf6-1f3fe':0, '1faf6-1f3ff':0}, '':{'2049':62835, '2122':62863, '2139':62888, '2194':62764, '2195':62763, '2196':62762, '2197':62756, '2198':62758, '2199':62760, '2328':61194, '2600':4990, '2601':4998, '2602':41013, '2603':41018, '2604':41020, '2611':62851, '2614':41014, '2615':3781, '2618':2667, '2620':1106, '2622':62753, '2623':62754, '2626':62783, '2638':62780, '2639':177, '2648':62788, '2649':62789, '2650':62796, '2651':62797, '2652':62798, '2653':62799, '2660':51095, '2663':51098, '2665':51096, '2666':51097, '2668':4865, '2692':61297, '2693':4922, '2694':61300, '2696':61311, '2697':61319, '2699':61309, '2702':61284, '2705':62850, '2708':4931, '2709':61245, '2712':61259, '2714':62852, '2716':62828, '2721':62779, '2728':51029, '2733':62858, '2734':62859, '2744':41017, '2747':62860, '2753':62836, '2754':62837, '2755':62838, '2757':62839, '2763':1137, '2764':1141, '2795':62829, '2796':62830, '2797':62831, '2934':62767, '2935':62768, '3030':62840, '3297':62912, '3299':62913, '0023-20e3':62864, '002a-20e3':62865, '0030-20e3':62866, '0031-20e3':62867, '0032-20e3':62868, '0033-20e3':62869, '0034-20e3':62870, '0035-20e3':62871, '0036-20e3':62872, '0037-20e3':62873, '0038-20e3':62874, '0039-20e3':62875, '00a9':62861, '00ae':62862, '1f004':51101, '1f0cf':51100, '1f170':62882, '1f171':62884, '1f17e':62893, '1f17f':62895, '1f18e':62883, '1f191':62885, '1f192':62886, '1f193':62887, '1f194':62889, '1f195':62891, '1f196':62892, '1f197':62894, '1f198':62896, '1f199':62897, '1f19a':62898, '1f1e6-1f1e8':71594, '1f1e6-1f1e9':71595, '1f1e6-1f1ea':71596, '1f1e6-1f1eb':71597, '1f1e6-1f1ec':71598, '1f1e6-1f1ee':71599, '1f1e6-1f1f1':71600, '1f1e6-1f1f2':71601, '1f1e6-1f1f4':71602, '1f1e6-1f1f6':71603, '1f1e6-1f1f7':71604, '1f1e6-1f1f8':71605, '1f1e6-1f1f9':71606, '1f1e6-1f1fa':71607, '1f1e6-1f1fc':71608, '1f1e6-1f1fd':71609, '1f1e6-1f1ff':71610, '1f1e7-1f1e6':71611, '1f1e7-1f1e7':71612, '1f1e7-1f1e9':71613, '1f1e7-1f1ea':71614, '1f1e7-1f1eb':71615, '1f1e7-1f1ec':71616, '1f1e7-1f1ed':71617, '1f1e7-1f1ee':71618, '1f1e7-1f1ef':71619, '1f1e7-1f1f1':71620, '1f1e7-1f1f2':71621, '1f1e7-1f1f3':71622, '1f1e7-1f1f4':71623, '1f1e7-1f1f6':71624, '1f1e7-1f1f7':71625, '1f1e7-1f1f8':71626, '1f1e7-1f1f9':71627, '1f1e7-1f1fb':71628, '1f1e7-1f1fc':71629, '1f1e7-1f1fe':71630, '1f1e7-1f1ff':71631, '1f1e8-1f1e6':71632, '1f1e8-1f1e8':71633, '1f1e8-1f1e9':71634, '1f1e8-1f1eb':71635, '1f1e8-1f1ec':71636, '1f1e8-1f1ed':71637, '1f1e8-1f1ee':71638, '1f1e8-1f1f0':71639, '1f1e8-1f1f1':71640, '1f1e8-1f1f2':71641, '1f1e8-1f1f3':71642, '1f1e8-1f1f4':71643, '1f1e8-1f1f5':71644, '1f1e8-1f1f7':71645, '1f1e8-1f1fa':71646, '1f1e8-1f1fb':71647, '1f1e8-1f1fc':71648, '1f1e8-1f1fd':71649, '1f1e8-1f1fe':71650, '1f1e8-1f1ff':71651, '1f1e9-1f1ea':71652, '1f1e9-1f1ec':71653, '1f1e9-1f1ef':71654, '1f1e9-1f1f0':71655, '1f1e9-1f1f2':71656, '1f1e9-1f1f4':71657, '1f1e9-1f1ff':71658, '1f1ea-1f1e6':71659, '1f1ea-1f1e8':71660, '1f1ea-1f1ea':71661, '1f1ea-1f1ec':71662, '1f1ea-1f1ed':71663, '1f1ea-1f1f7':71664, '1f1ea-1f1f8':71665, '1f1ea-1f1f9':71666, '1f1ea-1f1fa':71667, '1f1eb-1f1ee':71668, '1f1eb-1f1ef':71669, '1f1eb-1f1f0':71670, '1f1eb-1f1f2':71671, '1f1eb-1f1f4':71672, '1f1eb-1f1f7':71673, '1f1ec-1f1e6':71674, '1f1ec-1f1e7':71675, '1f1ec-1f1e9':71676, '1f1ec-1f1ea':71677, '1f1ec-1f1eb':71678, '1f1ec-1f1ec':71679, '1f1ec-1f1ed':71680, '1f1ec-1f1ee':71681, '1f1ec-1f1f1':71682, '1f1ec-1f1f2':71683, '1f1ec-1f1f3':71684, '1f1ec-1f1f5':71685, '1f1ec-1f1f6':71686, '1f1ec-1f1f7':71687, '1f1ec-1f1f8':71688, '1f1ec-1f1f9':71689, '1f1ec-1f1fa':71690, '1f1ec-1f1fc':71691, '1f1ec-1f1fe':71692, '1f1ed-1f1f0':71693, '1f1ed-1f1f2':71694, '1f1ed-1f1f3':71695, '1f1ed-1f1f7':71696, '1f1ed-1f1f9':71697, '1f1ed-1f1fa':71698, '1f1ee-1f1e8':71699, '1f1ee-1f1e9':71700, '1f1ee-1f1ea':71701, '1f1ee-1f1f1':71702, '1f1ee-1f1f2':71703, '1f1ee-1f1f3':71704, '1f1ee-1f1f4':71705, '1f1ee-1f1f6':71706, '1f1ee-1f1f7':71707, '1f1ee-1f1f8':71708, '1f1ee-1f1f9':71709, '1f1ef-1f1ea':71710, '1f1ef-1f1f2':71711, '1f1ef-1f1f4':71712, '1f1ef-1f1f5':71713, '1f1f0-1f1ea':71714, '1f1f0-1f1ec':71715, '1f1f0-1f1ed':71716, '1f1f0-1f1ee':71717, '1f1f0-1f1f2':71718, '1f1f0-1f1f3':71719, '1f1f0-1f1f5':71720, '1f1f0-1f1f7':71721, '1f1f0-1f1fc':71722, '1f1f0-1f1fe':71723, '1f1f0-1f1ff':71724, '1f1f1-1f1e6':71725, '1f1f1-1f1e7':71726, '1f1f1-1f1e8':71727, '1f1f1-1f1ee':71728, '1f1f1-1f1f0':71729, '1f1f1-1f1f7':71730, '1f1f1-1f1f8':71731, '1f1f1-1f1f9':71732, '1f1f1-1f1fa':71733, '1f1f1-1f1fb':71734, '1f1f1-1f1fe':71735, '1f1f2-1f1e6':71736, '1f1f2-1f1e8':71737, '1f1f2-1f1e9':71738, '1f1f2-1f1ea':71739, '1f1f2-1f1eb':71740, '1f1f2-1f1ec':71741, '1f1f2-1f1ed':71742, '1f1f2-1f1f0':71743, '1f1f2-1f1f1':71744, '1f1f2-1f1f2':71745, '1f1f2-1f1f3':71746, '1f1f2-1f1f4':71747, '1f1f2-1f1f5':71748, '1f1f2-1f1f6':71749, '1f1f2-1f1f7':71750, '1f1f2-1f1f8':71751, '1f1f2-1f1f9':71752, '1f1f2-1f1fa':71753, '1f1f2-1f1fb':71754, '1f1f2-1f1fc':71755, '1f1f2-1f1fd':71756, '1f1f2-1f1fe':71757, '1f1f2-1f1ff':71758, '1f1f3-1f1e6':71759, '1f1f3-1f1e8':71760, '1f1f3-1f1ea':71761, '1f1f3-1f1eb':71762, '1f1f3-1f1ec':71763, '1f1f3-1f1ee':71764, '1f1f3-1f1f1':71765, '1f1f3-1f1f4':71766, '1f1f3-1f1f5':71767, '1f1f3-1f1f7':71768, '1f1f3-1f1fa':71769, '1f1f3-1f1ff':71770, '1f1f4-1f1f2':71771, '1f1f5-1f1e6':71772, '1f1f5-1f1ea':71773, '1f1f5-1f1eb':71774, '1f1f5-1f1ec':71775, '1f1f5-1f1ed':71776, '1f1f5-1f1f0':71777, '1f1f5-1f1f1':71778, '1f1f5-1f1f2':71779, '1f1f5-1f1f3':71780, '1f1f5-1f1f7':71781, '1f1f5-1f1f8':71782, '1f1f5-1f1f9':71783, '1f1f5-1f1fc':71784, '1f1f5-1f1fe':71785, '1f1f6-1f1e6':71786, '1f1f7-1f1ea':71787, '1f1f7-1f1f4':71788, '1f1f7-1f1f8':71789, '1f1f7-1f1fa':71790, '1f1f7-1f1fc':71791, '1f1f8-1f1e6':71792, '1f1f8-1f1e7':71793, '1f1f8-1f1e8':71794, '1f1f8-1f1e9':71795, '1f1f8-1f1ea':71796, '1f1f8-1f1ec':71797, '1f1f8-1f1ed':71798, '1f1f8-1f1ee':71799, '1f1f8-1f1ef':71800, '1f1f8-1f1f0':71801, '1f1f8-1f1f1':71802, '1f1f8-1f1f2':71803, '1f1f8-1f1f3':71804, '1f1f8-1f1f4':71805, '1f1f8-1f1f7':71806, '1f1f8-1f1f8':71807, '1f1f8-1f1f9':71808, '1f1f8-1f1fb':71809, '1f1f8-1f1fd':71810, '1f1f8-1f1fe':71811, '1f1f8-1f1ff':71812, '1f1f9-1f1e6':71813, '1f1f9-1f1e8':71814, '1f1f9-1f1e9':71815, '1f1f9-1f1eb':71816, '1f1f9-1f1ec':71817, '1f1f9-1f1ed':71818, '1f1f9-1f1ef':71819, '1f1f9-1f1f0':71820, '1f1f9-1f1f1':71821, '1f1f9-1f1f2':71822, '1f1f9-1f1f3':71823, '1f1f9-1f1f4':71824, '1f1f9-1f1f7':71825, '1f1f9-1f1f9':71826, '1f1f9-1f1fb':71827, '1f1f9-1f1fc':71828, '1f1f9-1f1ff':71829, '1f1fa-1f1e6':71830, '1f1fa-1f1ec':71831, '1f1fa-1f1f2':71832, '1f1fa-1f1f3':71833, '1f1fa-1f1f8':71834, '1f1fa-1f1fe':71835, '1f1fa-1f1ff':71836, '1f1fb-1f1e6':71837, '1f1fb-1f1e8':71838, '1f1fb-1f1ea':71839, '1f1fb-1f1ec':71840, '1f1fb-1f1ee':71841, '1f1fb-1f1f3':71842, '1f1fb-1f1fa':71843, '1f1fc-1f1eb':71844, '1f1fc-1f1f8':71845, '1f1fd-1f1f0':71846, '1f1fe-1f1ea':71847, '1f1fe-1f1f9':71848, '1f1ff-1f1e6':71849, '1f1ff-1f1f2':71850, '1f1ff-1f1fc':71851, '1f201':62899, '1f202':62900, '1f21a':62906, '1f22f':62903, '1f232':62907, '1f233':62911, '1f234':62910, '1f235':62915, '1f236':62902, '1f237':62901, '1f238':62909, '1f239':62905, '1f23a':62914, '1f250':62904, '1f251':62908, '1f300':41010, '1f301':4857, '1f302':41012, '1f303':4858, '1f304':4860, '1f305':4861, '1f306':4862, '1f307':4863, '1f308':41011, '1f309':4864, '1f30a':41023, '1f30b':4815, '1f30c':4997, '1f30d':4806, '1f30e':4807, '1f30f':4808, '1f310':4809, '1f311':4977, '1f312':4978, '1f313':4979, '1f314':4980, '1f315':4981, '1f316':4982, '1f317':4983, '1f318':4984, '1f319':4985, '1f31a':4986, '1f31b':4987, '1f31c':4988, '1f31d':4991, '1f31e':4992, '1f31f':4995, '1f320':4996, '1f321':4989, '1f324':41001, '1f325':41002, '1f326':41003, '1f327':41004, '1f328':41005, '1f329':41006, '1f32a':41007, '1f32b':41008, '1f32c':41009, '1f32d':3725, '1f32e':3727, '1f32f':3728, '1f330':3708, '1f331':2659, '1f332':2661, '1f333':2662, '1f334':2663, '1f335':2664, '1f336':3698, '1f337':2658, '1f338':2649, '1f339':2653, '1f33a':2655, '1f33b':2656, '1f33c':2657, '1f33d':3697, '1f33e':2665, '1f33f':2666, '1f340':2668, '1f341':2669, '1f342':2670, '1f343':2671, '1f344':3705, '1f345':3690, '1f346':3694, '1f347':3674, '1f348':3675, '1f349':3676, '1f34a':3677, '1f34b':3678, '1f34c':3679, '1f34d':3680, '1f34e':3682, '1f34f':3683, '1f350':3684, '1f351':3685, '1f352':3686, '1f353':3687, '1f354':3722, '1f355':3724, '1f356':3718, '1f357':3719, '1f358':3744, '1f359':3745, '1f35a':3746, '1f35b':3747, '1f35c':3748, '1f35d':3749, '1f35e':3709, '1f35f':3723, '1f360':3750, '1f361':3756, '1f362':3751, '1f363':3752, '1f364':3753, '1f365':3754, '1f366':3765, '1f367':3766, '1f368':3767, '1f369':3768, '1f36a':3769, '1f36b':3774, '1f36c':3775, '1f36d':3776, '1f36e':3777, '1f36f':3778, '1f370':3771, '1f371':3743, '1f372':3735, '1f373':3733, '1f374':3801, '1f375':3783, '1f376':3784, '1f377':3786, '1f378':3787, '1f379':3788, '1f37a':3789, '1f37b':3790, '1f37c':3779, '1f37d':3800, '1f37e':3785, '1f37f':3739, '1f380':51040, '1f381':51041, '1f382':3770, '1f383':51024, '1f384':51025, '1f385':1527, '1f386':51026, '1f387':51027, '1f388':51030, '1f389':51031, '1f38a':51032, '1f38b':51033, '1f38c':71588, '1f38d':51034, '1f38e':51035, '1f38f':51036, '1f390':51037, '1f391':51038, '1f392':61134, '1f393':61147, '1f396':51045, '1f397':51042, '1f399':61167, '1f39a':61168, '1f39b':61169, '1f39e':61203, '1f39f':51043, '1f3a0':4866, '1f3a1':4868, '1f3a2':4869, '1f3a3':51072, '1f3a4':61170, '1f3a5':61202, '1f3a6':62819, '1f3a7':61171, '1f3a8':51105, '1f3a9':61146, '1f3aa':4871, '1f3ab':51044, '1f3ac':61205, '1f3ad':51103, '1f3ae':51086, '1f3af':51078, '1f3b0':51088, '1f3b1':51081, '1f3b2':51089, '1f3b3':51060, '1f3b4':51102, '1f3b5':61165, '1f3b6':61166, '1f3b7':61173, '1f3b8':61175, '1f3b9':61176, '1f3ba':61177, '1f3bb':61178, '1f3bc':61164, '1f3bd':51074, '1f3be':51058, '1f3bf':51075, '1f3c0':51054, '1f3c1':71586, '1f3c2':1600, '1f3c3-200d-2640':1584, '1f3c3-200d-2642':1583, '1f3c3':1582, '1f3c4-200d-2640':1606, '1f3c4-200d-2642':1605, '1f3c4':1604, '1f3c5':51047, '1f3c6':51046, '1f3c7':1598, '1f3c8':51056, '1f3c9':51057, '1f3ca-200d-2640':1612, '1f3ca-200d-2642':1611, '1f3ca':1610, '1f3cb-200d-2640':1618, '1f3cb-200d-2642':1617, '1f3cb':1616, '1f3cc-200d-2640':1603, '1f3cc-200d-2642':1602, '1f3cc':1601, '1f3cd':4902, '1f3ce':4901, '1f3cf':51061, '1f3d0':51055, '1f3d1':51062, '1f3d2':51063, '1f3d3':51065, '1f3d4':4813, '1f3d5':4817, '1f3d6':4818, '1f3d7':4824, '1f3d8':4829, '1f3d9':4859, '1f3da':4830, '1f3db':4823, '1f3dc':4819, '1f3dd':4820, '1f3de':4821, '1f3df':4822, '1f3e0':4831, '1f3e1':4832, '1f3e2':4833, '1f3e3':4834, '1f3e4':4835, '1f3e5':4836, '1f3e6':4837, '1f3e7':62729, '1f3e8':4838, '1f3e9':4839, '1f3ea':4840, '1f3eb':4841, '1f3ec':4842, '1f3ed':4843, '1f3ee':61216, '1f3ef':4844, '1f3f0':4845, '1f3f3-200d-1f308':71591, '1f3f3-200d-26a7':71592, '1f3f3':71590, '1f3f4-200d-2620':71593, '1f3f4-e0067-e0062-e0065-e006e-e0067-e007f':71852, '1f3f4-e0067-e0062-e0073-e0063-e0074-e007f':71853, '1f3f4-e0067-e0062-e0077-e006c-e0073-e007f':71854, '1f3f4':71589, '1f3f5':2652, '1f3f7':61234, '1f3f8':51066, '1f3f9':61303, '1f3fa':3805, '1f3fb':9525, '1f3fc':9526, '1f3fd':9527, '1f3fe':9528, '1f3ff':9529, '1f400':2576, '1f401':2575, '1f402':2556, '1f403':2557, '1f404':2558, '1f405':2547, '1f406':2548, '1f407':2579, '1f408-200d-2b1b':2544, '1f408':2543, '1f409':2618, '1f40a':2613, '1f40b':2622, '1f40c':2632, '1f40d':2616, '1f40e':2550, '1f40f':2563, '1f410':2565, '1f411':2564, '1f412':2531, '1f413':2596, '1f414':2595, '1f415-200d-1f9ba':2537, '1f415':2535, '1f416':2560, '1f417':2561, '1f418':2570, '1f419':2629, '1f41a':2630, '1f41b':2634, '1f41c':2635, '1f41d':2636, '1f41e':2638, '1f41f':2625, '1f420':2626, '1f421':2627, '1f422':2614, '1f423':2597, '1f424':2598, '1f425':2599, '1f426':2600, '1f427':2601, '1f428':2586, '1f429':2538, '1f42a':2566, '1f42b':2567, '1f42c':2623, '1f42d':2574, '1f42e':2555, '1f42f':2546, '1f430':2578, '1f431':2542, '1f432':2617, '1f433':2621, '1f434':2549, '1f435':2530, '1f436':2534, '1f437':2559, '1f438':2612, '1f439':2577, '1f43a':2539, '1f43b-200d-2744':2585, '1f43b':2584, '1f43c':2587, '1f43d':2562, '1f43e':2593, '1f43f':2580, '1f440':1381, '1f441-200d-1f5e8':1159, '1f441':1382, '1f442':1373, '1f443':1375, '1f444':1384, '1f445':1383, '1f446':1347, '1f447':1349, '1f448':1345, '1f449':1346, '1f44a':1355, '1f44b':1327, '1f44c':1336, '1f44d':1352, '1f44e':1353, '1f44f':1358, '1f450':1361, '1f451':61144, '1f452':61145, '1f453':61110, '1f454':61115, '1f455':61116, '1f456':61117, '1f457':61122, '1f458':61123, '1f459':61128, '1f45a':61129, '1f45b':61130, '1f45c':61131, '1f45d':61132, '1f45e':61136, '1f45f':61137, '1f460':61140, '1f461':61141, '1f462':61143, '1f463':1687, '1f464':1684, '1f465':1685, '1f466':1388, '1f467':1389, '1f468-200d-1f33e':1457, '1f468-200d-1f373':1460, '1f468-200d-1f37c':1524, '1f468-200d-1f393':1448, '1f468-200d-1f3a4':1478, '1f468-200d-1f3a8':1481, '1f468-200d-1f3eb':1451, '1f468-200d-1f3ed':1466, '1f468-200d-1f466-200d-1f466':1674, '1f468-200d-1f466':1673, '1f468-200d-1f467-200d-1f466':1676, '1f468-200d-1f467-200d-1f467':1677, '1f468-200d-1f467':1675, '1f468-200d-1f468-200d-1f466':1663, '1f468-200d-1f468-200d-1f466-200d-1f466':1666, '1f468-200d-1f468-200d-1f467':1664, '1f468-200d-1f468-200d-1f467-200d-1f466':1665, '1f468-200d-1f468-200d-1f467-200d-1f467':1667, '1f468-200d-1f469-200d-1f466':1658, '1f468-200d-1f469-200d-1f466-200d-1f466':1661, '1f468-200d-1f469-200d-1f467':1659, '1f468-200d-1f469-200d-1f467-200d-1f466':1660, '1f468-200d-1f469-200d-1f467-200d-1f467':1662, '1f468-200d-1f4bb':1475, '1f468-200d-1f4bc':1469, '1f468-200d-1f527':1463, '1f468-200d-1f52c':1472, '1f468-200d-1f680':1487, '1f468-200d-1f692':1490, '1f468-200d-1f9af':1574, '1f468-200d-1f9b0':1396, '1f468-200d-1f9b1':1397, '1f468-200d-1f9b2':1399, '1f468-200d-1f9b3':1398, '1f468-200d-1f9bc':1577, '1f468-200d-1f9bd':1580, '1f468-200d-2695':1445, '1f468-200d-2696':1454, '1f468-200d-2708':1484, '1f468-200d-2764-200d-1f468':1655, '1f468-200d-2764-200d-1f48b-200d-1f468':1651, '1f468':1392, '1f469-200d-1f33e':1458, '1f469-200d-1f373':1461, '1f469-200d-1f37c':1523, '1f469-200d-1f393':1449, '1f469-200d-1f3a4':1479, '1f469-200d-1f3a8':1482, '1f469-200d-1f3eb':1452, '1f469-200d-1f3ed':1467, '1f469-200d-1f466-200d-1f466':1679, '1f469-200d-1f466':1678, '1f469-200d-1f467-200d-1f466':1681, '1f469-200d-1f467-200d-1f467':1682, '1f469-200d-1f467':1680, '1f469-200d-1f469-200d-1f466':1668, '1f469-200d-1f469-200d-1f466-200d-1f466':1671, '1f469-200d-1f469-200d-1f467':1669, '1f469-200d-1f469-200d-1f467-200d-1f466':1670, '1f469-200d-1f469-200d-1f467-200d-1f467':1672, '1f469-200d-1f4bb':1476, '1f469-200d-1f4bc':1470, '1f469-200d-1f527':1464, '1f469-200d-1f52c':1473, '1f469-200d-1f680':1488, '1f469-200d-1f692':1491, '1f469-200d-1f9af':1575, '1f469-200d-1f9b0':1401, '1f469-200d-1f9b1':1403, '1f469-200d-1f9b2':1407, '1f469-200d-1f9b3':1405, '1f469-200d-1f9bc':1578, '1f469-200d-1f9bd':1581, '1f469-200d-2695':1446, '1f469-200d-2696':1455, '1f469-200d-2708':1485, '1f469-200d-2764-200d-1f468':1654, '1f469-200d-2764-200d-1f469':1656, '1f469-200d-2764-200d-1f48b-200d-1f468':1650, '1f469-200d-2764-200d-1f48b-200d-1f469':1652, '1f469':1400, '1f46a':1657, '1f46b':1647, '1f46c':1648, '1f46d':1646, '1f46e-200d-2640':1494, '1f46e-200d-2642':1493, '1f46e':1492, '1f46f-200d-2640':1590, '1f46f-200d-2642':1589, '1f46f':1588, '1f470-200d-2640':1518, '1f470-200d-2642':1517, '1f470':1516, '1f471-200d-2640':1409, '1f471-200d-2642':1410, '1f471':1391, '1f472':1511, '1f473-200d-2640':1510, '1f473-200d-2642':1509, '1f473':1508, '1f474':1412, '1f475':1413, '1f476':1386, '1f477-200d-2640':1504, '1f477-200d-2642':1503, '1f477':1502, '1f478':1507, '1f479':1109, '1f47a':1110, '1f47b':1111, '1f47c':1526, '1f47d':1112, '1f47e':1113, '1f47f':1104, '1f480':1105, '1f481-200d-2640':1428, '1f481-200d-2642':1427, '1f481':1426, '1f482-200d-2640':1500, '1f482-200d-2642':1499, '1f482':1498, '1f483':1585, '1f484':61152, '1f485':1366, '1f486-200d-2640':1560, '1f486-200d-2642':1559, '1f486':1558, '1f487-200d-2640':1563, '1f487-200d-2642':1562, '1f487':1561, '1f488':4870, '1f489':61326, '1f48a':61328, '1f48b':1127, '1f48c':1128, '1f48d':61153, '1f48e':61154, '1f48f':1649, '1f490':2648, '1f491':1653, '1f492':4846, '1f493':1133, '1f494':1138, '1f495':1135, '1f496':1131, '1f497':1132, '1f498':1129, '1f499':1145, '1f49a':1144, '1f49b':1143, '1f49c':1146, '1f49d':1130, '1f49e':1134, '1f49f':1136, '1f4a0':62946, '1f4a1':61214, '1f4a2':1151, '1f4a3':1157, '1f4a4':1163, '1f4a5':1152, '1f4a6':1154, '1f4a7':41022, '1f4a8':1155, '1f4a9':1107, '1f4aa':1368, '1f4ab':1153, '1f4ac':1158, '1f4ad':1162, '1f4ae':2650, '1f4af':1150, '1f4b0':61235, '1f4b1':62841, '1f4b2':62842, '1f4b3':61242, '1f4b4':61237, '1f4b5':61238, '1f4b6':61239, '1f4b7':61240, '1f4b8':61241, '1f4b9':61244, '1f4ba':4936, '1f4bb':61191, '1f4bc':61265, '1f4bd':61197, '1f4be':61198, '1f4bf':61199, '1f4c0':61200, '1f4c1':61266, '1f4c2':61267, '1f4c3':61227, '1f4c4':61229, '1f4c5':61269, '1f4c6':61270, '1f4c7':61273, '1f4c8':61274, '1f4c9':61275, '1f4ca':61276, '1f4cb':61277, '1f4cc':61278, '1f4cd':61279, '1f4ce':61280, '1f4cf':61282, '1f4d0':61283, '1f4d1':61232, '1f4d2':61226, '1f4d3':61225, '1f4d4':61218, '1f4d5':61219, '1f4d6':61220, '1f4d7':61221, '1f4d8':61222, '1f4d9':61223, '1f4da':61224, '1f4db':62847, '1f4dc':61228, '1f4dd':61264, '1f4de':61185, '1f4df':61186, '1f4e0':61187, '1f4e1':61325, '1f4e2':61159, '1f4e3':61160, '1f4e4':61249, '1f4e5':61250, '1f4e6':61251, '1f4e7':61246, '1f4e8':61247, '1f4e9':61248, '1f4ea':61253, '1f4eb':61252, '1f4ec':61254, '1f4ed':61255, '1f4ee':61256, '1f4ef':61161, '1f4f0':61230, '1f4f1':61182, '1f4f2':61183, '1f4f3':62823, '1f4f4':62824, '1f4f5':62751, '1f4f6':62822, '1f4f7':61207, '1f4f8':61208, '1f4f9':61209, '1f4fa':61206, '1f4fb':61172, '1f4fc':61210, '1f4fd':61204, '1f4ff':61151, '1f500':62801, '1f501':62802, '1f502':62803, '1f503':62769, '1f504':62770, '1f505':62820, '1f506':62821, '1f507':61155, '1f508':61156, '1f509':61157, '1f50a':61158, '1f50b':61188, '1f50c':61190, '1f50d':61211, '1f50e':61212, '1f50f':61290, '1f510':61291, '1f511':61292, '1f512':61288, '1f513':61289, '1f514':61162, '1f515':61163, '1f516':61233, '1f517':61313, '1f518':62947, '1f519':62771, '1f51a':62772, '1f51b':62773, '1f51c':62774, '1f51d':62775, '1f51e':62752, '1f51f':62876, '1f520':62877, '1f521':62878, '1f522':62879, '1f523':62880, '1f524':62881, '1f525':41021, '1f526':61215, '1f527':61306, '1f528':61294, '1f529':61308, '1f52a':3803, '1f52b':61301, '1f52c':61323, '1f52d':61324, '1f52e':51082, '1f52f':62787, '1f530':62848, '1f531':62846, '1f532':62949, '1f533':62948, '1f534':62916, '1f535':62920, '1f536':62940, '1f537':62941, '1f538':62942, '1f539':62943, '1f53a':62944, '1f53b':62945, '1f53c':62811, '1f53d':62813, '1f549':62778, '1f54a':2602, '1f54b':4854, '1f54c':4850, '1f54d':4852, '1f54e':62786, '1f550':4955, '1f551':4957, '1f552':4959, '1f553':4961, '1f554':4963, '1f555':4965, '1f556':4967, '1f557':4969, '1f558':4971, '1f559':4973, '1f55a':4975, '1f55b':4953, '1f55c':4956, '1f55d':4958, '1f55e':4960, '1f55f':4962, '1f560':4964, '1f561':4966, '1f562':4968, '1f563':4970, '1f564':4972, '1f565':4974, '1f566':4976, '1f567':4954, '1f56f':61213, '1f570':4952, '1f573':1156, '1f574':1587, '1f575-200d-2640':1497, '1f575-200d-2642':1496, '1f575':1495, '1f576':61111, '1f577':2641, '1f578':2642, '1f579':51087, '1f57a':1586, '1f587':61281, '1f58a':61261, '1f58b':61260, '1f58c':61262, '1f58d':61263, '1f590':1329, '1f595':1348, '1f596':1331, '1f5a4':1148, '1f5a5':61192, '1f5a8':61193, '1f5b1':61195, '1f5b2':61196, '1f5bc':51104, '1f5c2':61268, '1f5c3':61285, '1f5c4':61286, '1f5d1':61287, '1f5d2':61271, '1f5d3':61272, '1f5dc':61310, '1f5dd':61293, '1f5de':61231, '1f5e1':61299, '1f5e3':1683, '1f5e8':1160, '1f5ef':1161, '1f5f3':61257, '1f5fa':4810, '1f5fb':4816, '1f5fc':4847, '1f5fd':4848, '1f5fe':4811, '1f5ff':61362, '1f600':11, '1f601':14, '1f602':18, '1f603':12, '1f604':13, '1f605':16, '1f606':15, '1f607':114, '1f608':1103, '1f609':112, '1f60a':113, '1f60b':124, '1f60c':150, '1f60d':116, '1f60e':170, '1f60f':144, '1f610':139, '1f611':140, '1f612':145, '1f613':195, '1f614':151, '1f615':173, '1f616':192, '1f617':119, '1f618':118, '1f619':122, '1f61a':121, '1f61b':125, '1f61c':126, '1f61d':128, '1f61e':194, '1f61f':175, '1f620':1101, '1f621':1100, '1f622':189, '1f623':193, '1f624':199, '1f625':188, '1f626':184, '1f627':185, '1f628':186, '1f629':196, '1f62a':152, '1f62b':197, '1f62c':147, '1f62d':190, '1f62e-200d-1f4a8':148, '1f62e':178, '1f62f':179, '1f630':187, '1f631':191, '1f632':180, '1f633':181, '1f634':154, '1f635-200d-1f4ab':165, '1f635':164, '1f636-200d-1f32b':143, '1f636':141, '1f637':155, '1f638':1116, '1f639':1117, '1f63a':1115, '1f63b':1118, '1f63c':1119, '1f63d':1120, '1f63e':1123, '1f63f':1122, '1f640':1121, '1f641':176, '1f642':19, '1f643':110, '1f644':146, '1f645-200d-2640':1422, '1f645-200d-2642':1421, '1f645':1420, '1f646-200d-2640':1425, '1f646-200d-2642':1424, '1f646':1423, '1f647-200d-2640':1437, '1f647-200d-2642':1436, '1f647':1435, '1f648':1124, '1f649':1125, '1f64a':1126, '1f64b-200d-2640':1431, '1f64b-200d-2642':1430, '1f64b':1429, '1f64c':1359, '1f64d-200d-2640':1416, '1f64d-200d-2642':1415, '1f64d':1414, '1f64e-200d-2640':1419, '1f64e-200d-2642':1418, '1f64e':1417, '1f64f':1364, '1f680':4942, '1f681':4937, '1f682':4872, '1f683':4873, '1f684':4874, '1f685':4875, '1f686':4876, '1f687':4877, '1f688':4878, '1f689':4879, '1f68a':4880, '1f68b':4883, '1f68c':4884, '1f68d':4885, '1f68e':4886, '1f68f':4911, '1f690':4887, '1f691':4888, '1f692':4889, '1f693':4890, '1f694':4891, '1f695':4892, '1f696':4893, '1f697':4894, '1f698':4895, '1f699':4896, '1f69a':4898, '1f69b':4899, '1f69c':4900, '1f69d':4881, '1f69e':4882, '1f69f':4938, '1f6a0':4939, '1f6a1':4940, '1f6a2':4930, '1f6a3-200d-2640':1609, '1f6a3-200d-2642':1608, '1f6a3':1607, '1f6a4':4926, '1f6a5':4918, '1f6a6':4919, '1f6a7':4921, '1f6a8':4917, '1f6a9':71587, '1f6aa':61333, '1f6ab':62745, '1f6ac':61358, '1f6ad':62747, '1f6ae':62730, '1f6af':62748, '1f6b0':62731, '1f6b1':62749, '1f6b2':4907, '1f6b3':62746, '1f6b4-200d-2640':1621, '1f6b4-200d-2642':1620, '1f6b4':1619, '1f6b5-200d-2640':1624, '1f6b5-200d-2642':1623, '1f6b5':1622, '1f6b6-200d-2640':1566, '1f6b6-200d-2642':1565, '1f6b6':1564, '1f6b7':62750, '1f6b8':62743, '1f6b9':62733, '1f6ba':62734, '1f6bb':62735, '1f6bc':62736, '1f6bd':61340, '1f6be':62737, '1f6bf':61342, '1f6c0':1643, '1f6c1':61343, '1f6c2':62738, '1f6c3':62739, '1f6c4':62740, '1f6c5':62741, '1f6cb':61338, '1f6cc':1644, '1f6cd':61133, '1f6ce':4944, '1f6cf':61337, '1f6d0':62776, '1f6d1':4920, '1f6d2':61357, '1f6d5':4851, '1f6d6':4828, '1f6d7':61334, '1f6e0':61298, '1f6e1':61304, '1f6e2':4914, '1f6e3':4912, '1f6e4':4913, '1f6e5':4929, '1f6e9':4932, '1f6eb':4933, '1f6ec':4934, '1f6f0':4941, '1f6f3':4927, '1f6f4':4908, '1f6f5':4903, '1f6f6':4925, '1f6f7':51076, '1f6f8':4943, '1f6f9':4909, '1f6fa':4906, '1f6fb':4897, '1f6fc':4910, '1f7e0':62917, '1f7e1':62918, '1f7e2':62919, '1f7e3':62921, '1f7e4':62922, '1f7e5':62925, '1f7e6':62929, '1f7e7':62926, '1f7e8':62927, '1f7e9':62928, '1f7ea':62930, '1f7eb':62931, '1f90c':1337, '1f90d':1149, '1f90e':1147, '1f90f':1338, '1f910':137, '1f911':129, '1f912':156, '1f913':171, '1f914':135, '1f915':157, '1f916':1114, '1f917':130, '1f918':1343, '1f919':1344, '1f91a':1328, '1f91b':1356, '1f91c':1357, '1f91d':1363, '1f91e':1340, '1f91f':1342, '1f920':167, '1f921':1108, '1f922':158, '1f923':17, '1f924':153, '1f925':149, '1f926-200d-2640':1440, '1f926-200d-2642':1439, '1f926':1438, '1f927':160, '1f928':138, '1f929':117, '1f92a':127, '1f92b':134, '1f92c':1102, '1f92d':131, '1f92e':159, '1f92f':166, '1f930':1519, '1f931':1522, '1f932':1362, '1f933':1367, '1f934':1506, '1f935-200d-2640':1515, '1f935-200d-2642':1514, '1f935':1513, '1f936':1528, '1f937-200d-2640':1443, '1f937-200d-2642':1442, '1f937':1441, '1f938-200d-2640':1627, '1f938-200d-2642':1626, '1f938':1625, '1f939-200d-2640':1639, '1f939-200d-2642':1638, '1f939':1637, '1f93a':1597, '1f93c-200d-2640':1630, '1f93c-200d-2642':1629, '1f93c':1628, '1f93d-200d-2640':1633, '1f93d-200d-2642':1632, '1f93d':1631, '1f93e-200d-2640':1636, '1f93e-200d-2642':1635, '1f93e':1634, '1f93f':51073, '1f940':2654, '1f941':61180, '1f942':3791, '1f943':3792, '1f944':3802, '1f945':51069, '1f947':51048, '1f948':51049, '1f949':51050, '1f94a':51067, '1f94b':51068, '1f94c':51077, '1f94d':51064, '1f94e':51053, '1f94f':51059, '1f950':3710, '1f951':3693, '1f952':3700, '1f953':3721, '1f954':3695, '1f955':3696, '1f956':3711, '1f957':3738, '1f958':3734, '1f959':3730, '1f95a':3732, '1f95b':3780, '1f95c':3706, '1f95d':3689, '1f95e':3715, '1f95f':3757, '1f960':3758, '1f961':3759, '1f962':3799, '1f963':3737, '1f964':3794, '1f965':3692, '1f966':3702, '1f967':3773, '1f968':3713, '1f969':3720, '1f96a':3726, '1f96b':3742, '1f96c':3701, '1f96d':3681, '1f96e':3755, '1f96f':3714, '1f970':115, '1f971':198, '1f972':123, '1f973':168, '1f974':163, '1f975':161, '1f976':162, '1f977':1501, '1f978':169, '1f97a':182, '1f97b':61124, '1f97c':61113, '1f97d':61112, '1f97e':61138, '1f97f':61139, '1f980':3760, '1f981':2545, '1f982':2643, '1f983':2594, '1f984':2551, '1f985':2603, '1f986':2604, '1f987':2583, '1f988':2628, '1f989':2606, '1f98a':2540, '1f98b':2633, '1f98c':2553, '1f98d':2532, '1f98e':2615, '1f98f':2572, '1f990':3762, '1f991':3763, '1f992':2569, '1f993':2552, '1f994':2582, '1f995':2619, '1f996':2620, '1f997':2639, '1f998':2591, '1f999':2568, '1f99a':2610, '1f99b':2573, '1f99c':2611, '1f99d':2541, '1f99e':3761, '1f99f':2644, '1f9a0':2647, '1f9a1':2592, '1f9a2':2605, '1f9a3':2571, '1f9a4':2607, '1f9a5':2588, '1f9a6':2589, '1f9a7':2533, '1f9a8':2590, '1f9a9':2609, '1f9aa':3764, '1f9ab':2581, '1f9ac':2554, '1f9ad':2624, '1f9ae':2536, '1f9af':61312, '1f9b4':1380, '1f9b5':1371, '1f9b6':1372, '1f9b7':1379, '1f9b8-200d-2640':1532, '1f9b8-200d-2642':1531, '1f9b8':1530, '1f9b9-200d-2640':1535, '1f9b9-200d-2642':1534, '1f9b9':1533, '1f9ba':61114, '1f9bb':1374, '1f9bc':4905, '1f9bd':4904, '1f9be':1369, '1f9bf':1370, '1f9c0':3717, '1f9c1':3772, '1f9c2':3741, '1f9c3':3796, '1f9c4':3703, '1f9c5':3704, '1f9c6':3731, '1f9c7':3716, '1f9c8':3740, '1f9c9':3797, '1f9ca':3798, '1f9cb':3795, '1f9cd-200d-2640':1569, '1f9cd-200d-2642':1568, '1f9cd':1567, '1f9ce-200d-2640':1572, '1f9ce-200d-2642':1571, '1f9ce':1570, '1f9cf-200d-2640':1434, '1f9cf-200d-2642':1433, '1f9cf':1432, '1f9d0':172, '1f9d1-200d-1f33e':1456, '1f9d1-200d-1f373':1459, '1f9d1-200d-1f37c':1525, '1f9d1-200d-1f384':1529, '1f9d1-200d-1f393':1447, '1f9d1-200d-1f3a4':1477, '1f9d1-200d-1f3a8':1480, '1f9d1-200d-1f3eb':1450, '1f9d1-200d-1f3ed':1465, '1f9d1-200d-1f4bb':1474, '1f9d1-200d-1f4bc':1468, '1f9d1-200d-1f527':1462, '1f9d1-200d-1f52c':1471, '1f9d1-200d-1f680':1486, '1f9d1-200d-1f692':1489, '1f9d1-200d-1f91d-200d-1f9d1':1645, '1f9d1-200d-1f9af':1573, '1f9d1-200d-1f9b0':1402, '1f9d1-200d-1f9b1':1404, '1f9d1-200d-1f9b2':1408, '1f9d1-200d-1f9b3':1406, '1f9d1-200d-1f9bc':1576, '1f9d1-200d-1f9bd':1579, '1f9d1-200d-2695':1444, '1f9d1-200d-2696':1453, '1f9d1-200d-2708':1483, '1f9d1':1390, '1f9d2':1387, '1f9d3':1411, '1f9d4-200d-2640':1395, '1f9d4-200d-2642':1394, '1f9d4':1393, '1f9d5':1512, '1f9d6-200d-2640':1593, '1f9d6-200d-2642':1592, '1f9d6':1591, '1f9d7-200d-2640':1596, '1f9d7-200d-2642':1595, '1f9d7':1594, '1f9d8-200d-2640':1642, '1f9d8-200d-2642':1641, '1f9d8':1640, '1f9d9-200d-2640':1538, '1f9d9-200d-2642':1537, '1f9d9':1536, '1f9da-200d-2640':1541, '1f9da-200d-2642':1540, '1f9da':1539, '1f9db-200d-2640':1544, '1f9db-200d-2642':1543, '1f9db':1542, '1f9dc-200d-2640':1547, '1f9dc-200d-2642':1546, '1f9dc':1545, '1f9dd-200d-2640':1550, '1f9dd-200d-2642':1549, '1f9dd':1548, '1f9de-200d-2640':1553, '1f9de-200d-2642':1552, '1f9de':1551, '1f9df-200d-2640':1556, '1f9df-200d-2642':1555, '1f9df':1554, '1f9e0':1376, '1f9e1':1142, '1f9e2':61148, '1f9e3':61118, '1f9e4':61119, '1f9e5':61120, '1f9e6':61121, '1f9e7':51039, '1f9e8':51028, '1f9e9':51090, '1f9ea':61320, '1f9eb':61321, '1f9ec':61322, '1f9ed':4812, '1f9ee':61201, '1f9ef':61356, '1f9f0':61316, '1f9f1':4825, '1f9f2':61317, '1f9f3':4945, '1f9f4':61346, '1f9f5':51106, '1f9f6':51108, '1f9f7':61347, '1f9f8':51091, '1f9f9':61348, '1f9fa':61349, '1f9fb':61350, '1f9fc':61352, '1f9fd':61355, '1f9fe':61243, '1f9ff':51084, '1fa70':61142, '1fa71':61125, '1fa72':61126, '1fa73':61127, '1fa74':61135, '1fa78':61327, '1fa79':61329, '1fa7a':61331, '1fa80':51079, '1fa81':51080, '1fa82':4935, '1fa83':61302, '1fa84':51083, '1fa85':51092, '1fa86':51094, '1fa90':4993, '1fa91':61339, '1fa92':61345, '1fa93':61295, '1fa94':61217, '1fa95':61179, '1fa96':61149, '1fa97':61174, '1fa98':61181, '1fa99':61236, '1fa9a':61305, '1fa9b':61307, '1fa9c':61318, '1fa9d':61315, '1fa9e':61335, '1fa9f':61336, '1faa0':61341, '1faa1':51107, '1faa2':51109, '1faa3':61351, '1faa4':61344, '1faa5':61354, '1faa6':61360, '1faa7':61363, '1faa8':4826, '1fab0':2645, '1fab1':2646, '1fab2':2637, '1fab3':2640, '1fab4':2660, '1fab5':4827, '1fab6':2608, '1fac0':1377, '1fac1':1378, '1fac2':1686, '1fad0':3688, '1fad1':3699, '1fad2':3691, '1fad3':3712, '1fad4':3729, '1fad5':3736, '1fad6':3782, '203c':62834, '21a9':62765, '21aa':62766, '231a':4948, '231b':4946, '23cf':62818, '23e9':62805, '23ea':62809, '23eb':62812, '23ec':62814, '23ed':62806, '23ee':62810, '23ef':62807, '23f0':4949, '23f1':4950, '23f2':4951, '23f3':4947, '23f8':62815, '23f9':62816, '23fa':62817, '24c2':62890, '25aa':62938, '25ab':62939, '25b6':62804, '25c0':62808, '25fb':62935, '25fc':62934, '25fd':62937, '25fe':62936, '260e':61184, '261d':1350, '262a':62784, '262e':62785, '262f':62781, '263a':120, '264a':62790, '264b':62791, '264c':62792, '264d':62793, '264e':62794, '264f':62795, '265f':51099, '267b':62844, '267e':62833, '267f':62732, '269b':62777, '269c':62845, '26a0':62742, '26a1':41016, '26a7':62827, '26aa':62924, '26ab':62923, '26b0':61359, '26b1':61361, '26bd':51051, '26be':51052, '26c4':41019, '26c5':4999, '26c8':41000, '26ce':62800, '26cf':61296, '26d1':61150, '26d3':61314, '26d4':62744, '26e9':4853, '26ea':4849, '26f0':4814, '26f1':41015, '26f2':4855, '26f3':51070, '26f4':4928, '26f5':4924, '26f7':1599, '26f8':51071, '26f9-200d-2640':1615, '26f9-200d-2642':1614, '26f9':1613, '26fa':4856, '26fd':4915, '270a':1354, '270b':1330, '270c':1339, '270d':1365, '270f':61258, '271d':62782, '274c':62853, '274e':62854, '2764-200d-1f525':1139, '2764-200d-1fa79':1140, '27a1':62757, '27b0':62855, '27bf':62856, '2b05':62761, '2b06':62755, '2b07':62759, '2b1b':62932, '2b1c':62933, '2b50':4994, '2b55':62849, '303d':62857, '1f385-1f3fb':0, '1f385-1f3fc':0, '1f385-1f3fd':0, '1f385-1f3fe':0, '1f385-1f3ff':0, '1f3c2-1f3fb':0, '1f3c2-1f3fc':0, '1f3c2-1f3fd':0, '1f3c2-1f3fe':0, '1f3c2-1f3ff':0, '1f3c3-1f3fb-200d-2640':0, '1f3c3-1f3fc-200d-2640':0, '1f3c3-1f3fd-200d-2640':0, '1f3c3-1f3fe-200d-2640':0, '1f3c3-1f3ff-200d-2640':0, '1f3c3-1f3fb-200d-2642':0, '1f3c3-1f3fc-200d-2642':0, '1f3c3-1f3fd-200d-2642':0, '1f3c3-1f3fe-200d-2642':0, '1f3c3-1f3ff-200d-2642':0, '1f3c3-1f3fb':0, '1f3c3-1f3fc':0, '1f3c3-1f3fd':0, '1f3c3-1f3fe':0, '1f3c3-1f3ff':0, '1f3c4-1f3fb-200d-2640':0, '1f3c4-1f3fc-200d-2640':0, '1f3c4-1f3fd-200d-2640':0, '1f3c4-1f3fe-200d-2640':0, '1f3c4-1f3ff-200d-2640':0, '1f3c4-1f3fb-200d-2642':0, '1f3c4-1f3fc-200d-2642':0, '1f3c4-1f3fd-200d-2642':0, '1f3c4-1f3fe-200d-2642':0, '1f3c4-1f3ff-200d-2642':0, '1f3c4-1f3fb':0, '1f3c4-1f3fc':0, '1f3c4-1f3fd':0, '1f3c4-1f3fe':0, '1f3c4-1f3ff':0, '1f3c7-1f3fb':0, '1f3c7-1f3fc':0, '1f3c7-1f3fd':0, '1f3c7-1f3fe':0, '1f3c7-1f3ff':0, '1f3ca-1f3fb-200d-2640':0, '1f3ca-1f3fc-200d-2640':0, '1f3ca-1f3fd-200d-2640':0, '1f3ca-1f3fe-200d-2640':0, '1f3ca-1f3ff-200d-2640':0, '1f3ca-1f3fb-200d-2642':0, '1f3ca-1f3fc-200d-2642':0, '1f3ca-1f3fd-200d-2642':0, '1f3ca-1f3fe-200d-2642':0, '1f3ca-1f3ff-200d-2642':0, '1f3ca-1f3fb':0, '1f3ca-1f3fc':0, '1f3ca-1f3fd':0, '1f3ca-1f3fe':0, '1f3ca-1f3ff':0, '1f3cb-1f3fb-200d-2640':0, '1f3cb-1f3fc-200d-2640':0, '1f3cb-1f3fd-200d-2640':0, '1f3cb-1f3fe-200d-2640':0, '1f3cb-1f3ff-200d-2640':0, '1f3cb-1f3fb-200d-2642':0, '1f3cb-1f3fc-200d-2642':0, '1f3cb-1f3fd-200d-2642':0, '1f3cb-1f3fe-200d-2642':0, '1f3cb-1f3ff-200d-2642':0, '1f3cb-1f3fb':0, '1f3cb-1f3fc':0, '1f3cb-1f3fd':0, '1f3cb-1f3fe':0, '1f3cb-1f3ff':0, '1f3cc-1f3fb-200d-2640':0, '1f3cc-1f3fc-200d-2640':0, '1f3cc-1f3fd-200d-2640':0, '1f3cc-1f3fe-200d-2640':0, '1f3cc-1f3ff-200d-2640':0, '1f3cc-1f3fb-200d-2642':0, '1f3cc-1f3fc-200d-2642':0, '1f3cc-1f3fd-200d-2642':0, '1f3cc-1f3fe-200d-2642':0, '1f3cc-1f3ff-200d-2642':0, '1f3cc-1f3fb':0, '1f3cc-1f3fc':0, '1f3cc-1f3fd':0, '1f3cc-1f3fe':0, '1f3cc-1f3ff':0, '1f442-1f3fb':0, '1f442-1f3fc':0, '1f442-1f3fd':0, '1f442-1f3fe':0, '1f442-1f3ff':0, '1f443-1f3fb':0, '1f443-1f3fc':0, '1f443-1f3fd':0, '1f443-1f3fe':0, '1f443-1f3ff':0, '1f446-1f3fb':0, '1f446-1f3fc':0, '1f446-1f3fd':0, '1f446-1f3fe':0, '1f446-1f3ff':0, '1f447-1f3fb':0, '1f447-1f3fc':0, '1f447-1f3fd':0, '1f447-1f3fe':0, '1f447-1f3ff':0, '1f448-1f3fb':0, '1f448-1f3fc':0, '1f448-1f3fd':0, '1f448-1f3fe':0, '1f448-1f3ff':0, '1f449-1f3fb':0, '1f449-1f3fc':0, '1f449-1f3fd':0, '1f449-1f3fe':0, '1f449-1f3ff':0, '1f44a-1f3fb':0, '1f44a-1f3fc':0, '1f44a-1f3fd':0, '1f44a-1f3fe':0, '1f44a-1f3ff':0, '1f44b-1f3fb':0, '1f44b-1f3fc':0, '1f44b-1f3fd':0, '1f44b-1f3fe':0, '1f44b-1f3ff':0, '1f44c-1f3fb':0, '1f44c-1f3fc':0, '1f44c-1f3fd':0, '1f44c-1f3fe':0, '1f44c-1f3ff':0, '1f44d-1f3fb':0, '1f44d-1f3fc':0, '1f44d-1f3fd':0, '1f44d-1f3fe':0, '1f44d-1f3ff':0, '1f44e-1f3fb':0, '1f44e-1f3fc':0, '1f44e-1f3fd':0, '1f44e-1f3fe':0, '1f44e-1f3ff':0, '1f44f-1f3fb':0, '1f44f-1f3fc':0, '1f44f-1f3fd':0, '1f44f-1f3fe':0, '1f44f-1f3ff':0, '1f450-1f3fb':0, '1f450-1f3fc':0, '1f450-1f3fd':0, '1f450-1f3fe':0, '1f450-1f3ff':0, '1f466-1f3fb':0, '1f466-1f3fc':0, '1f466-1f3fd':0, '1f466-1f3fe':0, '1f466-1f3ff':0, '1f467-1f3fb':0, '1f467-1f3fc':0, '1f467-1f3fd':0, '1f467-1f3fe':0, '1f467-1f3ff':0, '1f468-1f3fb-200d-1f33e':0, '1f468-1f3fc-200d-1f33e':0, '1f468-1f3fd-200d-1f33e':0, '1f468-1f3fe-200d-1f33e':0, '1f468-1f3ff-200d-1f33e':0, '1f468-1f3fb-200d-1f373':0, '1f468-1f3fc-200d-1f373':0, '1f468-1f3fd-200d-1f373':0, '1f468-1f3fe-200d-1f373':0, '1f468-1f3ff-200d-1f373':0, '1f468-1f3fb-200d-1f37c':0, '1f468-1f3fc-200d-1f37c':0, '1f468-1f3fd-200d-1f37c':0, '1f468-1f3fe-200d-1f37c':0, '1f468-1f3ff-200d-1f37c':0, '1f468-1f3fb-200d-1f393':0, '1f468-1f3fc-200d-1f393':0, '1f468-1f3fd-200d-1f393':0, '1f468-1f3fe-200d-1f393':0, '1f468-1f3ff-200d-1f393':0, '1f468-1f3fb-200d-1f3a4':0, '1f468-1f3fc-200d-1f3a4':0, '1f468-1f3fd-200d-1f3a4':0, '1f468-1f3fe-200d-1f3a4':0, '1f468-1f3ff-200d-1f3a4':0, '1f468-1f3fb-200d-1f3a8':0, '1f468-1f3fc-200d-1f3a8':0, '1f468-1f3fd-200d-1f3a8':0, '1f468-1f3fe-200d-1f3a8':0, '1f468-1f3ff-200d-1f3a8':0, '1f468-1f3fb-200d-1f3eb':0, '1f468-1f3fc-200d-1f3eb':0, '1f468-1f3fd-200d-1f3eb':0, '1f468-1f3fe-200d-1f3eb':0, '1f468-1f3ff-200d-1f3eb':0, '1f468-1f3fb-200d-1f3ed':0, '1f468-1f3fc-200d-1f3ed':0, '1f468-1f3fd-200d-1f3ed':0, '1f468-1f3fe-200d-1f3ed':0, '1f468-1f3ff-200d-1f3ed':0, '1f468-1f3fb-200d-1f4bb':0, '1f468-1f3fc-200d-1f4bb':0, '1f468-1f3fd-200d-1f4bb':0, '1f468-1f3fe-200d-1f4bb':0, '1f468-1f3ff-200d-1f4bb':0, '1f468-1f3fb-200d-1f4bc':0, '1f468-1f3fc-200d-1f4bc':0, '1f468-1f3fd-200d-1f4bc':0, '1f468-1f3fe-200d-1f4bc':0, '1f468-1f3ff-200d-1f4bc':0, '1f468-1f3fb-200d-1f527':0, '1f468-1f3fc-200d-1f527':0, '1f468-1f3fd-200d-1f527':0, '1f468-1f3fe-200d-1f527':0, '1f468-1f3ff-200d-1f527':0, '1f468-1f3fb-200d-1f52c':0, '1f468-1f3fc-200d-1f52c':0, '1f468-1f3fd-200d-1f52c':0, '1f468-1f3fe-200d-1f52c':0, '1f468-1f3ff-200d-1f52c':0, '1f468-1f3fb-200d-1f680':0, '1f468-1f3fc-200d-1f680':0, '1f468-1f3fd-200d-1f680':0, '1f468-1f3fe-200d-1f680':0, '1f468-1f3ff-200d-1f680':0, '1f468-1f3fb-200d-1f692':0, '1f468-1f3fc-200d-1f692':0, '1f468-1f3fd-200d-1f692':0, '1f468-1f3fe-200d-1f692':0, '1f468-1f3ff-200d-1f692':0, '1f468-1f3fb-200d-1f9af':0, '1f468-1f3fc-200d-1f9af':0, '1f468-1f3fd-200d-1f9af':0, '1f468-1f3fe-200d-1f9af':0, '1f468-1f3ff-200d-1f9af':0, '1f468-1f3fb-200d-1f9b0':0, '1f468-1f3fc-200d-1f9b0':0, '1f468-1f3fd-200d-1f9b0':0, '1f468-1f3fe-200d-1f9b0':0, '1f468-1f3ff-200d-1f9b0':0, '1f468-1f3fb-200d-1f9b1':0, '1f468-1f3fc-200d-1f9b1':0, '1f468-1f3fd-200d-1f9b1':0, '1f468-1f3fe-200d-1f9b1':0, '1f468-1f3ff-200d-1f9b1':0, '1f468-1f3fb-200d-1f9b2':0, '1f468-1f3fc-200d-1f9b2':0, '1f468-1f3fd-200d-1f9b2':0, '1f468-1f3fe-200d-1f9b2':0, '1f468-1f3ff-200d-1f9b2':0, '1f468-1f3fb-200d-1f9b3':0, '1f468-1f3fc-200d-1f9b3':0, '1f468-1f3fd-200d-1f9b3':0, '1f468-1f3fe-200d-1f9b3':0, '1f468-1f3ff-200d-1f9b3':0, '1f468-1f3fb-200d-1f9bc':0, '1f468-1f3fc-200d-1f9bc':0, '1f468-1f3fd-200d-1f9bc':0, '1f468-1f3fe-200d-1f9bc':0, '1f468-1f3ff-200d-1f9bc':0, '1f468-1f3fb-200d-1f9bd':0, '1f468-1f3fc-200d-1f9bd':0, '1f468-1f3fd-200d-1f9bd':0, '1f468-1f3fe-200d-1f9bd':0, '1f468-1f3ff-200d-1f9bd':0, '1f468-1f3fb-200d-2695':0, '1f468-1f3fc-200d-2695':0, '1f468-1f3fd-200d-2695':0, '1f468-1f3fe-200d-2695':0, '1f468-1f3ff-200d-2695':0, '1f468-1f3fb-200d-2696':0, '1f468-1f3fc-200d-2696':0, '1f468-1f3fd-200d-2696':0, '1f468-1f3fe-200d-2696':0, '1f468-1f3ff-200d-2696':0, '1f468-1f3fb-200d-2708':0, '1f468-1f3fc-200d-2708':0, '1f468-1f3fd-200d-2708':0, '1f468-1f3fe-200d-2708':0, '1f468-1f3ff-200d-2708':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3fb-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3fc-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3fd-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3fe-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3fb':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3fc':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3fd':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3fe':0, '1f468-1f3ff-200d-2764-200d-1f468-1f3ff':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f468-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f468-1f3fb':0, '1f468-1f3fc':0, '1f468-1f3fd':0, '1f468-1f3fe':0, '1f468-1f3ff':0, '1f469-1f3fb-200d-1f33e':0, '1f469-1f3fc-200d-1f33e':0, '1f469-1f3fd-200d-1f33e':0, '1f469-1f3fe-200d-1f33e':0, '1f469-1f3ff-200d-1f33e':0, '1f469-1f3fb-200d-1f373':0, '1f469-1f3fc-200d-1f373':0, '1f469-1f3fd-200d-1f373':0, '1f469-1f3fe-200d-1f373':0, '1f469-1f3ff-200d-1f373':0, '1f469-1f3fb-200d-1f37c':0, '1f469-1f3fc-200d-1f37c':0, '1f469-1f3fd-200d-1f37c':0, '1f469-1f3fe-200d-1f37c':0, '1f469-1f3ff-200d-1f37c':0, '1f469-1f3fb-200d-1f393':0, '1f469-1f3fc-200d-1f393':0, '1f469-1f3fd-200d-1f393':0, '1f469-1f3fe-200d-1f393':0, '1f469-1f3ff-200d-1f393':0, '1f469-1f3fb-200d-1f3a4':0, '1f469-1f3fc-200d-1f3a4':0, '1f469-1f3fd-200d-1f3a4':0, '1f469-1f3fe-200d-1f3a4':0, '1f469-1f3ff-200d-1f3a4':0, '1f469-1f3fb-200d-1f3a8':0, '1f469-1f3fc-200d-1f3a8':0, '1f469-1f3fd-200d-1f3a8':0, '1f469-1f3fe-200d-1f3a8':0, '1f469-1f3ff-200d-1f3a8':0, '1f469-1f3fb-200d-1f3eb':0, '1f469-1f3fc-200d-1f3eb':0, '1f469-1f3fd-200d-1f3eb':0, '1f469-1f3fe-200d-1f3eb':0, '1f469-1f3ff-200d-1f3eb':0, '1f469-1f3fb-200d-1f3ed':0, '1f469-1f3fc-200d-1f3ed':0, '1f469-1f3fd-200d-1f3ed':0, '1f469-1f3fe-200d-1f3ed':0, '1f469-1f3ff-200d-1f3ed':0, '1f469-1f3fb-200d-1f4bb':0, '1f469-1f3fc-200d-1f4bb':0, '1f469-1f3fd-200d-1f4bb':0, '1f469-1f3fe-200d-1f4bb':0, '1f469-1f3ff-200d-1f4bb':0, '1f469-1f3fb-200d-1f4bc':0, '1f469-1f3fc-200d-1f4bc':0, '1f469-1f3fd-200d-1f4bc':0, '1f469-1f3fe-200d-1f4bc':0, '1f469-1f3ff-200d-1f4bc':0, '1f469-1f3fb-200d-1f527':0, '1f469-1f3fc-200d-1f527':0, '1f469-1f3fd-200d-1f527':0, '1f469-1f3fe-200d-1f527':0, '1f469-1f3ff-200d-1f527':0, '1f469-1f3fb-200d-1f52c':0, '1f469-1f3fc-200d-1f52c':0, '1f469-1f3fd-200d-1f52c':0, '1f469-1f3fe-200d-1f52c':0, '1f469-1f3ff-200d-1f52c':0, '1f469-1f3fb-200d-1f680':0, '1f469-1f3fc-200d-1f680':0, '1f469-1f3fd-200d-1f680':0, '1f469-1f3fe-200d-1f680':0, '1f469-1f3ff-200d-1f680':0, '1f469-1f3fb-200d-1f692':0, '1f469-1f3fc-200d-1f692':0, '1f469-1f3fd-200d-1f692':0, '1f469-1f3fe-200d-1f692':0, '1f469-1f3ff-200d-1f692':0, '1f469-1f3fb-200d-1f9af':0, '1f469-1f3fc-200d-1f9af':0, '1f469-1f3fd-200d-1f9af':0, '1f469-1f3fe-200d-1f9af':0, '1f469-1f3ff-200d-1f9af':0, '1f469-1f3fb-200d-1f9b0':0, '1f469-1f3fc-200d-1f9b0':0, '1f469-1f3fd-200d-1f9b0':0, '1f469-1f3fe-200d-1f9b0':0, '1f469-1f3ff-200d-1f9b0':0, '1f469-1f3fb-200d-1f9b1':0, '1f469-1f3fc-200d-1f9b1':0, '1f469-1f3fd-200d-1f9b1':0, '1f469-1f3fe-200d-1f9b1':0, '1f469-1f3ff-200d-1f9b1':0, '1f469-1f3fb-200d-1f9b2':0, '1f469-1f3fc-200d-1f9b2':0, '1f469-1f3fd-200d-1f9b2':0, '1f469-1f3fe-200d-1f9b2':0, '1f469-1f3ff-200d-1f9b2':0, '1f469-1f3fb-200d-1f9b3':0, '1f469-1f3fc-200d-1f9b3':0, '1f469-1f3fd-200d-1f9b3':0, '1f469-1f3fe-200d-1f9b3':0, '1f469-1f3ff-200d-1f9b3':0, '1f469-1f3fb-200d-1f9bc':0, '1f469-1f3fc-200d-1f9bc':0, '1f469-1f3fd-200d-1f9bc':0, '1f469-1f3fe-200d-1f9bc':0, '1f469-1f3ff-200d-1f9bc':0, '1f469-1f3fb-200d-1f9bd':0, '1f469-1f3fc-200d-1f9bd':0, '1f469-1f3fd-200d-1f9bd':0, '1f469-1f3fe-200d-1f9bd':0, '1f469-1f3ff-200d-1f9bd':0, '1f469-1f3fb-200d-2695':0, '1f469-1f3fc-200d-2695':0, '1f469-1f3fd-200d-2695':0, '1f469-1f3fe-200d-2695':0, '1f469-1f3ff-200d-2695':0, '1f469-1f3fb-200d-2696':0, '1f469-1f3fc-200d-2696':0, '1f469-1f3fd-200d-2696':0, '1f469-1f3fe-200d-2696':0, '1f469-1f3ff-200d-2696':0, '1f469-1f3fb-200d-2708':0, '1f469-1f3fc-200d-2708':0, '1f469-1f3fd-200d-2708':0, '1f469-1f3fe-200d-2708':0, '1f469-1f3ff-200d-2708':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3fb-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3fc-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3fd-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3fe-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3fb':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3fc':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3fd':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3fe':0, '1f469-1f3ff-200d-2764-200d-1f468-1f3ff':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3fb-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3fc-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3fd-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3fe-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3fb':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3fc':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3fd':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3fe':0, '1f469-1f3ff-200d-2764-200d-1f469-1f3ff':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fb':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fc':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fd':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3fe':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f468-1f3ff':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3fb-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3fc-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3fd-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3fe-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fb':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fc':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fd':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3fe':0, '1f469-1f3ff-200d-2764-200d-1f48b-200d-1f469-1f3ff':0, '1f469-1f3fb':0, '1f469-1f3fc':0, '1f469-1f3fd':0, '1f469-1f3fe':0, '1f469-1f3ff':0, '1f46b-1f3fb':0, '1f46b-1f3fc':0, '1f46b-1f3fd':0, '1f46b-1f3fe':0, '1f46b-1f3ff':0, '1f469-1f3fb-200d-1f91d-200d-1f468-1f3fc':0, '1f469-1f3fb-200d-1f91d-200d-1f468-1f3fd':0, '1f469-1f3fb-200d-1f91d-200d-1f468-1f3fe':0, '1f469-1f3fb-200d-1f91d-200d-1f468-1f3ff':0, '1f469-1f3fc-200d-1f91d-200d-1f468-1f3fb':0, '1f469-1f3fc-200d-1f91d-200d-1f468-1f3fd':0, '1f469-1f3fc-200d-1f91d-200d-1f468-1f3fe':0, '1f469-1f3fc-200d-1f91d-200d-1f468-1f3ff':0, '1f469-1f3fd-200d-1f91d-200d-1f468-1f3fb':0, '1f469-1f3fd-200d-1f91d-200d-1f468-1f3fc':0, '1f469-1f3fd-200d-1f91d-200d-1f468-1f3fe':0, '1f469-1f3fd-200d-1f91d-200d-1f468-1f3ff':0, '1f469-1f3fe-200d-1f91d-200d-1f468-1f3fb':0, '1f469-1f3fe-200d-1f91d-200d-1f468-1f3fc':0, '1f469-1f3fe-200d-1f91d-200d-1f468-1f3fd':0, '1f469-1f3fe-200d-1f91d-200d-1f468-1f3ff':0, '1f469-1f3ff-200d-1f91d-200d-1f468-1f3fb':0, '1f469-1f3ff-200d-1f91d-200d-1f468-1f3fc':0, '1f469-1f3ff-200d-1f91d-200d-1f468-1f3fd':0, '1f469-1f3ff-200d-1f91d-200d-1f468-1f3fe':0, '1f46c-1f3fb':0, '1f46c-1f3fc':0, '1f46c-1f3fd':0, '1f46c-1f3fe':0, '1f46c-1f3ff':0, '1f468-1f3fb-200d-1f91d-200d-1f468-1f3fc':0, '1f468-1f3fb-200d-1f91d-200d-1f468-1f3fd':0, '1f468-1f3fb-200d-1f91d-200d-1f468-1f3fe':0, '1f468-1f3fb-200d-1f91d-200d-1f468-1f3ff':0, '1f468-1f3fc-200d-1f91d-200d-1f468-1f3fb':0, '1f468-1f3fc-200d-1f91d-200d-1f468-1f3fd':0, '1f468-1f3fc-200d-1f91d-200d-1f468-1f3fe':0, '1f468-1f3fc-200d-1f91d-200d-1f468-1f3ff':0, '1f468-1f3fd-200d-1f91d-200d-1f468-1f3fb':0, '1f468-1f3fd-200d-1f91d-200d-1f468-1f3fc':0, '1f468-1f3fd-200d-1f91d-200d-1f468-1f3fe':0, '1f468-1f3fd-200d-1f91d-200d-1f468-1f3ff':0, '1f468-1f3fe-200d-1f91d-200d-1f468-1f3fb':0, '1f468-1f3fe-200d-1f91d-200d-1f468-1f3fc':0, '1f468-1f3fe-200d-1f91d-200d-1f468-1f3fd':0, '1f468-1f3fe-200d-1f91d-200d-1f468-1f3ff':0, '1f468-1f3ff-200d-1f91d-200d-1f468-1f3fb':0, '1f468-1f3ff-200d-1f91d-200d-1f468-1f3fc':0, '1f468-1f3ff-200d-1f91d-200d-1f468-1f3fd':0, '1f468-1f3ff-200d-1f91d-200d-1f468-1f3fe':0, '1f46d-1f3fb':0, '1f46d-1f3fc':0, '1f46d-1f3fd':0, '1f46d-1f3fe':0, '1f46d-1f3ff':0, '1f469-1f3fb-200d-1f91d-200d-1f469-1f3fc':0, '1f469-1f3fb-200d-1f91d-200d-1f469-1f3fd':0, '1f469-1f3fb-200d-1f91d-200d-1f469-1f3fe':0, '1f469-1f3fb-200d-1f91d-200d-1f469-1f3ff':0, '1f469-1f3fc-200d-1f91d-200d-1f469-1f3fb':0, '1f469-1f3fc-200d-1f91d-200d-1f469-1f3fd':0, '1f469-1f3fc-200d-1f91d-200d-1f469-1f3fe':0, '1f469-1f3fc-200d-1f91d-200d-1f469-1f3ff':0, '1f469-1f3fd-200d-1f91d-200d-1f469-1f3fb':0, '1f469-1f3fd-200d-1f91d-200d-1f469-1f3fc':0, '1f469-1f3fd-200d-1f91d-200d-1f469-1f3fe':0, '1f469-1f3fd-200d-1f91d-200d-1f469-1f3ff':0, '1f469-1f3fe-200d-1f91d-200d-1f469-1f3fb':0, '1f469-1f3fe-200d-1f91d-200d-1f469-1f3fc':0, '1f469-1f3fe-200d-1f91d-200d-1f469-1f3fd':0, '1f469-1f3fe-200d-1f91d-200d-1f469-1f3ff':0, '1f469-1f3ff-200d-1f91d-200d-1f469-1f3fb':0, '1f469-1f3ff-200d-1f91d-200d-1f469-1f3fc':0, '1f469-1f3ff-200d-1f91d-200d-1f469-1f3fd':0, '1f469-1f3ff-200d-1f91d-200d-1f469-1f3fe':0, '1f46e-1f3fb-200d-2640':0, '1f46e-1f3fc-200d-2640':0, '1f46e-1f3fd-200d-2640':0, '1f46e-1f3fe-200d-2640':0, '1f46e-1f3ff-200d-2640':0, '1f46e-1f3fb-200d-2642':0, '1f46e-1f3fc-200d-2642':0, '1f46e-1f3fd-200d-2642':0, '1f46e-1f3fe-200d-2642':0, '1f46e-1f3ff-200d-2642':0, '1f46e-1f3fb':0, '1f46e-1f3fc':0, '1f46e-1f3fd':0, '1f46e-1f3fe':0, '1f46e-1f3ff':0, '1f470-1f3fb-200d-2640':0, '1f470-1f3fc-200d-2640':0, '1f470-1f3fd-200d-2640':0, '1f470-1f3fe-200d-2640':0, '1f470-1f3ff-200d-2640':0, '1f470-1f3fb-200d-2642':0, '1f470-1f3fc-200d-2642':0, '1f470-1f3fd-200d-2642':0, '1f470-1f3fe-200d-2642':0, '1f470-1f3ff-200d-2642':0, '1f470-1f3fb':0, '1f470-1f3fc':0, '1f470-1f3fd':0, '1f470-1f3fe':0, '1f470-1f3ff':0, '1f471-1f3fb-200d-2640':0, '1f471-1f3fc-200d-2640':0, '1f471-1f3fd-200d-2640':0, '1f471-1f3fe-200d-2640':0, '1f471-1f3ff-200d-2640':0, '1f471-1f3fb-200d-2642':0, '1f471-1f3fc-200d-2642':0, '1f471-1f3fd-200d-2642':0, '1f471-1f3fe-200d-2642':0, '1f471-1f3ff-200d-2642':0, '1f471-1f3fb':0, '1f471-1f3fc':0, '1f471-1f3fd':0, '1f471-1f3fe':0, '1f471-1f3ff':0, '1f472-1f3fb':0, '1f472-1f3fc':0, '1f472-1f3fd':0, '1f472-1f3fe':0, '1f472-1f3ff':0, '1f473-1f3fb-200d-2640':0, '1f473-1f3fc-200d-2640':0, '1f473-1f3fd-200d-2640':0, '1f473-1f3fe-200d-2640':0, '1f473-1f3ff-200d-2640':0, '1f473-1f3fb-200d-2642':0, '1f473-1f3fc-200d-2642':0, '1f473-1f3fd-200d-2642':0, '1f473-1f3fe-200d-2642':0, '1f473-1f3ff-200d-2642':0, '1f473-1f3fb':0, '1f473-1f3fc':0, '1f473-1f3fd':0, '1f473-1f3fe':0, '1f473-1f3ff':0, '1f474-1f3fb':0, '1f474-1f3fc':0, '1f474-1f3fd':0, '1f474-1f3fe':0, '1f474-1f3ff':0, '1f475-1f3fb':0, '1f475-1f3fc':0, '1f475-1f3fd':0, '1f475-1f3fe':0, '1f475-1f3ff':0, '1f476-1f3fb':0, '1f476-1f3fc':0, '1f476-1f3fd':0, '1f476-1f3fe':0, '1f476-1f3ff':0, '1f477-1f3fb-200d-2640':0, '1f477-1f3fc-200d-2640':0, '1f477-1f3fd-200d-2640':0, '1f477-1f3fe-200d-2640':0, '1f477-1f3ff-200d-2640':0, '1f477-1f3fb-200d-2642':0, '1f477-1f3fc-200d-2642':0, '1f477-1f3fd-200d-2642':0, '1f477-1f3fe-200d-2642':0, '1f477-1f3ff-200d-2642':0, '1f477-1f3fb':0, '1f477-1f3fc':0, '1f477-1f3fd':0, '1f477-1f3fe':0, '1f477-1f3ff':0, '1f478-1f3fb':0, '1f478-1f3fc':0, '1f478-1f3fd':0, '1f478-1f3fe':0, '1f478-1f3ff':0, '1f47c-1f3fb':0, '1f47c-1f3fc':0, '1f47c-1f3fd':0, '1f47c-1f3fe':0, '1f47c-1f3ff':0, '1f481-1f3fb-200d-2640':0, '1f481-1f3fc-200d-2640':0, '1f481-1f3fd-200d-2640':0, '1f481-1f3fe-200d-2640':0, '1f481-1f3ff-200d-2640':0, '1f481-1f3fb-200d-2642':0, '1f481-1f3fc-200d-2642':0, '1f481-1f3fd-200d-2642':0, '1f481-1f3fe-200d-2642':0, '1f481-1f3ff-200d-2642':0, '1f481-1f3fb':0, '1f481-1f3fc':0, '1f481-1f3fd':0, '1f481-1f3fe':0, '1f481-1f3ff':0, '1f482-1f3fb-200d-2640':0, '1f482-1f3fc-200d-2640':0, '1f482-1f3fd-200d-2640':0, '1f482-1f3fe-200d-2640':0, '1f482-1f3ff-200d-2640':0, '1f482-1f3fb-200d-2642':0, '1f482-1f3fc-200d-2642':0, '1f482-1f3fd-200d-2642':0, '1f482-1f3fe-200d-2642':0, '1f482-1f3ff-200d-2642':0, '1f482-1f3fb':0, '1f482-1f3fc':0, '1f482-1f3fd':0, '1f482-1f3fe':0, '1f482-1f3ff':0, '1f483-1f3fb':0, '1f483-1f3fc':0, '1f483-1f3fd':0, '1f483-1f3fe':0, '1f483-1f3ff':0, '1f485-1f3fb':0, '1f485-1f3fc':0, '1f485-1f3fd':0, '1f485-1f3fe':0, '1f485-1f3ff':0, '1f486-1f3fb-200d-2640':0, '1f486-1f3fc-200d-2640':0, '1f486-1f3fd-200d-2640':0, '1f486-1f3fe-200d-2640':0, '1f486-1f3ff-200d-2640':0, '1f486-1f3fb-200d-2642':0, '1f486-1f3fc-200d-2642':0, '1f486-1f3fd-200d-2642':0, '1f486-1f3fe-200d-2642':0, '1f486-1f3ff-200d-2642':0, '1f486-1f3fb':0, '1f486-1f3fc':0, '1f486-1f3fd':0, '1f486-1f3fe':0, '1f486-1f3ff':0, '1f487-1f3fb-200d-2640':0, '1f487-1f3fc-200d-2640':0, '1f487-1f3fd-200d-2640':0, '1f487-1f3fe-200d-2640':0, '1f487-1f3ff-200d-2640':0, '1f487-1f3fb-200d-2642':0, '1f487-1f3fc-200d-2642':0, '1f487-1f3fd-200d-2642':0, '1f487-1f3fe-200d-2642':0, '1f487-1f3ff-200d-2642':0, '1f487-1f3fb':0, '1f487-1f3fc':0, '1f487-1f3fd':0, '1f487-1f3fe':0, '1f487-1f3ff':0, '1f48f-1f3fb':0, '1f48f-1f3fc':0, '1f48f-1f3fd':0, '1f48f-1f3fe':0, '1f48f-1f3ff':0, '1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fc':0, '1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fd':0, '1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3fe':0, '1f9d1-1f3fb-200d-2764-200d-1f48b-200d-1f9d1-1f3ff':0, '1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fb':0, '1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fd':0, '1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3fe':0, '1f9d1-1f3fc-200d-2764-200d-1f48b-200d-1f9d1-1f3ff':0, '1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fb':0, '1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fc':0, '1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3fe':0, '1f9d1-1f3fd-200d-2764-200d-1f48b-200d-1f9d1-1f3ff':0, '1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fb':0, '1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fc':0, '1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3fd':0, '1f9d1-1f3fe-200d-2764-200d-1f48b-200d-1f9d1-1f3ff':0, '1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fb':0, '1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fc':0, '1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fd':0, '1f9d1-1f3ff-200d-2764-200d-1f48b-200d-1f9d1-1f3fe':0, '1f491-1f3fb':0, '1f491-1f3fc':0, '1f491-1f3fd':0, '1f491-1f3fe':0, '1f491-1f3ff':0, '1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fc':0, '1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fd':0, '1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3fe':0, '1f9d1-1f3fb-200d-2764-200d-1f9d1-1f3ff':0, '1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fb':0, '1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fd':0, '1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3fe':0, '1f9d1-1f3fc-200d-2764-200d-1f9d1-1f3ff':0, '1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fb':0, '1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fc':0, '1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3fe':0, '1f9d1-1f3fd-200d-2764-200d-1f9d1-1f3ff':0, '1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fb':0, '1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fc':0, '1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3fd':0, '1f9d1-1f3fe-200d-2764-200d-1f9d1-1f3ff':0, '1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fb':0, '1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fc':0, '1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fd':0, '1f9d1-1f3ff-200d-2764-200d-1f9d1-1f3fe':0, '1f4aa-1f3fb':0, '1f4aa-1f3fc':0, '1f4aa-1f3fd':0, '1f4aa-1f3fe':0, '1f4aa-1f3ff':0, '1f574-1f3fb':0, '1f574-1f3fc':0, '1f574-1f3fd':0, '1f574-1f3fe':0, '1f574-1f3ff':0, '1f575-1f3fb-200d-2640':0, '1f575-1f3fc-200d-2640':0, '1f575-1f3fd-200d-2640':0, '1f575-1f3fe-200d-2640':0, '1f575-1f3ff-200d-2640':0, '1f575-1f3fb-200d-2642':0, '1f575-1f3fc-200d-2642':0, '1f575-1f3fd-200d-2642':0, '1f575-1f3fe-200d-2642':0, '1f575-1f3ff-200d-2642':0, '1f575-1f3fb':0, '1f575-1f3fc':0, '1f575-1f3fd':0, '1f575-1f3fe':0, '1f575-1f3ff':0, '1f57a-1f3fb':0, '1f57a-1f3fc':0, '1f57a-1f3fd':0, '1f57a-1f3fe':0, '1f57a-1f3ff':0, '1f590-1f3fb':0, '1f590-1f3fc':0, '1f590-1f3fd':0, '1f590-1f3fe':0, '1f590-1f3ff':0, '1f595-1f3fb':0, '1f595-1f3fc':0, '1f595-1f3fd':0, '1f595-1f3fe':0, '1f595-1f3ff':0, '1f596-1f3fb':0, '1f596-1f3fc':0, '1f596-1f3fd':0, '1f596-1f3fe':0, '1f596-1f3ff':0, '1f645-1f3fb-200d-2640':0, '1f645-1f3fc-200d-2640':0, '1f645-1f3fd-200d-2640':0, '1f645-1f3fe-200d-2640':0, '1f645-1f3ff-200d-2640':0, '1f645-1f3fb-200d-2642':0, '1f645-1f3fc-200d-2642':0, '1f645-1f3fd-200d-2642':0, '1f645-1f3fe-200d-2642':0, '1f645-1f3ff-200d-2642':0, '1f645-1f3fb':0, '1f645-1f3fc':0, '1f645-1f3fd':0, '1f645-1f3fe':0, '1f645-1f3ff':0, '1f646-1f3fb-200d-2640':0, '1f646-1f3fc-200d-2640':0, '1f646-1f3fd-200d-2640':0, '1f646-1f3fe-200d-2640':0, '1f646-1f3ff-200d-2640':0, '1f646-1f3fb-200d-2642':0, '1f646-1f3fc-200d-2642':0, '1f646-1f3fd-200d-2642':0, '1f646-1f3fe-200d-2642':0, '1f646-1f3ff-200d-2642':0, '1f646-1f3fb':0, '1f646-1f3fc':0, '1f646-1f3fd':0, '1f646-1f3fe':0, '1f646-1f3ff':0, '1f647-1f3fb-200d-2640':0, '1f647-1f3fc-200d-2640':0, '1f647-1f3fd-200d-2640':0, '1f647-1f3fe-200d-2640':0, '1f647-1f3ff-200d-2640':0, '1f647-1f3fb-200d-2642':0, '1f647-1f3fc-200d-2642':0, '1f647-1f3fd-200d-2642':0, '1f647-1f3fe-200d-2642':0, '1f647-1f3ff-200d-2642':0, '1f647-1f3fb':0, '1f647-1f3fc':0, '1f647-1f3fd':0, '1f647-1f3fe':0, '1f647-1f3ff':0, '1f64b-1f3fb-200d-2640':0, '1f64b-1f3fc-200d-2640':0, '1f64b-1f3fd-200d-2640':0, '1f64b-1f3fe-200d-2640':0, '1f64b-1f3ff-200d-2640':0, '1f64b-1f3fb-200d-2642':0, '1f64b-1f3fc-200d-2642':0, '1f64b-1f3fd-200d-2642':0, '1f64b-1f3fe-200d-2642':0, '1f64b-1f3ff-200d-2642':0, '1f64b-1f3fb':0, '1f64b-1f3fc':0, '1f64b-1f3fd':0, '1f64b-1f3fe':0, '1f64b-1f3ff':0, '1f64c-1f3fb':0, '1f64c-1f3fc':0, '1f64c-1f3fd':0, '1f64c-1f3fe':0, '1f64c-1f3ff':0, '1f64d-1f3fb-200d-2640':0, '1f64d-1f3fc-200d-2640':0, '1f64d-1f3fd-200d-2640':0, '1f64d-1f3fe-200d-2640':0, '1f64d-1f3ff-200d-2640':0, '1f64d-1f3fb-200d-2642':0, '1f64d-1f3fc-200d-2642':0, '1f64d-1f3fd-200d-2642':0, '1f64d-1f3fe-200d-2642':0, '1f64d-1f3ff-200d-2642':0, '1f64d-1f3fb':0, '1f64d-1f3fc':0, '1f64d-1f3fd':0, '1f64d-1f3fe':0, '1f64d-1f3ff':0, '1f64e-1f3fb-200d-2640':0, '1f64e-1f3fc-200d-2640':0, '1f64e-1f3fd-200d-2640':0, '1f64e-1f3fe-200d-2640':0, '1f64e-1f3ff-200d-2640':0, '1f64e-1f3fb-200d-2642':0, '1f64e-1f3fc-200d-2642':0, '1f64e-1f3fd-200d-2642':0, '1f64e-1f3fe-200d-2642':0, '1f64e-1f3ff-200d-2642':0, '1f64e-1f3fb':0, '1f64e-1f3fc':0, '1f64e-1f3fd':0, '1f64e-1f3fe':0, '1f64e-1f3ff':0, '1f64f-1f3fb':0, '1f64f-1f3fc':0, '1f64f-1f3fd':0, '1f64f-1f3fe':0, '1f64f-1f3ff':0, '1f6a3-1f3fb-200d-2640':0, '1f6a3-1f3fc-200d-2640':0, '1f6a3-1f3fd-200d-2640':0, '1f6a3-1f3fe-200d-2640':0, '1f6a3-1f3ff-200d-2640':0, '1f6a3-1f3fb-200d-2642':0, '1f6a3-1f3fc-200d-2642':0, '1f6a3-1f3fd-200d-2642':0, '1f6a3-1f3fe-200d-2642':0, '1f6a3-1f3ff-200d-2642':0, '1f6a3-1f3fb':0, '1f6a3-1f3fc':0, '1f6a3-1f3fd':0, '1f6a3-1f3fe':0, '1f6a3-1f3ff':0, '1f6b4-1f3fb-200d-2640':0, '1f6b4-1f3fc-200d-2640':0, '1f6b4-1f3fd-200d-2640':0, '1f6b4-1f3fe-200d-2640':0, '1f6b4-1f3ff-200d-2640':0, '1f6b4-1f3fb-200d-2642':0, '1f6b4-1f3fc-200d-2642':0, '1f6b4-1f3fd-200d-2642':0, '1f6b4-1f3fe-200d-2642':0, '1f6b4-1f3ff-200d-2642':0, '1f6b4-1f3fb':0, '1f6b4-1f3fc':0, '1f6b4-1f3fd':0, '1f6b4-1f3fe':0, '1f6b4-1f3ff':0, '1f6b5-1f3fb-200d-2640':0, '1f6b5-1f3fc-200d-2640':0, '1f6b5-1f3fd-200d-2640':0, '1f6b5-1f3fe-200d-2640':0, '1f6b5-1f3ff-200d-2640':0, '1f6b5-1f3fb-200d-2642':0, '1f6b5-1f3fc-200d-2642':0, '1f6b5-1f3fd-200d-2642':0, '1f6b5-1f3fe-200d-2642':0, '1f6b5-1f3ff-200d-2642':0, '1f6b5-1f3fb':0, '1f6b5-1f3fc':0, '1f6b5-1f3fd':0, '1f6b5-1f3fe':0, '1f6b5-1f3ff':0, '1f6b6-1f3fb-200d-2640':0, '1f6b6-1f3fc-200d-2640':0, '1f6b6-1f3fd-200d-2640':0, '1f6b6-1f3fe-200d-2640':0, '1f6b6-1f3ff-200d-2640':0, '1f6b6-1f3fb-200d-2642':0, '1f6b6-1f3fc-200d-2642':0, '1f6b6-1f3fd-200d-2642':0, '1f6b6-1f3fe-200d-2642':0, '1f6b6-1f3ff-200d-2642':0, '1f6b6-1f3fb':0, '1f6b6-1f3fc':0, '1f6b6-1f3fd':0, '1f6b6-1f3fe':0, '1f6b6-1f3ff':0, '1f6c0-1f3fb':0, '1f6c0-1f3fc':0, '1f6c0-1f3fd':0, '1f6c0-1f3fe':0, '1f6c0-1f3ff':0, '1f6cc-1f3fb':0, '1f6cc-1f3fc':0, '1f6cc-1f3fd':0, '1f6cc-1f3fe':0, '1f6cc-1f3ff':0, '1f90c-1f3fb':0, '1f90c-1f3fc':0, '1f90c-1f3fd':0, '1f90c-1f3fe':0, '1f90c-1f3ff':0, '1f90f-1f3fb':0, '1f90f-1f3fc':0, '1f90f-1f3fd':0, '1f90f-1f3fe':0, '1f90f-1f3ff':0, '1f918-1f3fb':0, '1f918-1f3fc':0, '1f918-1f3fd':0, '1f918-1f3fe':0, '1f918-1f3ff':0, '1f919-1f3fb':0, '1f919-1f3fc':0, '1f919-1f3fd':0, '1f919-1f3fe':0, '1f919-1f3ff':0, '1f91a-1f3fb':0, '1f91a-1f3fc':0, '1f91a-1f3fd':0, '1f91a-1f3fe':0, '1f91a-1f3ff':0, '1f91b-1f3fb':0, '1f91b-1f3fc':0, '1f91b-1f3fd':0, '1f91b-1f3fe':0, '1f91b-1f3ff':0, '1f91c-1f3fb':0, '1f91c-1f3fc':0, '1f91c-1f3fd':0, '1f91c-1f3fe':0, '1f91c-1f3ff':0, '1f91d-1f3fb':0, '1f91d-1f3fc':0, '1f91d-1f3fd':0, '1f91d-1f3fe':0, '1f91d-1f3ff':0, '1f91e-1f3fb':0, '1f91e-1f3fc':0, '1f91e-1f3fd':0, '1f91e-1f3fe':0, '1f91e-1f3ff':0, '1f91f-1f3fb':0, '1f91f-1f3fc':0, '1f91f-1f3fd':0, '1f91f-1f3fe':0, '1f91f-1f3ff':0, '1f926-1f3fb-200d-2640':0, '1f926-1f3fc-200d-2640':0, '1f926-1f3fd-200d-2640':0, '1f926-1f3fe-200d-2640':0, '1f926-1f3ff-200d-2640':0, '1f926-1f3fb-200d-2642':0, '1f926-1f3fc-200d-2642':0, '1f926-1f3fd-200d-2642':0, '1f926-1f3fe-200d-2642':0, '1f926-1f3ff-200d-2642':0, '1f926-1f3fb':0, '1f926-1f3fc':0, '1f926-1f3fd':0, '1f926-1f3fe':0, '1f926-1f3ff':0, '1f930-1f3fb':0, '1f930-1f3fc':0, '1f930-1f3fd':0, '1f930-1f3fe':0, '1f930-1f3ff':0, '1f931-1f3fb':0, '1f931-1f3fc':0, '1f931-1f3fd':0, '1f931-1f3fe':0, '1f931-1f3ff':0, '1f932-1f3fb':0, '1f932-1f3fc':0, '1f932-1f3fd':0, '1f932-1f3fe':0, '1f932-1f3ff':0, '1f933-1f3fb':0, '1f933-1f3fc':0, '1f933-1f3fd':0, '1f933-1f3fe':0, '1f933-1f3ff':0, '1f934-1f3fb':0, '1f934-1f3fc':0, '1f934-1f3fd':0, '1f934-1f3fe':0, '1f934-1f3ff':0, '1f935-1f3fb-200d-2640':0, '1f935-1f3fc-200d-2640':0, '1f935-1f3fd-200d-2640':0, '1f935-1f3fe-200d-2640':0, '1f935-1f3ff-200d-2640':0, '1f935-1f3fb-200d-2642':0, '1f935-1f3fc-200d-2642':0, '1f935-1f3fd-200d-2642':0, '1f935-1f3fe-200d-2642':0, '1f935-1f3ff-200d-2642':0, '1f935-1f3fb':0, '1f935-1f3fc':0, '1f935-1f3fd':0, '1f935-1f3fe':0, '1f935-1f3ff':0, '1f936-1f3fb':0, '1f936-1f3fc':0, '1f936-1f3fd':0, '1f936-1f3fe':0, '1f936-1f3ff':0, '1f937-1f3fb-200d-2640':0, '1f937-1f3fc-200d-2640':0, '1f937-1f3fd-200d-2640':0, '1f937-1f3fe-200d-2640':0, '1f937-1f3ff-200d-2640':0, '1f937-1f3fb-200d-2642':0, '1f937-1f3fc-200d-2642':0, '1f937-1f3fd-200d-2642':0, '1f937-1f3fe-200d-2642':0, '1f937-1f3ff-200d-2642':0, '1f937-1f3fb':0, '1f937-1f3fc':0, '1f937-1f3fd':0, '1f937-1f3fe':0, '1f937-1f3ff':0, '1f938-1f3fb-200d-2640':0, '1f938-1f3fc-200d-2640':0, '1f938-1f3fd-200d-2640':0, '1f938-1f3fe-200d-2640':0, '1f938-1f3ff-200d-2640':0, '1f938-1f3fb-200d-2642':0, '1f938-1f3fc-200d-2642':0, '1f938-1f3fd-200d-2642':0, '1f938-1f3fe-200d-2642':0, '1f938-1f3ff-200d-2642':0, '1f938-1f3fb':0, '1f938-1f3fc':0, '1f938-1f3fd':0, '1f938-1f3fe':0, '1f938-1f3ff':0, '1f939-1f3fb-200d-2640':0, '1f939-1f3fc-200d-2640':0, '1f939-1f3fd-200d-2640':0, '1f939-1f3fe-200d-2640':0, '1f939-1f3ff-200d-2640':0, '1f939-1f3fb-200d-2642':0, '1f939-1f3fc-200d-2642':0, '1f939-1f3fd-200d-2642':0, '1f939-1f3fe-200d-2642':0, '1f939-1f3ff-200d-2642':0, '1f939-1f3fb':0, '1f939-1f3fc':0, '1f939-1f3fd':0, '1f939-1f3fe':0, '1f939-1f3ff':0, '1f93d-1f3fb-200d-2640':0, '1f93d-1f3fc-200d-2640':0, '1f93d-1f3fd-200d-2640':0, '1f93d-1f3fe-200d-2640':0, '1f93d-1f3ff-200d-2640':0, '1f93d-1f3fb-200d-2642':0, '1f93d-1f3fc-200d-2642':0, '1f93d-1f3fd-200d-2642':0, '1f93d-1f3fe-200d-2642':0, '1f93d-1f3ff-200d-2642':0, '1f93d-1f3fb':0, '1f93d-1f3fc':0, '1f93d-1f3fd':0, '1f93d-1f3fe':0, '1f93d-1f3ff':0, '1f93e-1f3fb-200d-2640':0, '1f93e-1f3fc-200d-2640':0, '1f93e-1f3fd-200d-2640':0, '1f93e-1f3fe-200d-2640':0, '1f93e-1f3ff-200d-2640':0, '1f93e-1f3fb-200d-2642':0, '1f93e-1f3fc-200d-2642':0, '1f93e-1f3fd-200d-2642':0, '1f93e-1f3fe-200d-2642':0, '1f93e-1f3ff-200d-2642':0, '1f93e-1f3fb':0, '1f93e-1f3fc':0, '1f93e-1f3fd':0, '1f93e-1f3fe':0, '1f93e-1f3ff':0, '1f977-1f3fb':0, '1f977-1f3fc':0, '1f977-1f3fd':0, '1f977-1f3fe':0, '1f977-1f3ff':0, '1f9b5-1f3fb':0, '1f9b5-1f3fc':0, '1f9b5-1f3fd':0, '1f9b5-1f3fe':0, '1f9b5-1f3ff':0, '1f9b6-1f3fb':0, '1f9b6-1f3fc':0, '1f9b6-1f3fd':0, '1f9b6-1f3fe':0, '1f9b6-1f3ff':0, '1f9b8-1f3fb-200d-2640':0, '1f9b8-1f3fc-200d-2640':0, '1f9b8-1f3fd-200d-2640':0, '1f9b8-1f3fe-200d-2640':0, '1f9b8-1f3ff-200d-2640':0, '1f9b8-1f3fb-200d-2642':0, '1f9b8-1f3fc-200d-2642':0, '1f9b8-1f3fd-200d-2642':0, '1f9b8-1f3fe-200d-2642':0, '1f9b8-1f3ff-200d-2642':0, '1f9b8-1f3fb':0, '1f9b8-1f3fc':0, '1f9b8-1f3fd':0, '1f9b8-1f3fe':0, '1f9b8-1f3ff':0, '1f9b9-1f3fb-200d-2640':0, '1f9b9-1f3fc-200d-2640':0, '1f9b9-1f3fd-200d-2640':0, '1f9b9-1f3fe-200d-2640':0, '1f9b9-1f3ff-200d-2640':0, '1f9b9-1f3fb-200d-2642':0, '1f9b9-1f3fc-200d-2642':0, '1f9b9-1f3fd-200d-2642':0, '1f9b9-1f3fe-200d-2642':0, '1f9b9-1f3ff-200d-2642':0, '1f9b9-1f3fb':0, '1f9b9-1f3fc':0, '1f9b9-1f3fd':0, '1f9b9-1f3fe':0, '1f9b9-1f3ff':0, '1f9bb-1f3fb':0, '1f9bb-1f3fc':0, '1f9bb-1f3fd':0, '1f9bb-1f3fe':0, '1f9bb-1f3ff':0, '1f9cd-1f3fb-200d-2640':0, '1f9cd-1f3fc-200d-2640':0, '1f9cd-1f3fd-200d-2640':0, '1f9cd-1f3fe-200d-2640':0, '1f9cd-1f3ff-200d-2640':0, '1f9cd-1f3fb-200d-2642':0, '1f9cd-1f3fc-200d-2642':0, '1f9cd-1f3fd-200d-2642':0, '1f9cd-1f3fe-200d-2642':0, '1f9cd-1f3ff-200d-2642':0, '1f9cd-1f3fb':0, '1f9cd-1f3fc':0, '1f9cd-1f3fd':0, '1f9cd-1f3fe':0, '1f9cd-1f3ff':0, '1f9ce-1f3fb-200d-2640':0, '1f9ce-1f3fc-200d-2640':0, '1f9ce-1f3fd-200d-2640':0, '1f9ce-1f3fe-200d-2640':0, '1f9ce-1f3ff-200d-2640':0, '1f9ce-1f3fb-200d-2642':0, '1f9ce-1f3fc-200d-2642':0, '1f9ce-1f3fd-200d-2642':0, '1f9ce-1f3fe-200d-2642':0, '1f9ce-1f3ff-200d-2642':0, '1f9ce-1f3fb':0, '1f9ce-1f3fc':0, '1f9ce-1f3fd':0, '1f9ce-1f3fe':0, '1f9ce-1f3ff':0, '1f9cf-1f3fb-200d-2640':0, '1f9cf-1f3fc-200d-2640':0, '1f9cf-1f3fd-200d-2640':0, '1f9cf-1f3fe-200d-2640':0, '1f9cf-1f3ff-200d-2640':0, '1f9cf-1f3fb-200d-2642':0, '1f9cf-1f3fc-200d-2642':0, '1f9cf-1f3fd-200d-2642':0, '1f9cf-1f3fe-200d-2642':0, '1f9cf-1f3ff-200d-2642':0, '1f9cf-1f3fb':0, '1f9cf-1f3fc':0, '1f9cf-1f3fd':0, '1f9cf-1f3fe':0, '1f9cf-1f3ff':0, '1f9d1-1f3fb-200d-1f33e':0, '1f9d1-1f3fc-200d-1f33e':0, '1f9d1-1f3fd-200d-1f33e':0, '1f9d1-1f3fe-200d-1f33e':0, '1f9d1-1f3ff-200d-1f33e':0, '1f9d1-1f3fb-200d-1f373':0, '1f9d1-1f3fc-200d-1f373':0, '1f9d1-1f3fd-200d-1f373':0, '1f9d1-1f3fe-200d-1f373':0, '1f9d1-1f3ff-200d-1f373':0, '1f9d1-1f3fb-200d-1f37c':0, '1f9d1-1f3fc-200d-1f37c':0, '1f9d1-1f3fd-200d-1f37c':0, '1f9d1-1f3fe-200d-1f37c':0, '1f9d1-1f3ff-200d-1f37c':0, '1f9d1-1f3fb-200d-1f384':0, '1f9d1-1f3fc-200d-1f384':0, '1f9d1-1f3fd-200d-1f384':0, '1f9d1-1f3fe-200d-1f384':0, '1f9d1-1f3ff-200d-1f384':0, '1f9d1-1f3fb-200d-1f393':0, '1f9d1-1f3fc-200d-1f393':0, '1f9d1-1f3fd-200d-1f393':0, '1f9d1-1f3fe-200d-1f393':0, '1f9d1-1f3ff-200d-1f393':0, '1f9d1-1f3fb-200d-1f3a4':0, '1f9d1-1f3fc-200d-1f3a4':0, '1f9d1-1f3fd-200d-1f3a4':0, '1f9d1-1f3fe-200d-1f3a4':0, '1f9d1-1f3ff-200d-1f3a4':0, '1f9d1-1f3fb-200d-1f3a8':0, '1f9d1-1f3fc-200d-1f3a8':0, '1f9d1-1f3fd-200d-1f3a8':0, '1f9d1-1f3fe-200d-1f3a8':0, '1f9d1-1f3ff-200d-1f3a8':0, '1f9d1-1f3fb-200d-1f3eb':0, '1f9d1-1f3fc-200d-1f3eb':0, '1f9d1-1f3fd-200d-1f3eb':0, '1f9d1-1f3fe-200d-1f3eb':0, '1f9d1-1f3ff-200d-1f3eb':0, '1f9d1-1f3fb-200d-1f3ed':0, '1f9d1-1f3fc-200d-1f3ed':0, '1f9d1-1f3fd-200d-1f3ed':0, '1f9d1-1f3fe-200d-1f3ed':0, '1f9d1-1f3ff-200d-1f3ed':0, '1f9d1-1f3fb-200d-1f4bb':0, '1f9d1-1f3fc-200d-1f4bb':0, '1f9d1-1f3fd-200d-1f4bb':0, '1f9d1-1f3fe-200d-1f4bb':0, '1f9d1-1f3ff-200d-1f4bb':0, '1f9d1-1f3fb-200d-1f4bc':0, '1f9d1-1f3fc-200d-1f4bc':0, '1f9d1-1f3fd-200d-1f4bc':0, '1f9d1-1f3fe-200d-1f4bc':0, '1f9d1-1f3ff-200d-1f4bc':0, '1f9d1-1f3fb-200d-1f527':0, '1f9d1-1f3fc-200d-1f527':0, '1f9d1-1f3fd-200d-1f527':0, '1f9d1-1f3fe-200d-1f527':0, '1f9d1-1f3ff-200d-1f527':0, '1f9d1-1f3fb-200d-1f52c':0, '1f9d1-1f3fc-200d-1f52c':0, '1f9d1-1f3fd-200d-1f52c':0, '1f9d1-1f3fe-200d-1f52c':0, '1f9d1-1f3ff-200d-1f52c':0, '1f9d1-1f3fb-200d-1f680':0, '1f9d1-1f3fc-200d-1f680':0, '1f9d1-1f3fd-200d-1f680':0, '1f9d1-1f3fe-200d-1f680':0, '1f9d1-1f3ff-200d-1f680':0, '1f9d1-1f3fb-200d-1f692':0, '1f9d1-1f3fc-200d-1f692':0, '1f9d1-1f3fd-200d-1f692':0, '1f9d1-1f3fe-200d-1f692':0, '1f9d1-1f3ff-200d-1f692':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fb':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fc':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fd':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fe':0, '1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff':0, '1f9d1-1f3fb-200d-1f9af':0, '1f9d1-1f3fc-200d-1f9af':0, '1f9d1-1f3fd-200d-1f9af':0, '1f9d1-1f3fe-200d-1f9af':0, '1f9d1-1f3ff-200d-1f9af':0, '1f9d1-1f3fb-200d-1f9b0':0, '1f9d1-1f3fc-200d-1f9b0':0, '1f9d1-1f3fd-200d-1f9b0':0, '1f9d1-1f3fe-200d-1f9b0':0, '1f9d1-1f3ff-200d-1f9b0':0, '1f9d1-1f3fb-200d-1f9b1':0, '1f9d1-1f3fc-200d-1f9b1':0, '1f9d1-1f3fd-200d-1f9b1':0, '1f9d1-1f3fe-200d-1f9b1':0, '1f9d1-1f3ff-200d-1f9b1':0, '1f9d1-1f3fb-200d-1f9b2':0, '1f9d1-1f3fc-200d-1f9b2':0, '1f9d1-1f3fd-200d-1f9b2':0, '1f9d1-1f3fe-200d-1f9b2':0, '1f9d1-1f3ff-200d-1f9b2':0, '1f9d1-1f3fb-200d-1f9b3':0, '1f9d1-1f3fc-200d-1f9b3':0, '1f9d1-1f3fd-200d-1f9b3':0, '1f9d1-1f3fe-200d-1f9b3':0, '1f9d1-1f3ff-200d-1f9b3':0, '1f9d1-1f3fb-200d-1f9bc':0, '1f9d1-1f3fc-200d-1f9bc':0, '1f9d1-1f3fd-200d-1f9bc':0, '1f9d1-1f3fe-200d-1f9bc':0, '1f9d1-1f3ff-200d-1f9bc':0, '1f9d1-1f3fb-200d-1f9bd':0, '1f9d1-1f3fc-200d-1f9bd':0, '1f9d1-1f3fd-200d-1f9bd':0, '1f9d1-1f3fe-200d-1f9bd':0, '1f9d1-1f3ff-200d-1f9bd':0, '1f9d1-1f3fb-200d-2695':0, '1f9d1-1f3fc-200d-2695':0, '1f9d1-1f3fd-200d-2695':0, '1f9d1-1f3fe-200d-2695':0, '1f9d1-1f3ff-200d-2695':0, '1f9d1-1f3fb-200d-2696':0, '1f9d1-1f3fc-200d-2696':0, '1f9d1-1f3fd-200d-2696':0, '1f9d1-1f3fe-200d-2696':0, '1f9d1-1f3ff-200d-2696':0, '1f9d1-1f3fb-200d-2708':0, '1f9d1-1f3fc-200d-2708':0, '1f9d1-1f3fd-200d-2708':0, '1f9d1-1f3fe-200d-2708':0, '1f9d1-1f3ff-200d-2708':0, '1f9d1-1f3fb':0, '1f9d1-1f3fc':0, '1f9d1-1f3fd':0, '1f9d1-1f3fe':0, '1f9d1-1f3ff':0, '1f9d2-1f3fb':0, '1f9d2-1f3fc':0, '1f9d2-1f3fd':0, '1f9d2-1f3fe':0, '1f9d2-1f3ff':0, '1f9d3-1f3fb':0, '1f9d3-1f3fc':0, '1f9d3-1f3fd':0, '1f9d3-1f3fe':0, '1f9d3-1f3ff':0, '1f9d4-1f3fb-200d-2640':0, '1f9d4-1f3fc-200d-2640':0, '1f9d4-1f3fd-200d-2640':0, '1f9d4-1f3fe-200d-2640':0, '1f9d4-1f3ff-200d-2640':0, '1f9d4-1f3fb-200d-2642':0, '1f9d4-1f3fc-200d-2642':0, '1f9d4-1f3fd-200d-2642':0, '1f9d4-1f3fe-200d-2642':0, '1f9d4-1f3ff-200d-2642':0, '1f9d4-1f3fb':0, '1f9d4-1f3fc':0, '1f9d4-1f3fd':0, '1f9d4-1f3fe':0, '1f9d4-1f3ff':0, '1f9d5-1f3fb':0, '1f9d5-1f3fc':0, '1f9d5-1f3fd':0, '1f9d5-1f3fe':0, '1f9d5-1f3ff':0, '1f9d6-1f3fb-200d-2640':0, '1f9d6-1f3fc-200d-2640':0, '1f9d6-1f3fd-200d-2640':0, '1f9d6-1f3fe-200d-2640':0, '1f9d6-1f3ff-200d-2640':0, '1f9d6-1f3fb-200d-2642':0, '1f9d6-1f3fc-200d-2642':0, '1f9d6-1f3fd-200d-2642':0, '1f9d6-1f3fe-200d-2642':0, '1f9d6-1f3ff-200d-2642':0, '1f9d6-1f3fb':0, '1f9d6-1f3fc':0, '1f9d6-1f3fd':0, '1f9d6-1f3fe':0, '1f9d6-1f3ff':0, '1f9d7-1f3fb-200d-2640':0, '1f9d7-1f3fc-200d-2640':0, '1f9d7-1f3fd-200d-2640':0, '1f9d7-1f3fe-200d-2640':0, '1f9d7-1f3ff-200d-2640':0, '1f9d7-1f3fb-200d-2642':0, '1f9d7-1f3fc-200d-2642':0, '1f9d7-1f3fd-200d-2642':0, '1f9d7-1f3fe-200d-2642':0, '1f9d7-1f3ff-200d-2642':0, '1f9d7-1f3fb':0, '1f9d7-1f3fc':0, '1f9d7-1f3fd':0, '1f9d7-1f3fe':0, '1f9d7-1f3ff':0, '1f9d8-1f3fb-200d-2640':0, '1f9d8-1f3fc-200d-2640':0, '1f9d8-1f3fd-200d-2640':0, '1f9d8-1f3fe-200d-2640':0, '1f9d8-1f3ff-200d-2640':0, '1f9d8-1f3fb-200d-2642':0, '1f9d8-1f3fc-200d-2642':0, '1f9d8-1f3fd-200d-2642':0, '1f9d8-1f3fe-200d-2642':0, '1f9d8-1f3ff-200d-2642':0, '1f9d8-1f3fb':0, '1f9d8-1f3fc':0, '1f9d8-1f3fd':0, '1f9d8-1f3fe':0, '1f9d8-1f3ff':0, '1f9d9-1f3fb-200d-2640':0, '1f9d9-1f3fc-200d-2640':0, '1f9d9-1f3fd-200d-2640':0, '1f9d9-1f3fe-200d-2640':0, '1f9d9-1f3ff-200d-2640':0, '1f9d9-1f3fb-200d-2642':0, '1f9d9-1f3fc-200d-2642':0, '1f9d9-1f3fd-200d-2642':0, '1f9d9-1f3fe-200d-2642':0, '1f9d9-1f3ff-200d-2642':0, '1f9d9-1f3fb':0, '1f9d9-1f3fc':0, '1f9d9-1f3fd':0, '1f9d9-1f3fe':0, '1f9d9-1f3ff':0, '1f9da-1f3fb-200d-2640':0, '1f9da-1f3fc-200d-2640':0, '1f9da-1f3fd-200d-2640':0, '1f9da-1f3fe-200d-2640':0, '1f9da-1f3ff-200d-2640':0, '1f9da-1f3fb-200d-2642':0, '1f9da-1f3fc-200d-2642':0, '1f9da-1f3fd-200d-2642':0, '1f9da-1f3fe-200d-2642':0, '1f9da-1f3ff-200d-2642':0, '1f9da-1f3fb':0, '1f9da-1f3fc':0, '1f9da-1f3fd':0, '1f9da-1f3fe':0, '1f9da-1f3ff':0, '1f9db-1f3fb-200d-2640':0, '1f9db-1f3fc-200d-2640':0, '1f9db-1f3fd-200d-2640':0, '1f9db-1f3fe-200d-2640':0, '1f9db-1f3ff-200d-2640':0, '1f9db-1f3fb-200d-2642':0, '1f9db-1f3fc-200d-2642':0, '1f9db-1f3fd-200d-2642':0, '1f9db-1f3fe-200d-2642':0, '1f9db-1f3ff-200d-2642':0, '1f9db-1f3fb':0, '1f9db-1f3fc':0, '1f9db-1f3fd':0, '1f9db-1f3fe':0, '1f9db-1f3ff':0, '1f9dc-1f3fb-200d-2640':0, '1f9dc-1f3fc-200d-2640':0, '1f9dc-1f3fd-200d-2640':0, '1f9dc-1f3fe-200d-2640':0, '1f9dc-1f3ff-200d-2640':0, '1f9dc-1f3fb-200d-2642':0, '1f9dc-1f3fc-200d-2642':0, '1f9dc-1f3fd-200d-2642':0, '1f9dc-1f3fe-200d-2642':0, '1f9dc-1f3ff-200d-2642':0, '1f9dc-1f3fb':0, '1f9dc-1f3fc':0, '1f9dc-1f3fd':0, '1f9dc-1f3fe':0, '1f9dc-1f3ff':0, '1f9dd-1f3fb-200d-2640':0, '1f9dd-1f3fc-200d-2640':0, '1f9dd-1f3fd-200d-2640':0, '1f9dd-1f3fe-200d-2640':0, '1f9dd-1f3ff-200d-2640':0, '1f9dd-1f3fb-200d-2642':0, '1f9dd-1f3fc-200d-2642':0, '1f9dd-1f3fd-200d-2642':0, '1f9dd-1f3fe-200d-2642':0, '1f9dd-1f3ff-200d-2642':0, '1f9dd-1f3fb':0, '1f9dd-1f3fc':0, '1f9dd-1f3fd':0, '1f9dd-1f3fe':0, '1f9dd-1f3ff':0, '261d-1f3fb':0, '261d-1f3fc':0, '261d-1f3fd':0, '261d-1f3fe':0, '261d-1f3ff':0, '26f9-1f3fb-200d-2640':0, '26f9-1f3fc-200d-2640':0, '26f9-1f3fd-200d-2640':0, '26f9-1f3fe-200d-2640':0, '26f9-1f3ff-200d-2640':0, '26f9-1f3fb-200d-2642':0, '26f9-1f3fc-200d-2642':0, '26f9-1f3fd-200d-2642':0, '26f9-1f3fe-200d-2642':0, '26f9-1f3ff-200d-2642':0, '26f9-1f3fb':0, '26f9-1f3fc':0, '26f9-1f3fd':0, '26f9-1f3fe':0, '26f9-1f3ff':0, '270a-1f3fb':0, '270a-1f3fc':0, '270a-1f3fd':0, '270a-1f3fe':0, '270a-1f3ff':0, '270b-1f3fb':0, '270b-1f3fc':0, '270b-1f3fd':0, '270b-1f3fe':0, '270b-1f3ff':0, '270c-1f3fb':0, '270c-1f3fc':0, '270c-1f3fd':0, '270c-1f3fe':0, '270c-1f3ff':0, '270d-1f3fb':0, '270d-1f3fc':0, '270d-1f3fd':0, '270d-1f3fe':0, '270d-1f3ff':0}};\n\nconst Emoji: {[emoji: string]: number} = EmojiVersions[''];\nfor(const version in EmojiVersions) {\n  if(version) {\n    Object.assign(Emoji, EmojiVersions[version as EMOJI_VERSION]);\n  }\n}\n\nexport default Emoji;\n\n/* Emoji[\"00a9-fe0f\"] = 6362;\nEmoji[\"00ae-fe0f\"] = 6363;\nEmoji[\"2122-fe0f\"] = 6364; */\n","// https://github.com/twitter/twemoji-parser/blob/master/src/lib/regex.js\n\nexport function encodeEmoji(emojiText: string) {\n  const codepoints = toCodePoints(removeVS16s(emojiText)).join('-');\n  return codepoints;\n}\n\nconst vs16RegExp = /\\uFE0F/g;\n// avoid using a string literal like '\\u200D' here because minifiers expand it inline\nconst zeroWidthJoiner = String.fromCharCode(0x200d);\n\nconst removeVS16s = (rawEmoji: string) => (rawEmoji.indexOf(zeroWidthJoiner) < 0 ? rawEmoji.replace(vs16RegExp, '') : rawEmoji);\n\nexport function toCodePoints(unicodeSurrogates: string): Array<string> {\n  const points = [];\n  let char = 0;\n  let previous = 0;\n  let i = 0;\n  while(i < unicodeSurrogates.length) {\n    char = unicodeSurrogates.charCodeAt(i++);\n    if(previous) {\n      points.push((0x10000 + ((previous - 0xd800) << 10) + (char - 0xdc00)).toString(16));\n      previous = 0;\n    } else if(char > 0xd800 && char <= 0xdbff) {\n      previous = char;\n    } else {\n      points.push(char.toString(16));\n    }\n  }\n\n  if(points.length && points[0].length === 2) {\n    points[0] = '00' + points[0];\n  }\n\n  return points;\n}\n\nexport function getEmojiToneIndex(input: string) {\n  const match = input.match(/[\\uDFFB-\\uDFFF]/);\n  return match ? 5 - (57343 - match[0].charCodeAt(0)) : 0;\n}\n\nconst VIRTUAL_COUNTRIES_EMOJIS: Map<string, string> = new Map([\n  ['FT', '🏴‍☠']\n]);\n\nexport function getCountryEmoji(iso2: string) {\n  return VIRTUAL_COUNTRIES_EMOJIS.get(iso2) ??\n    String.fromCharCode(55356, 56741 + iso2.charCodeAt(0), 55356, 56741 + iso2.charCodeAt(1));\n}\n\nexport function emojiFromCodePoints(codePoints: string) {\n  return codePoints.split('-').reduce((prev, curr) => prev + String.fromCodePoint(parseInt(curr, 16)), '');\n}\n","import Emoji from '../../config/emoji';\nimport {encodeEmoji} from '../../vendor/emoji';\n\nexport default function getEmojiUnified(emojiCode: string) {\n  const unified = encodeEmoji(emojiCode).replace(/-?fe0f/g, '');\n\n  /* if(unified === '1f441-200d-1f5e8') {\n    //unified = '1f441-fe0f-200d-1f5e8-fe0f';\n    unified = '1f441-fe0f-200d-1f5e8';\n  } */\n\n  if(!Emoji.hasOwnProperty(unified)\n  // && !emojiData.hasOwnProperty(unified.replace(/-?fe0f$/, ''))\n  ) {\n    // console.error('lol', unified);\n    return;\n  }\n\n  return unified;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport {EMAIL_REG_EXP, FULL_REG_EXP} from '.';\nimport TLD from '../../config/tld';\nimport {MessageEntity} from '../../layer';\nimport checkBrackets from './checkBrackets';\nimport getEmojiUnified from './getEmojiUnified';\n\nexport default function parseEntities(text: string) {\n  let match: RegExpMatchArray;\n  let raw = text;\n  const entities: MessageEntity[] = [];\n  let matchIndex;\n  let rawOffset = 0;\n  // var start = tsNow()\n  FULL_REG_EXP.lastIndex = 0;\n  while(match = raw.match(FULL_REG_EXP)) {\n    matchIndex = rawOffset + match.index;\n\n    // console.log('parseEntities match:', match);\n\n    if(match[3]) { // mentions\n      entities.push({\n        _: 'messageEntityMention',\n        offset: matchIndex + match[1].length,\n        length: match[2].length + match[3].length\n      });\n    } else if(match[4]) {\n      if(EMAIL_REG_EXP.test(match[4])) { // email\n        entities.push({\n          _: 'messageEntityEmail',\n          offset: matchIndex,\n          length: match[4].length\n        });\n      } else {\n        let url: string;\n        let protocol = match[5];\n        const tld = match[6];\n        // let excluded = '';\n        if(tld) { // URL\n          if(!protocol && (tld.substr(0, 4) === 'xn--' || TLD.indexOf(tld.toLowerCase()) !== -1)) {\n            protocol = 'http://';\n          }\n\n          if(protocol) {\n            const balanced = checkBrackets(match[4]);\n            if(balanced.length !== match[4].length) {\n              // excluded = match[4].substring(balanced.length);\n              match[4] = balanced;\n            }\n\n            url = (match[5] ? '' : protocol) + match[4];\n          }\n        } else { // IP address\n          url = (match[5] ? '' : 'http://') + match[4];\n        }\n\n        if(url) {\n          entities.push({\n            _: 'messageEntityUrl',\n            offset: matchIndex,\n            length: match[4].length\n          });\n        }\n      }\n    } else if(match[7]) { // New line\n      entities.push({\n        _: 'messageEntityLinebreak',\n        offset: matchIndex,\n        length: 1\n      });\n    } else if(match[8]) { // Emoji\n      const unified = getEmojiUnified(match[8]);\n      if(unified) {\n        entities.push({\n          _: 'messageEntityEmoji',\n          offset: matchIndex,\n          length: match[8].length,\n          unicode: unified\n        });\n      }\n    } else if(match[11]) { // Hashtag\n      entities.push({\n        _: 'messageEntityHashtag',\n        offset: matchIndex + (match[10] ? match[10].length : 0),\n        length: match[11].length\n      });\n    } else if(match[13]) { // Bot command\n      entities.push({\n        _: 'messageEntityBotCommand',\n        offset: matchIndex + (match[11] ? match[11].length : 0) + (match[12] ? match[12].length : 0),\n        length: 1 + match[13].length + (match[14] ? 1 + match[14].length : 0),\n        unsafe: true\n      });\n    } else if(match[16]) { // Media timestamp\n      const timestamp = match[16];\n      const splitted: string[] = timestamp.split(':');\n      const splittedLength = splitted.length;\n      const hours = splittedLength === 3 ? +splitted[0] : 0;\n      const minutes = +splitted[splittedLength === 3 ? 1 : 0];\n      const seconds = +splitted[splittedLength - 1];\n      entities.push({\n        _: 'messageEntityTimestamp',\n        offset: matchIndex + (/\\D/.test(match[0][0]) ? 1 : 0),\n        length: timestamp.length,\n        raw: timestamp,\n        time: hours * 3600 + minutes * 60 + seconds\n      });\n    }\n\n    raw = raw.substr(match.index + match[0].length);\n    rawOffset += match.index + match[0].length;\n  }\n\n  // if (entities.length) {\n  //   console.log('parse entities', text, entities.slice())\n  // }\n  return entities;\n}\n","// just for the future\nexport default function buildURLHash(str: string) {\n  return '#' + encodeURIComponent(str);\n}\n","export default function encodeEntities(value: string) {\n  return value.replace(/&/g, '&amp;').replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g, (value) => {\n    const hi = value.charCodeAt(0);\n    const low = value.charCodeAt(1);\n    return '&#' + (((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000) + ';';\n  }).replace(/([^\\#-~| |!])/g, (value) => { // non-alphanumeric\n    return '&#' + value.charCodeAt(0) + ';';\n  }).replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n","export default function spoiler(text: string): string {\n  const chars = '⠁⠂⠄⠈⠐⠠⡀⢀⠃⠅⠆⠉⠊⠌⠑⠒⠔⠘⠡⠢⠤⠨⠰⡁⡂⡄⡈⡐⡠⢁⢂⢄⢈⢐⢠⣀⠇⠋⠍⠎⠓⠕⠖⠙⠚⠜⠣⠥⠦⠩⠪⠬⠱⠲⠴⠸⡃⡅⡆⡉⡊⡌⡑⡒⡔⡘⡡⡢⡤⡨⡰⢃⢅⢆⢉⢊⢌⢑⢒⢔⢘⢡⢢⢤⢨⢰⣁⣂⣄⣈⣐⣠⠏⠗⠛⠝⠞⠧⠫⠭⠮⠳⠵⠶⠹⠺⠼⡇⡋⡍⡎⡓⡕⡖⡙⡚⡜⡣⡥⡦⡩⡪⡬⡱⡲⡴⡸⢇⢋⢍⢎⢓⢕⢖⢙⢚⢜⢣⢥⢦⢩⢪⢬⢱⢲⢴⢸⣃⣅⣆⣉⣊⣌⣑⣒⣔⣘⣡⣢⣤⣨⣰⠟⠯⠷⠻⠽⠾⡏⡗⡛⡝⡞⡧⡫⡭⡮⡳⡵⡶⡹⡺⡼⢏⢗⢛⢝⢞⢧⢫⢭⢮⢳⢵⢶⢹⢺⢼⣇⣋⣍⣎⣓⣕⣖⣙⣚⣜⣣⣥⣦⣩⣪⣬⣱⣲⣴⣸⠿⡟⡯⡷⡻⡽⡾⢟⢯⢷⢻⢽⢾⣏⣗⣛⣝⣞⣧⣫⣭⣮⣳⣵⣶⣹⣺⣼⡿⢿⣟⣯⣷⣻⣽⣾⣿';\n  const charsLength = chars.length;\n\n  const out: string[] = [];\n  for(let i = 0; i < text.length; ++i) {\n    const char = text.charCodeAt(i);\n    out.push(chars[char % charsLength]);\n  }\n\n  return out.join('');\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MessageEntity} from '../../layer';\nimport spoiler from './spoiler';\n\nexport default function encodeSpoiler(text: string, entity: MessageEntity.messageEntitySpoiler) {\n  const before = text.slice(0, entity.offset);\n  const spoilerBefore = text.slice(entity.offset, entity.offset + entity.length);\n  const spoilerAfter = spoiler(spoilerBefore)/*  '▚'.repeat(entity.length) */;\n  const after = text.slice(entity.offset + entity.length);\n  text = before + spoilerAfter + after;\n  return {text, entityText: spoilerAfter};\n};\n","import IS_EMOJI_SUPPORTED from './emojiSupport';\n\nexport type EMOJI_VERSION = '' | '14';\n\nconst EMOJI_VERSIONS_SUPPORTED: {\n  [v in EMOJI_VERSION]: boolean\n} = {} as any;\n\n// Thanks to WebZ for the detect\nfunction isEmojiSupported(emoji: string) {\n  const ALLOWABLE_CALCULATION_ERROR_SIZE = 5;\n  const inlineEl = document.createElement('span');\n  inlineEl.classList.add('emoji');\n  document.body.appendChild(inlineEl);\n\n  inlineEl.innerText = emoji; // Emoji from 14.0 version\n  const newEmojiWidth = inlineEl.offsetWidth;\n  inlineEl.innerText = '❤️'; // Emoji from 1.0 version\n  const legacyEmojiWidth = inlineEl.offsetWidth;\n\n  document.body.removeChild(inlineEl);\n\n  return Math.abs(newEmojiWidth - legacyEmojiWidth) < ALLOWABLE_CALCULATION_ERROR_SIZE;\n}\n\nif(IS_EMOJI_SUPPORTED) {\n  EMOJI_VERSIONS_SUPPORTED[''] = true;\n\n  const a: [keyof typeof EMOJI_VERSIONS_SUPPORTED, string][] = [\n    ['14', '🫱🏻']\n  ];\n\n  a.forEach(([version, emoji]) => {\n    EMOJI_VERSIONS_SUPPORTED[version] = isEmojiSupported(emoji);\n  });\n}\n\nexport default EMOJI_VERSIONS_SUPPORTED;\n","export default function simulateEvent(elem: EventTarget, name: string) {\n  const event = new Event(name, {bubbles: true, cancelable: true});\n  elem.dispatchEvent(event);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type ListenerSetter from '../listenerSetter';\nimport IS_TOUCH_SUPPORTED from '../../environment/touchSupport';\nimport simulateEvent from './dispatchEvent';\n\nlet lastMouseDownElement: HTMLElement;\ndocument.addEventListener('mousedown', (e) => {\n  lastMouseDownElement = e.target as HTMLElement;\n  // if((lastMouseDownElement as any)?.cancelMouseDown) {\n  if(lastMouseDownElement?.closest('[cancel-mouse-down]')) {\n    e.preventDefault();\n  }\n});\n\nexport function hasMouseMovedSinceDown(e: Event) {\n  if(e.isTrusted && e.type === 'click' && e.target !== lastMouseDownElement) {\n    return true;\n  }\n}\n\nexport const CLICK_EVENT_NAME: 'mousedown' /* | 'touchend' */ | 'click' = (IS_TOUCH_SUPPORTED ? 'mousedown' : 'click') as any;\nexport type AttachClickOptions = AddEventListenerOptions & Partial<{listenerSetter: ListenerSetter, cancelMouseDown?: boolean, touchMouseDown: boolean, ignoreMove: boolean}>;\nexport function attachClickEvent(elem: HTMLElement | Window, callback: (e: /* TouchEvent |  */MouseEvent) => void, options: AttachClickOptions = {}) {\n  const add = options.listenerSetter ? options.listenerSetter.add(elem) : elem.addEventListener.bind(elem);\n  const remove = options.listenerSetter ? options.listenerSetter.removeManual.bind(options.listenerSetter, elem) : elem.removeEventListener.bind(elem);\n\n  options.touchMouseDown = true;\n  /* if(options.touchMouseDown && CLICK_EVENT_NAME === 'touchend') {\n    add('mousedown', callback, options);\n  } else if(CLICK_EVENT_NAME === 'touchend') {\n    const o = {...options, once: true};\n\n    const onTouchStart = (e: TouchEvent) => {\n      const onTouchMove = (e: TouchEvent) => {\n        remove('touchmove', onTouchMove, o);\n        remove('touchend', onTouchEnd, o);\n      };\n\n      const onTouchEnd = (e: TouchEvent) => {\n        remove('touchmove', onTouchMove, o);\n        callback(e);\n        if(options.once) {\n          remove('touchstart', onTouchStart);\n        }\n      };\n\n      add('touchend', onTouchEnd, o);\n      add('touchmove', onTouchMove, o);\n    };\n\n    add('touchstart', onTouchStart);\n  } else {\n    add(CLICK_EVENT_NAME, callback, options);\n  } */\n\n  if(options.cancelMouseDown) {\n    (elem as HTMLElement).setAttribute('cancel-mouse-down', '');\n    // (elem as any).cancelMouseDown = true;\n  }\n\n  if(CLICK_EVENT_NAME === 'click' && !options.ignoreMove) {\n    const cb = callback;\n    callback = (e) => {\n      if(hasMouseMovedSinceDown(e)) {\n        return;\n      }\n\n      cb(e);\n    };\n  }\n\n  add(CLICK_EVENT_NAME, callback, options);\n\n  // @ts-ignore\n  return () => remove(CLICK_EVENT_NAME, callback, options);\n}\n\n// export function detachClickEvent(elem: HTMLElement | Window, callback: (e: /* TouchEvent |  */MouseEvent) => void, options?: AddEventListenerOptions) {\n//   // if(CLICK_EVENT_NAME === 'touchend') {\n//   //   elem.removeEventListener('touchstart', callback, options);\n//   // } else {\n//   elem.removeEventListener(CLICK_EVENT_NAME, callback as any, options);\n//   // }\n// }\n\nexport function simulateClickEvent(elem: HTMLElement) {\n  simulateEvent(elem, CLICK_EVENT_NAME);\n}\n","const BOM = '﻿';\n// const BOM = 'K';\nexport default BOM;\n","import wrapUrl from './wrapUrl';\n\nexport default function wrapTelegramUrlToAnchor(url1: string) {\n  const {url, onclick} = wrapUrl(url1);\n  const element = document.createElement('a');\n  (element as HTMLAnchorElement).href = url;\n  if(onclick) {\n    element.setAttribute('onclick', `${onclick}(this)`);\n  }\n\n  return element;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\n/* export function isInDOM(element: Element, parentNode?: HTMLElement): boolean {\n  if(!element) {\n    return false;\n  }\n\n  parentNode = parentNode || document.body;\n  if(element === parentNode) {\n    return true;\n  }\n  return isInDOM(element.parentNode as HTMLElement, parentNode);\n} */\nexport default function isInDOM(element: Element): boolean {\n  return !!element?.isConnected;\n}\n","export default function forEachReverse<T>(array: Array<T>, callback: (value: T, index?: number, array?: Array<T>) => void) {\n  for(let length = array.length, i = length - 1; i >= 0; --i) {\n    callback(array[i], i, array);\n  }\n};\n","import noop from '../noop';\n\nexport default function safePlay(media: {play: () => any}) {\n  try {\n    const promise = media.play();\n    if(promise instanceof Promise) {\n      promise.catch(noop);\n    }\n  } catch(e) {\n    console.error(e);\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {LiteModeKey} from '../helpers/liteMode';\nimport type RLottiePlayer from '../lib/rlottie/rlottiePlayer';\nimport rootScope from '../lib/rootScope';\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport isInDOM from '../helpers/dom/isInDOM';\nimport indexOfAndSplice from '../helpers/array/indexOfAndSplice';\nimport forEachReverse from '../helpers/array/forEachReverse';\nimport idleController from '../helpers/idleController';\nimport {fastRaf} from '../helpers/schedulers';\nimport {Middleware} from '../helpers/middleware';\nimport safePlay from '../helpers/dom/safePlay';\n\nexport type AnimationItemGroup = '' | 'none' | 'chat' | 'lock' |\n  'STICKERS-POPUP' | 'emoticons-dropdown' | 'STICKERS-SEARCH' | 'GIFS-SEARCH' |\n  `CHAT-MENU-REACTIONS-${number}` | 'INLINE-HELPER' | 'GENERAL-SETTINGS' | 'STICKER-VIEWER' | 'EMOJI' |\n  'EMOJI-STATUS' | `chat-${number}` | 'PREMIUM-PROMO' | 'NEW-MEDIA' | 'BLUFF-SPOILER';\nexport interface AnimationItem {\n  el: HTMLElement,\n  group: AnimationItemGroup,\n  animation: AnimationItemWrapper,\n  liteModeKey?: LiteModeKey,\n  controlled?: boolean | Middleware,\n  type: AnimationItemType,\n  locked?: boolean\n};\n\nexport type AnimationItemType = 'lottie' | 'dots' | 'video' | 'emoji';\n\nexport interface AnimationItemWrapper {\n  remove: () => void;\n  paused: boolean;\n  pause: () => any;\n  play: () => any;\n  autoplay: boolean;\n  _autoplay?: boolean;\n  loop: boolean | number;\n  _loop?: boolean | number;\n  // onVisibilityChange?: (visible: boolean) => boolean;\n};\n\nexport class AnimationIntersector {\n  private observer: IntersectionObserver;\n  private visible: Set<AnimationItem>;\n\n  private overrideIdleGroups: Set<string>;\n  private byGroups: {[group in AnimationItemGroup]?: AnimationItem[]};\n  private byPlayer: Map<AnimationItem['animation'], AnimationItem>;\n  private lockedGroups: {[group in AnimationItemGroup]?: true};\n  private onlyOnePlayableGroup: AnimationItemGroup;\n\n  private intersectionLockedGroups: {[group in AnimationItemGroup]?: true};\n  private videosLocked: boolean;\n\n  constructor() {\n    this.observer = new IntersectionObserver((entries) => {\n      // if(rootScope.idle.isIDLE) return;\n\n      for(const entry of entries) {\n        const target = entry.target;\n\n        for(const group in this.byGroups) {\n          if(this.intersectionLockedGroups[group as AnimationItemGroup]) {\n            continue;\n          }\n\n          const animation = this.byGroups[group as AnimationItemGroup].find((p) => p.el === target);\n          if(!animation) {\n            continue;\n          }\n\n          if(entry.isIntersecting) {\n            this.visible.add(animation);\n            this.checkAnimation(animation, false);\n\n            /* if(animation instanceof HTMLVideoElement && animation.dataset.src) {\n              animation.src = animation.dataset.src;\n              animation.load();\n            } */\n          } else {\n            this.visible.delete(animation);\n            this.checkAnimation(animation, true);\n\n            const _animation = animation.animation;\n            if(animation.type === 'lottie'/*  && animation.cachingDelta === 2 */) {\n              // console.warn('will clear cache', player);\n              (_animation as RLottiePlayer).clearCache();\n            }/*  else if(animation instanceof HTMLVideoElement && animation.src) {\n              animation.dataset.src = animation.src;\n              animation.src = '';\n              animation.load();\n            } */\n          }\n\n          break;\n        }\n      }\n    });\n\n    this.visible = new Set();\n\n    this.overrideIdleGroups = new Set();\n    this.byGroups = {};\n    this.byPlayer = new Map();\n    this.lockedGroups = {};\n    this.onlyOnePlayableGroup = '';\n\n    this.intersectionLockedGroups = {};\n    this.videosLocked = false;\n\n    idleController.addEventListener('change', (idle) => {\n      this.checkAnimations2(idle);\n    });\n  }\n\n  public toggleMediaPause(paused: boolean) {\n    if(paused) {\n      if(this.videosLocked) {\n        this.videosLocked = false;\n        this.checkAnimations2();\n      }\n    } else {\n      this.videosLocked = true;\n      this.checkAnimations2();\n    }\n  }\n\n  public setOverrideIdleGroup(group: string, override: boolean) {\n    if(override) this.overrideIdleGroups.add(group);\n    else this.overrideIdleGroups.delete(group);\n  }\n\n  public getAnimations(element: HTMLElement) {\n    const found: AnimationItem[] = [];\n    for(const group in this.byGroups) {\n      for(const player of this.byGroups[group as AnimationItemGroup]) {\n        if(player.el === element) {\n          found.push(player);\n        }\n      }\n    }\n\n    return found;\n  }\n\n  public removeAnimation(player: AnimationItem) {\n    const {el, animation} = player;\n    if(player.controlled !== true && player.type !== 'video') {\n      animation.remove();\n    }\n\n    const group = this.byGroups[player.group];\n    if(group) {\n      indexOfAndSplice(group, player);\n      if(!group.length) {\n        delete this.byGroups[player.group];\n      }\n    }\n\n    this.observer.unobserve(el);\n    this.visible.delete(player);\n    this.byPlayer.delete(animation);\n  }\n\n  public removeAnimationByPlayer(player: AnimationItemWrapper) {\n    const item = this.byPlayer.get(player);\n    if(item) {\n      this.removeAnimation(item);\n    }\n  }\n\n  public addAnimation(options: {\n    animation: AnimationItem['animation'],\n    group?: AnimationItemGroup,\n    observeElement: HTMLElement,\n    controlled?: AnimationItem['controlled'],\n    liteModeKey?: LiteModeKey\n    type: AnimationItemType,\n    locked?: boolean\n  }) {\n    const {animation, group = '', observeElement, controlled, liteModeKey, type, locked} = options;\n    if(group === 'none' || this.byPlayer.has(animation)) {\n      return;\n    }\n\n    const item: AnimationItem = {\n      el: observeElement,\n      animation: animation,\n      group,\n      controlled,\n      liteModeKey,\n      type,\n      locked\n    };\n\n    if(controlled && typeof(controlled) !== 'boolean') {\n      controlled.onClean(() => {\n        this.removeAnimationByPlayer(animation);\n      });\n    }\n\n    if(item.type === 'lottie') {\n      if(!rootScope.settings.stickers.loop && animation.loop) {\n        animation.loop = rootScope.settings.stickers.loop;\n      }\n    }\n\n    (this.byGroups[group as AnimationItemGroup] ??= []).push(item);\n    this.observer.observe(item.el);\n    this.byPlayer.set(animation, item);\n  }\n\n  public checkAnimations(\n    blurred?: boolean,\n    group?: AnimationItemGroup,\n    destroy?: boolean,\n    imitateIntersection?: boolean\n  ) {\n    // if(rootScope.idle.isIDLE) return;\n\n    if(group !== undefined && !this.byGroups[group]) {\n      // console.warn('no animation group:', group);\n      return;\n    }\n\n    const groups = group !== undefined /* && false */ ? [group] : Object.keys(this.byGroups) as AnimationItemGroup[];\n\n    for(const group of groups) {\n      if(imitateIntersection && this.intersectionLockedGroups[group]) {\n        continue;\n      }\n\n      const animations = this.byGroups[group];\n\n      forEachReverse(animations, (animation) => {\n        this.checkAnimation(animation, blurred, destroy);\n      });\n    }\n  }\n\n  public checkAnimations2(blurred?: boolean) {\n    this.checkAnimations(blurred, undefined, undefined, true);\n  }\n\n  public checkAnimation(player: AnimationItem, blurred?: boolean, destroy?: boolean) {\n    const {el, animation, group, locked} = player;\n    if(locked) {\n      return;\n    }\n\n    // return;\n    if(destroy || (!this.lockedGroups[group] && !isInDOM(el))) {\n      if(!player.controlled || destroy) {\n        this.removeAnimation(player);\n      }\n\n      return;\n    }\n\n    if(\n      blurred ||\n      (this.onlyOnePlayableGroup && this.onlyOnePlayableGroup !== group) ||\n      (player.type === 'video' && this.videosLocked)\n    ) {\n      if(!animation.paused) {\n        // console.warn('pause animation:', animation);\n        animation.pause();\n      }\n    } else if(\n      animation.paused &&\n      this.visible.has(player) &&\n      animation.autoplay &&\n      (!this.onlyOnePlayableGroup || this.onlyOnePlayableGroup === group) &&\n      (!idleController.isIdle || this.overrideIdleGroups.has(player.group))\n    ) {\n      // console.warn('play animation:', animation);\n      safePlay(animation);\n    }\n  }\n\n  public getOnlyOnePlayableGroup() {\n    return this.onlyOnePlayableGroup;\n  }\n\n  public setOnlyOnePlayableGroup(group: AnimationItemGroup = '') {\n    this.onlyOnePlayableGroup = group;\n  }\n\n  public lockGroup(group: AnimationItemGroup) {\n    this.lockedGroups[group] = true;\n  }\n\n  public unlockGroup(group: AnimationItemGroup) {\n    delete this.lockedGroups[group];\n    this.checkAnimations(undefined, group);\n  }\n\n  public refreshGroup(group: AnimationItemGroup) {\n    const animations = this.byGroups[group];\n    if(!animations?.length) {\n      return;\n    }\n\n    animations.forEach((animation) => {\n      this.observer.unobserve(animation.el);\n    });\n\n    fastRaf(() => {\n      animations.forEach((animation) => {\n        this.observer.observe(animation.el);\n      });\n    });\n  }\n\n  public lockIntersectionGroup(group: AnimationItemGroup) {\n    this.intersectionLockedGroups[group] = true;\n  }\n\n  public unlockIntersectionGroup(group: AnimationItemGroup) {\n    delete this.intersectionLockedGroups[group];\n    this.refreshGroup(group);\n  }\n\n  public toggleIntersectionGroup(group: AnimationItemGroup, lock: boolean) {\n    if(lock) this.lockIntersectionGroup(group);\n    else this.unlockIntersectionGroup(group);\n  }\n\n  public setAutoplay(play: boolean, liteModeKey: LiteModeKey) {\n    let changed = false;\n    this.byPlayer.forEach((animationItem, animation) => {\n      if(animationItem.liteModeKey === liteModeKey) {\n        changed = true;\n        animation.autoplay = play ? animation._autoplay : false;\n        animation.loop = play ? rootScope.settings.stickers.loop && animation._loop : false;\n      }\n    });\n\n    return changed;\n  }\n\n  public setLoop(loop: boolean) {\n    let changed = false;\n    this.byPlayer.forEach((animationItem, animation) => {\n      if(\n        animation._loop &&\n        animation.loop !== loop &&\n        (animationItem.type === 'lottie' || animationItem.type === 'video')\n      ) {\n        changed = true;\n        animation.loop = loop;\n\n        // if(animation._autoplay && animation.autoplay !== animation._autoplay) {\n        animation.autoplay = animation._autoplay;\n        // }\n      }\n    });\n\n    return changed;\n  }\n\n  public toggleItemLock(animationItem: AnimationItem, lock: boolean) {\n    // const wasLocked = animationItem.locked;\n    animationItem.locked = lock;\n\n    // if(!!wasLocked !== lock) {\n    //   this.checkAnimation(animationItem);\n    // }\n  }\n}\n\nconst animationIntersector = new AnimationIntersector();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.animationIntersector = animationIntersector);\nexport default animationIntersector;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\ntype TargetType = HTMLElement;\nexport type OnVisibilityChangeItem = {target: TargetType, visible: boolean, entry: IntersectionObserverEntry, index: number};\nexport type OnVisibilityChange = (item: OnVisibilityChangeItem) => void;\n\nexport default class VisibilityIntersector {\n  private observer: IntersectionObserver;\n  private items: Map<TargetType, boolean> = new Map();\n  private locked = false;\n\n  constructor(onVisibilityChange: OnVisibilityChange, options?: IntersectionObserverInit) {\n    this.observer = new IntersectionObserver((entries) => {\n      if(this.locked) {\n        return;\n      }\n\n      const changed: OnVisibilityChangeItem[] = [];\n\n      entries.forEach((entry, index) => {\n        const target = entry.target as TargetType;\n\n        if(this.items.get(target) === entry.isIntersecting) {\n          return;\n        } else {\n          this.items.set(target, entry.isIntersecting);\n        }\n\n        /* if(entry.isIntersecting) {\n          console.log('ooo', entry);\n        } */\n\n        /* if(this.locked) {\n          return;\n        } */\n\n        const change: typeof changed[0] = {target, visible: entry.isIntersecting, entry, index};\n\n        // ! order will be incorrect so can't use it\n        // changed[entry.isIntersecting ? 'unshift' : 'push'](change);\n        changed.push(change);\n\n        // onVisibilityChange(target, entry.isIntersecting);\n      });\n\n      changed.forEach((item) => {\n        onVisibilityChange(item);\n      });\n    }, options);\n  }\n\n  public getVisible() {\n    const items: TargetType[] = [];\n    this.items.forEach((value, key) => {\n      if(value) {\n        items.push(key);\n      }\n    });\n\n    return items;\n  }\n\n  public clearVisible() {\n    const visible = this.getVisible();\n    for(const target of visible) {\n      this.items.set(target, false);\n    }\n  }\n\n  public isVisible(target: TargetType) {\n    return !!this.items.get(target);\n  }\n\n  public disconnect() {\n    this.observer.disconnect();\n    this.items.clear();\n  }\n\n  public refresh() {\n    this.observer.disconnect();\n\n    // window.requestAnimationFrame(() => {\n    const targets = [...this.items.keys()];\n    for(const target of targets) {\n      // this.items.set(target, false);\n      this.observer.observe(target);\n    }\n    // });\n  }\n\n  public refreshVisible() {\n    const visible = this.getVisible();\n    for(const target of visible) {\n      this.observer.unobserve(target);\n    }\n\n    for(const target of visible) {\n      this.observer.observe(target);\n    }\n  }\n\n  public observe(target: TargetType) {\n    this.items.set(target, false);\n    this.observer.observe(target);\n  }\n\n  public unobserve(target: TargetType) {\n    this.observer.unobserve(target);\n    this.items.delete(target);\n  }\n\n  public unlock() {\n    this.locked = false;\n  }\n\n  public unlockAndRefresh() {\n    this.unlock();\n    this.refresh();\n  }\n\n  public lock() {\n    this.locked = true;\n  }\n}\n","export default function findAndSpliceAll<T>(array: Array<T>, verify: (value: T, index: number, arr: typeof array) => boolean) {\n  const out: typeof array = [];\n  let idx = -1;\n  while((idx = array.findIndex(verify)) !== -1) {\n    out.push(array.splice(idx, 1)[0]);\n  }\n\n  return out;\n}\n","export default function findAndSplice<T>(array: Array<T>, verify: (value: T, index?: number, array?: Array<T>) => boolean) {\n  const index = array.findIndex(verify);\n  return index !== -1 ? array.splice(index, 1)[0] : undefined;\n};\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport indexOfAndSplice from '../helpers/array/indexOfAndSplice';\nimport {Middleware} from '../helpers/middleware';\nimport throttle from '../helpers/schedulers/throttle';\nimport {logger, LogTypes} from '../lib/logger';\n\nconst PARALLEL_LIMIT = 8;\nconst IGNORE_ERRORS: Set<ErrorType> = new Set(['NO_ENTRY_FOUND', 'STORAGE_OFFLINE', 'MIDDLEWARE', 'NO_AUTO_DOWNLOAD']);\n\nexport type LazyLoadElementBase = {\n  load: () => Promise<any>,\n  middleware?: Middleware\n};\n\nexport default class LazyLoadQueueBase {\n  public queueId = 0;\n  protected queue: Array<LazyLoadElementBase> = [];\n  protected inProcess: Set<LazyLoadElementBase> = new Set();\n\n  protected lockPromise: Promise<void> = null;\n  protected unlockResolve: () => void = null;\n\n  protected log = logger('LL', LogTypes.Error);\n  protected processQueue: () => void;\n\n  constructor(protected parallelLimit = PARALLEL_LIMIT) {\n    this.processQueue = throttle(() => this._processQueue(), 8, false);\n  }\n\n  public clear() {\n    this.inProcess.clear(); // ацтеки забьются, будет плохо\n\n    this.queue.length = 0;\n    // unreachable code\n    /* for(let item of this.inProcess) {\n      this.lazyLoadMedia.push(item);\n    } */\n  }\n\n  public lock() {\n    if(this.lockPromise) return;\n\n    // const perf = performance.now();\n    this.lockPromise = new Promise((resolve, reject) => {\n      this.unlockResolve = resolve;\n    });\n\n    /* if(DEBUG) {\n      this.lockPromise.then(() => {\n        this.log('was locked for:', performance.now() - perf);\n      });\n    } */\n  }\n\n  public unlock() {\n    if(!this.unlockResolve) return;\n\n    this.unlockResolve();\n    this.unlockResolve = this.lockPromise = null;\n\n    this.processQueue();\n  }\n\n  protected async processItem(item: LazyLoadElementBase) {\n    if(this.lockPromise) {\n      return;\n    }\n\n    this.inProcess.add(item);\n\n    /* if(DEBUG) {\n      this.log('will load media', this.lockPromise, item);\n    } */\n\n    try {\n      // await new Promise((resolve) => setTimeout(resolve, 2e3));\n      // await new Promise((resolve, reject) => window.requestAnimationFrame(() => window.requestAnimationFrame(resolve)));\n      // await item.load(item.div);\n      await this.loadItem(item);\n    } catch(err) {\n      if(!IGNORE_ERRORS.has((err as ApiError)?.type)) {\n        this.log.error('loadMediaQueue error:', err/* , item */);\n      }\n    }\n\n    this.inProcess.delete(item);\n\n    /* if(DEBUG) {\n      this.log('loaded media', item);\n    } */\n\n    this.processQueue();\n  }\n\n  protected loadItem(item: LazyLoadElementBase) {\n    return item.load();\n  }\n\n  protected getItem() {\n    return this.queue.shift();\n  }\n\n  protected addElement(method: 'push' | 'unshift', el: LazyLoadElementBase) {\n    this.queue[method](el);\n    this.processQueue();\n  }\n\n  protected _processQueue(item?: LazyLoadElementBase) {\n    if(!this.queue.length || this.lockPromise || (this.parallelLimit > 0 && this.inProcess.size >= this.parallelLimit)) return;\n\n    // console.log('_processQueue start');\n    // let added = 0;\n    do {\n      if(item) {\n        indexOfAndSplice(this.queue, item);\n      } else {\n        item = this.getItem();\n      }\n\n      if(item) {\n        this.processItem(item);\n      } else {\n        break;\n      }\n\n      item = null;\n      // ++added;\n    } while(this.inProcess.size < this.parallelLimit && this.queue.length);\n    // console.log('_processQueue end, added', added, this.queue.length);\n  }\n\n  public push(el: LazyLoadElementBase) {\n    this.addElement('push', el);\n  }\n\n  public unshift(el: LazyLoadElementBase) {\n    this.addElement('unshift', el);\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport findAndSpliceAll from '../helpers/array/findAndSpliceAll';\nimport LazyLoadQueueBase, {LazyLoadElementBase} from './lazyLoadQueueBase';\nimport VisibilityIntersector from './visibilityIntersector';\n\nexport type LazyLoadElement = Omit<LazyLoadElementBase, 'load'> & {\n  load: (target?: HTMLElement) => Promise<any>,\n  div: HTMLElement\n  wasSeen?: boolean,\n  visible?: boolean\n};\n\nexport default class LazyLoadQueueIntersector extends LazyLoadQueueBase {\n  protected queue: Array<LazyLoadElement> = [];\n  protected inProcess: Set<LazyLoadElement> = new Set();\n\n  public intersector: VisibilityIntersector;\n  protected intersectorTimeout: number;\n\n  constructor(parallelLimit?: number) {\n    super(parallelLimit);\n  }\n\n  public lock() {\n    super.lock();\n    this.intersector.lock();\n  }\n\n  public unlock() {\n    super.unlock();\n    this.intersector.unlock();\n  }\n\n  public unlockAndRefresh() {\n    super.unlock();\n    this.intersector.unlockAndRefresh();\n  }\n\n  public clear() {\n    super.clear();\n    this.intersector.disconnect();\n  }\n\n  public refresh() {\n    this.intersector.refresh();\n  }\n\n  protected loadItem(item: LazyLoadElement) {\n    return item.load(item.div);\n  }\n\n  protected addElement(method: 'push' | 'unshift', el: LazyLoadElement) {\n    const item = this.queue.find((i) => i.div === el.div && i.load === el.load);\n    if(item) {\n      return false;\n    } else {\n      for(const item of this.inProcess) {\n        if(item.div === el.div && item.load === el.load) {\n          return false;\n        }\n      }\n    }\n\n    this.queue[method](el);\n    return true;\n  }\n\n  protected setProcessQueueTimeout() {\n    this.intersectorTimeout ??= window.setTimeout(() => {\n      this.intersectorTimeout = undefined;\n      this.processQueue();\n    }, 0);\n  }\n\n  public push(el: LazyLoadElement) {\n    super.push(el);\n  }\n\n  public unshift(el: LazyLoadElement) {\n    super.unshift(el);\n  }\n\n  public delete(el: Omit<LazyLoadElement, 'load'>) {\n    findAndSpliceAll(this.queue, (i) => i.div === el.div);\n    this.unobserve(el);\n  }\n\n  public observe(el: LazyLoadElement) {\n    this.intersector.observe(el.div);\n  }\n\n  public unobserve(el: Omit<LazyLoadElement, 'load'>) {\n    this.intersector.unobserve(el.div);\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n// * Jolly Cobra's useHeavyAnimationCheck.ts, patched\n\nimport {AnyToVoidFunction} from '../types';\nimport ListenerSetter from '../helpers/listenerSetter';\nimport deferredPromise, {CancellablePromise} from '../helpers/cancellablePromise';\nimport DEBUG from '../config/debug';\nimport pause from '../helpers/schedulers/pause';\nimport EventListenerBase from '../helpers/eventListenerBase';\n\nconst eventListener = new EventListenerBase<{\n  start: () => void,\n  end: () => void\n}>();\nconst ANIMATION_START_EVENT = 'start';\nconst ANIMATION_END_EVENT = 'end';\n\nlet isAnimating = false;\nlet heavyAnimationPromise: CancellablePromise<void> = deferredPromise<void>();\nlet promisesInQueue = 0;\n\nheavyAnimationPromise.resolve();\n\nconst log = console.log.bind(console.log, '[HEAVY-ANIMATION]:');\n\nexport function dispatchHeavyAnimationEvent(promise: Promise<any>, timeout?: number) {\n  if(!isAnimating) {\n    heavyAnimationPromise = deferredPromise<void>();\n    eventListener.dispatchEvent(ANIMATION_START_EVENT);\n    isAnimating = true;\n    DEBUG && log('start');\n  }\n\n  ++promisesInQueue;\n  DEBUG && log('attach promise, length:', promisesInQueue, timeout);\n\n  const promises = [\n    timeout !== undefined ? pause(timeout) : undefined,\n    promise.finally(() => {})\n  ].filter(Boolean);\n\n  const perf = performance.now();\n  const _heavyAnimationPromise = heavyAnimationPromise;\n  Promise.race(promises).then(() => {\n    if(heavyAnimationPromise !== _heavyAnimationPromise || heavyAnimationPromise.isFulfilled) { // interrupted\n      return;\n    }\n\n    --promisesInQueue;\n    DEBUG && log('promise end, length:', promisesInQueue, performance.now() - perf);\n    if(promisesInQueue <= 0) {\n      onHeavyAnimationEnd();\n    }\n  });\n\n  return heavyAnimationPromise;\n}\n\n(window as any).dispatchHeavyAnimationEvent = dispatchHeavyAnimationEvent;\n\nfunction onHeavyAnimationEnd() {\n  if(heavyAnimationPromise.isFulfilled) {\n    return;\n  }\n\n  isAnimating = false;\n  promisesInQueue = 0;\n  eventListener.dispatchEvent(ANIMATION_END_EVENT);\n  heavyAnimationPromise.resolve();\n\n  DEBUG && log('end');\n}\n\nexport function interruptHeavyAnimation() {\n  onHeavyAnimationEnd();\n}\n\nexport function getHeavyAnimationPromise() {\n  return heavyAnimationPromise;\n}\n\nexport default function(\n  handleAnimationStart: AnyToVoidFunction,\n  handleAnimationEnd: AnyToVoidFunction,\n  listenerSetter?: ListenerSetter\n) {\n  // useEffect(() => {\n  if(isAnimating) {\n    handleAnimationStart();\n  }\n\n  const add = listenerSetter ? listenerSetter.add(eventListener) : eventListener.addEventListener.bind(eventListener);\n  const remove = listenerSetter ? listenerSetter.removeManual.bind(listenerSetter, eventListener) : eventListener.removeEventListener.bind(eventListener);\n  add(ANIMATION_START_EVENT, handleAnimationStart);\n  add(ANIMATION_END_EVENT, handleAnimationEnd);\n\n  return () => {\n    remove(ANIMATION_END_EVENT, handleAnimationEnd);\n    remove(ANIMATION_START_EVENT, handleAnimationStart);\n  };\n  // }, [handleAnimationEnd, handleAnimationStart]);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport VisibilityIntersector, {OnVisibilityChangeItem} from './visibilityIntersector';\nimport findAndSpliceAll from '../helpers/array/findAndSpliceAll';\nimport findAndSplice from '../helpers/array/findAndSplice';\nimport LazyLoadQueueIntersector, {LazyLoadElement} from './lazyLoadQueueIntersector';\nimport useHeavyAnimationCheck from '../hooks/useHeavyAnimationCheck';\n\nexport default class LazyLoadQueue extends LazyLoadQueueIntersector {\n  constructor(parallelLimit?: number, ignoreHeavyAnimation?: boolean) {\n    super(parallelLimit);\n\n    this.intersector = new VisibilityIntersector(this.onVisibilityChange);\n\n    !ignoreHeavyAnimation && useHeavyAnimationCheck(() => {\n      this.lock();\n    }, () => {\n      this.unlockAndRefresh();\n    });\n  }\n\n  private onVisibilityChange = ({target, visible}: OnVisibilityChangeItem) => {\n    // if(DEBUG) {\n    //   this.log('isIntersecting', target, visible);\n    // }\n\n    // if visible - will move to the end of visible arary\n    findAndSpliceAll(this.queue, (i) => i.div === target).forEach((item) => {\n      if(visible) {\n        item.wasSeen = true;\n      }\n\n      item.visible = visible;\n      const index = this.queue.findIndex((item) => !item.visible);\n      this.queue.splice(Math.max(0, index), 0, item);\n    });\n\n    this.setProcessQueueTimeout();\n  };\n\n  protected getItem() {\n    return findAndSplice(this.queue, (item) => item.wasSeen);\n  }\n\n  public async processItem(item: LazyLoadElement) {\n    await super.processItem(item);\n    this.intersector.unobserve(item.div);\n  }\n\n  protected addElement(method: 'push' | 'unshift', el: LazyLoadElement) {\n    const inserted = super.addElement(method, el);\n\n    if(!inserted) return false;\n\n    this.observe(el);\n    /* if(el.wasSeen) {\n      this.processQueue(el);\n    } else  */\n    el.wasSeen ??= false;\n\n    return true;\n  }\n\n  public setAllSeen() {\n    this.queue.forEach((item) => {\n      item.wasSeen = true;\n    });\n\n    this.setProcessQueueTimeout();\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n/**\n  * https://core.telegram.org/api/files#vector-thumbnails\n  */\nexport default function getPathFromBytes(bytes: Uint8Array) {\n  const lookup = 'AACAAAAHAAALMAAAQASTAVAAAZaacaaaahaaalmaaaqastava.az0123456789-,';\n\n  let path = 'M';\n  for(let i = 0, length = bytes.length; i < length; ++i) {\n    const num = bytes[i];\n\n    if(num >= (128 + 64)) {\n      path += lookup[num - 128 - 64];\n    } else {\n      if(num >= 128) {\n        path += ',';\n      } else if(num >= 64) {\n        path += '-';\n      }\n      path += '' + (num & 63);\n    }\n  }\n  path += 'z';\n\n  return path;\n}\n","let outCanvas: HTMLCanvasElement,\n  outContext: CanvasRenderingContext2D;\n\n// https://github.com/telegramdesktop/tdesktop/blob/543bfab24a76402992421063f1e6444f347d31fe/Telegram/SourceFiles/boxes/sticker_set_box.cpp#L75\nexport default function computeLockColor(canvas: HTMLCanvasElement) {\n  if(!outCanvas) {\n    outCanvas = document.createElement('canvas');\n    outContext = outCanvas.getContext('2d');\n  }\n\n  const context = canvas.getContext('2d');\n  const size = 20 * (canvas.dpr ?? 1);\n  const width = size;\n  const height = size;\n  const skipx = (canvas.width - width) / 2;\n  const margin = 0/*  * (canvas.dpr ?? 1) */;\n  const skipy = canvas.height - height - margin;\n  const imageData = context.getImageData(skipx, skipy, width, height).data;\n  let sr = 0, sg = 0, sb = 0, sa = 0;\n  for(let i = 0; i < imageData.length; i += 4) {\n    sr += imageData[i];\n    sg += imageData[i + 1];\n    sb += imageData[i + 2];\n    sa += imageData[i + 3];\n  }\n\n  outCanvas.width = outCanvas.height = size;\n  const color = new Uint8ClampedArray([sr * 255 / sa, sg * 255 / sa, sb * 255 / sa, 255]);\n  const rgba = `rgba(${color[0]}, ${color[1]}, ${color[2]}, ${color[3]})`;\n  outContext.fillStyle = rgba;\n  outContext.fillRect(0, 0, size, size);\n  outContext.fillStyle = `rgba(112, 117, 121, 0.3)`;\n  outContext.fillRect(0, 0, size, size);\n  // document.querySelector('.popup-title').append(c);\n  return outCanvas.toDataURL('image/jpeg');\n}\n","import assumeType from '../../helpers/assumeType';\nimport {Document} from '../../layer';\nimport {logger} from '../logger';\n\nexport const QUALITY_FILE_MIME_TYPE = 'application/x-mpegurl';\n\nexport const ctx = self as any as ServiceWorkerGlobalScope;\nexport const log = logger('HLS');\nexport const swLog = logger('SW-HLS');\n\nexport function isDocumentHlsQualityFile(doc: Document | undefined) {\n  assumeType<Document.document | undefined>(doc);\n  // \"application/x-mpegurl\" missing from union MTMimeType wtf\n  return (doc?.mime_type as string) === QUALITY_FILE_MIME_TYPE;\n}\n","import type Hls from 'hls.js';\n\nexport const hlsInstancesByVideo = new WeakMap<HTMLVideoElement, Hls>();\n","import DEBUG from '../../config/debug';\nimport {Middleware} from '../../helpers/middleware';\n\nimport {log} from './common';\nimport {hlsInstancesByVideo} from './hlsInstancesByVideo';\n\ntype InitVideoHlsParameters = {\n  video: HTMLVideoElement;\n  src: string;\n  middleware: Middleware;\n};\n\nexport async function initVideoHls({video, src, middleware}: InitVideoHlsParameters) {\n  const {default: Hls} = await import('hls.js');\n\n  log('initing video hls', src);\n\n  const hls = new Hls({\n    debug: DEBUG,\n    startLevel: 0,\n    testBandwidth: false,\n    // autoStartLoad: false\n    backBufferLength: 30,\n    maxBufferLength: 60,\n    maxMaxBufferLength: 60,\n    maxFragLookUpTolerance: 0.001,\n    maxBufferHole: 1,\n    nudgeMaxRetry: 10000\n  });\n\n  hlsInstancesByVideo.set(video, hls);\n\n  hls.loadSource(src);\n  hls.attachMedia(video as HTMLMediaElement);\n\n  middleware?.onDestroy(() => {\n    log('destroying Hls instance for video', src);\n    hls.destroy();\n  });\n}\n","import {getHeavyAnimationPromise} from '../../hooks/useHeavyAnimationCheck';\nimport {getCurrentAccount} from '../../lib/accounts/getCurrentAccount';\nimport {initVideoHls} from '../../lib/hls/initVideoHls';\nimport apiManagerProxy from '../../lib/mtproto/mtprotoworker';\nimport {Middleware} from '../middleware';\n\nfunction updateStreamInUse(url: string, inUse: boolean) {\n  if(url.includes('stream/')) {\n    apiManagerProxy.serviceMessagePort.invokeVoid('toggleStreamInUse', {url, inUse, accountNumber: getCurrentAccount()});\n  }\n}\n\n// const createdVideos: Set<HTMLVideoElement> = new Set();\nexport default function createVideo({\n  pip,\n  middleware\n}: {\n  pip?: boolean,\n  middleware: Middleware\n}) {\n  const video = document.createElement('video');\n  if(!pip) video.disablePictureInPicture = true;\n  video.setAttribute('playsinline', 'true');\n  // createdVideos.add(video);\n\n  middleware?.onDestroy(async() => {\n    // createdVideos.delete(video);\n    await getHeavyAnimationPromise();\n    video.src = '';\n    video.load();\n  });\n\n  let originalSrc = video.src;\n  Object.defineProperty(video, 'src', {\n    get: () => {\n      return originalSrc;\n    },\n    set: (newValue) => {\n      updateStreamInUse(originalSrc, false);\n      updateStreamInUse(newValue, true);\n\n      originalSrc = newValue;\n\n      if(newValue.startsWith('hls/')) {\n        initVideoHls({video, src: newValue, middleware: middleware});\n      } else {\n        video.setAttribute('src', newValue);\n      }\n    }\n  });\n\n  return video;\n}\n\n// (window as any).createdVideos = createdVideos;\n","export const CRBUG_1250841_ERROR = 'DECODER_ERROR_NOT_SUPPORTED: Audio configuration specified 2 channels, but FFmpeg thinks the file contains 1 channels';\n\nexport default function isCrbug1250841Error(err: MediaError) {\n  return err.code ===  4 && err.message === CRBUG_1250841_ERROR;\n}\n","import {IS_APPLE_MOBILE} from '../environment/userAgent';\nimport rootScope from '../lib/rootScope';\nimport callbackify from './callbackify';\nimport isCrbug1250841Error from './fixChromiumMp4.constants';\n\nexport function shouldIgnoreVideoError(e: ErrorEvent) {\n  try {\n    const target = e.target as HTMLVideoElement;\n    const error = target.error;\n\n    if(!error || error.message.includes('URL safety check')) {\n      console.warn('will ignore video error', e);\n      return true;\n    }\n\n    const isChromeBug = isCrbug1250841Error(error);\n    if(isChromeBug && !(target as any).triedFixingChromeBug) {\n      let srcPromise: MaybePromise<string>;\n      const originalSrc = target.src;\n      if(originalSrc.includes('stream/')) {\n        srcPromise = originalSrc + '?_crbug1250841';\n      } else {\n        srcPromise = rootScope.managers.appDocsManager.fixChromiumMp4(originalSrc);\n      }\n\n      callbackify(srcPromise, (src) => {\n        (target as any).triedFixingChromeBug = true;\n        if(target.src === src) {\n          return;\n        }\n\n        target.src = src;\n        target.load();\n      });\n      return true;\n    } else if(isChromeBug) {\n      console.error('chrome video error', e);\n    }\n  } catch(err) {}\n\n  return false;\n}\n\nexport default function onMediaLoad(media: HTMLMediaElement, readyState = media.HAVE_METADATA, useCanplayOnIos?: boolean) {\n  return new Promise<void>((resolve, reject) => {\n    if(media.readyState >= readyState) {\n      resolve();\n      return;\n    }\n\n    const loadEventName = IS_APPLE_MOBILE && !useCanplayOnIos ? 'loadeddata' : 'canplay';\n    const errorEventName = 'error';\n    const onLoad = () => {\n      media.removeEventListener(errorEventName, onError);\n      resolve();\n    };\n    const onError = (e: ErrorEvent) => {\n      if(shouldIgnoreVideoError(e)) {\n        return;\n      }\n\n      media.removeEventListener(loadEventName, onLoad);\n      media.removeEventListener(errorEventName, onError);\n      reject(media.error);\n    };\n    media.addEventListener(loadEventName, onLoad, {once: true});\n    media.addEventListener(errorEventName, onError);\n  });\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport onMediaLoad from '../onMediaLoad';\n\n// import { getHeavyAnimationPromise } from \"../../hooks/useHeavyAnimationCheck\";\n\nexport const loadedURLs: {[url: string]: boolean} = {};\nconst set = (elem: HTMLElement | HTMLImageElement | SVGImageElement | HTMLVideoElement, url: string) => {\n  if(elem instanceof HTMLImageElement || elem instanceof HTMLVideoElement) elem.src = url;\n  else if(elem instanceof SVGImageElement) elem.setAttributeNS(null, 'href', url);\n  else elem.style.backgroundImage = 'url(' + url + ')';\n};\n\n// проблема функции в том, что она не подходит для ссылок, пригодна только для blob'ов, потому что обычным ссылкам нужен 'load' каждый раз.\nexport default function renderImageFromUrl(\n  elem: HTMLElement | HTMLImageElement | SVGImageElement | HTMLVideoElement,\n  url: string,\n  callback?: () => void,\n  useCache?: boolean,\n  processImageOnLoad?: (image: HTMLImageElement) => void\n): MaybePromise<void> {\n  if(processImageOnLoad) useCache = false;\n  useCache ??= processImageOnLoad === undefined;\n\n  if(!url) {\n    console.error('renderImageFromUrl: no url?', elem, url);\n    callback?.();\n    return;\n  }\n\n  const isVideo = elem instanceof HTMLVideoElement;\n  if(((loadedURLs[url]/*  && false */) && useCache) || isVideo) {\n    /* if(isVideo) {\n      const source = document.createElement('source');\n      source.src = url;\n      source.type = 'video/webm';\n      elem.append(source);\n    } else  */if(elem) {\n      set(elem, url);\n    }\n\n    if(callback) {\n      if(isVideo) {\n        return onMediaLoad(elem).then(callback);\n      } else {\n        callback?.();\n      }\n      // callback && getHeavyAnimationPromise().then(() => callback());\n    }\n  } else {\n    const isImage = elem instanceof HTMLImageElement;\n    const loader = isImage ? elem : new Image();\n    // const loader = new Image();\n    // let perf = performance.now();\n\n    const onLoad = () => {\n      if(!isImage && elem) {\n        set(elem, url);\n      }\n\n      loadedURLs[url] = true;\n      // console.log('onload:', url, performance.now(), loader.naturalWidth, loader.naturalHeight);\n      processImageOnLoad?.(loader);\n      // TODO: переделать прогрузки аватаров до начала анимации, иначе с этим ожиданием они неприятно появляются\n      // callback && getHeavyAnimationPromise().then(() => callback());\n      callback?.();\n\n      // if(loader.naturalWidth) {\n      //   const interval = setInterval(() => {\n      //     if(!loader.naturalWidth) {\n      //       const parents = getParents(loader);\n      //       console.warn('image no dimensions', loader.isConnected, parents, (parents[parents.length - 1] as HTMLElement).outerHTML, loader.src === url);\n      //     }\n      //   }, 1);\n\n      //   setTimeout(() => clearInterval(interval), 1e3);\n      // }\n    };\n\n    const onError = (err: DOMException) => {\n      if(!err.message.includes('cannot be decoded')) {\n        console.error('Render image from url failed:', err, url, loader, err.message, loader.naturalWidth);\n      }\n\n      callback?.();\n    };\n\n    loader.decoding = 'async';\n    loader.src = url;\n    return loader.decode().then(onLoad, onError);\n    // const timeout = setTimeout(() => {\n    //   console.error('not yet decoded', loader, url);\n    //   debugger;\n    // }, 1e3);\n    // decodePromise.finally(() => {\n    //   clearTimeout(timeout);\n    // });\n  }\n}\n\nexport function renderImageFromUrlPromise(\n  elem: Parameters<typeof renderImageFromUrl>[0],\n  url: string,\n  useCache?: boolean,\n  processImageOnLoad?: (image: HTMLImageElement) => void\n) {\n  return new Promise<void>((resolve) => {\n    renderImageFromUrl(elem, url, resolve, useCache, processImageOnLoad);\n  });\n}\n","export default function bytesFromHex(hexString: string) {\n  const len = hexString.length;\n  const bytes = new Uint8Array(Math.ceil(len / 2));\n  let start = 0;\n\n  if(len % 2) { // read 0x581 as 0x0581\n    bytes[start++] = parseInt(hexString.charAt(0), 16);\n  }\n\n  for(let i = start; i < len; i += 2) {\n    bytes[start++] = parseInt(hexString.substr(i, 2), 16);\n  }\n\n  return bytes;\n}\n","export default function bytesToDataURL(bytes: Uint8Array, mimeType: string = 'image/jpeg') {\n  return `data:${mimeType};base64,${btoa(String.fromCharCode(...bytes))}`;\n}\n","export default function convertToUint8Array(bytes: Uint8Array | ArrayBuffer | number[] | string): Uint8Array {\n  if(bytes instanceof Uint8Array) {\n    return bytes;\n  } else if(typeof(bytes) === 'string') {\n    return new TextEncoder().encode(bytes);\n  }\n\n  return new Uint8Array(bytes);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {IS_SAFARI} from '../../environment/userAgent';\nimport bytesFromHex from './bytesFromHex';\nimport bytesToDataURL from './bytesToDataURL';\nimport convertToUint8Array from './convertToUint8Array';\n\nconst JPEG_HEADER_HEX = 'ffd8ffe000104a46494600010100000100010000ffdb004300281c1e231e19282321232d2b28303c64413c37373c7b585d4964918099968f808c8aa0b4e6c3a0aadaad8a8cc8ffcbdaeef5ffffff9bc1fffffffaffe6fdfff8ffdb0043012b2d2d3c353c76414176f8a58ca5f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8f8ffc00011080000000003012200021101031101ffc4001f0000010501010101010100000000000000000102030405060708090a0bffc400b5100002010303020403050504040000017d01020300041105122131410613516107227114328191a1082342b1c11552d1f02433627282090a161718191a25262728292a3435363738393a434445464748494a535455565758595a636465666768696a737475767778797a838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae1e2e3e4e5e6e7e8e9eaf1f2f3f4f5f6f7f8f9faffc4001f0100030101010101010101010000000000000102030405060708090a0bffc400b51100020102040403040705040400010277000102031104052131061241510761711322328108144291a1b1c109233352f0156272d10a162434e125f11718191a262728292a35363738393a434445464748494a535455565758595a636465666768696a737475767778797a82838485868788898a92939495969798999aa2a3a4a5a6a7a8a9aab2b3b4b5b6b7b8b9bac2c3c4c5c6c7c8c9cad2d3d4d5d6d7d8d9dae2e3e4e5e6e7e8e9eaf2f3f4f5f6f7f8f9faffda000c03010002110311003f00';\n\nconst JPEG_HEADER = bytesFromHex(JPEG_HEADER_HEX);\nconst JPEG_TAIL = bytesFromHex('ffd9');\n\nexport function getPreviewBytesFromURL(url: string) {\n  const needle = 'base64,';\n  const sliced = url.slice(url.indexOf(needle) + needle.length);\n  const jpegBytes = [...atob(sliced)].map((char) => char.charCodeAt(0));\n\n  return new Uint8Array(jpegBytes);\n  // console.log('getPreviewBytesFromURL', bytesToHex(jpegBytes));\n\n  // const n = JPEG_HEADER_HEX.slice(-10);\n  // const one = jpegBytes[164];\n  // const two = jpegBytes[166];\n\n  // const body = jpegBytes.slice(bytesToHex(jpegBytes).indexOf(n) / 2 + n.length / 2/* JPEG_HEADER.length */, jpegBytes.length - JPEG_TAIL.length);\n  // const original = new Uint8Array([\n  //   0xFF,\n  //   one,\n  //   two,\n  //   ...body\n  // ]);\n\n  // console.log(bytesToHex(body));\n\n  // return original;\n}\n\nexport default function getPreviewURLFromBytes(bytes: Uint8Array | number[], isSticker = false) {\n  let arr: Uint8Array;\n  if(!isSticker && bytes[0] === 0x1) {\n    arr = new Uint8Array(JPEG_HEADER.concat(Array.from(bytes.slice(3)), JPEG_TAIL));\n    arr[164] = bytes[1];\n    arr[166] = bytes[2];\n  } else {\n    arr = convertToUint8Array(bytes);\n  }\n\n  let mimeType: string;\n  if(isSticker) {\n    mimeType = IS_SAFARI ? 'image/png' : 'image/webp';\n  } else {\n    mimeType = 'image/jpeg';\n  }\n\n  const dataURL = bytesToDataURL(arr, mimeType);\n  return dataURL;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {MyDocument} from '../lib/appManagers/appDocsManager';\nimport type {MyPhoto} from '../lib/appManagers/appPhotosManager';\nimport {PhotoSize} from '../layer';\n// import appDownloadManager from \"../lib/appManagers/appDownloadManager\";\nimport getPreviewURLFromBytes from './bytes/getPreviewURLFromBytes';\n\nexport default function getPreviewURLFromThumb(photo: MyPhoto | MyDocument, thumb: PhotoSize.photoCachedSize | PhotoSize.photoStrippedSize, isSticker = false) {\n  // const cacheContext = appDownloadManager.getCacheContext(photo, thumb.type);\n  // return cacheContext.url || (cacheContext.url = getPreviewURLFromBytes(thumb.bytes, isSticker));\n  return getPreviewURLFromBytes(thumb.bytes, isSticker);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport deferredPromise, {CancellablePromise} from './cancellablePromise';\nimport {getHeavyAnimationPromise} from '../hooks/useHeavyAnimationCheck';\nimport {fastRaf} from './schedulers';\nimport {ArgumentTypes} from '../types';\n\ntype HeavyQueue<T extends HeavyQueue<any>> = {\n  items: ArgumentTypes<T['process']>[],\n  process: (...args: any[]) => ReturnType<T['process']>,\n  context: any,\n  promise?: CancellablePromise<ReturnType<T['process']>[]>\n};\nconst heavyQueue: HeavyQueue<any>[] = [];\nlet processingQueue = false;\n\nexport default function addHeavyTask<T extends HeavyQueue<T>>(queue: T, method: 'push' | 'unshift' = 'push') {\n  if(!queue.items.length) {\n    return Promise.resolve([]) as typeof promise;\n  }\n\n  const promise = queue.promise = deferredPromise();\n  heavyQueue[method](queue);\n  processHeavyQueue();\n\n  return promise;\n}\n\nfunction processHeavyQueue() {\n  if(!processingQueue) {\n    const queue = heavyQueue.shift();\n    timedChunk(queue).finally(() => {\n      processingQueue = false;\n      if(heavyQueue.length) {\n        processHeavyQueue();\n      }\n    });\n  }\n}\n\nfunction timedChunk<T extends HeavyQueue<T>>(queue: HeavyQueue<T>) {\n  if(!queue.items.length) {\n    queue.promise.resolve([] as any);\n    return Promise.resolve([]);\n  }\n\n  const todo = queue.items.slice();\n  const results: ReturnType<T['process']>[] = [];\n\n  return new Promise<typeof results>((resolve, reject) => {\n    const f = async() => {\n      const start = performance.now();\n\n      do {\n        await getHeavyAnimationPromise();\n        const possiblePromise = queue.process.apply(queue.context, todo.shift());\n        let realResult: typeof results[0];\n        // @ts-ignore\n        if(possiblePromise instanceof Promise) {\n          try {\n            realResult = await possiblePromise;\n          } catch(err) {\n            reject(err);\n            return;\n          }\n        } else {\n          realResult = possiblePromise;\n        }\n\n        results.push(realResult);\n      } while(todo.length > 0 && (performance.now() - start) < 6);\n\n      if(todo.length > 0) {\n        fastRaf(f);\n        // setTimeout(f, 25);\n      } else {\n        resolve(results);\n      }\n    };\n\n    fastRaf(f);\n    // setTimeout(f, 25);\n  }).then(queue.promise.resolve.bind(queue.promise), queue.promise.reject.bind(queue.promise));\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type fastBlur from '../vendor/fastBlur';\nimport addHeavyTask from './heavyQueue';\nimport IS_CANVAS_FILTER_SUPPORTED from '../environment/canvasFilterSupport';\n\nconst RADIUS = 2;\nconst ITERATIONS = 2;\n\nlet requireBlurPromise: Promise<any>;\nlet fastBlurFunc: typeof fastBlur;\nif(!IS_CANVAS_FILTER_SUPPORTED) {\n  requireBlurPromise = import('../vendor/fastBlur').then((m) => {\n    fastBlurFunc = m.default;\n  });\n} else {\n  requireBlurPromise = Promise.resolve();\n}\n\nfunction processBlurNext(\n  img: HTMLImageElement,\n  radius: number,\n  iterations: number,\n  canvas: HTMLCanvasElement = document.createElement('canvas')\n) {\n  canvas.width = img.width;\n  canvas.height = img.height;\n\n  const ctx = canvas.getContext('2d', {alpha: false});\n  if(IS_CANVAS_FILTER_SUPPORTED) {\n    ctx.filter = `blur(${radius}px)`;\n    ctx.drawImage(img, -radius * 2, -radius * 2, canvas.width + radius * 4, canvas.height + radius * 4);\n  } else {\n    ctx.drawImage(img, 0, 0);\n    fastBlurFunc(ctx, 0, 0, canvas.width, canvas.height, radius, iterations);\n  }\n\n  return canvas;\n}\n\ntype CacheValue = {canvas: HTMLCanvasElement, promise: Promise<void>};\nconst cache: Map<string, CacheValue> = new Map();\nconst CACHE_SIZE = 150;\n\nexport default function blur(dataUri: string, radius: number = RADIUS, iterations: number = ITERATIONS) {\n  if(!dataUri) {\n    throw 'no dataUri for blur: ' + dataUri;\n  }\n\n  if(cache.size > CACHE_SIZE) {\n    cache.clear();\n  }\n\n  const canvas = document.createElement('canvas');\n  canvas.className = 'canvas-thumbnail';\n\n  let cached = cache.get(dataUri);\n  if(!cached) {\n    const promise: CacheValue['promise'] = new Promise((resolve) => {\n      // return resolve(dataUri);\n      requireBlurPromise.then(() => {\n        const img = new Image();\n        img.onload = () => {\n          // if(IS_CANVAS_FILTER_SUPPORTED) {\n          // resolve(processBlurNext(img, radius, iterations));\n          // } else {\n          const promise = addHeavyTask({\n            items: [[img, radius, iterations, canvas]],\n            context: null,\n            process: processBlurNext\n          }, 'unshift');\n\n          promise.then(() => {\n            resolve();\n          });\n          // }\n        };\n        img.src = dataUri;\n      });\n    });\n\n    cache.set(dataUri, cached = {\n      canvas,\n      promise\n    });\n  } else {\n    canvas.width = cached.canvas.width;\n    canvas.height = cached.canvas.height;\n    cached.promise.then(() => {\n      canvas.getContext('2d').drawImage(cached.canvas, 0, 0, canvas.width, canvas.height);\n    });\n  }\n\n  return {\n    ...cached,\n    canvas\n  };\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {PhotoSize} from '../layer';\nimport {MyDocument} from '../lib/appManagers/appDocsManager';\nimport {MyPhoto} from '../lib/appManagers/appPhotosManager';\nimport {renderImageFromUrlPromise} from './dom/renderImageFromUrl';\nimport getPreviewURLFromThumb from './getPreviewURLFromThumb';\nimport blur from './blur';\n\nexport default function getImageFromStrippedThumb(\n  photo: MyPhoto | MyDocument,\n  thumb: PhotoSize.photoCachedSize | PhotoSize.photoStrippedSize,\n  useBlur: boolean | number,\n  url = getPreviewURLFromThumb(photo, thumb, false)\n) {\n  let element: HTMLImageElement | HTMLCanvasElement, loadPromise: Promise<void>;\n  if(!useBlur) {\n    element = new Image();\n    loadPromise = renderImageFromUrlPromise(element, url);\n  } else {\n    const result = blur(url, typeof(useBlur) === 'number' ? useBlur : undefined);\n    element = result.canvas;\n    loadPromise = result.promise;\n  }\n\n  element.classList.add('thumbnail');\n\n  return {image: element, loadPromise};\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n *\n * Originally from:\n * https://github.com/zhukov/webogram\n * Copyright (C) 2014 Igor Zhukov <igor.beatle@gmail.com>\n * https://github.com/zhukov/webogram/blob/master/LICENSE\n */\n\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport {makeMediaSize} from './mediaSize';\n\nexport default function calcImageInBox(imageW: number, imageH: number, boxW: number, boxH: number, noZoom = true) {\n  if(imageW < boxW && imageH < boxH && noZoom) {\n    return makeMediaSize(imageW, imageH);\n  }\n\n  let boxedImageW = boxW;\n  let boxedImageH = boxH;\n\n  if((imageW / imageH) > (boxW / boxH)) {\n    boxedImageH = (imageH * boxW / imageW) | 0;\n  } else {\n    boxedImageW = (imageW * boxH / imageH) | 0;\n    if(boxedImageW > boxW) {\n      boxedImageH = (boxedImageH * boxW / boxedImageW) | 0;\n      boxedImageW = boxW;\n    }\n  }\n\n  if(noZoom && boxedImageW >= imageW && boxedImageH >= imageH) {\n    boxedImageW = imageW;\n    boxedImageH = imageH;\n  }\n\n  return makeMediaSize(boxedImageW, boxedImageH);\n}\n\nMOUNT_CLASS_TO.calcImageInBox = calcImageInBox;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport calcImageInBox from './calcImageInBox';\n\nexport class MediaSize {\n  constructor(public width = 0, public height = width) {\n\n  }\n\n  public aspect(boxSize: MediaSize, fitted: boolean) {\n    return calcImageInBox(this.width, this.height, boxSize.width, boxSize.height, fitted);\n  }\n\n  public aspectFitted(boxSize: MediaSize) {\n    return this.aspect(boxSize, true);\n  }\n\n  public aspectCovered(boxSize: MediaSize) {\n    return this.aspect(boxSize, false);\n  }\n}\n\nexport function makeMediaSize(width?: number, height?: number): MediaSize {\n  return new MediaSize(width, height);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport EventListenerBase from './eventListenerBase';\nimport {makeMediaSize, MediaSize} from './mediaSize';\n\ntype MediaTypeSizes = {\n  regular: MediaSize,\n  webpage: MediaSize,\n  album: MediaSize,\n  esgSticker: MediaSize,\n  animatedSticker: MediaSize,\n  staticSticker: MediaSize,\n  emojiSticker: MediaSize,\n  poll: MediaSize,\n  round: MediaSize,\n  documentName: MediaSize,\n  invoice: MediaSize,\n  extendedInvoice: MediaSize,\n  customEmoji: MediaSize,\n  esgCustomEmoji: MediaSize,\n  emojiStatus: MediaSize,\n  popupSticker: MediaSize\n};\n\nexport type MediaSizeType = keyof MediaTypeSizes;\n\nexport enum ScreenSize {\n  mobile,\n  medium,\n  large\n}\n\nconst MOBILE_SIZE = 600;\nconst FLOATING_LEFT_SIDEBAR_SIZE = 925;\nconst MEDIUM_SIZE = 1275;\nconst LARGE_SIZE = 1680;\n\nconst CUSTOM_EMOJI_SIZE = makeMediaSize(20, 20);\nconst ESG_CUSTOM_EMOJI_SIZE = makeMediaSize(36, 36);\nconst EMOJI_STATUS_SIZE = makeMediaSize(18, 18);\n\nclass MediaSizes extends EventListenerBase<{\n  changeScreen: (from: ScreenSize, to: ScreenSize) => void,\n  resize: () => void\n}> {\n  private screenSizes: {key: ScreenSize, value: number}[] = [\n    {key: ScreenSize.mobile, value: MOBILE_SIZE},\n    {key: ScreenSize.medium, value: MEDIUM_SIZE},\n    {key: ScreenSize.large, value: LARGE_SIZE}\n  ];\n\n  private sizes: {[k in 'desktop' | 'handhelds']: MediaTypeSizes} = {\n    handhelds: {\n      regular: makeMediaSize(340, 340),\n      webpage: makeMediaSize(340, 200),\n      album: makeMediaSize(340, 0),\n      esgSticker: makeMediaSize(68, 68),\n      animatedSticker: makeMediaSize(180, 180),\n      staticSticker: makeMediaSize(180, 180),\n      emojiSticker: makeMediaSize(112, 112),\n      poll: makeMediaSize(240, 0),\n      round: makeMediaSize(240, 240),\n      documentName: makeMediaSize(200, 0),\n      invoice: makeMediaSize(340, 340),\n      extendedInvoice: makeMediaSize(340, 340),\n      customEmoji: CUSTOM_EMOJI_SIZE,\n      esgCustomEmoji: ESG_CUSTOM_EMOJI_SIZE,\n      emojiStatus: EMOJI_STATUS_SIZE,\n      popupSticker: makeMediaSize(68, 68)\n    },\n    desktop: {\n      regular: makeMediaSize(420, 400),\n      webpage: makeMediaSize(420, 380),\n      album: makeMediaSize(420, 0),\n      esgSticker: makeMediaSize(72, 72),\n      animatedSticker: makeMediaSize(200, 200),\n      staticSticker: makeMediaSize(200, 200),\n      emojiSticker: makeMediaSize(112, 112),\n      poll: makeMediaSize(330, 0),\n      round: makeMediaSize(280, 280),\n      documentName: makeMediaSize(240, 0),\n      invoice: makeMediaSize(320, 320),\n      extendedInvoice: makeMediaSize(420, 400),\n      customEmoji: CUSTOM_EMOJI_SIZE,\n      esgCustomEmoji: ESG_CUSTOM_EMOJI_SIZE,\n      emojiStatus: EMOJI_STATUS_SIZE,\n      popupSticker: makeMediaSize(80, 80)\n    }\n  };\n\n  public isMobile = false;\n  public isFloatingLeftSidebar = false;\n  public isLessThanFloatingLeftSidebar = false;\n  public active: MediaTypeSizes;\n  public activeScreen: ScreenSize;\n  private rAF: number;\n\n  constructor() {\n    super();\n\n    window.addEventListener('resize', () => {\n      if(this.rAF) window.cancelAnimationFrame(this.rAF);\n      this.rAF = window.requestAnimationFrame(() => {\n        this.handleResize();\n        this.rAF = 0;\n      });\n    });\n    this.handleResize();\n  }\n\n  private handleResize = () => {\n    const innerWidth = window.innerWidth;\n    // this.isMobile = innerWidth <= 720;\n\n    let activeScreen = this.screenSizes[0].key;\n    for(let i = this.screenSizes.length - 1; i >= 0; --i) {\n      if(this.screenSizes[i].value < innerWidth) {\n        activeScreen = (this.screenSizes[i + 1] || this.screenSizes[i]).key;\n        break;\n      }\n    }\n\n    const wasScreen = this.activeScreen;\n    this.activeScreen = activeScreen;\n    this.isMobile = this.activeScreen === ScreenSize.mobile;\n    this.isLessThanFloatingLeftSidebar = innerWidth <= FLOATING_LEFT_SIDEBAR_SIZE;\n    this.isFloatingLeftSidebar = this.activeScreen === ScreenSize.medium && this.isLessThanFloatingLeftSidebar;\n    this.active = this.isMobile ? this.sizes.handhelds : this.sizes.desktop;\n\n    // console.time('esg');\n    // const computedStyle = window.getComputedStyle(document.documentElement);\n    // this.active.esgSticker.width = parseFloat(computedStyle.getPropertyValue('--esg-sticker-size'));\n    // console.timeEnd('esg');\n\n    if(wasScreen !== activeScreen) {\n      // console.log('changeScreen', this.activeScreen, activeScreen);\n\n      if(wasScreen !== undefined) {\n        this.dispatchEvent('changeScreen', wasScreen, activeScreen);\n      }\n    }\n\n    if(wasScreen !== undefined) {\n      this.dispatchEvent('resize');\n    }\n\n    /* if(this.isMobile) {\n      for(let i in this.active) {\n        // @ts-ignore\n        let size = this.active[i];\n        size.width = innerWidth\n      }\n    } */\n  };\n}\n\nconst mediaSizes = new MediaSizes();\nMOUNT_CLASS_TO.mediaSizes = mediaSizes;\nexport default mediaSizes;\n","export default function clamp(v: number, min: number, max: number): number {\n  return Math.min(max, Math.max(min, v));\n}\n","const IS_IMAGE_BITMAP_SUPPORTED = typeof(ImageBitmap) !== 'undefined';\n\nexport default IS_IMAGE_BITMAP_SUPPORTED;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {RLottieColor} from '../lib/rlottie/rlottiePlayer';\n\nexport type FramesCacheMap = Map<number, Uint8ClampedArray>;\nexport type FramesCacheMapNew = Map<number, HTMLCanvasElement | ImageBitmap>;\nexport type FramesCacheMapURLs = Map<number, string>;\nexport type FramesCacheItem = {\n  frames: FramesCacheMap,\n  framesNew: FramesCacheMapNew,\n  framesURLs: FramesCacheMapURLs,\n  clearCache: () => void,\n  counter: number\n};\n\nexport class FramesCache {\n  private cache: Map<string, FramesCacheItem>;\n\n  constructor() {\n    this.cache = new Map();\n  }\n\n  public static createCache(): FramesCacheItem {\n    const cache: FramesCacheItem = {\n      frames: new Map(),\n      framesNew: new Map(),\n      framesURLs: new Map(),\n      clearCache: () => {\n        cache.framesNew.forEach((value) => {\n          (value as ImageBitmap).close?.();\n        });\n\n        cache.frames.clear();\n        cache.framesNew.clear();\n        cache.framesURLs.clear();\n      },\n      counter: 0\n    };\n\n    return cache;\n  }\n\n  public getCache(name: string) {\n    let cache = this.cache.get(name);\n    if(!cache) {\n      this.cache.set(name, cache = FramesCache.createCache());\n    } else {\n      // console.warn('[RLottieCache] cache will be reused', cache);\n    }\n\n    ++cache.counter;\n    return cache;\n  }\n\n  public releaseCache(name: string) {\n    const cache = this.cache.get(name);\n    if(cache && !--cache.counter) {\n      this.cache.delete(name);\n      // console.warn('[RLottieCache] released cache', cache);\n    }\n  }\n\n  public getCacheCounter(name: string) {\n    const cache = this.cache.get(name);\n    return cache?.counter;\n  }\n\n  public generateName(name: string, width: number, height: number, color: RLottieColor, toneIndex: number) {\n    return [\n      name,\n      width,\n      height,\n      // color ? rgbaToHexa(color) : ''\n      // color ? 'colored' : '',\n      toneIndex || ''\n    ].filter(Boolean).join('-');\n  }\n}\n\nconst framesCache = new FramesCache();\n\nexport default framesCache;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport rootScope from '../../lib/rootScope';\nimport mediaSizes from '../mediaSizes';\n\nexport type CustomProperty = string;\n\nexport class CustomProperties {\n  private cache: {[k in CustomProperty]?: [string, string]};\n  private computedStyle: CSSStyleDeclaration;\n  private nightComputedStyle: CSSStyleDeclaration;\n  private nightElement: HTMLElement;\n\n  constructor() {\n    this.cache = {};\n\n    this.nightElement = document.createElement('div');\n    this.nightElement.className = 'night';\n    this.nightElement.style.display = 'none';\n    document.body.append(this.nightElement);\n\n    rootScope.addEventListener('theme_changed', this.resetCache);\n    mediaSizes.addEventListener('resize', this.resetCache);\n  }\n\n  protected resetCache = () => {\n    this.computedStyle = undefined;\n    const cache = this.cache;\n    this.cache = {};\n\n    for(const i in cache) {\n      this.getProperty(i as CustomProperty);\n    }\n  };\n\n  public getProperty(name: CustomProperty, night?: boolean) {\n    const values = this.cache[name];\n    const index = night ? 1 : 0;\n    if(values?.[index]) {\n      return values[index];\n    }\n\n    this.computedStyle ??= window.getComputedStyle(document.documentElement);\n    this.nightComputedStyle ??= window.getComputedStyle(this.nightElement)\n\n    const value = (night ? this.nightComputedStyle : this.computedStyle).getPropertyValue('--' + name).trim();\n    return this.setPropertyCache(name, value, night);\n  }\n\n  public getPropertyAsColor(name: CustomProperty) {\n    const value = this.getProperty(name);\n    if(value[0] === '#') {\n      return value;\n    }\n\n    return `rgb(${value})`;\n  }\n\n  public getPropertyAsSize(name: CustomProperty) {\n    const value = this.getProperty(name);\n    let size: number;\n\n    if(value[value.length - 1] === '%') {\n\n    } else if(value.indexOf('rem')) {\n      size = +value.replace('rem', '') * 16;\n    } else {\n      size = +value.replace('px', '');\n    }\n\n    return size;\n  }\n\n  public setPropertyCache(name: CustomProperty, value: string, night?: boolean) {\n    return (this.cache[name] ??= [] as any)[night ? 1 : 0] = value;\n  }\n}\n\nconst customProperties = new CustomProperties();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.customProperties = customProperties);\nexport default customProperties;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {AnimationItemGroup, AnimationItemWrapper} from '../../components/animationIntersector';\nimport type {Middleware} from '../../helpers/middleware';\nimport type {LiteModeKey} from '../../helpers/liteMode';\nimport CAN_USE_TRANSFERABLES from '../../environment/canUseTransferables';\nimport IS_APPLE_MX from '../../environment/appleMx';\nimport {IS_ANDROID, IS_APPLE_MOBILE, IS_APPLE, IS_SAFARI} from '../../environment/userAgent';\nimport EventListenerBase from '../../helpers/eventListenerBase';\nimport mediaSizes from '../../helpers/mediaSizes';\nimport clamp from '../../helpers/number/clamp';\nimport QueryableWorker from './queryableWorker';\nimport IS_IMAGE_BITMAP_SUPPORTED from '../../environment/imageBitmapSupport';\nimport framesCache, {FramesCache, FramesCacheItem} from '../../helpers/framesCache';\nimport customProperties from '../../helpers/dom/customProperties';\n\nexport type RLottieOptions = {\n  container: HTMLElement | HTMLElement[],\n  middleware?: Middleware,\n  canvas?: HTMLCanvasElement,\n  autoplay?: boolean,\n  animationData: Blob,\n  loop?: RLottiePlayer['loop'],\n  width?: number,\n  height?: number,\n  group?: AnimationItemGroup,\n  noCache?: boolean,\n  needUpscale?: boolean,\n  skipRatio?: number,\n  initFrame?: number, // index\n  color?: RLottieColor,\n  textColor?: WrapSomethingOptions['textColor'],\n  name?: string,\n  skipFirstFrameRendering?: boolean,\n  toneIndex?: number,\n  sync?: boolean,\n  liteModeKey?: LiteModeKey\n};\n\nexport type RLottieColor = [number, number, number];\n\nexport function getLottiePixelRatio(width: number, height: number, needUpscale?: boolean) {\n  let pixelRatio = clamp(window.devicePixelRatio, 1, 2);\n  if(pixelRatio > 1 && !needUpscale) {\n    if(width > 90 && height > 90) {\n      if(!IS_APPLE && mediaSizes.isMobile) {\n        pixelRatio = 1;\n      }\n    } else if((width > 60 && height > 60) || IS_ANDROID) {\n      pixelRatio = Math.max(1.5, pixelRatio - 1.5);\n    }\n  }\n\n  return pixelRatio;\n}\n\nexport function applyColorOnContext(\n  context: CanvasRenderingContext2D,\n  color: RLottieColor | string,\n  x: number,\n  y: number,\n  width: number,\n  height: number\n) {\n  context.globalCompositeOperation = 'source-atop';\n  context.fillStyle = typeof(color) === 'string' ? color : `rgb(${color[0]}, ${color[1]}, ${color[2]})`;\n  context.fillRect(x, y, width, height);\n  context.globalCompositeOperation = 'source-over';\n}\n\nexport default class RLottiePlayer extends EventListenerBase<{\n  enterFrame: (frameNo: number) => void,\n  ready: () => void,\n  firstFrame: () => void,\n  cached: () => void,\n  destroy: () => void\n}> implements AnimationItemWrapper {\n  public static CACHE = framesCache;\n  private static reqId = 0;\n\n  public reqId = 0;\n  public curFrame: number;\n  private frameCount: number;\n  private fps: number;\n  private skipDelta: number;\n  public name: string;\n  public cacheName: string;\n  private toneIndex: number;\n\n  private worker: QueryableWorker;\n\n  private width = 0;\n  private height = 0;\n\n  public el: HTMLElement[];\n  public canvas: HTMLCanvasElement[];\n  public contexts: CanvasRenderingContext2D[];\n\n  public paused = true;\n  // public paused = false;\n  public direction = 1;\n  private speed = 1;\n  public autoplay = true;\n  public _autoplay: boolean; // ! will be used to store original value for settings.stickers.loop\n  public loop: number | boolean = true;\n  public _loop: RLottiePlayer['loop']; // ! will be used to store original value for settings.stickers.loop\n  public group: AnimationItemGroup = '';\n  public liteModeKey: LiteModeKey;\n\n  private frInterval: number;\n  private frThen: number;\n  private rafId: number;\n\n  // private caching = false;\n  // private removed = false;\n\n  private cache: FramesCacheItem;\n  private imageData: ImageData;\n  public clamped: Uint8ClampedArray;\n  private cachingDelta = 0;\n\n  private initFrame: number;\n  private color: RLottieOptions['color'];\n  private textColor: RLottieOptions['textColor'];\n\n  public minFrame: number;\n  public maxFrame: number;\n\n  private playedTimes = 0;\n\n  private currentMethod: RLottiePlayer['mainLoopForwards'] | RLottiePlayer['mainLoopBackwards'];\n  private frameListener: (currentFrame: number) => void;\n  private skipFirstFrameRendering: boolean;\n  private playToFrameOnFrameCallback: (frameNo: number) => void;\n\n  public overrideRender: (frame: ImageData | HTMLCanvasElement | ImageBitmap) => void;\n  private renderedFirstFrame: boolean;\n\n  private raw: boolean;\n\n  constructor({el, worker, options}: {\n    el: RLottiePlayer['el'],\n    worker: QueryableWorker,\n    options: RLottieOptions\n  }) {\n    super(true);\n\n    this.reqId = ++RLottiePlayer['reqId'];\n    this.el = el;\n    this.worker = worker;\n\n    for(const i in options) {\n      if(this.hasOwnProperty(i)) {\n        // @ts-ignore\n        this[i] = options[i];\n      }\n    }\n\n    this._loop = this.loop;\n    this._autoplay = this.autoplay;\n\n    // ! :(\n    this.initFrame = options.initFrame;\n    this.color = options.color;\n    this.textColor = options.textColor;\n    this.name = options.name;\n    this.skipFirstFrameRendering = options.skipFirstFrameRendering;\n    this.toneIndex = options.toneIndex;\n    this.raw = false;\n    this.liteModeKey = options.liteModeKey;\n\n    if(this.name) {\n      this.cacheName = RLottiePlayer.CACHE.generateName(\n        this.name,\n        this.width,\n        this.height,\n        this.color,\n        this.toneIndex\n      );\n    }\n\n    // * Skip ratio (30fps)\n    let skipRatio: number;\n    if(options.skipRatio !== undefined) skipRatio = options.skipRatio;\n    else if((IS_ANDROID || IS_APPLE_MOBILE || (IS_APPLE && !IS_SAFARI && !IS_APPLE_MX)) && this.width < 100 && this.height < 100 && !options.needUpscale) {\n      skipRatio = 0.5;\n    }\n\n    this.skipDelta = skipRatio !== undefined ? 1 / skipRatio | 0 : 1;\n\n    // options.needUpscale = true;\n\n    // * Pixel ratio\n    const pixelRatio = getLottiePixelRatio(this.width, this.height, options.needUpscale);\n\n    this.width = Math.round(this.width * pixelRatio);\n    this.height = Math.round(this.height * pixelRatio);\n\n    // options.noCache = true;\n\n    // * Cache frames params\n    if(!options.noCache/*  && false */) {\n      // проверка на размер уже после скейлинга, сделано для попапа и сайдбара, где стикеры 80х80 и 68х68, туда нужно 75%\n      if(IS_APPLE && this.width > 100 && this.height > 100) {\n        this.cachingDelta = 2; // 2 // 50%\n      } else if(this.width < 100 && this.height < 100) {\n        this.cachingDelta = Infinity; // 100%\n      } else {\n        this.cachingDelta = 4; // 75%\n      }\n    }\n\n    // this.cachingDelta = Infinity;\n    // this.cachingDelta = 0;\n    // if(isApple) {\n    //   this.cachingDelta = 0; //2 // 50%\n    // }\n\n    if(!this.canvas) {\n      this.canvas = this.el.map(() => {\n        const canvas = document.createElement('canvas');\n        canvas.classList.add('rlottie');\n        canvas.width = this.width;\n        canvas.height = this.height;\n        canvas.dpr = pixelRatio;\n        return canvas;\n      });\n    }\n\n    this.contexts = this.canvas.map((canvas) => canvas.getContext('2d'));\n\n    if(!IS_IMAGE_BITMAP_SUPPORTED || this.raw) {\n      this.imageData = new ImageData(this.width, this.height);\n\n      if(CAN_USE_TRANSFERABLES) {\n        this.clamped = new Uint8ClampedArray(this.width * this.height * 4);\n      }\n    }\n\n    if(this.name) {\n      this.cache = RLottiePlayer.CACHE.getCache(this.cacheName);\n    } else {\n      this.cache = FramesCache.createCache();\n    }\n  }\n\n  public setSize(width: number, height: number) {\n    this.width = width;\n    this.height = height;\n    this.canvas.forEach((canvas) => {\n      canvas.width = width;\n      canvas.height = height;\n    });\n  }\n\n  public clearCache() {\n    if(this.cachingDelta === Infinity) {\n      return;\n    }\n\n    if(this.cacheName && this.cache.counter > 1) { // skip clearing because same sticker can be still visible\n      return;\n    }\n\n    this.cache.clearCache();\n  }\n\n  public sendQuery(args: any[], transfer?: Transferable[]) {\n    this.worker.sendQuery([args.shift(), this.reqId, ...args], transfer);\n  }\n\n  public loadFromData(data: RLottieOptions['animationData']) {\n    this.sendQuery([\n      'loadFromData',\n      data,\n      this.width,\n      this.height,\n      this.toneIndex,\n      this.raw\n      /* , this.canvas.transferControlToOffscreen() */\n    ]);\n  }\n\n  public play() {\n    if(!this.paused) {\n      return;\n    }\n\n    this.paused = false;\n    this.setMainLoop();\n  }\n\n  public pause(clearPendingRAF = true) {\n    if(this.paused) {\n      return;\n    }\n\n    this.paused = true;\n    if(clearPendingRAF) {\n      clearTimeout(this.rafId);\n      this.rafId = undefined;\n    }\n    // window.cancelAnimationFrame(this.rafId);\n  }\n\n  private resetCurrentFrame() {\n    return this.curFrame = this.initFrame ?? (this.direction === 1 ? this.minFrame : this.maxFrame);\n  }\n\n  public stop(renderFirstFrame = true) {\n    this.pause();\n\n    const curFrame = this.resetCurrentFrame();\n    if(renderFirstFrame) {\n      this.requestFrame(curFrame);\n      // this.sendQuery('renderFrame', this.curFrame);\n    }\n  }\n\n  public restart() {\n    this.stop(false);\n    this.play();\n  }\n\n  public playOrRestart() {\n    if(!this.paused) {\n      return;\n    }\n\n    if(this.curFrame === this.maxFrame) {\n      this.restart();\n    } else {\n      this.play();\n    }\n  }\n\n  public setSpeed(speed: number) {\n    if(this.speed === speed) {\n      return;\n    }\n\n    this.speed = speed;\n\n    if(!this.paused) {\n      this.setMainLoop();\n    }\n  }\n\n  public setDirection(direction: number) {\n    if(this.direction === direction) {\n      return;\n    }\n\n    this.direction = direction;\n\n    if(!this.paused) {\n      this.setMainLoop();\n    }\n  }\n\n  public remove() {\n    this.pause();\n    this.sendQuery(['destroy']);\n    if(this.cacheName) RLottiePlayer.CACHE.releaseCache(this.cacheName);\n    this.dispatchEvent('destroy');\n    this.cleanup();\n  }\n\n  public applyColor(context: CanvasRenderingContext2D) {\n    applyColorOnContext(\n      context,\n      // this.color || customProperties.getPropertyAsColor(typeof(this.textColor) === 'function' ? this.textColor() : this.textColor),\n      this.color || customProperties.getPropertyAsColor(this.textColor),\n      0,\n      0,\n      this.width,\n      this.height\n    );\n  }\n\n  public applyColorForAllContexts() {\n    if(!this.color && !this.textColor) {\n      return;\n    }\n\n    this.contexts.forEach((context) => {\n      this.applyColor(context);\n    });\n  }\n\n  public renderFrame2(frame: Uint8ClampedArray | HTMLCanvasElement | ImageBitmap, frameNo: number) {\n    /* this.setListenerResult('enterFrame', frameNo);\n    return; */\n\n    try {\n      if(frame instanceof Uint8ClampedArray) {\n        this.imageData.data.set(frame);\n      }\n\n      // this.context.putImageData(new ImageData(frame, this.width, this.height), 0, 0);\n      this.contexts.forEach((context, idx) => {\n        let cachedSource: HTMLCanvasElement | ImageBitmap = this.cache.framesNew.get(frameNo);\n        if(!(frame instanceof Uint8ClampedArray)) {\n          cachedSource = frame;\n        } else if(idx > 0) {\n          cachedSource = this.canvas[0];\n        }\n\n        if(!cachedSource) {\n          const c = document.createElement('canvas');\n          c.width = context.canvas.width;\n          c.height = context.canvas.height;\n          c.getContext('2d').putImageData(this.imageData, 0, 0);\n          this.cache.framesNew.set(frameNo, c);\n          cachedSource = c;\n        }\n\n        if(this.overrideRender && this.renderedFirstFrame) {\n          this.overrideRender(cachedSource || this.imageData);\n        } else if(cachedSource) {\n          context.clearRect(0, 0, cachedSource.width, cachedSource.height);\n          context.drawImage(cachedSource, 0, 0);\n        } else {\n          context.putImageData(this.imageData, 0, 0);\n        }\n\n        if(this.color || this.textColor) {\n          this.applyColor(context);\n        }\n\n        if(!this.renderedFirstFrame) {\n          this.renderedFirstFrame = true;\n        }\n      });\n\n      this.dispatchEvent('enterFrame', frameNo);\n    } catch(err) {\n      console.error('RLottiePlayer renderFrame error:', err/* , frame */, this.width, this.height);\n      this.autoplay = false;\n      this.pause();\n    }\n  }\n\n  public renderFrame(frame: Parameters<RLottiePlayer['renderFrame2']>[0], frameNo: number) {\n    const canCacheFrame = this.cachingDelta && (frameNo % this.cachingDelta || !frameNo);\n    if(canCacheFrame) {\n      if(frame instanceof Uint8ClampedArray && !this.cache.frames.has(frameNo)) {\n        this.cache.frames.set(frameNo, new Uint8ClampedArray(frame));// frame;\n      } else if(IS_IMAGE_BITMAP_SUPPORTED && frame instanceof ImageBitmap && !this.cache.framesNew.has(frameNo)) {\n        this.cache.framesNew.set(frameNo, frame);\n      }\n    }\n\n    /* if(!this.listenerResults.hasOwnProperty('cached')) {\n      this.setListenerResult('enterFrame', frameNo);\n      if(frameNo === (this.frameCount - 1)) {\n        this.setListenerResult('cached');\n      }\n\n      return;\n    } */\n\n    if(this.frInterval) {\n      const now = Date.now(), delta = now - this.frThen;\n\n      if(delta < 0) {\n        const timeout = this.frInterval > -delta ? -delta % this.frInterval : this.frInterval;\n        if(this.rafId) clearTimeout(this.rafId);\n        this.rafId = window.setTimeout(() => {\n          this.renderFrame2(frame, frameNo);\n        }, timeout);\n        // await new Promise((resolve) => setTimeout(resolve, -delta % this.frInterval));\n        return;\n      }\n    }\n\n    this.renderFrame2(frame, frameNo);\n  }\n\n  public requestFrame(frameNo: number) {\n    const frame = this.cache.frames.get(frameNo);\n    const frameNew = this.cache.framesNew.get(frameNo);\n    if(frameNew) {\n      this.renderFrame(frameNew, frameNo);\n    } else if(frame) {\n      this.renderFrame(frame, frameNo);\n    } else {\n      if(this.clamped && !this.clamped.length) { // fix detached\n        this.clamped = new Uint8ClampedArray(this.width * this.height * 4);\n      }\n\n      this.sendQuery(['renderFrame', frameNo], this.clamped ? [this.clamped.buffer] : undefined);\n    }\n  }\n\n  private onLap() {\n    ++this.playedTimes;\n    if(typeof(this.loop) === 'number' && this.playedTimes >= this.loop) {\n      this.loop =\n        this.autoplay =\n        this._loop =\n        this._autoplay =\n        false;\n    }\n\n    if(!this.loop) {\n      this.clearCache();\n      this.pause(false);\n      return false;\n    }\n\n    return true;\n  }\n\n  private mainLoopForwards() {\n    const {skipDelta, maxFrame} = this;\n    const frame = (this.curFrame + skipDelta) > maxFrame ? this.curFrame = (this.loop ? this.minFrame : this.maxFrame) : this.curFrame += skipDelta;\n    // console.log('mainLoopForwards', this.curFrame, skipDelta, frame);\n\n    this.requestFrame(frame);\n    if((frame + skipDelta) > maxFrame) {\n      return this.onLap();\n    }\n\n    return true;\n  }\n\n  private mainLoopBackwards() {\n    const {skipDelta, minFrame} = this;\n    const frame = (this.curFrame - skipDelta) < minFrame ? this.curFrame = (this.loop ? this.maxFrame : this.minFrame) : this.curFrame -= skipDelta;\n    // console.log('mainLoopBackwards', this.curFrame, skipDelta, frame);\n\n    this.requestFrame(frame);\n    if((frame - skipDelta) < minFrame) {\n      return this.onLap();\n    }\n\n    return true;\n  }\n\n  public setMainLoop() {\n    // window.cancelAnimationFrame(this.rafId);\n    clearTimeout(this.rafId);\n    this.rafId = undefined;\n\n    this.frInterval = 1000 / this.fps / this.speed * this.skipDelta;\n    this.frThen = Date.now() - this.frInterval;\n\n    // console.trace('setMainLoop', this.frInterval, this.direction, this, JSON.stringify(this.listenerResults), this.listenerResults);\n\n    const method = (this.direction === 1 ? this.mainLoopForwards : this.mainLoopBackwards).bind(this);\n    this.currentMethod = method;\n    // this.frameListener && this.removeListener('enterFrame', this.frameListener);\n\n    // setTimeout(() => {\n    // this.addListener('enterFrame', this.frameListener);\n    // }, 0);\n\n    if(this.frameListener) {\n      const lastResult = this.listenerResults.enterFrame;\n      if(lastResult !== undefined) {\n        this.frameListener(this.curFrame);\n      }\n    }\n\n    // this.mainLoop(method);\n    // this.r(method);\n    // method();\n  }\n\n  public playPart(options: {\n    from: number,\n    to: number,\n    callback?: () => void\n  }) {\n    this.pause();\n\n    const {from, to, callback} = options;\n    this.curFrame = from - 1;\n\n    return this.playToFrame({\n      frame: to,\n      direction: to > from ? 1 : -1,\n      callback\n    });\n  }\n\n  public playToFrame(options: {\n    frame: number,\n    speed?: number,\n    direction?: number,\n    callback?: () => void\n  }) {\n    this.pause();\n\n    const {frame, speed, callback, direction} = options;\n    this.setDirection(direction === undefined ? this.curFrame > frame ? -1 : 1 : direction);\n    speed !== undefined && this.setSpeed(speed);\n\n    const bounds = [this.curFrame, frame];\n    if(this.direction === -1) bounds.reverse();\n\n    this.loop = false;\n    this.setMinMax(bounds[0], bounds[1]);\n\n    if(this.playToFrameOnFrameCallback) {\n      this.removeEventListener('enterFrame', this.playToFrameOnFrameCallback);\n    }\n\n    if(callback) {\n      this.playToFrameOnFrameCallback = (frameNo: number) => {\n        if(frameNo === frame) {\n          this.removeEventListener('enterFrame', this.playToFrameOnFrameCallback);\n          callback();\n        }\n      };\n\n      this.addEventListener('enterFrame', this.playToFrameOnFrameCallback);\n    }\n\n    this.play();\n  }\n\n  public setColor(color: RLottieColor | string, renderIfPaused: boolean) {\n    if(typeof(color) === 'string') {\n      this.textColor = color;\n    } else {\n      this.color = color;\n    }\n\n    if(renderIfPaused && this.paused) {\n      this.applyColorForAllContexts();\n      // this.renderFrame2(this.imageData?.data, this.curFrame);\n    }\n  }\n\n  private setMinMax(minFrame = 0, maxFrame = this.frameCount - 1) {\n    this.minFrame = minFrame;\n    this.maxFrame = maxFrame;\n  }\n\n  public async onLoad(frameCount: number, fps: number) {\n    this.frameCount = frameCount;\n    this.fps = fps;\n    this.setMinMax();\n    if(this.initFrame !== undefined) {\n      this.initFrame = clamp(this.initFrame, this.minFrame, this.maxFrame);\n    }\n\n    const curFrame = this.resetCurrentFrame();\n\n    // * Handle 30fps stickers if 30fps set\n    if(this.fps < 60 && this.skipDelta !== 1) {\n      const diff = 60 / fps;\n      this.skipDelta = this.skipDelta / diff | 0;\n    }\n\n    this.frInterval = 1000 / this.fps / this.speed * this.skipDelta;\n    this.frThen = Date.now() - this.frInterval;\n    // this.sendQuery('renderFrame', 0);\n\n    // Кешировать сразу не получится, рендер стикера (тайгер) занимает 519мс,\n    // если рендерить 75% с получением каждого кадра из воркера, будет 475мс, т.е. при 100% было бы 593мс, потеря на передаче 84мс.\n\n    /* console.time('cache' + this.reqId);\n    for(let i = 0; i < frameCount; ++i) {\n      //if(this.removed) return;\n\n      if(i % 4) {\n        await new Promise((resolve) => {\n          delete this.listenerResults.enterFrame;\n          this.addListener('enterFrame', resolve, true);\n          this.requestFrame(i);\n        });\n      }\n    }\n\n    console.timeEnd('cache' + this.reqId); */\n    // console.log('cached');\n    /* this.el.innerHTML = '';\n    this.el.append(this.canvas);\n    return; */\n\n    !this.skipFirstFrameRendering && this.requestFrame(curFrame);\n    this.dispatchEvent('ready');\n    this.addEventListener('enterFrame', () => {\n      this.dispatchEvent('firstFrame');\n\n      if(!this.canvas[0].parentNode && this.el?.[0] && !this.overrideRender) {\n        this.el.forEach((container, idx) => container.append(this.canvas[idx]));\n      }\n\n      // console.log('enterFrame firstFrame');\n\n      // let lastTime = this.frThen;\n      this.frameListener = () => {\n        if(this.paused || !this.currentMethod) {\n          return;\n        }\n\n        const time = Date.now();\n        // console.log(`enterFrame handle${this.reqId}`, time, (time - lastTime), this.frInterval);\n        /* if(Math.round(time - lastTime + this.frInterval * 0.25) < Math.round(this.frInterval)) {\n          return;\n        } */\n\n        // lastTime = time;\n\n        this.frThen = time + this.frInterval;\n        const canContinue = this.currentMethod();\n        if(!canContinue && !this.loop && this.autoplay) {\n          this.autoplay = false;\n        }\n      };\n\n      this.addEventListener('enterFrame', this.frameListener);\n      // setInterval(this.frameListener, this.frInterval);\n\n      // ! fix autoplaying since there will be no animationIntersector for it\n      if(this.group === 'none' && this.autoplay) {\n        this.play();\n      }\n    }, {once: true});\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {MyDocument} from '../lib/appManagers/appDocsManager';\nimport {applyColorOnContext} from '../lib/rlottie/rlottiePlayer';\nimport rootScope from '../lib/rootScope';\nimport getStickerThumbKey from '../lib/storages/utils/thumbs/getStickerThumbKey';\nimport customProperties from './dom/customProperties';\n\nconst savingLottiePreview: {[docId: DocId]: {width: number, height: number}} = {};\n\nexport function isSavingLottiePreview(doc: MyDocument, toneIndex: number | string, width: number, height: number) {\n  const key = getStickerThumbKey(doc.id, toneIndex);\n  const saving = savingLottiePreview[key];\n  return saving && saving.width >= width && saving.height >= height;\n}\n\nlet sharedCanvas: HTMLCanvasElement, sharedContext: CanvasRenderingContext2D;\nconst createCanvas = () => {\n  rootScope.addEventListener('theme_changed', () => {\n    rootScope.managers.thumbsStorage.clearColoredStickerThumbs();\n\n    for(const key in savingLottiePreview) {\n      const [, toneIndex] = key.split('-');\n      if(toneIndex && isNaN(+toneIndex)) {\n        delete savingLottiePreview[key];\n      }\n    }\n  });\n\n  sharedCanvas = document.createElement('canvas');\n  sharedContext = sharedCanvas.getContext('2d');\n};\n\nexport async function saveLottiePreview(doc: MyDocument, canvas: HTMLCanvasElement, toneIndex: number | string) {\n  const key = getStickerThumbKey(doc.id, toneIndex);\n  const {width, height} = canvas;\n  if(isSavingLottiePreview(doc, toneIndex, width, height)) {\n    return;\n  }\n\n  const saving = savingLottiePreview[key] = {\n    width,\n    height\n  };\n\n  const thumb = await rootScope.managers.thumbsStorage.getStickerCachedThumb(doc.id, toneIndex);\n  if(savingLottiePreview[key] !== saving) {\n    return;\n  }\n\n  if(thumb && thumb.w >= width && thumb.h >= height) {\n    return;\n  }\n\n  if(typeof(toneIndex) === 'string') {\n    if(!sharedCanvas) {\n      createCanvas();\n    }\n\n    sharedCanvas.width = width;\n    sharedCanvas.height = height;\n    sharedContext.drawImage(canvas, 0, 0, width, height);\n    applyColorOnContext(sharedContext, customProperties.getProperty(toneIndex), 0, 0, width, height);\n    canvas = sharedCanvas;\n  }\n\n  const promise = new Promise<Blob>((resolve) => {\n    canvas.toBlob((blob) => resolve(blob));\n  });\n\n  const blob = await promise;\n  if(savingLottiePreview[key] !== saving) {\n    return;\n  }\n\n  if(!blob) {\n    console.error('trying to save sticker preview with no blob', arguments);\n    debugger;\n    return;\n  }\n\n  rootScope.managers.thumbsStorage.saveStickerPreview(doc.id, blob, width, height, toneIndex);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {fastRaf} from './schedulers';\nimport deferredPromise, {CancellablePromise} from './cancellablePromise';\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport isInDOM from './dom/isInDOM';\n\nclass SequentialDom {\n  private promises: Partial<{\n    read: CancellablePromise<void>,\n    write: CancellablePromise<void>\n  }> = {};\n  private raf = fastRaf.bind(null);\n  private scheduled = false;\n\n  private do(kind: keyof SequentialDom['promises'], callback?: VoidFunction) {\n    let promise = this.promises[kind];\n    if(!promise) {\n      this.scheduleFlush();\n      promise = this.promises[kind] = deferredPromise<void>();\n    }\n\n    if(callback !== undefined) {\n      promise.then(() => callback());\n    }\n\n    return promise;\n  }\n\n  public measure(callback?: VoidFunction) {\n    return this.do('read', callback);\n  }\n\n  public mutate(callback?: VoidFunction) {\n    return this.do('write', callback);\n  }\n\n  /**\n   * Will fire instantly if element is not connected\n   * @param element\n   * @param callback\n   */\n  public mutateElement(element: HTMLElement, callback?: VoidFunction) {\n    const isConnected = isInDOM(element);\n    const promise = isConnected ? this.mutate() : Promise.resolve();\n\n    if(callback !== undefined) {\n      if(!isConnected) {\n        callback();\n      } else {\n        promise.then(() => callback());\n      }\n    }\n\n    return promise;\n  }\n\n  private scheduleFlush() {\n    if(!this.scheduled) {\n      this.scheduled = true;\n\n      this.raf(() => {\n        this.promises.read && this.promises.read.resolve();\n        this.promises.write && this.promises.write.resolve();\n\n        this.scheduled = false;\n        this.promises = {};\n      });\n    }\n  }\n}\n\nconst sequentialDom = new SequentialDom();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.sequentialDom = sequentialDom);\nexport default sequentialDom;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport tabId from '../config/tabId';\n\nlet uploadId = 0;\nexport default function getFileNameForUpload(file: File | Blob) {\n  let fileName: string;\n  const mimeType = file?.type;\n  if(mimeType) { // the same like apiFileName in appMessagesManager for upload!\n    const ext = `${tabId}_${uploadId++}.${mimeType.split('/')[1]}`;\n\n    if(['image/jpeg', 'image/png', 'image/bmp'].indexOf(mimeType) >= 0) {\n      fileName = 'photo' + ext;\n    } else if(mimeType.indexOf('audio/') === 0 || ['video/ogg'].indexOf(mimeType) >= 0) {\n      fileName = 'audio' + ext;\n    } else if(mimeType.indexOf('video/') === 0) {\n      fileName = 'video' + ext;\n    } else {\n      fileName = 'document' + ext;\n    }\n  } else {\n    fileName = `upload-${tabId}_${uploadId++}`;\n  }\n\n  return fileName;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {Document, InputFileLocation} from '../../../../layer';\n\nexport default function getDocumentInputFileLocation(doc: Document.document, thumbSize?: string): InputFileLocation.inputDocumentFileLocation {\n  return {\n    _: 'inputDocumentFileLocation',\n    id: doc.id,\n    access_hash: doc.access_hash,\n    file_reference: doc.file_reference,\n    thumb_size: thumbSize\n  };\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {Document, PhotoSize, VideoSize} from '../../../../layer';\nimport type {DownloadOptions} from '../../../mtproto/apiFileManager';\nimport getDocumentInputFileLocation from './getDocumentInputFileLocation';\n\ntype GetDocumentDownloadOptions = {\n  thumb?: PhotoSize.photoSize | Extract<VideoSize, VideoSize.videoSize>;\n  queueId?: number;\n  onlyCache?: boolean;\n};\n\nexport default function getDocumentDownloadOptions(\n  doc: Document.document,\n  {thumb, queueId, onlyCache}: GetDocumentDownloadOptions = {}\n): DownloadOptions {\n  const inputFileLocation = getDocumentInputFileLocation(doc, thumb?.type);\n\n  let mimeType: MTMimeType;\n  if(thumb?._ === 'photoSize') {\n    mimeType = doc.sticker ? 'image/webp' : (doc.mime_type.startsWith('image/') ? doc.mime_type : 'image/jpeg');\n  } else {\n    mimeType = doc.mime_type || 'application/octet-stream';\n  }\n\n  return {\n    dcId: doc.dc_id,\n    location: inputFileLocation,\n    size: thumb ? thumb.size : doc.size,\n    mimeType,\n    fileName: doc.file_name,\n    queueId,\n    onlyCache\n  };\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {PhotoSize, InputFileLocation} from '../../../../layer';\nimport type {DownloadOptions} from '../../../mtproto/apiFileManager';\nimport type {MyDocument} from '../../appDocsManager';\nimport type {MyPhoto} from '../../appPhotosManager';\n\nexport default function getPhotoDownloadOptions(photo: MyPhoto | MyDocument, photoSize: PhotoSize, queueId?: number, onlyCache?: boolean): DownloadOptions {\n  const isDocument = photo._ === 'document';\n\n  if(!photoSize || photoSize._ === 'photoSizeEmpty') {\n    // console.error('no photoSize by photo:', photo);\n    throw new Error('photoSizeEmpty!');\n  }\n\n  // maybe it's a thumb\n  const isPhoto = !!((photoSize._ === 'photoSize' || photoSize._ === 'photoSizeProgressive') && photo.access_hash && photo.file_reference);\n  const location: InputFileLocation.inputPhotoFileLocation | InputFileLocation.inputDocumentFileLocation = {\n    _: isDocument ? 'inputDocumentFileLocation' : 'inputPhotoFileLocation',\n    id: photo.id,\n    access_hash: photo.access_hash,\n    file_reference: photo.file_reference,\n    thumb_size: photoSize.type\n  };\n\n  return {\n    dcId: photo.dc_id,\n    location,\n    size: isPhoto ? (photoSize as PhotoSize.photoSize).size : undefined,\n    mimeType: 'image/jpeg',\n    queueId,\n    onlyCache\n  };\n}\n","import {InputWebFileLocation} from '../../../../layer';\nimport {DownloadOptions} from '../../../mtproto/apiFileManager';\n\nexport default function getWebFileDownloadOptions(location: InputWebFileLocation): DownloadOptions {\n  const downloadOptions: DownloadOptions = {\n    dcId: 0,\n    location,\n    size: 0,\n    mimeType: 'image/jpeg'\n  };\n\n  // if(location._ === 'inputWebFileGeoPointLocation') {\n  //   downloadOptions.size = 512 * 1024;\n  //   downloadOptions.mimeType = 'image/jpeg';\n  // }\n\n  return downloadOptions;\n}\n","import {WebDocument} from '../../../../layer';\nimport {DownloadOptions} from '../../../mtproto/apiFileManager';\nimport getWebFileDownloadOptions from '../webFiles/getWebFileDownloadOptions';\n\nexport default function getWebDocumentDownloadOptions(webDocument: WebDocument): DownloadOptions {\n  const downloadOptions = getWebFileDownloadOptions({\n    _: 'inputWebFileLocation',\n    access_hash: (webDocument as WebDocument.webDocument).access_hash,\n    url: webDocument.url\n  });\n\n  downloadOptions.size = webDocument.size;\n  downloadOptions.mimeType = webDocument.mime_type;\n\n  return downloadOptions;\n}\n","import {WebDocument} from '../../../../layer';\n\nexport default function isWebDocument(webDocument: any): webDocument is WebDocument {\n  return !!(webDocument && (webDocument._ === 'webDocument' || webDocument._ === 'webDocumentNoProxy'));\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {getFileNameByLocation} from '../../../../helpers/fileName';\nimport {DownloadOptions} from '../../../mtproto/apiFileManager';\n\nexport default function getDownloadFileNameFromOptions(options: DownloadOptions) {\n  return getFileNameByLocation(options.location, options);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {DownloadMediaOptions, DownloadOptions} from '../../../mtproto/apiFileManager';\nimport getDocumentDownloadOptions from '../docs/getDocumentDownloadOptions';\nimport getPhotoDownloadOptions from '../photos/getPhotoDownloadOptions';\nimport getWebDocumentDownloadOptions from '../webDocs/getWebDocumentDownloadOptions';\nimport isWebDocument from '../webDocs/isWebDocument';\nimport getWebFileDownloadOptions from '../webFiles/getWebFileDownloadOptions';\nimport isWebFileLocation from '../webFiles/isWebFileLocation';\nimport getDownloadFileNameFromOptions from './getDownloadFileNameFromOptions';\n\nexport default function getDownloadMediaDetails(options: DownloadMediaOptions) {\n  const {media, thumb, queueId, onlyCache} = options;\n\n  let downloadOptions: DownloadOptions;\n  if(media._ === 'document') downloadOptions = getDocumentDownloadOptions(media, {thumb: thumb as any, queueId, onlyCache});\n  else if(media._ === 'photo') downloadOptions = getPhotoDownloadOptions(media, thumb as any, queueId, onlyCache);\n  else if(isWebDocument(media)) downloadOptions = getWebDocumentDownloadOptions(media);\n  else if(isWebFileLocation(media)) downloadOptions = getWebFileDownloadOptions(media);\n\n  downloadOptions.downloadId = options.downloadId;\n\n  const fileName = getDownloadFileNameFromOptions(downloadOptions);\n  return {fileName, downloadOptions};\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nexport default function createDownloadAnchor(url: string, fileName: string, onRemove?: () => void) {\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = fileName;\n  a.target = '_blank';\n\n  a.style.position = 'absolute';\n  a.style.top = '1px';\n  a.style.left = '1px';\n\n  document.body.append(a);\n\n  try {\n    const clickEvent = document.createEvent('MouseEvents');\n    clickEvent.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n    a.dispatchEvent(clickEvent);\n  } catch(e) {\n    console.error('Download click error', e);\n    try {\n      a.click();\n    } catch(e) {\n      window.open(url as string, '_blank');\n    }\n  }\n\n  setTimeout(() => {\n    a.remove();\n    onRemove && onRemove();\n  }, 100);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {DownloadMediaOptions, DownloadOptions} from '../mtproto/apiFileManager';\nimport type {AppMessagesManager} from './appMessagesManager';\nimport type {MyDocument} from './appDocsManager';\nimport deferredPromise, {CancellablePromise} from '../../helpers/cancellablePromise';\nimport {InputFile, Photo, PhotoSize} from '../../layer';\nimport getFileNameForUpload from '../../helpers/getFileNameForUpload';\nimport {AppManagers} from './managers';\nimport rootScope from '../rootScope';\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport noop from '../../helpers/noop';\nimport getDownloadMediaDetails from './utils/download/getDownloadMediaDetails';\nimport getDownloadFileNameFromOptions from './utils/download/getDownloadFileNameFromOptions';\nimport indexOfAndSplice from '../../helpers/array/indexOfAndSplice';\nimport makeError from '../../helpers/makeError';\nimport createDownloadAnchor from '../../helpers/dom/createDownloadAnchor';\nimport {getFileNameByLocation} from '../../helpers/fileName';\nimport getDocumentDownloadOptions from './utils/docs/getDocumentDownloadOptions';\nimport getPhotoDownloadOptions from './utils/photos/getPhotoDownloadOptions';\nimport apiManagerProxy from '../mtproto/mtprotoworker';\nimport {IS_MOBILE_SAFARI} from '../../environment/userAgent';\n\nexport type ResponseMethodBlob = 'blob';\nexport type ResponseMethodJson = 'json';\nexport type ResponseMethod = ResponseMethodBlob | ResponseMethodJson;\n\n/* export type DownloadBlob = {promise: Promise<Blob>, controller: AbortController};\nexport type DownloadJson = {promise: Promise<any>, controller: AbortController}; */\nexport type DownloadBlob = CancellablePromise<Blob>;\nexport type DownloadUrl = CancellablePromise<string>;\nexport type DownloadJson = CancellablePromise<any>;\n// export type Download = DownloadBlob/*  | DownloadJson */;\nexport type Download = DownloadBlob | DownloadUrl/*  | DownloadJson */;\n\nexport type Progress = {done: number, fileName: string, total: number, offset: number};\nexport type ProgressCallback = (details: Progress) => void;\n\ntype DownloadType = 'url' | 'blob' | 'void' | 'disc';\n\nexport class AppDownloadManager {\n  private downloads: {[fileName: string]: {main: Download} & {[type in DownloadType]?: Download}} = {};\n  // private downloadsToDisc: {[fileName: string]: Download} = {};\n  private progress: {[fileName: string]: Progress} = {};\n  // private progressCallbacks: {[fileName: string]: Array<ProgressCallback>} = {};\n  private managers: AppManagers;\n\n  public construct(managers: AppManagers) {\n    this.managers = managers;\n    rootScope.addEventListener('download_progress', (details) => {\n      // const callbacks = this.progressCallbacks[details.fileName];\n      // if(callbacks) {\n      //   callbacks.forEach((callback) => callback(details));\n      // }\n\n      const download = this.downloads[details.fileName];\n      if(download?.main?.notifyAll) {\n        this.progress[details.fileName] = details;\n        download.main.notifyAll(details);\n      }\n    });\n  }\n\n  private getNewDeferred<T>(fileName: string, type?: DownloadType) {\n    const deferred = deferredPromise<T>();\n\n    let download = this.downloads[fileName];\n    if(!download) {\n      download = this.downloads[fileName] = {\n        main: deferred as any\n      };\n\n      deferred.cancel = () => {\n        const error = makeError('DOWNLOAD_CANCELED');\n\n        this.managers.apiFileManager.cancelDownload(fileName);\n\n        deferred.reject(error);\n        deferred.cancel = noop;\n      };\n\n      deferred.catch(() => {\n        this.clearDownload(fileName, type);\n      }).finally(() => {\n        delete this.progress[fileName];\n        // delete this.progressCallbacks[fileName];\n      });\n    } else {\n      const main = download.main;\n      (['cancel', 'addNotifyListener', 'notify', 'notifyAll'] as (keyof CancellablePromise<void>)[]).forEach((key) => {\n        if(!main[key]) {\n          return;\n        }\n\n        // @ts-ignore\n        deferred[key] = main[key].bind(main);\n      });\n    }\n\n    const haveToClear = type === 'disc';\n    if(haveToClear) {\n      deferred.catch(noop).finally(() => {\n        this.clearDownload(fileName, type);\n      });\n    }\n\n    return download[type] = deferred as any;\n  }\n\n  public getNewDeferredForUpload<T extends Promise<any>>(fileName: string, promise: T) {\n    const deferred: CancellablePromise<Awaited<T>> = this.getNewDeferred<InputFile>(fileName);\n    promise.then(deferred.resolve.bind(deferred), deferred.reject.bind(deferred));\n\n    deferred.finally(() => {\n      this.clearDownload(fileName);\n    });\n\n    return deferred;\n  }\n\n  private clearDownload(fileName: string, type?: DownloadType) {\n    const downloads = this.downloads[fileName];\n    if(!downloads) {\n      return;\n    }\n\n    delete downloads[type];\n\n    const length = Object.keys(downloads).length;\n    if(!length || (downloads.main && length === 1)) {\n      delete this.downloads[fileName];\n    }\n  }\n\n  public getUpload(fileName: string): ReturnType<AppMessagesManager['sendFile']>['promise'] {\n    let deferred: CancellablePromise<any> = this.getDownload(fileName);\n    if(deferred) {\n      return deferred;\n    }\n\n    deferred = this.getNewDeferred(fileName);\n    this.managers.appMessagesManager.getUploadPromise(fileName).then(deferred.resolve.bind(deferred), deferred.reject.bind(deferred));\n    return deferred;\n  }\n\n  /* public fakeDownload(fileName: string, value: Blob | string) {\n    const deferred = this.getNewDeferred<Blob>(fileName);\n    if(typeof(value) === 'string') {\n      fetch(value)\n      .then((response) => response.blob())\n      .then((blob) => deferred.resolve(blob));\n    } else {\n      deferred.resolve(value);\n    }\n\n    return deferred;\n  } */\n\n  private d(fileName: string, getPromise: () => Promise<any>, type?: DownloadType) {\n    let deferred = this.getDownload(fileName, type);\n    if(deferred) return deferred;\n\n    deferred = this.getNewDeferred<Blob>(fileName, type);\n    getPromise().then(deferred.resolve.bind(deferred), deferred.reject.bind(deferred));\n    return deferred;\n  }\n\n  public download(options: DownloadOptions): DownloadBlob {\n    const fileName = getDownloadFileNameFromOptions(options);\n    return this.d(fileName, () => this.managers.apiFileManager.download(options), 'blob') as any;\n  }\n\n  public downloadMedia(options: DownloadMediaOptions, type: DownloadType = 'blob', promiseBefore?: Promise<any>): DownloadBlob {\n    const {downloadOptions, fileName} = getDownloadMediaDetails(options);\n\n    return this.d(fileName, () => {\n      let cb: any;\n      if(type === 'url') {\n        cb = this.managers.apiFileManager.downloadMediaURL;\n      } else if(type === 'void'/*  || type === 'disc' */) {\n        cb = this.managers.apiFileManager.downloadMediaVoid;\n      } else /* if(type === 'blob') */ {\n        cb = this.managers.apiFileManager.downloadMedia;\n      }\n\n      if(promiseBefore) {\n        return promiseBefore.then(() => {\n          return cb(options);\n        }, () => {\n          delete options.downloadId;\n          return cb(options);\n        });\n      }\n\n      return cb(options);\n    }, type) as any;\n  }\n\n  public downloadMediaURL(options: DownloadMediaOptions): DownloadUrl {\n    return this.downloadMedia(options, 'url') as any;\n  }\n\n  public downloadMediaVoid(options: DownloadMediaOptions): DownloadBlob {\n    return this.downloadMedia(options, 'void');\n  }\n\n  public upload(file: File | Blob, fileName?: string, promise?: Promise<any>) {\n    if(!fileName) {\n      fileName = getFileNameForUpload(file);\n    }\n\n    if(!promise) {\n      promise = this.managers.apiFileManager.upload({file, fileName});\n    }\n\n    const deferred = this.getNewDeferredForUpload(fileName, promise);\n    return deferred as any as CancellablePromise<InputFile>;\n  }\n\n  public getDownload(fileName: string, type?: DownloadType) {\n    const d = this.downloads[fileName];\n    return d && d[type];\n  }\n\n  // public addProgressCallback(fileName: string, callback: ProgressCallback) {\n  //   const progress = this.progress[fileName];\n  //   (this.progressCallbacks[fileName] ?? (this.progressCallbacks[fileName] = [])).push(callback);\n\n  //   if(progress) {\n  //     callback(progress);\n  //   }\n  // }\n\n  public downloadToDisc(options: DownloadMediaOptions, justAttach?: boolean) {\n    const media = options.media;\n    const isDocument = media._ === 'document';\n    if(!isDocument && !options.thumb) {\n      options.thumb = (media as Photo.photo).sizes.slice().pop() as PhotoSize.photoSize;\n    }\n\n    const USE_SW = !IS_MOBILE_SAFARI && !!apiManagerProxy.serviceMessagePort;\n    // const USE_SW = true;\n\n    const getOutFileName = () => {\n      const downloadOptions = isDocument ?\n        getDocumentDownloadOptions(media) :\n        getPhotoDownloadOptions(media as any, options.thumb as PhotoSize.photoSize);\n      return (options.media as MyDocument).file_name || getFileNameByLocation(downloadOptions.location);\n    };\n\n    // const {fileName: cacheFileName} = getDownloadMediaDetails(options);\n    // if(justAttach) {\n    //   const promise = this.downloadsToDisc[cacheFileName];\n    //   if(promise) {\n    //     return promise;\n    //   }\n    // }\n\n    // const {downloadOptions, fileName} = getDownloadMediaDetails(options);\n    // if(downloadOptions.size && downloadOptions.size > MAX_FILE_SAVE_SIZE) {\n    let url: string, pingPromise: Promise<any>, iframe: HTMLIFrameElement;\n    if(USE_SW) {\n      const id = '' + (Math.random() * 0x7FFFFFFF | 0);\n      // const id = 'test';\n      url = `d/${id}`;\n      options.downloadId = id;\n\n      pingPromise = apiManagerProxy.pingServiceWorkerWithIframe();\n\n      if(!justAttach) {\n        const {iframe: _iframe, onSuccess, onError} = this.createDownloadIframe(url);\n        iframe = _iframe;\n\n        // * 1. make sure that SW is alive with a ping\n        // * 2. send download request and wait for a pong (downloadRequestReceived)\n        // * 3. if pong is missing (something with request and can't handle it with iframe events),\n        // *    fallback to regular download\n        pingPromise = pingPromise.then(() => {\n          const deferred = deferredPromise<void>();\n\n          const onFinish = (good: boolean) => {\n            clearTimeout(timeout);\n            apiManagerProxy.serviceMessagePort.removeEventListener('downloadRequestReceived', onDownloadRequestReceived);\n            if(good) deferred.resolve();\n            else deferred.reject();\n          };\n\n          const onDownloadRequestReceived = (downloadId: string) => {\n            if(downloadId === id) {\n              onFinish(true);\n            }\n          };\n\n          apiManagerProxy.serviceMessagePort.addEventListener('downloadRequestReceived', onDownloadRequestReceived);\n\n          const timeout = window.setTimeout(() => {\n            onFinish(false);\n          }, 1500);\n\n          onSuccess();\n\n          return deferred;\n        }, (err) => {\n          onError();\n          throw err;\n        });\n      }\n    }\n\n    const promise = this.downloadMedia(options, 'disc', pingPromise);\n    // this.downloadsToDisc[cacheFileName] = promise;\n\n    if(justAttach) {\n      return promise;\n    }\n\n    let element: HTMLElement, hadProgress = false;\n    const onProgress = () => {\n      if(hadProgress) {\n        return;\n      }\n\n      hadProgress = true;\n      element = iframe;\n\n      indexOfAndSplice(promise.listeners, onProgress);\n    };\n\n    promise.addNotifyListener(onProgress);\n    promise.then((blob) => {\n      if(!blob) {\n        return;\n      }\n\n      const url = URL.createObjectURL(blob);\n      createDownloadAnchor(url, getOutFileName(), () => {\n        URL.revokeObjectURL(url);\n      });\n    }).catch(noop).finally(() => {\n      if(!hadProgress) {\n        onProgress();\n      }\n\n      setTimeout(() => {\n        element?.remove();\n      }, 1000);\n\n      // if(this.downloadsToDisc[cacheFileName] === promise) {\n      //   delete this.downloadsToDisc[cacheFileName];\n      // }\n    });\n\n    return promise;\n  }\n\n  private createDownloadIframe(url: string) {\n    const iframe = document.createElement('iframe');\n    iframe.hidden = true;\n\n    return {\n      iframe,\n      onSuccess: () => {\n        // const removeListeners = () => {\n        //   iframe.removeEventListener('load', onLoad);\n        //   iframe.removeEventListener('error', onError);\n        //   console.error('event', window.event);\n        // };\n\n        // const onLoad = () => {\n        //   removeListeners();\n        // };\n\n        // const onError = () => {\n        //   removeListeners();\n        // };\n\n        // iframe.addEventListener('load', onLoad);\n        // iframe.addEventListener('error', onError);\n\n        iframe.src = url;\n        document.body.append(iframe);\n      },\n      onError: () => {\n        console.error('falling back to normal download');\n      }\n    };\n  }\n}\n\nconst appDownloadManager = new AppDownloadManager();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.appDownloadManager = appDownloadManager);\nexport default appDownloadManager;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {MyDocument} from '../../appDocsManager';\nimport type {MyPhoto} from '../../appPhotosManager';\nimport type {PhotoSize, VideoSize, WebDocument} from '../../../../layer';\nimport calcImageInBox from '../../../../helpers/calcImageInBox';\nimport {THUMB_TYPE_FULL} from '../../../mtproto/mtproto_config';\n\nexport default function choosePhotoSize(\n  photo: MyPhoto | MyDocument | WebDocument,\n  boxWidth = 0,\n  boxHeight = 0,\n  useBytes = false,\n  pushDocumentSize = false\n) {\n  if(window.devicePixelRatio > 1) {\n    boxWidth *= 2;\n    boxHeight *= 2;\n  }\n\n  /*\n  s box 100x100\n  m box 320x320\n  x box 800x800\n  y box 1280x1280\n  w box 2560x2560\n  a crop  160x160\n  b crop  320x320\n  c crop  640x640\n  d crop  1280x1280 */\n\n  let sizes: PhotoSize[] = (photo as MyPhoto).sizes || (photo as MyDocument).thumbs as PhotoSize[];\n  let bestPhotoSize: typeof sizes[0] = {_: 'photoSizeEmpty', type: THUMB_TYPE_FULL};\n  if(pushDocumentSize && sizes && photo._ !== 'photo') {\n    sizes = sizes.concat({\n      _: 'photoSize',\n      w: photo.w,\n      h: photo.h,\n      size: photo.size,\n      type: THUMB_TYPE_FULL\n    });\n  }\n\n  if(sizes?.length) {\n    for(let i = 0, length = sizes.length; i < length; ++i) {\n      const photoSize = sizes[i];\n      if(!('w' in photoSize) && !('h' in photoSize)) continue;\n\n      bestPhotoSize = photoSize;\n\n      const size = calcImageInBox(photoSize.w, photoSize.h, boxWidth, boxHeight);\n      if(size.width >= boxWidth || size.height >= boxHeight) {\n        break;\n      }\n    }\n\n    if(useBytes && bestPhotoSize._ === 'photoSizeEmpty' && sizes[0]._ === 'photoStrippedSize') {\n      bestPhotoSize = sizes[0];\n    }\n  }\n\n  return bestPhotoSize;\n}\n","import {MyDocument} from '../../appDocsManager';\nimport {VideoSize} from '../../../../layer';\n\nexport default function getStickerEffectThumb(doc: MyDocument) {\n  return doc.video_thumbs?.[0] as Extract<VideoSize, VideoSize.videoSize>;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport CAN_USE_TRANSFERABLES from '../../environment/canUseTransferables';\nimport EventListenerBase from '../../helpers/eventListenerBase';\n\nexport default class QueryableWorker extends EventListenerBase<{\n  ready: () => void,\n  frame: (reqId: number, frameNo: number, frame: Uint8ClampedArray | ImageBitmap) => void,\n  loaded: (reqId: number, frameCount: number, fps: number) => void,\n  error: (reqId: number, error: Error) => void,\n  workerError: (error: ErrorEvent) => void\n}> {\n  constructor(private worker: Worker) {\n    super();\n\n    this.worker.onerror = (error) => {\n      try {\n        this.dispatchEvent('workerError', error);\n        this.cleanup();\n        this.terminate();\n      } catch(err) {\n\n      }\n    };\n\n    this.worker.onmessage = (event) => {\n      this.dispatchEvent(event.data.queryMethodListener, ...event.data.queryMethodArguments);\n    };\n  }\n\n  public postMessage(message: any) {\n    this.worker.postMessage(message);\n  }\n\n  public terminate() {\n    this.worker.terminate();\n  }\n\n  public sendQuery(args: any[], transfer?: Transferable[]) {\n    this.worker.postMessage({\n      queryMethod: args.shift(),\n      queryMethodArguments: args\n    }, CAN_USE_TRANSFERABLES ? transfer: undefined);\n  }\n}\n","const IS_WEB_ASSEMBLY_SUPPORTED = typeof(WebAssembly) !== 'undefined';\n\nexport default IS_WEB_ASSEMBLY_SUPPORTED;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport animationIntersector from '../../components/animationIntersector';\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport pause from '../../helpers/schedulers/pause';\nimport {logger, LogTypes} from '../logger';\nimport RLottiePlayer, {RLottieOptions} from './rlottiePlayer';\nimport QueryableWorker from './queryableWorker';\nimport blobConstruct from '../../helpers/blob/blobConstruct';\nimport apiManagerProxy from '../mtproto/mtprotoworker';\nimport IS_WEB_ASSEMBLY_SUPPORTED from '../../environment/webAssemblySupport';\nimport makeError from '../../helpers/makeError';\nimport App from '../../config/app';\nimport rootScope from '../rootScope';\nimport toArray from '../../helpers/array/toArray';\n\nexport type LottieAssetName = 'EmptyFolder' | 'Folders_1' | 'Folders_2' |\n  'TwoFactorSetupMonkeyClose' | 'TwoFactorSetupMonkeyCloseAndPeek' |\n  'TwoFactorSetupMonkeyCloseAndPeekToIdle' | 'TwoFactorSetupMonkeyIdle' |\n  'TwoFactorSetupMonkeyPeek' | 'TwoFactorSetupMonkeyTracking' |\n  'voice_outlined2' | 'voip_filled' | 'voice_mini' | 'jolly_roger' |\n  'Gift3' | 'Gift6' | 'Gift12' | 'Folders_Shared' | 'UtyanSearch' |\n  'UtyanDiscussion' | 'UtyanLinks' | 'UtyanStories' | 'ReactionGeneric' |\n  'StatsEmoji' | 'Congratulations' | 'large_lastseen' | 'large_readtime';\n\nexport class LottieLoader {\n  private loadPromise: Promise<void> = !IS_WEB_ASSEMBLY_SUPPORTED ? Promise.reject(makeError('NO_WASM')) : undefined;\n  private loaded = false;\n\n  private workersLimit = App.threads;\n  private players: {[reqId: number]: RLottiePlayer} = {};\n  private playersByCacheName: {[cacheName: string]: Set<RLottiePlayer>} = {};\n\n  private workers: QueryableWorker[] = [];\n  private curWorkerNum = 0;\n\n  private log = logger('LOTTIE', LogTypes.Error);\n\n  constructor() {\n    rootScope.addEventListener('theme_changed', () => {\n      for(const reqId in this.players) {\n        this.players[reqId].applyColorForAllContexts();\n      }\n    });\n  }\n\n  public getAnimation(element: HTMLElement) {\n    for(const i in this.players) {\n      if(this.players[i].el.includes(element)) {\n        return this.players[i];\n      }\n    }\n\n    return null;\n  }\n\n  public loadLottieWorkers() {\n    if(this.loadPromise) {\n      return this.loadPromise;\n    }\n\n    return this.loadPromise = new Promise((resolve, reject) => {\n      let remain = this.workersLimit;\n      for(let i = 0; i < this.workersLimit; ++i) {\n        const worker = new Worker(new URL('./rlottie.worker.ts', import.meta.url), {type: 'module'});\n        const queryableWorker = this.workers[i] = new QueryableWorker(worker);\n\n        queryableWorker.addEventListener('ready', () => {\n          this.log('worker #' + i + ' ready');\n\n          queryableWorker.addEventListener('frame', this.onFrame);\n          queryableWorker.addEventListener('loaded', this.onPlayerLoaded);\n          queryableWorker.addEventListener('error', this.onPlayerError);\n\n          --remain;\n          if(!remain) {\n            this.log('workers ready');\n            resolve();\n            this.loaded = true;\n          }\n        }, {once: true});\n\n        queryableWorker.addEventListener('workerError', (error) => {\n          reject('rlottie load error: ' + error.message);\n          this.loaded = false;\n        }, {once: true});\n      }\n    });\n  }\n\n  public makeAssetUrl(name: LottieAssetName) {\n    return 'assets/tgs/' + name + '.json';\n  }\n\n  public loadAnimationAsAsset(params: Omit<RLottieOptions, 'animationData' | 'name'>, name: LottieAssetName) {\n    // (params as RLottieOptions).name = name;\n    return this.loadAnimationFromURL(params, this.makeAssetUrl(name));\n  }\n\n  public loadAnimationDataFromURL(url: string, method: 'json'): Promise<any>;\n  public loadAnimationDataFromURL(url: string, method?: 'blob'): Promise<Blob>;\n  public loadAnimationDataFromURL(url: string, method: 'json' | 'blob' = 'blob'): Promise<Blob | any> {\n    if(!IS_WEB_ASSEMBLY_SUPPORTED) {\n      return this.loadPromise as any;\n    }\n\n    this.loadLottieWorkers();\n\n    return fetch(url)\n    .then((res) => {\n      if(!res.headers || res.headers.get('content-type') === 'application/octet-stream') {\n        return res.arrayBuffer()\n        .then((data) => apiManagerProxy.invokeCrypto('gzipUncompress', data))\n        .then((arr) => blobConstruct(arr as Uint8Array, ''));\n      } else {\n        return res[method]();\n      }\n    });\n    /* .then((str) => {\n      return new Promise<string>((resolve) => setTimeout(() => resolve(str), 2e3));\n    }) */\n  }\n\n  public loadAnimationFromURLManually(name: LottieAssetName) {\n    const url = this.makeAssetUrl(name);\n    return this.loadAnimationDataFromURL(url).then((blob) => {\n      return (params: Omit<RLottieOptions, 'animationData'>) => this.loadAnimationFromURLNext(blob, params, url);\n    });\n  }\n\n  public loadAnimationFromURL(params: Omit<RLottieOptions, 'animationData'>, url: string) {\n    return this.loadAnimationDataFromURL(url).then((blob) => {\n      return this.loadAnimationFromURLNext(blob, params, url);\n    });\n  }\n\n  public loadAnimationFromURLNext(blob: Blob, params: Omit<RLottieOptions, 'animationData'>, url: string) {\n    const newParams = Object.assign(params, {animationData: blob, needUpscale: true});\n    newParams.name ||= url;\n    return this.loadAnimationWorker(newParams);\n  }\n\n  public waitForFirstFrame(player: RLottiePlayer) {\n    return Promise.race([\n      /* new Promise<void>((resolve) => {\n        player.addEventListener('firstFrame', () => {\n          setTimeout(() => resolve(), 1500);\n        }, true);\n      }) */\n      new Promise<void>((resolve) => {\n        player.addEventListener('firstFrame', resolve, {once: true});\n      }),\n      pause(2500)\n    ]).then(() => player);\n  }\n\n  public async loadAnimationWorker(params: RLottieOptions): Promise<RLottiePlayer> {\n    if(!IS_WEB_ASSEMBLY_SUPPORTED) {\n      return this.loadPromise as any;\n    }\n\n    if(!this.loaded) {\n      await this.loadLottieWorkers();\n    }\n\n    const {middleware, group = ''} = params;\n    if(middleware && !middleware()) {\n      throw makeError('MIDDLEWARE');\n    }\n\n    if(params.sync) {\n      const cacheName = RLottiePlayer.CACHE.generateName(params.name, params.width, params.height, params.color, params.toneIndex);\n      const players = this.playersByCacheName[cacheName];\n      if(players?.size) {\n        return Promise.resolve(players.entries().next().value[0]);\n      }\n    }\n\n    const containers = toArray(params.container);\n    if(!params.width || !params.height) {\n      params.width = parseInt(containers[0].style.width);\n      params.height = parseInt(containers[0].style.height);\n    }\n\n    if(!params.width || !params.height) {\n      throw new Error('No size for sticker!');\n    }\n\n    params.group = group;\n\n    const player = this.initPlayer(containers, params);\n\n    animationIntersector.addAnimation({\n      animation: player,\n      group,\n      observeElement: player.el[0],\n      controlled: middleware,\n      liteModeKey: params.liteModeKey,\n      type: 'lottie'\n    });\n\n    if(!params.sync) {\n      // * have to use onClean here, SuperStickerRenderer relies on it\n      middleware?.onClean(() => {\n        player.remove();\n      });\n    }\n\n    return player;\n  }\n\n  private onPlayerLoaded = (reqId: number, frameCount: number, fps: number) => {\n    const player = this.players[reqId];\n    if(!player) {\n      this.log.warn('onPlayerLoaded on destroyed player:', reqId, frameCount);\n      return;\n    }\n\n    this.log.debug('onPlayerLoaded');\n    player.onLoad(frameCount, fps);\n  };\n\n  private onFrame = (reqId: number, frameNo: number, frame: Uint8ClampedArray | ImageBitmap) => {\n    const player = this.players[reqId];\n    if(!player) {\n      this.log.warn('onFrame on destroyed player:', reqId, frameNo);\n      return;\n    }\n\n    if(player.clamped !== undefined && frame instanceof Uint8ClampedArray) {\n      player.clamped = frame;\n    }\n\n    player.renderFrame(frame, frameNo);\n  };\n\n  private onPlayerError = (reqId: number, error: Error) => {\n    const player = this.players[reqId];\n    if(!player) {\n      return;\n    }\n\n    // ! will need refactoring later, this is not the best way to remove the animation\n    const animations = animationIntersector.getAnimations(player.el[0]);\n    animations.forEach((animation) => {\n      animationIntersector.removeAnimation(animation);\n    });\n  };\n\n  public onDestroy(reqId: number) {\n    delete this.players[reqId];\n  }\n\n  public destroyWorkers() {\n    if(!IS_WEB_ASSEMBLY_SUPPORTED) {\n      return;\n    }\n\n    this.workers.forEach((worker, idx) => {\n      worker.terminate();\n      this.log('worker #' + idx + ' terminated');\n    });\n\n    this.log('workers destroyed');\n    this.workers.length = 0;\n    this.curWorkerNum = 0;\n    this.loaded = false;\n    this.loadPromise = undefined;\n  }\n\n  private initPlayer(el: RLottiePlayer['el'], options: RLottieOptions) {\n    const player = new RLottiePlayer({\n      el,\n      worker: this.workers[this.curWorkerNum++],\n      options\n    });\n\n    const {reqId, cacheName} = player;\n    this.players[reqId] = player;\n\n    const playersByCacheName = cacheName ? this.playersByCacheName[cacheName] ??= new Set() : undefined;\n    if(cacheName) {\n      playersByCacheName.add(player);\n    }\n\n    if(this.curWorkerNum >= this.workers.length) {\n      this.curWorkerNum = 0;\n    }\n\n    player.addEventListener('destroy', () => {\n      this.onDestroy(reqId);\n      if(playersByCacheName.delete(player) && !playersByCacheName.size) {\n        delete this.playersByCacheName[cacheName];\n      }\n    });\n\n    player.loadFromData(options.animationData);\n\n    return player;\n  }\n}\n\nconst lottieLoader = new LottieLoader();\nMOUNT_CLASS_TO.lottieLoader = lottieLoader;\nexport default lottieLoader;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport indexOfAndSplice from './array/indexOfAndSplice';\nimport makeError from './makeError';\n\nexport type Middleware = {\n  (): boolean;\n  create(): MiddlewareHelper;\n  onClean: (callback: VoidFunction) => void;\n  onDestroy: (callback: VoidFunction) => void;\n};\n\nconst createDetails = (): {\n  cleaned?: boolean,\n  inner: MiddlewareHelper[],\n  onCleanCallbacks: VoidFunction[],\n  middleware?: Middleware\n} => ({\n  cleaned: false,\n  inner: [],\n  onCleanCallbacks: []\n});\n\nconst MIDDLEWARE_ERROR = makeError('MIDDLEWARE');\n\n// * onClean == cancel promises, etc\n// * onDestroy == destructor\nexport class MiddlewareHelper {\n  private details = createDetails();\n  private onDestroyCallbacks: VoidFunction[] = [];\n  private parent: MiddlewareHelper;\n  private destroyed: boolean;\n\n  public clean() {\n    const details = this.details;\n    details.cleaned = true;\n    details.inner.splice(0, details.inner.length).forEach((helper) => helper.destroy());\n    details.onCleanCallbacks.splice(0, details.onCleanCallbacks.length).forEach((callback) => callback());\n    details.middleware = undefined;\n    this.details = createDetails();\n  }\n\n  public destroy() {\n    this.destroyed = true;\n    this.clean();\n    this.onDestroyCallbacks.splice(0, this.onDestroyCallbacks.length).forEach((callback) => callback());\n\n    if(this.parent) {\n      indexOfAndSplice(this.parent.details.inner, this);\n      this.parent = undefined;\n    }\n  }\n\n  private createMiddlewareForDetails(details: ReturnType<typeof createDetails>, additionalCallback?: () => boolean) {\n    const middleware: Middleware = () => {\n      return !details.cleaned && (!additionalCallback || additionalCallback());\n    };\n\n    middleware.create = () => {\n      if(!middleware()) throw MIDDLEWARE_ERROR;\n      const helper = getMiddleware();\n      helper.parent = this;\n      details.inner.push(helper);\n      return helper;\n    };\n\n    middleware.onClean = (callback) => {\n      if(!middleware()) return callback();\n      details.onCleanCallbacks.push(callback);\n    };\n\n    middleware.onDestroy = this.onDestroy;\n\n    return middleware;\n  }\n\n  public get(additionalCallback?: () => boolean) {\n    const details = this.details;\n    if(details.cleaned) {\n      return this.createMiddlewareForDetails(details);\n    }\n\n    if(additionalCallback) {\n      return this.createMiddlewareForDetails(details, additionalCallback);\n    }\n\n    return details.middleware ??= this.createMiddlewareForDetails(details);\n  }\n\n  public onDestroy = (callback: VoidFunction) => {\n    if(this.destroyed) return callback();\n    this.onDestroyCallbacks.push(callback);\n  };\n}\n\n// * will change .cleaned and new instance will be created\nexport function getMiddleware() {\n  return new MiddlewareHelper();\n}\n","// * Jolly Cobra's schedulers\n\nimport {AnyToVoidFunction} from '../../types';\n\nexport default function throttleWith<F extends AnyToVoidFunction>(schedulerFn: AnyToVoidFunction, fn: F) {\n  let waiting = false;\n  let args: Parameters<F>;\n\n  return (..._args: Parameters<F>) => {\n    args = _args;\n\n    if(!waiting) {\n      waiting = true;\n\n      schedulerFn(() => {\n        waiting = false;\n        // @ts-ignore\n        fn(...args);\n      });\n    }\n  };\n}\n","// * Jolly Cobra's schedulers\n\nimport {AnyToVoidFunction} from '../../types';\nimport {fastRaf} from '../schedulers';\nimport throttleWith from './throttleWith';\n\nexport default function throttleWithRaf<F extends AnyToVoidFunction>(fn: F) {\n  return throttleWith(fastRaf, fn);\n}\n","import {createSignal, Setter} from 'solid-js';\n\n/**\n * do not use getter in JSX\n */\nexport default function createUnifiedSignal<T = any>(...args: Partial<Parameters<typeof createSignal<T>>>) {\n  const [getter, setter] = createSignal<T>(...args);\n  return <A extends Parameters<Setter<T>>>(...args: Partial<A>) => {\n    // @ts-ignore\n    if(args.length === 0) {\n      return getter();\n    }\n\n    // @ts-ignore\n    return setter(...args);\n  };\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport {IS_WORKER} from './context';\nimport createUnifiedSignal from './solid/createUnifiedSignal';\n\nexport class WindowSize {\n  private _width: ReturnType<typeof createUnifiedSignal<number>>;\n  private _height: ReturnType<typeof createUnifiedSignal<number>>;\n  // private rAF: number;\n  private viewport: VisualViewport | Window;\n\n  constructor() {\n    if(IS_WORKER) {\n      return;\n    }\n\n    this._width = createUnifiedSignal();\n    this._height = createUnifiedSignal();\n\n    this.viewport = /* 'visualViewport' in window ? window.visualViewport :  */window;\n    const set = () => {\n      this.setDimensions();\n\n      // if(this.width === undefined) {\n      //   this.setDimensions();\n      //   return;\n      // }\n\n      // if(this.rAF) window.cancelAnimationFrame(this.rAF);\n      // this.rAF = window.requestAnimationFrame(() => {\n      //   this.rAF = 0;\n\n      //   batch(() => {\n      //     this.setDimensions();\n      //   });\n      // });\n    };\n    this.viewport.addEventListener('resize', set);\n    set();\n  }\n\n  private setDimensions() {\n    const w = this.viewport;\n    this._width((w as VisualViewport).width || (w as Window).innerWidth);\n    this._height((w as VisualViewport).height || (w as Window).innerHeight);\n  }\n\n  public get width() {\n    return this._width();\n  }\n\n  public get height() {\n    return this._height();\n  }\n}\n\nconst windowSize = new WindowSize();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.windowSize = windowSize);\nexport default windowSize;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {MyDocument} from '../../lib/appManagers/appDocsManager';\nimport IS_VIBRATE_SUPPORTED from '../../environment/vibrateSupport';\nimport assumeType from '../../helpers/assumeType';\nimport isInDOM from '../../helpers/dom/isInDOM';\nimport makeError from '../../helpers/makeError';\nimport {getMiddleware, Middleware} from '../../helpers/middleware';\nimport throttleWithRaf from '../../helpers/schedulers/throttleWithRaf';\nimport windowSize from '../../helpers/windowSize';\nimport {PhotoSize, VideoSize} from '../../layer';\nimport {AppManagers} from '../../lib/appManagers/managers';\nimport RLottiePlayer from '../../lib/rlottie/rlottiePlayer';\nimport Scrollable from '../scrollable';\nimport wrapSticker from './sticker';\n\nexport const emojiAnimationContainer = document.createElement('div');\nemojiAnimationContainer.classList.add('emoji-animation-container');\n\nconst NO_UNMOUNT = false;\n\nexport default function wrapStickerAnimation({\n  size,\n  stickerSize,\n  doc,\n  middleware,\n  target,\n  side,\n  skipRatio,\n  play,\n  managers,\n  fullThumb,\n  withRandomOffset,\n  relativeEffect,\n  loopEffect,\n  onUnmount,\n  scrollable,\n  textColor,\n  addOffsetX: _addOffsetX = 0,\n  addOffsetY: _addOffsetY = 0\n}: {\n  size: number,\n  stickerSize?: number,\n  doc: MyDocument,\n  middleware?: Middleware,\n  target: HTMLElement,\n  side: 'left' | 'center' | 'right',\n  skipRatio?: number,\n  play: boolean,\n  managers?: AppManagers,\n  fullThumb?: PhotoSize | Extract<VideoSize, VideoSize.videoSize>,\n  withRandomOffset?: boolean,\n  relativeEffect?: boolean,\n  loopEffect?: boolean,\n  onUnmount?: () => void,\n  scrollable?: Scrollable,\n  textColor?: string,\n  addOffsetX?: number,\n  addOffsetY?: number\n}) {\n  const animationDiv = document.createElement('div');\n  animationDiv.classList.add('emoji-animation');\n\n  // const size = 280;\n  animationDiv.style.width = size + 'px';\n  animationDiv.style.height = size + 'px';\n\n  let animation: RLottiePlayer;\n  const unmountAnimation = () => {\n    if(NO_UNMOUNT) {\n      return;\n    }\n\n    middlewareHelper.destroy();\n    const a = animation;\n    animation = undefined;\n    a?.remove();\n    animationDiv.remove();\n    onScroll && scrollable.container.removeEventListener('scroll', onScroll);\n    if(a) {\n      onUnmount?.();\n    }\n  };\n\n  const middlewareHelper = middleware?.create() ?? getMiddleware();\n  middleware = middlewareHelper.get();\n\n  const stickerPromise = wrapSticker({\n    div: animationDiv,\n    doc,\n    middleware,\n    withThumb: false,\n    needFadeIn: false,\n    loop: !!loopEffect,\n    width: stickerSize || size,\n    height: stickerSize || size,\n    play,\n    group: 'none',\n    skipRatio,\n    managers,\n    fullThumb,\n    isEffect: true,\n    textColor\n  }).then(({render}) => render).then((_animation) => {\n    assumeType<RLottiePlayer>(_animation);\n    if(!middleware()) {\n      _animation.remove();\n      throw makeError('MIDDLEWARE');\n    }\n\n    animation = _animation;\n    animation.addEventListener('enterFrame', (frameNo) => {\n      if((!loopEffect && frameNo === animation.maxFrame) || !isInDOM(target)) {\n        unmountAnimation();\n      }\n    });\n\n    animation.addEventListener('destroy', unmountAnimation);\n\n    if(IS_VIBRATE_SUPPORTED) {\n      animation.addEventListener('firstFrame', () => {\n        navigator.vibrate(100);\n      }, {once: true});\n    }\n\n    animation.addEventListener('firstFrame', () => {\n      setPosition();\n    }, {once: true});\n\n    return animation;\n  });\n\n  const generateRandomSigned = (max: number) => {\n    const r = Math.random() * max * 2;\n    return r > max ? -r % max : r;\n  };\n\n  const randomOffsetX = withRandomOffset ? generateRandomSigned(16) : 0;\n  const randomOffsetY = withRandomOffset ? generateRandomSigned(4) : 0;\n  const setPosition = () => {\n    if(!isInDOM(target)) {\n      unmountAnimation();\n      return;\n    }\n\n    const rect = target.getBoundingClientRect();\n\n    const factor = rect.width / 200;\n    const stableOffsetX = side === 'center' ? 0 : 16 * (side === 'right' ? 1 : -1) * factor;\n    // const stableOffsetY = side === 'center' ? 0 : -50 * factor;\n    const stableOffsetY = side === 'center' ? 0 : 0 * factor;\n\n    const rectX = side === 'right' ? rect.right : rect.left;\n    const rectY = rect.top;\n\n    const addOffsetX = (side === 'center' ? (rect.width - size) / 2 : (side === 'right' ? -size : 0)) + stableOffsetX + randomOffsetX + _addOffsetX * (side === 'right' ? 1 : -1);\n    const addOffsetY = (side === 'center' || true ? (rect.height - size) / 2 : 0) + stableOffsetY + randomOffsetY + _addOffsetY;\n    const x = rectX + addOffsetX;\n    const y = rectY + addOffsetY;\n\n    if(y <= -size || y >= windowSize.height) {\n      unmountAnimation();\n      return;\n    }\n\n    if(relativeEffect) {\n      if(side !== 'center') animationDiv.style[side] = Math.abs(stableOffsetX) * -1 + 'px';\n      else animationDiv.style.left = addOffsetX + 'px';\n      animationDiv.style.top = addOffsetY + 'px';\n    } else {\n      animationDiv.style.top = y + 'px';\n      animationDiv.style.left = x + 'px';\n    }\n  };\n\n  let onScroll: () => void;\n  if(scrollable) {\n    onScroll = throttleWithRaf(setPosition);\n    scrollable.container.addEventListener('scroll', onScroll);\n  }\n\n  // setPosition();\n\n  if(relativeEffect) {\n    animationDiv.classList.add('is-relative');\n    target.parentElement.append(animationDiv);\n  } else {\n    emojiAnimationContainer.append(animationDiv);\n  }\n\n  return {animationDiv, stickerPromise};\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport rootScope from '../lib/rootScope';\n\nexport type LiteModeKey = 'all' | 'gif' | 'video' |\n  'emoji' | 'emoji_panel' | 'emoji_messages' |\n  'effects' | 'effects_reactions' | 'effects_premiumstickers' | 'effects_emoji' |\n  'stickers' | 'stickers_panel' | 'stickers_chat' |\n  'chat' | 'chat_background' | 'chat_spoilers' | 'animations';\n\nexport class LiteMode {\n  public isEnabled() {\n    return !!(rootScope.settings && rootScope.settings.liteMode.all);\n  }\n\n  public isAvailable(key: LiteModeKey) {\n    return !!(rootScope.settings && !rootScope.settings.liteMode.all && !rootScope.settings.liteMode[key]);\n  }\n}\n\nconst liteMode = new LiteMode();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.liteMode = liteMode);\nexport default liteMode;\n","const Icons = {\n  check: 'e900',\n  checks: 'e901',\n  activesessions: 'e902',\n  add: 'e903',\n  add_reaction: 'e904',\n  addboost: 'e905',\n  addmember_filled: 'e906',\n  adduser: 'e907',\n  admin: 'e908',\n  ads: 'e909',\n  align_center: 'e90a',\n  align_left: 'e90b',\n  align_right: 'e90c',\n  animals: 'e90d',\n  animations: 'e90e',\n  app_expand: 'e90f',\n  app_shrink: 'e910',\n  archive: 'e911',\n  arrow_down: 'e912',\n  arrow_next: 'e913',\n  arrow_prev: 'e914',\n  arrowcircle: 'e915',\n  arrowhead: 'e916',\n  attach: 'e917',\n  audio_repeat: 'e918',\n  audio_repeat_single: 'e919',\n  author_hidden: 'e91a',\n  avatarnext: 'e91b',\n  avatarprevious: 'e91c',\n  aversion: 'e91d',\n  back: 'e91e',\n  binfilled: 'e91f',\n  bold: 'e920',\n  bomb: 'e921',\n  boost: 'e922',\n  boostcircle: 'e923',\n  bot_filled: 'e924',\n  botcom: 'e925',\n  bots: 'e926',\n  brightness: 'e927',\n  brush: 'e928',\n  bubblereply: 'e929',\n  bug: 'e92a',\n  calendar: 'e92b',\n  calendarfilter: 'e92c',\n  camera: 'e92d',\n  cameraadd: 'e92e',\n  captiondown: 'e92f',\n  captionup: 'e930',\n  car: 'e931',\n  card: 'e932',\n  card_outline: 'e933',\n  cash_circle: 'e934',\n  channel: 'e935',\n  channel_filled: 'e936',\n  channelviews: 'e937',\n  chatspinned: 'e938',\n  chatsplaceholder: 'e939',\n  check1: 'e93a',\n  checkbox: 'e93b',\n  checkboxblock: 'e93c',\n  checkboxempty: 'e93d',\n  checkboxon: 'e93e',\n  checkretract: 'e93f',\n  checkround: 'e940',\n  checkround_filled: 'e941',\n  clock: 'e942',\n  close: 'e943',\n  clouddownload: 'e944',\n  collapse: 'e945',\n  colorize: 'e946',\n  comments: 'e947',\n  commentssticker: 'e948',\n  contrast: 'e949',\n  copy: 'e94a',\n  crop: 'e94b',\n  cross: 'e94c',\n  crossgif: 'e94d',\n  crossround: 'e94e',\n  crossstar: 'e94f',\n  darkmode: 'e950',\n  data: 'e951',\n  delete: 'e952',\n  delete_filled: 'e953',\n  deletedaccount: 'e954',\n  deleteleft: 'e955',\n  deleteuser: 'e956',\n  devices: 'e957',\n  document: 'e958',\n  down: 'e959',\n  download: 'e95a',\n  dragfiles: 'e95b',\n  dragmedia: 'e95c',\n  eats: 'e95d',\n  edit: 'e95e',\n  email: 'e95f',\n  endcall_filled: 'e960',\n  enhance: 'e961',\n  enter: 'e962',\n  equalizer: 'e963',\n  expand: 'e964',\n  eye: 'e965',\n  eye1: 'e966',\n  eye2: 'e967',\n  eyecross_outline: 'e968',\n  factcheck: 'e969',\n  fade: 'e96a',\n  fast_forward: 'e96b',\n  fast_rewind: 'e96c',\n  favourites: 'e96d',\n  flag: 'e96e',\n  flip: 'e96f',\n  flip_image_horizontal: 'e970',\n  folder: 'e971',\n  fontframe: 'e972',\n  fontframe_bg: 'e973',\n  fontframe_outline: 'e974',\n  fontsize: 'e975',\n  forward: 'e976',\n  forward_filled: 'e977',\n  free_transform: 'e978',\n  fullscreen: 'e979',\n  gc_microphone: 'e97a',\n  gc_microphoneoff: 'e97b',\n  geometric_digit_0: 'e97c',\n  geometric_digit_1: 'e97d',\n  geometric_digit_2: 'e97e',\n  geometric_digit_3: 'e97f',\n  geometric_digit_4: 'e980',\n  geometric_digit_5: 'e981',\n  geometric_digit_6: 'e982',\n  geometric_digit_7: 'e983',\n  geometric_digit_8: 'e984',\n  geometric_digit_9: 'e985',\n  geometric_dot: 'e986',\n  geometric_letter_x: 'e987',\n  gifs: 'e988',\n  gift: 'e989',\n  gift_premium: 'e98a',\n  grain: 'e98b',\n  group: 'e98c',\n  group_filled: 'e98d',\n  groupmedia: 'e98e',\n  groupmediaoff: 'e98f',\n  hand: 'e990',\n  help: 'e991',\n  hide: 'e992',\n  highlights: 'e993',\n  image: 'e994',\n  image_original: 'e995',\n  info: 'e996',\n  info2: 'e997',\n  italic: 'e998',\n  keyboard: 'e999',\n  lamp: 'e99a',\n  language: 'e99b',\n  largepause: 'e99c',\n  largeplay: 'e99d',\n  left: 'e99e',\n  limit_chat: 'e99f',\n  limit_chats: 'e9a0',\n  limit_file: 'e9a1',\n  limit_folders: 'e9a2',\n  limit_link: 'e9a3',\n  limit_pin: 'e9a4',\n  link: 'e9a5',\n  link_paid: 'e9a6',\n  list: 'e9a7',\n  listscreenshare: 'e9a8',\n  livelocation: 'e9a9',\n  location: 'e9aa',\n  lock: 'e9ab',\n  lockoff: 'e9ac',\n  loginlogodesktop: 'e9ad',\n  loginlogomobile: 'e9ae',\n  logout: 'e9af',\n  mediaspeed_empty: 'e9b0',\n  mediaspoiler: 'e9b1',\n  mediaspoileroff: 'e9b2',\n  mention: 'e9b3',\n  menu: 'e9b4',\n  message: 'e9b5',\n  message_jump: 'e9b6',\n  message_quote: 'e9b7',\n  messageunread: 'e9b8',\n  microphone: 'e9b9',\n  microphone_crossed: 'e9ba',\n  microphone_crossed_filled: 'e9bb',\n  microphone_filled: 'e9bc',\n  minus: 'e9bd',\n  monospace: 'e9be',\n  more: 'e9bf',\n  multistories: 'e9c0',\n  mute: 'e9c1',\n  muted: 'e9c2',\n  mynotes: 'e9c3',\n  newchannel: 'e9c4',\n  newchannel_filled: 'e9c5',\n  newchat_filled: 'e9c6',\n  newgroup: 'e9c7',\n  newgroup_filled: 'e9c8',\n  newprivate: 'e9c9',\n  newprivate_filled: 'e9ca',\n  newtab: 'e9cb',\n  next: 'e9cc',\n  nochannel: 'e9cd',\n  noncontacts: 'e9ce',\n  nosound: 'e9cf',\n  online: 'e9d0',\n  passwordoff: 'e9d1',\n  pause: 'e9d2',\n  permissions: 'e9d3',\n  person: 'e9d4',\n  phone: 'e9d5',\n  phone_filled: 'e9d6',\n  pin: 'e9d7',\n  pin2: 'e9d8',\n  pinlist: 'e9d9',\n  pinned_filled: 'e9da',\n  pinnedchat: 'e9db',\n  pip: 'e9dc',\n  play: 'e9dd',\n  playback_05: 'e9de',\n  playback_15: 'e9df',\n  playback_1x: 'e9e0',\n  playback_2x: 'e9e1',\n  plus: 'e9e2',\n  plusround: 'e9e3',\n  poll: 'e9e4',\n  premium_addone: 'e9e5',\n  premium_avatars: 'e9e6',\n  premium_badge: 'e9e7',\n  premium_colors: 'e9e8',\n  premium_double: 'e9e9',\n  premium_emoji: 'e9ea',\n  premium_filesize: 'e9eb',\n  premium_lastseen: 'e9ec',\n  premium_limits: 'e9ed',\n  premium_lock: 'e9ee',\n  premium_management: 'e9ef',\n  premium_noads: 'e9f0',\n  premium_privacy: 'e9f1',\n  premium_reactions: 'e9f2',\n  premium_restrict: 'e9f3',\n  premium_speed: 'e9f4',\n  premium_status: 'e9f5',\n  premium_stickers: 'e9f6',\n  premium_tags: 'e9f7',\n  premium_transcription: 'e9f8',\n  premium_translate: 'e9f9',\n  premium_unlock: 'e9fa',\n  premium_wallpaper: 'e9fb',\n  previous: 'e9fc',\n  promote: 'e9fd',\n  quote: 'e9fe',\n  quote_outline: 'e9ff',\n  radiooff: 'ea00',\n  radioon: 'ea01',\n  reactions: 'ea02',\n  reactions_filled: 'ea03',\n  readchats: 'ea04',\n  recent: 'ea05',\n  redo: 'ea06',\n  replace: 'ea07',\n  reply: 'ea08',\n  reply_filled: 'ea09',\n  restrict: 'ea0a',\n  revenue: 'ea0b',\n  rightpanel: 'ea0c',\n  rotate: 'ea0d',\n  rotate_left: 'ea0e',\n  rotate_right: 'ea0f',\n  round_chats_filled: 'ea10',\n  saturation: 'ea11',\n  saved: 'ea12',\n  savedmessages: 'ea13',\n  schedule: 'ea14',\n  scheduled: 'ea15',\n  search: 'ea16',\n  select: 'ea17',\n  send: 'ea18',\n  send2: 'ea19',\n  sending: 'ea1a',\n  sendingerror: 'ea1b',\n  settings: 'ea1c',\n  settings_clipped_corner: 'ea1d',\n  settings_filled: 'ea1e',\n  shadows: 'ea1f',\n  sharescreen_filled: 'ea20',\n  sharpen: 'ea21',\n  shipping: 'ea22',\n  shuffle: 'ea23',\n  smallscreen: 'ea24',\n  smile: 'ea25',\n  speaker: 'ea26',\n  speakerfilled: 'ea27',\n  speakeroff: 'ea28',\n  speakerofffilled: 'ea29',\n  spoiler: 'ea2a',\n  sport: 'ea2b',\n  star: 'ea2c',\n  star_filled: 'ea2d',\n  statistics: 'ea2e',\n  stickers: 'ea2f',\n  stickers_face: 'ea30',\n  stop: 'ea31',\n  stories: 'ea32',\n  storyreply: 'ea33',\n  storyrepost: 'ea34',\n  strikethrough: 'ea35',\n  tag: 'ea36',\n  tag_add: 'ea37',\n  tag_crossed: 'ea38',\n  tag_filter: 'ea39',\n  tag_name: 'ea3a',\n  text: 'ea3b',\n  textedit: 'ea3c',\n  timer: 'ea3d',\n  tip: 'ea3e',\n  tools: 'ea3f',\n  topics: 'ea40',\n  transcribe: 'ea41',\n  unarchive: 'ea42',\n  unclaimed: 'ea43',\n  underline: 'ea44',\n  undo: 'ea45',\n  unmute: 'ea46',\n  unpin: 'ea47',\n  unread: 'ea48',\n  up: 'ea49',\n  user: 'ea4a',\n  username: 'ea4b',\n  videocamera: 'ea4c',\n  videocamera_crossed_filled: 'ea4d',\n  videocamera_filled: 'ea4e',\n  videochat: 'ea4f',\n  vignette: 'ea50',\n  volume_down: 'ea51',\n  volume_mute: 'ea52',\n  volume_off: 'ea53',\n  volume_up: 'ea54',\n  warmth: 'ea55',\n  webview: 'ea56',\n  zoomin: 'ea57',\n  zoomout: 'ea58'\n};\n\nexport default Icons;\n","const IconsReverse = new Set<Icon>([\n  'avatarnext',\n  'avatarprevious',\n  'arrow_next',\n  'channel',\n  'chatspinned',\n  'fast_forward',\n  'fast_rewind',\n  'forward',\n  'forward_filled',\n  'group',\n  'group_filled',\n  'left',\n  'listscreenshare',\n  'logout',\n  'muted',\n  'newchannel_filled',\n  'newchannel',\n  'newgroup',\n  'newgroup_filled',\n  'next',\n  'nosound',\n  'previous',\n  'send',\n  'send2',\n  'reply',\n  'reply_filled',\n  'sharescreen_filled',\n  'transcribe',\n  'storyreply',\n  'premium_noads',\n  'topics',\n  'pinlist',\n  'deleteleft'\n]);\n\nexport default IconsReverse;\n","import {TGICO_CLASS} from '../helpers/tgico';\nimport Icons from '../icons';\nimport IconsReverse from '../iconsReverse';\nimport I18n from '../lib/langPack';\n\nexport function getIconContent(icon: Icon) {\n  return String.fromCharCode(parseInt(Icons[icon], 16));\n}\n\nexport default function Icon(icon: Icon, ...classes: string[]) {\n  const span = document.createElement('span');\n  if(I18n.isRTL && IconsReverse.has(icon)) {\n    classes.push('icon-reflect');\n  }\n\n  span.classList.add(TGICO_CLASS/* ...tgico(icon) */, ...classes);\n  span.textContent = getIconContent(icon);\n  return span;\n}\n","export default function setCurrentTime(media: HTMLMediaElement, currentTime: number) {\n  media.isSeeking = true;\n  media.currentTime = currentTime;\n}\n","import {IS_CHROMIUM} from '../../environment/userAgent';\nimport deferredPromise from '../cancellablePromise';\nimport noop from '../noop';\nimport deepEqual from '../object/deepEqual';\nimport onMediaLoad from '../onMediaLoad';\nimport safePlay from './safePlay';\nimport setCurrentTime from './setCurrentTime';\n\nconst USE_FIX = IS_CHROMIUM;\n\nexport const SHOULD_HANDLE_VIDEO_LEAK = USE_FIX;\n\nexport async function onVideoLeak(video: HTMLVideoElement) {\n  // console.error('video is stuck', video.src, video, video.paused, videoPlaybackQuality);\n  const firstElementChild = video.firstElementChild as HTMLSourceElement;\n  if(!firstElementChild) {\n    video.src = '';\n    video.load();\n    throw new Error('leak');\n  }\n\n  const paused = video.paused;\n  firstElementChild.remove();\n  video.load();\n\n  if(!video.childElementCount && !video.src) {\n    throw new Error('leak');\n  }\n\n  if(!paused) safePlay(video);\n  else setCurrentTime(video, 0.0001);\n\n  return handleVideoLeak(video, onMediaLoad(video));\n}\n\nexport async function testVideoLeak(\n  video: HTMLVideoElement,\n  isLeak = !video.getVideoPlaybackQuality().totalVideoFrames\n) {\n  if(!isLeak) {\n    return;\n  }\n\n  return onVideoLeak(video);\n}\n\n// * fix new memory leak of chrome\nexport default async function handleVideoLeak(\n  video: HTMLVideoElement,\n  loadPromise?: Promise<any>\n) {\n  if(!USE_FIX) {\n    return loadPromise;\n  }\n\n  const bindPromise = (promise: Promise<any>) => {\n    promise.then(\n      deferred.resolve.bind(deferred),\n      deferred.reject.bind(deferred)\n    );\n  };\n\n  const onTimeUpdate = () => bindPromise(testVideoLeak(video));\n\n  const deferred = deferredPromise<void>();\n  try {\n    await loadPromise;\n  } catch(err) {\n    onTimeUpdate();\n    return;\n  }\n\n  if(\n    video.getVideoPlaybackQuality().totalVideoFrames ||\n    video.readyState > video.HAVE_METADATA // * video can lose metadata on timeupdate if has no next chunk\n  ) {\n    deferred.resolve();\n    return;\n  }\n\n  video.addEventListener('timeupdate', onTimeUpdate, {once: true});\n  return deferred;\n}\n\nconst eventsOrder = [\n  // 'timeupdate',\n  'seeked',\n  'canplay',\n  'canplaythrough',\n  'seeking'\n  // 'play'\n];\nconst eventsOrderLength = eventsOrder.length;\n\nconst sawEvents = new WeakMap<HTMLElement, {events: Set<string>}>();\nexport const leakVideoFallbacks = new WeakMap<HTMLElement, () => void>();\n\nfunction onVideoLeakListener(e: Event) {\n  const {type, target} = e;\n  if(\n    !(target instanceof HTMLVideoElement) ||\n    target.readyState > target.HAVE_METADATA ||\n    target.isSeeking ||\n    target.ignoreLeak\n  ) {\n    return;\n  }\n\n  // const needLog = target.parentElement.dataset.docId === '';\n  // if(needLog) {\n  //   console.log('video event', event/* , target */, target.currentTime, target.duration);\n  // }\n\n  let cache = sawEvents.get(target);\n  if(!cache) {\n    sawEvents.set(target, cache = {events: new Set()});\n  }\n\n  if(cache.events.has(type)) {\n    return;\n  }\n\n  cache.events.add(type);\n\n  if(cache.events.size === eventsOrderLength/*  && event == eventsOrder[eventsOrderLength - 1] */) {\n    const events = Array.from(cache.events);\n    const index = eventsOrder.indexOf(events[0]);\n    const normalized = eventsOrder.slice(index).concat(eventsOrder.slice(0, index));\n    if(!deepEqual(events, normalized)) {\n      return;\n    }\n\n    // console.log('bad video', target.currentTime, target.duration);\n\n    const fallbackCallback = leakVideoFallbacks.get(target);\n    if(fallbackCallback) {\n      fallbackCallback();\n      leakVideoFallbacks.delete(target);\n    } else {\n      onVideoLeak(target).catch(noop);\n    }\n  }\n\n  // const lastEvent = sawEvents.get(target);\n  // if(!lastEvent) {\n  //   if(eventsOrder[0] === event) {\n  //     sawEvents.set(target, event);\n  //   }\n  // } else if(lastEvent !== event) {\n  //   const lastEventIndex = eventsOrder.indexOf(lastEvent);\n  //   const shouldBeEvent = eventsOrder[lastEventIndex + 1];\n  //   if(shouldBeEvent === event) { // save event for next check\n  //     sawEvents.set(target, event);\n  //   } else if(!shouldBeEvent) { // saw all events\n  //     onVideoLeak(target).catch(noop);\n  //   } else { // wrong event\n  //     sawEvents.delete(target);\n  //   }\n  // }\n}\n\nfunction attachVideoLeakListener(element: HTMLElement | Document, event: string) {\n  element.addEventListener(event, onVideoLeakListener, true);\n  return () => element.removeEventListener(event, onVideoLeakListener, true);\n}\n\nexport function attachVideoLeakListeners(element: HTMLElement | Document) {\n  if(!USE_FIX) {\n    return;\n  }\n\n  const callbacks = eventsOrder.map((event) => {\n    return attachVideoLeakListener(element, event);\n  });\n\n  return () => {\n    callbacks.forEach((callback) => callback());\n  };\n}\n\nattachVideoLeakListeners(document);\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type RLottiePlayer from '../../lib/rlottie/rlottiePlayer';\nimport type {ThumbCache} from '../../lib/storages/thumbs';\nimport type {MyDocument} from '../../lib/appManagers/appDocsManager';\nimport IS_WEBP_SUPPORTED from '../../environment/webpSupport';\nimport getPathFromBytes from '../../helpers/bytes/getPathFromBytes';\nimport deferredPromise from '../../helpers/cancellablePromise';\nimport computeLockColor from '../../helpers/computeLockColor';\nimport cancelEvent from '../../helpers/dom/cancelEvent';\nimport {attachClickEvent} from '../../helpers/dom/clickEvent';\nimport createVideo from '../../helpers/dom/createVideo';\nimport renderImageFromUrl, {renderImageFromUrlPromise} from '../../helpers/dom/renderImageFromUrl';\nimport getImageFromStrippedThumb from '../../helpers/getImageFromStrippedThumb';\nimport getPreviewURLFromThumb from '../../helpers/getPreviewURLFromThumb';\nimport makeError from '../../helpers/makeError';\nimport {makeMediaSize} from '../../helpers/mediaSize';\nimport mediaSizes from '../../helpers/mediaSizes';\nimport {Middleware} from '../../helpers/middleware';\nimport {isSavingLottiePreview, saveLottiePreview} from '../../helpers/saveLottiePreview';\nimport sequentialDom from '../../helpers/sequentialDom';\nimport {DocumentAttribute, PhotoSize, VideoSize} from '../../layer';\nimport appDownloadManager from '../../lib/appManagers/appDownloadManager';\nimport {AppManagers} from '../../lib/appManagers/managers';\nimport choosePhotoSize from '../../lib/appManagers/utils/photos/choosePhotoSize';\nimport getStickerEffectThumb from '../../lib/appManagers/utils/stickers/getStickerEffectThumb';\nimport lottieLoader from '../../lib/rlottie/lottieLoader';\nimport rootScope from '../../lib/rootScope';\nimport webpWorkerController from '../../lib/webp/webpWorkerController';\nimport {Awaited} from '../../types';\nimport {getEmojiToneIndex} from '../../vendor/emoji';\nimport animationIntersector, {AnimationItemGroup} from '../animationIntersector';\nimport LazyLoadQueue from '../lazyLoadQueue';\nimport wrapStickerAnimation from './stickerAnimation';\nimport framesCache from '../../helpers/framesCache';\nimport liteMode, {LiteModeKey} from '../../helpers/liteMode';\nimport Scrollable from '../scrollable';\nimport apiManagerProxy from '../../lib/mtproto/mtprotoworker';\nimport Icon from '../icon';\nimport {SHOULD_HANDLE_VIDEO_LEAK, attachVideoLeakListeners, leakVideoFallbacks, onVideoLeak} from '../../helpers/dom/handleVideoLeak';\nimport noop from '../../helpers/noop';\nimport {IS_WEBM_SUPPORTED} from '../../environment/videoSupport';\nimport toArray from '../../helpers/array/toArray';\n\n// https://github.com/telegramdesktop/tdesktop/blob/master/Telegram/SourceFiles/history/view/media/history_view_sticker.cpp#L40\nexport const STICKER_EFFECT_MULTIPLIER = 1 + 0.245 * 2;\nconst EMOJI_EFFECT_MULTIPLIER = 3;\nconst UNMOUNT_THUMBS = true;\n\nconst locksUrls: {[docId: string]: string} = {};\n\nexport const videosCache: {[key: string]: Promise<any>} = {};\n\nconst onAnimationEnd = (element: HTMLElement, onAnimationEnd: () => void, timeout: number) => {\n  const onEnd = () => {\n    element.removeEventListener('animationend', onEnd);\n    onAnimationEnd();\n    clearTimeout(_timeout);\n  };\n  element.addEventListener('animationend', onEnd);\n  const _timeout = setTimeout(onEnd, timeout);\n};\n\nconst isEmptyContainer = (container: HTMLElement) => {\n  const childElementCount = container.childElementCount;\n  if(!childElementCount) return true;\n  const child = container.firstElementChild as HTMLElement;\n  return child.classList.contains('premium-sticker-lock') && childElementCount === 1;\n};\n\nconst getThumbFromContainer = (container: HTMLElement) => {\n  let element = container.firstElementChild as HTMLElement;\n  if(element && element.classList.contains('premium-sticker-lock')) {\n    element = element.nextElementSibling as HTMLElement;\n  }\n\n  return element;\n};\n\nexport default async function wrapSticker({doc, div, middleware, loadStickerMiddleware, lazyLoadQueue, exportLoad, group, play, onlyThumb, emoji, width, height, withThumb, loop, loadPromises, needFadeIn, needUpscale, skipRatio, static: asStatic, managers = rootScope.managers, fullThumb, isOut, noPremium, withLock, relativeEffect, loopEffect, isCustomEmoji, syncedVideo, liteModeKey, isEffect, textColor, scrollable, showPremiumInfo, useCache}: {\n  doc: MyDocument,\n  div: HTMLElement | HTMLElement[],\n  middleware?: Middleware,\n  loadStickerMiddleware?: Middleware,\n  lazyLoadQueue?: LazyLoadQueue,\n  exportLoad?: number,\n  group?: AnimationItemGroup,\n  play?: boolean,\n  onlyThumb?: boolean,\n  emoji?: string,\n  width?: number,\n  height?: number,\n  withThumb?: boolean,\n  loop?: RLottiePlayer['loop'],\n  loadPromises?: Promise<any>[],\n  needFadeIn?: boolean,\n  needUpscale?: boolean,\n  skipRatio?: number,\n  static?: boolean,\n  managers?: AppManagers,\n  fullThumb?: PhotoSize | Extract<VideoSize, VideoSize.videoSize>,\n  isOut?: boolean,\n  noPremium?: boolean,\n  withLock?: boolean,\n  relativeEffect?: boolean,\n  loopEffect?: boolean,\n  isCustomEmoji?: boolean,\n  syncedVideo?: boolean,\n  liteModeKey?: LiteModeKey | false,\n  isEffect?: boolean,\n  textColor?: WrapSomethingOptions['textColor'],\n  scrollable?: Scrollable\n  showPremiumInfo?: () => void,\n  useCache?: boolean\n}) {\n  const options = arguments[0];\n  div = toArray(div);\n\n  liteModeKey ??= 'stickers_panel';\n\n  if(isCustomEmoji) {\n    emoji = doc.stickerEmojiRaw;\n  }\n\n  const stickerType = doc.sticker;\n  if(stickerType === 1 || (stickerType === 3 && !IS_WEBM_SUPPORTED)) {\n    asStatic = true;\n  }\n\n  if(!width && !height) {\n    const sizes = mediaSizes.active;\n    const boxSize = emoji ? sizes.emojiSticker : (doc.animated ? sizes.animatedSticker : sizes.staticSticker);\n    const size = makeMediaSize(doc.w, doc.h).aspectFitted(boxSize);\n    width = size.width;\n    height = size.height;\n  }\n\n  if(stickerType === 2) {\n    // LottieLoader.loadLottie();\n    lottieLoader.loadLottieWorkers();\n  }\n\n  loop = !!(!emoji || isCustomEmoji) && loop;\n\n  div.forEach((div) => {\n    div.dataset.docId = '' + doc.id;\n    if(emoji) {\n      div.dataset.stickerEmoji = emoji;\n    }\n\n    // div.dataset.stickerPlay = '' + +(play || false);\n    // div.dataset.stickerLoop = '' + +(loop || false);\n\n    div.classList.add('media-sticker-wrapper');\n  });\n\n  if(play && liteModeKey && !liteMode.isAvailable(liteModeKey) && !isCustomEmoji && !isEffect) {\n    play = false;\n    loop = false;\n  }\n\n  /* if(stickerType === 3) {\n    const videoRes = wrapVideo({\n      doc,\n      boxWidth: width,\n      boxHeight: height,\n      container: div,\n      group,\n      lazyLoadQueue,\n      middleware,\n      withoutPreloader: true,\n      loadPromises,\n      noPlayButton: true,\n      noInfo: true\n    });\n\n    if(videoRes.thumb) {\n      if(videoRes.thumb.images.thumb) {\n        videoRes.thumb.images.thumb.classList.add('media-sticker', 'thumbnail');\n      }\n\n      if(videoRes.thumb.images.full) {\n        videoRes.thumb.images.full.classList.add('media-sticker');\n      }\n    }\n\n    return videoRes.loadPromise;\n  } */\n\n  // console.log('wrap sticker', doc, div, onlyThumb);\n\n  let cacheContext: ThumbCache;\n  const getCacheContext = (type: string = cacheContext?.type) => {\n    return cacheContext = apiManagerProxy.getCacheContext(doc, type);\n  };\n\n  const isAnimated = !asStatic && (stickerType === 2 || stickerType === 3);\n\n  const effectThumb = getStickerEffectThumb(doc);\n  if(isOut !== undefined && effectThumb && !isOut) {\n    div.forEach((div) => div.classList.add('reflect-x'));\n  }\n\n  const willHaveLock = effectThumb && withLock;\n  if(willHaveLock) {\n    const lockUrl = locksUrls[doc.id];\n    div.forEach((div) => {\n      div.classList.add('is-premium-sticker');\n      div.append(Icon('premium_lock', 'premium-sticker-lock'));\n      lockUrl && div.style.setProperty('--lock-url', `url(${lockUrl})`);\n    });\n  }\n\n  if(asStatic && stickerType !== 1) {\n    const thumb = choosePhotoSize(doc, width, height, false) as PhotoSize.photoSize;\n    getCacheContext(thumb.type);\n  } else {\n    getCacheContext(fullThumb?.type);\n  }\n\n  const customEmojiAttribute = doc.attributes.find((attribute) => attribute._ === 'documentAttributeCustomEmoji') as DocumentAttribute.documentAttributeCustomEmoji;\n  if(!customEmojiAttribute || !customEmojiAttribute.pFlags.text_color) {\n    textColor = undefined;\n  } else if(!textColor) {\n    textColor = 'primary-text-color';\n  }\n\n  const toneIndex = emoji && !isCustomEmoji ? getEmojiToneIndex(emoji) : -1;\n  const lottieCachedThumbToneIndex = toneIndex === -1 ? textColor ?? toneIndex : toneIndex;\n  const downloaded = cacheContext.downloaded && !needFadeIn;\n\n  const isThumbNeededForType = isAnimated;\n  const lottieCachedThumb = stickerType === 2 || stickerType === 3 ? apiManagerProxy.getStickerCachedThumb(doc.id, lottieCachedThumbToneIndex) : undefined;\n\n  const ret = {\n    render: undefined as typeof loadPromise,\n    load: undefined as typeof load,\n    width,\n    height,\n    downloaded\n  };\n  let loadThumbPromise = deferredPromise<void>();\n  let haveThumbCached = false;\n  if((\n    doc.thumbs?.length ||\n      lottieCachedThumb\n  ) &&\n    isEmptyContainer(div[0]) && (\n    !downloaded ||\n      isThumbNeededForType ||\n      onlyThumb\n  ) && withThumb !== false/*  && doc.thumbs[0]._ !== 'photoSizeEmpty' */\n  ) {\n    let thumb = lottieCachedThumb || doc.thumbs[0];\n\n    // console.log('wrap sticker', thumb, div);\n\n    const afterRender = (div: HTMLElement, thumbImage: HTMLElement) => {\n      if(isEmptyContainer(div)) {\n        sequentialDom.mutateElement(div, () => {\n          if(isEmptyContainer(div)) {\n            thumbImage.classList.add('media-sticker', 'thumbnail');\n            div.append(thumbImage);\n          }\n\n          loadThumbPromise.resolve();\n        });\n      } else {\n        loadThumbPromise.resolve();\n      }\n    };\n\n    if('url' in thumb) {\n      haveThumbCached = true;\n      div.forEach((div) => {\n        const thumbImage = new Image();\n        renderImageFromUrl(thumbImage, (thumb as any).url, () => afterRender(div, thumbImage));\n      });\n    } else if('bytes' in thumb) {\n      if(thumb._ === 'photoPathSize') {\n        if(!thumb.bytes.length) {\n          thumb = doc.thumbs.find((t) => (t as PhotoSize.photoStrippedSize).bytes?.length) || thumb;\n        }\n\n        const d = getPathFromBytes((thumb as PhotoSize.photoStrippedSize).bytes);\n        const ns = 'http://www.w3.org/2000/svg';\n        const svg = document.createElementNS(ns, 'svg');\n        svg.classList.add('rlottie-vector', 'media-sticker', 'thumbnail');\n        svg.setAttributeNS(null, 'viewBox', `0 0 ${doc.w || 512} ${doc.h || 512}`);\n\n        // const defs = document.createElementNS(ns, 'defs');\n        // const linearGradient = document.createElementNS(ns, 'linearGradient');\n        // linearGradient.setAttributeNS(null, 'id', 'g');\n        // linearGradient.setAttributeNS(null, 'x1', '-300%');\n        // linearGradient.setAttributeNS(null, 'x2', '-200%');\n        // linearGradient.setAttributeNS(null, 'y1', '0');\n        // linearGradient.setAttributeNS(null, 'y2', '0');\n        // const stops = [\n        //   ['-10%', '.1'],\n        //   ['30%', '.07'],\n        //   ['70%', '.07'],\n        //   ['110%', '.1']\n        // ].map(([offset, stopOpacity]) => {\n        //   const stop = document.createElementNS(ns, 'stop');\n        //   stop.setAttributeNS(null, 'offset', offset);\n        //   stop.setAttributeNS(null, 'stop-opacity', stopOpacity);\n        //   return stop;\n        // });\n        // const animates = [\n        //   ['-300%', '1200%'],\n        //   ['-200%', '1300%']\n        // ].map(([from, to], idx) => {\n        //   const animate = document.createElementNS(ns, 'animate');\n        //   animate.setAttributeNS(null, 'attributeName', 'x' + (idx + 1));\n        //   animate.setAttributeNS(null, 'from', from);\n        //   animate.setAttributeNS(null, 'to', to);\n        //   animate.setAttributeNS(null, 'dur', '3s');\n        //   animate.setAttributeNS(null, 'repeatCount', 'indefinite');\n        //   return animate;\n        // });\n        // linearGradient.append(...stops, ...animates);\n        // defs.append(linearGradient);\n        // svg.append(defs);\n\n        const path = document.createElementNS(ns, 'path');\n        path.setAttributeNS(null, 'd', d);\n        // if(liteMode.isAvailable('animations') && !isCustomEmoji) path.setAttributeNS(null, 'fill', 'url(#g)');\n        svg.append(path);\n        div.forEach((div, idx) => div.append(idx > 0 ? svg.cloneNode(true) : svg));\n        haveThumbCached = true;\n        loadThumbPromise.resolve();\n      } else if(toneIndex <= 0) {\n        const r = () => {\n          (div as HTMLElement[]).forEach((div) => {\n            const thumbImage = new Image();\n            const url = getPreviewURLFromThumb(doc, thumb as PhotoSize.photoStrippedSize, true);\n            renderImageFromUrl(thumbImage, url, () => afterRender(div, thumbImage), useCache);\n          });\n        };\n\n        if((IS_WEBP_SUPPORTED || doc.pFlags.stickerThumbConverted || cacheContext.url)/*  && false */) {\n          haveThumbCached = true;\n          r();\n        } else {\n          haveThumbCached = true;\n          webpWorkerController.convert('main-' + doc.id, thumb.bytes).then((bytes) => {\n            managers.appDocsManager.saveWebPConvertedStrippedThumb(doc.id, bytes);\n            (thumb as PhotoSize.photoStrippedSize).bytes = bytes;\n            doc.pFlags.stickerThumbConverted = true;\n\n            if((middleware && !middleware()) || !isEmptyContainer((div as HTMLElement[])[0])) {\n              loadThumbPromise.resolve();\n              return;\n            }\n\n            r();\n          }).catch(() => loadThumbPromise.resolve());\n        }\n      }\n    } else if(((stickerType === 2 && toneIndex <= 0) || stickerType === 3) && (withThumb || onlyThumb)) {\n      const load = async() => {\n        if(!isEmptyContainer((div as HTMLElement[])[0]) || (middleware && !middleware())) {\n          loadThumbPromise.resolve();\n          return;\n        }\n\n        const r = (div: HTMLElement, thumbImage: HTMLElement, url: string) => {\n          if(!isEmptyContainer(div) || (middleware && !middleware())) {\n            loadThumbPromise.resolve();\n            return;\n          }\n\n          if(!url) afterRender(div, thumbImage);\n          else renderImageFromUrl(thumbImage, url, () => afterRender(div, thumbImage), useCache);\n        };\n\n        getCacheContext();\n        (div as HTMLElement[]).forEach((div) => {\n          if(cacheContext.url) {\n            r(div, new Image(), cacheContext.url);\n          } else if('bytes' in thumb) {\n            const res = getImageFromStrippedThumb(doc, thumb as PhotoSize.photoStrippedSize, true);\n            res.loadPromise.then(() => r(div, res.image, ''));\n\n            // return managers.appDocsManager.getThumbURL(doc, thumb as PhotoSize.photoStrippedSize).promise.then(r);\n          } else {\n            appDownloadManager.downloadMediaURL({\n              media: doc,\n              thumb: thumb as PhotoSize\n            }).then(async(url) => {\n              return r(div, new Image(), url);\n            });\n          }\n        });\n      };\n\n      if(lazyLoadQueue && onlyThumb) {\n        lazyLoadQueue.push({div: div[0], load});\n        loadThumbPromise.resolve();\n        return ret;\n      } else {\n        load();\n\n        if((thumb as any).url) {\n          haveThumbCached = true;\n        }\n      }\n    }\n  }\n\n  if(loadPromises && haveThumbCached) {\n    loadPromises.push(loadThumbPromise);\n  }\n\n  if(onlyThumb/*  || true */) { // for sticker panel\n    return ret;\n  }\n\n  const middlewareError = makeError('MIDDLEWARE');\n  const load = async() => {\n    if(middleware && !middleware()) {\n      throw middlewareError;\n    }\n\n    if(stickerType === 2 && !asStatic) {\n      const blob = await appDownloadManager.downloadMedia({media: doc, queueId: lazyLoadQueue?.queueId, thumb: fullThumb});\n      if(middleware && !middleware()) {\n        throw middlewareError;\n      }\n\n      const animation = await lottieLoader.loadAnimationWorker({\n        container: (div as HTMLElement[])[0],\n        loop,\n        autoplay: play,\n        animationData: blob,\n        width,\n        height,\n        name: 'doc' + doc.id,\n        needUpscale,\n        skipRatio,\n        toneIndex,\n        sync: isCustomEmoji,\n        middleware: loadStickerMiddleware ?? middleware,\n        group,\n        liteModeKey: liteModeKey || undefined,\n        textColor: !isCustomEmoji ? textColor : undefined\n      });\n\n      // const deferred = deferredPromise<void>();\n\n      const setLockColor = willHaveLock ? () => {\n        const lockUrl = locksUrls[doc.id] ??= computeLockColor(animation.canvas[0]);\n        (div as HTMLElement[]).forEach((div) => div.style.setProperty('--lock-url', `url(${lockUrl})`));\n      } : undefined;\n\n      const onFirstFrame = (container: HTMLElement, canvas: HTMLCanvasElement) => {\n        let element = getThumbFromContainer(container);\n        element = element !== canvas && element as HTMLElement;\n        if(needFadeIn !== false) {\n          needFadeIn = (needFadeIn || !element || element.tagName === 'svg') && liteMode.isAvailable('animations');\n        }\n\n        const cb = () => {\n          if(\n            element &&\n            element !== canvas &&\n            element.tagName !== 'DIV'\n          ) {\n            element.remove();\n          }\n        };\n\n        if(!needFadeIn) {\n          if(element) {\n            sequentialDom.mutate(cb);\n          }\n        } else {\n          sequentialDom.mutate(() => {\n            canvas && canvas.classList.add('fade-in');\n            if(element) {\n              element.classList.add('fade-out');\n            }\n\n            onAnimationEnd(canvas || element, () => {\n              sequentialDom.mutate(() => {\n                canvas && canvas.classList.remove('fade-in');\n                cb();\n              });\n            }, 400);\n          });\n        }\n      };\n\n      animation.addEventListener('firstFrame', () => {\n        const canvas = animation.canvas[0];\n        if(withThumb !== false || isCustomEmoji) {\n          saveLottiePreview(doc, canvas, lottieCachedThumbToneIndex);\n        }\n\n        if(willHaveLock) {\n          setLockColor();\n        }\n\n        if(!isCustomEmoji) {\n          (div as HTMLElement[]).forEach((container, idx) => {\n            onFirstFrame(container, animation.canvas[idx]);\n          });\n        }\n      }, {once: true});\n\n      if(emoji) {\n        managers.appStickersManager.preloadAnimatedEmojiStickerAnimation(emoji);\n      }\n\n      return animation;\n\n      // return deferred;\n      // await new Promise((resolve) => setTimeout(resolve, 5e3));\n    } else if(asStatic || stickerType === 3) {\n      const isSingleVideo = isAnimated && syncedVideo;\n      const cacheName = isSingleVideo ? framesCache.generateName('' + doc.id, 0, 0, undefined, undefined) : undefined;\n\n      const cachePromise = videosCache[cacheName];\n      if(cachePromise) {\n        return cachePromise as typeof promise;\n      }\n\n      const d = isSingleVideo ? (div as HTMLElement[]).slice(0, 1) : div as HTMLElement[];\n      const media: HTMLElement[] = d.map(() => {\n        let media: HTMLElement;\n        if(asStatic) {\n          media = new Image();\n        } else {\n          const video = media = createVideo({middleware});\n          video.muted = true;\n          if(play) video.autoplay = true;\n          if(loop) video.loop = true;\n          video._autoplay = play || false;\n          video._loop = loop || false;\n\n          if(loop && typeof(loop) === 'number') {\n            let previousTime = 0, playedTimes = 0;\n            function onTimeupdate(this: HTMLVideoElement) {\n              if(previousTime > this.currentTime && ++playedTimes === loop as number) {\n                this.autoplay = false;\n                this.loop = false;\n                this.pause();\n                video.removeEventListener('timeupdate', onTimeupdate);\n              }\n\n              (this as any).timeUpdatedTimes = ((this as any).timeUpdatedTimes || 0) + 1;\n\n              previousTime = this.currentTime;\n            }\n\n            video.addEventListener('timeupdate', onTimeupdate);\n            middleware.onClean(() => {\n              video.removeEventListener('timeupdate', onTimeupdate);\n            });\n          }\n        }\n\n        media.classList.add('media-sticker');\n        return media;\n      });\n\n      const thumbImage = (div as HTMLElement[]).map((div, idx) => {\n        const thumb = getThumbFromContainer(div);\n        return (thumb as HTMLElement) !== media[idx] && thumb;\n      }) as HTMLElement[];\n      if(needFadeIn !== false) {\n        needFadeIn = (needFadeIn || !downloaded || (asStatic ? thumbImage[0] : (!thumbImage[0] || thumbImage[0].tagName === 'svg'))) && liteMode.isAvailable('animations');\n      }\n\n      if(needFadeIn) {\n        media.forEach((media) => media.classList.add('fade-in'));\n      }\n\n      const promise = new Promise<HTMLVideoElement[] | HTMLImageElement[]>(async(resolve, reject) => {\n        const r = async() => {\n          if(middleware && !middleware()) {\n            reject(middlewareError);\n            return;\n          }\n\n          const mediaLength = media.length;\n          const loaded: HTMLElement[] = [];\n          const onLoad = (div: HTMLElement, media: HTMLElement, thumbImage: HTMLElement) => {\n            sequentialDom.mutateElement(div, () => {\n              if(middleware && !middleware()) {\n                reject(middlewareError);\n                return;\n              }\n\n              if(!media) {\n                if(!isSingleVideo || !isAnimated) {\n                  UNMOUNT_THUMBS && thumbImage?.remove();\n                }\n\n                return;\n              }\n\n              const isVideo = media instanceof HTMLVideoElement;\n              if(isVideo/*  && media.isConnected */) {\n                // * video sticker can have arbitrary dimensions\n                const {videoWidth, videoHeight} = media;\n                const ratio = videoWidth / videoHeight;\n\n                let w = width * window.devicePixelRatio;\n                let h = height * window.devicePixelRatio;\n                if(ratio < 1) {\n                  w = h * ratio;\n                } else {\n                  h = w / ratio;\n                }\n\n                if(!isSavingLottiePreview(doc, toneIndex, w, h)) {\n                  // const perf = performance.now();\n                  const canvas = document.createElement('canvas');\n                  canvas.width = w;\n                  canvas.height = h;\n                  const ctx = canvas.getContext('2d');\n                  ctx.drawImage(media, 0, 0, canvas.width, canvas.height);\n                  saveLottiePreview(doc, canvas, toneIndex);\n                  // console.log('perf', performance.now() - perf);\n                }\n              }\n\n              if(isSingleVideo) {\n                resolve(media as any);\n                return;\n              }\n\n              if(isVideo && SHOULD_HANDLE_VIDEO_LEAK) {\n                leakVideoFallbacks.set(media, () => {\n                  const reset = () => {\n                    onVideoLeak(media).catch(noop);\n                  };\n\n                  if(!thumbImage || !(thumbImage instanceof HTMLImageElement)) {\n                    const d = document.createElement('div');\n                    wrapSticker({\n                      ...options,\n                      div: d,\n                      static: true,\n                      exportLoad: undefined,\n                      needFadeIn: false,\n                      lazyLoadQueue: undefined\n                      // onlyThumb: true\n                    }).then(({render}) => {\n                      return render;\n                    }).finally(() => {\n                      sequentialDom.mutateElement(media, () => {\n                        if(middleware()) div.append(...Array.from(d.children));\n                        media.remove();\n                        reset();\n                      });\n                    });\n                  } else {\n                    media.replaceWith(thumbImage);\n                    reset();\n                  }\n                });\n\n                if(media.duration < 1 ||\n                  media.getVideoPlaybackQuality().totalVideoFrames < 10) {\n                  const detach = attachVideoLeakListeners(media);\n                  middleware.onClean(detach);\n                }\n              }\n\n              div.append(media);\n\n              if(needFadeIn) {\n                thumbImage && thumbImage.classList.add('fade-out');\n                onAnimationEnd(media, () => {\n                  media.classList.remove('fade-in');\n                  UNMOUNT_THUMBS && thumbImage?.remove();\n                }, 400);\n              } else {\n                UNMOUNT_THUMBS && thumbImage?.remove();\n              }\n\n              if(isAnimated) {\n                animationIntersector.addAnimation({\n                  animation: media as HTMLVideoElement,\n                  observeElement: div,\n                  group,\n                  controlled: middleware,\n                  liteModeKey: liteModeKey || undefined,\n                  type: 'video'\n                });\n              }\n\n              if(loaded.push(media) === mediaLength) {\n                resolve(loaded as any);\n              }\n            });\n          };\n\n          getCacheContext();\n          let lastPromise: Promise<any>;\n          (div as HTMLElement[]).forEach((div, idx) => {\n            const _media = media[idx];\n            const cb = () => onLoad(div, _media, thumbImage[idx]);\n            if(_media) lastPromise = renderImageFromUrlPromise(_media, cacheContext.url, useCache);\n            lastPromise.then(cb);\n          });\n        };\n\n        getCacheContext();\n        if(cacheContext.url) r();\n        else {\n          let promise: Promise<any>;\n          if(stickerType !== 1 && asStatic) {\n            const thumb = choosePhotoSize(doc, width, height, false) as PhotoSize.photoSize;\n            // promise = managers.appDocsManager.getThumbURL(doc, thumb).promise\n            promise = appDownloadManager.downloadMediaURL({media: doc, thumb, queueId: lazyLoadQueue?.queueId});\n          } else {\n            promise = appDownloadManager.downloadMediaURL({media: doc, queueId: lazyLoadQueue?.queueId});\n          }\n\n          promise.then(r, reject);\n        }\n      });\n\n      if(cacheName) {\n        videosCache[cacheName] = promise as any;\n        loadStickerMiddleware && promise.finally(() => {\n          if(!loadStickerMiddleware()) {\n            delete videosCache[cacheName];\n          }\n        });\n      }\n\n      return promise;\n    }\n  };\n\n  if(exportLoad && ((exportLoad === 1 && (!downloaded || isAnimated)) || exportLoad === 2)) {\n    ret.load = load;\n    return ret;\n  }\n\n  const loadPromise: Promise<Awaited<ReturnType<typeof load>> | void> = lazyLoadQueue && (!downloaded || isAnimated) ?\n    (lazyLoadQueue.push({div: div[0], load}), Promise.resolve()) :\n    load();\n\n  if(downloaded && (asStatic/*  || stickerType === 3 */)) {\n    loadThumbPromise = loadPromise as any;\n    loadPromises?.push(loadThumbPromise);\n  }\n\n  if(stickerType === 2 && effectThumb && isOut !== undefined && !noPremium) {\n    attachStickerEffectHandler({\n      container: div[0],\n      doc,\n      managers,\n      middleware,\n      isOut,\n      width,\n      loadPromise,\n      relativeEffect,\n      loopEffect,\n      scrollable,\n      showPremiumInfo\n    });\n  }\n\n  ret.render = loadPromise as any;\n  return ret;\n}\n\nexport async function fireStickerEffect({e, container, doc, managers, middleware, isOut, width, loadPromise, relativeEffect, loopEffect, scrollable, showPremiumInfo}: {\n  e: MouseEvent,\n  container: HTMLElement,\n  doc: MyDocument,\n  managers: AppManagers,\n  middleware: Middleware,\n  isOut: boolean,\n  width: number,\n  loadPromise: Promise<any>,\n  relativeEffect?: boolean,\n  loopEffect?: boolean,\n  scrollable?: Scrollable,\n  showPremiumInfo?: () => void\n}) {\n  const isAvailable = liteMode.isAvailable('effects_premiumstickers') || relativeEffect;\n  cancelEvent(e);\n  if(!e.isTrusted && !isAvailable) {\n    return;\n  }\n\n  if(container.dataset.playing || !isAvailable) {\n    showPremiumInfo?.();\n    return;\n  }\n\n  container.dataset.playing = '1';\n\n  await loadPromise;\n  const {animationDiv, stickerPromise} = wrapStickerAnimation({\n    doc,\n    middleware,\n    side: isOut ? 'right' : 'left',\n    size: width * STICKER_EFFECT_MULTIPLIER,\n    target: container,\n    play: true,\n    fullThumb: getStickerEffectThumb(doc),\n    relativeEffect,\n    loopEffect,\n    scrollable\n  });\n\n  if(isOut !== undefined && !isOut/*  && !relativeEffect */) {\n    animationDiv.classList.add('reflect-x');\n  }\n\n  stickerPromise.then((player) => {\n    player.addEventListener('destroy', () => {\n      delete container.dataset.playing;\n    });\n  });\n}\n\nfunction attachStickerEffectHandler(options: Omit<Parameters<typeof fireStickerEffect>[0], 'e'>) {\n  options.managers.appStickersManager.preloadSticker(options.doc.id, true);\n\n  const detach = attachClickEvent(options.container, (e) => {\n    fireStickerEffect({...options, e});\n  });\n\n  options.middleware.onDestroy(detach);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport windowSize from '../windowSize';\n\nexport default function getVisibleRect(\n  element: HTMLElement,\n  overflowElement: HTMLElement,\n  lookForSticky?: boolean,\n  rect: DOMRectMinified = element.getBoundingClientRect(),\n  overflowRect: DOMRectMinified = overflowElement.getBoundingClientRect()\n) {\n  let {top: overflowTop, right: overflowRight, bottom: overflowBottom, left: overflowLeft} = overflowRect;\n\n  // * respect sticky headers\n  if(lookForSticky) {\n    const sticky = overflowElement.querySelector('.sticky');\n    if(sticky) {\n      const stickyRect = sticky.getBoundingClientRect();\n      overflowTop = stickyRect.bottom;\n    }\n  }\n\n  if(rect.top >= overflowBottom ||\n    rect.bottom <= overflowTop ||\n    rect.right <= overflowLeft ||\n    rect.left >= overflowRight) {\n    return null;\n  }\n\n  const overflow = {\n    top: false,\n    right: false,\n    bottom: false,\n    left: false,\n    vertical: 0 as 0 | 1 | 2,\n    horizontal: 0 as 0 | 1 | 2\n  };\n\n  const windowWidth = windowSize.width;\n  const windowHeight = windowSize.height;\n\n  return {\n    rect: {\n      top: rect.top < overflowTop && overflowTop !== 0 ? (overflow.top = true, ++overflow.vertical, overflowTop) : rect.top,\n      right: rect.right > overflowRight && overflowRight !== windowWidth ? (overflow.right = true, ++overflow.horizontal, overflowRight) : rect.right,\n      bottom: rect.bottom > overflowBottom && overflowBottom !== windowHeight ? (overflow.bottom = true, ++overflow.vertical, overflowBottom) : rect.bottom,\n      left: rect.left < overflowLeft && overflowLeft !== 0 ? (overflow.left = true, ++overflow.horizontal, overflowLeft) : rect.left\n    },\n    overflow\n  };\n}\n\n(window as any).getVisibleRect = getVisibleRect;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport getVisibleRect from './getVisibleRect';\n\nexport type ViewportSlicePart = {element: HTMLElement, rect: DOMRect, visibleRect: ReturnType<typeof getVisibleRect>}[];\n\nexport default function getViewportSlice({\n  overflowElement,\n  overflowRect,\n  selector,\n  extraSize,\n  extraMinLength,\n  elements\n}: {\n  overflowElement: HTMLElement,\n  overflowRect?: DOMRectMinified,\n  extraSize?: number,\n  extraMinLength?: number,\n  selector?: string,\n  elements?: HTMLElement[]\n}) {\n  // const perf = performance.now();\n  overflowRect ??= overflowElement.getBoundingClientRect();\n  elements ??= Array.from(overflowElement.querySelectorAll<HTMLElement>(selector));\n\n  if(extraSize) {\n    overflowRect = {\n      top: overflowRect.top - extraSize,\n      right: overflowRect.right + extraSize,\n      bottom: overflowRect.bottom + extraSize,\n      left: overflowRect.left - extraSize\n    };\n  }\n\n  const invisibleTop: ViewportSlicePart = [],\n    visible: typeof invisibleTop = [],\n    invisibleBottom: typeof invisibleTop = [];\n  let foundVisible = false;\n  for(const element of elements) {\n    const rect = element.getBoundingClientRect();\n    const visibleRect = getVisibleRect(element, overflowElement, false, rect, overflowRect);\n\n    const isVisible = !!visibleRect;\n    let array: typeof invisibleTop;\n    if(isVisible) {\n      foundVisible = true;\n      array = visible;\n    } else if(foundVisible) {\n      array = invisibleBottom;\n    } else {\n      array = invisibleTop;\n    }\n\n    array.push({\n      element,\n      rect,\n      visibleRect\n    });\n  }\n\n  if(extraMinLength) {\n    visible.unshift(...invisibleTop.splice(Math.max(0, invisibleTop.length - extraMinLength), extraMinLength));\n    visible.push(...invisibleBottom.splice(0, extraMinLength));\n  }\n\n  // if(extraSize && visible.length) {\n  //   const maxTop = visible[0].rect.top;\n  //   const minTop = maxTop - extraSize;\n  //   const minBottom = visible[visible.length - 1].rect.bottom;\n  //   const maxBottom = minBottom + extraSize;\n\n  //   for(let length = invisibleTop.length, i = length - 1; i >= 0; --i) {\n  //     const element = invisibleTop[i];\n  //     if(element.rect.top >= minTop) {\n  //       invisibleTop.splice(i, 1);\n  //       visible.unshift(element);\n  //     }\n  //   }\n\n  //   for(let i = 0, length = invisibleBottom.length; i < length; ++i) {\n  //     const element = invisibleBottom[i];\n  //     if(element.rect.bottom <= maxBottom) {\n  //       invisibleBottom.splice(i--, 1);\n  //       --length;\n  //       visible.push(element);\n  //     }\n  //   }\n  // }\n\n  // console.log('getViewportSlice time:', performance.now() - perf);\n\n  return {invisibleTop, visible, invisibleBottom};\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nexport default function replaceContent(elem: HTMLElement, node: string | Node) {\n  if(typeof(node) === 'string') {\n    elem.textContent = node;\n    return;\n  }\n\n  // * children.length doesn't count text nodes\n  const firstChild = elem.firstChild;\n  if(firstChild) {\n    if(elem.lastChild === firstChild) {\n      firstChild.replaceWith(node);\n    } else {\n      elem.textContent = '';\n      elem.append(node);\n    }\n  } else {\n    elem.append(node);\n  }\n}\n","const resizeObserverMap: WeakMap<Element, (entry: ResizeObserverEntry) => void> = new WeakMap();\nconst resizeObserver = new ResizeObserver((entries) => {\n  for(const entry of entries) {\n    const callback = resizeObserverMap.get(entry.target);\n    callback(entry);\n  }\n});\n\nexport function observeResize(element: Element, callback: (entry: ResizeObserverEntry) => void) {\n  resizeObserverMap.set(element, callback);\n  resizeObserver.observe(element);\n\n  return () => {\n    unobserveResize(element);\n  };\n}\n\nexport function unobserveResize(element: Element) {\n  resizeObserverMap.delete(element);\n  resizeObserver.unobserve(element);\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {MyDocument} from '../appManagers/appDocsManager';\nimport animationIntersector, {AnimationItemGroup} from '../../components/animationIntersector';\nimport LazyLoadQueue from '../../components/lazyLoadQueue';\nimport wrapSticker, {videosCache} from '../../components/wrappers/sticker';\nimport customProperties, {CustomProperty} from '../../helpers/dom/customProperties';\nimport findUpClassName from '../../helpers/dom/findUpClassName';\nimport getViewportSlice from '../../helpers/dom/getViewportSlice';\nimport replaceContent from '../../helpers/dom/replaceContent';\nimport framesCache from '../../helpers/framesCache';\nimport {MediaSize} from '../../helpers/mediaSize';\nimport mediaSizes from '../../helpers/mediaSizes';\nimport {Middleware, MiddlewareHelper, getMiddleware} from '../../helpers/middleware';\nimport noop from '../../helpers/noop';\nimport {DocumentAttribute} from '../../layer';\nimport wrapRichText from '../richTextProcessor/wrapRichText';\nimport RLottiePlayer, {applyColorOnContext, getLottiePixelRatio} from '../rlottie/rlottiePlayer';\nimport rootScope from '../rootScope';\nimport CustomEmojiElement, {CustomEmojiElements} from './element';\nimport assumeType from '../../helpers/assumeType';\nimport {IS_WEBM_SUPPORTED} from '../../environment/videoSupport';\nimport {observeResize, unobserveResize} from '../../components/resizeObserver';\n\nconst globalLazyLoadQueue = new LazyLoadQueue();\n\nexport class CustomEmojiRendererElement extends HTMLElement {\n  public static globalLazyLoadQueue: LazyLoadQueue = globalLazyLoadQueue;\n\n  public canvas: HTMLCanvasElement;\n  public context: CanvasRenderingContext2D;\n\n  public playersSynced: Map<CustomEmojiElements, RLottiePlayer | HTMLVideoElement>;\n  public textColored: Set<CustomEmojiElements>;\n  public clearedElements: WeakSet<CustomEmojiElements>;\n  public customEmojis: Parameters<typeof wrapRichText>[1]['customEmojis'];\n  public lastPausedVideo: HTMLVideoElement;\n\n  public lastRect: {width: number, height: number};\n  public isDimensionsSet: boolean;\n\n  public animationGroup: AnimationItemGroup;\n  public size: MediaSize;\n\n  public isSelectable: boolean;\n  public isCanvasClean: boolean;\n\n  public ignoreSettingDimensions: boolean;\n\n  public forceRenderAfterSize: boolean;\n\n  public middlewareHelper: MiddlewareHelper;\n\n  public auto: boolean;\n  public textColor: CustomProperty;\n\n  public observeResizeElement: HTMLElement | false;\n\n  constructor() {\n    super();\n\n    this.classList.add('custom-emoji-renderer');\n    this.canvas = document.createElement('canvas');\n    this.canvas.classList.add('custom-emoji-canvas');\n    this.context = this.canvas.getContext('2d');\n    this.append(this.canvas);\n\n    this.playersSynced = new Map();\n    this.textColored = new Set();\n    this.clearedElements = new WeakSet();\n    this.customEmojis = new Map();\n\n    this.animationGroup = 'EMOJI';\n    this.isCanvasClean = false;\n  }\n\n  private onResizeEntry = (entry: ResizeObserverEntry) => {\n    this.setDimensionsFromRect(entry.contentRect);\n  };\n\n  public connectedCallback() {\n    if(emojiRenderers.has(this)) {\n      return;\n    }\n\n    // this.setDimensions();\n    // animationIntersector.addAnimation(this, this.animationGroup);\n    const observeElement = this.observeResizeElement ?? this.canvas;\n    if(observeElement) {\n      observeResize(observeElement, this.onResizeEntry);\n    }\n    emojiRenderers.add(this);\n\n    this.connectedCallback = undefined;\n  }\n\n  public disconnectedCallback() {\n    if(this.isConnected || !this.auto) {\n      return;\n    }\n\n    this.destroy?.();\n\n    this.disconnectedCallback = undefined;\n  }\n\n  public destroy() {\n    // if(this.isConnected) {\n    //   return;\n    // }\n\n    const observeElement = this.observeResizeElement ?? this.canvas;\n    if(observeElement) {\n      unobserveResize(observeElement);\n    }\n\n    this.customEmojis.forEach((elements) => {\n      elements.forEach((element) => {\n        element.clear();\n      });\n    });\n\n    emojiRenderers.delete(this);\n    this.playersSynced.clear();\n    this.middlewareHelper?.clean();\n    this.customEmojis.clear();\n    this.textColored.clear();\n\n    this.destroy =\n      this.lastPausedVideo =\n      undefined;\n  }\n\n  public getOffsets(offsetsMap: Map<CustomEmojiElements, {top: number, left: number, width: number}[]> = new Map()) {\n    if(!this.playersSynced.size) {\n      return offsetsMap;\n    }\n\n    const overflowElement = findUpClassName(this, 'scrollable') || this.offsetParent as HTMLElement;\n    if(!overflowElement) {\n      return offsetsMap;\n    }\n\n    const overflowRect = overflowElement.getBoundingClientRect();\n    const rect = this.getBoundingClientRect();\n\n    for(const elements of this.playersSynced.keys()) {\n      const elementsArr = Array.from(elements);\n      const placeholders = this.isSelectable ? elementsArr.map((element) => element.placeholder) : elementsArr;\n      const {visible} = getViewportSlice({\n        overflowElement,\n        overflowRect,\n        elements: placeholders,\n        extraSize: this.size.height * 2.5 // let's add some margin\n      });\n\n      const offsets = visible.map(({rect: elementRect}) => {\n        const top = elementRect.top - rect.top;\n        const left = elementRect.left - rect.left;\n        return {top, left, width: elementRect.width};\n      });\n\n      if(offsets.length) {\n        offsetsMap.set(elements, offsets);\n      }\n    }\n\n    // const rect = this.getBoundingClientRect();\n    // const visibleRect = getVisibleRect(this, overflowElement, undefined, rect);\n    // const minTop = visibleRect ? visibleRect.rect.top - this.size.height : 0;\n    // const maxTop = Infinity;\n    // for(const elements of this.playersSynced.keys()) {\n    //   const offsets = elements.map((element) => {\n    //     const elementRect = element.getBoundingClientRect();\n    //     const top = elementRect.top - rect.top;\n    //     const left = elementRect.left - rect.left;\n    //     return top >= minTop && (top + elementRect.height) <= maxTop ? {top, left} : undefined;\n    //   }).filter(Boolean);\n\n    //   if(offsets.length) {\n    //     offsetsMap.set(elements, offsets);\n    //   }\n    // }\n\n    return offsetsMap;\n  }\n\n  public clearCanvas() {\n    if(this.isCanvasClean) {\n      return;\n    }\n\n    const {context, canvas} = this;\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    this.isCanvasClean = true;\n  }\n\n  public render(offsetsMap: ReturnType<CustomEmojiRendererElement['getOffsets']>) {\n    const {context, canvas, isDimensionsSet} = this;\n    if(!isDimensionsSet) {\n      this.setDimensionsFromRect(undefined, false);\n    }\n\n    this.isCanvasClean = false;\n\n    const {width, height, dpr} = canvas;\n    for(const [elements, offsets] of offsetsMap) {\n      const player = this.playersSynced.get(elements);\n      const frame = syncedPlayersFrames.get(player) || (player instanceof HTMLVideoElement ? player : undefined);\n      if(!frame) {\n        continue;\n      }\n\n      const isImageData = frame instanceof ImageData;\n      let frameWidth: number, frameHeight: number;\n      if(player instanceof HTMLVideoElement) {\n        frameWidth = this.size.width * dpr;\n        frameHeight = this.size.height * dpr;\n      } else {\n        frameWidth = frame.width;\n        frameHeight = frame.height;\n      }\n\n      // ! check performance of scaling\n      const elementWidth = Math.round(offsets[0].width * dpr);\n      if(elementWidth !== frameWidth) {\n        // if(this.size.width === 36) {\n        //   console.warn('different width', elementWidth, frameWidth, this);\n        // }\n\n        frameWidth = elementWidth;\n        frameHeight = elementWidth;\n      }\n\n      const maxTop = height - frameHeight;\n      const maxLeft = width - frameWidth;\n      const color = this.textColored.has(elements) ? customProperties.getProperty(this.textColor) : undefined;\n\n      if(!this.clearedElements.has(elements) && !this.isSelectable) {\n        if(this.isSelectable/*  && false */) {\n          elements.forEach((element) => {\n            element.lastChildWas ??= element.lastChild;\n            replaceContent(element, element.firstChild);\n          });\n        } else {\n          elements.forEach((element) => {\n            element.replaceChildren();\n          });\n        }\n\n        this.clearedElements.add(elements);\n      }\n\n      offsets.forEach(({top, left}) => {\n        top = Math.round(top * dpr), left = Math.round(left * dpr);\n        if(left < 0 ||/* top > maxTop ||  */left > maxLeft) {\n          return;\n        }\n\n        if(isImageData) {\n          context.putImageData(frame, left, top);\n        } else {\n          // context.clearRect(left, top, width, height);\n          context.drawImage(frame, left, top, frameWidth, frameHeight);\n        }\n\n        if(color) {\n          applyColorOnContext(context, color, left, top, frameWidth, frameHeight);\n        }\n      });\n    }\n  }\n\n  public checkForAnyFrame() {\n    for(const player of this.playersSynced.values()) {\n      if(syncedPlayersFrames.has(player) || player instanceof HTMLVideoElement) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  public remove() {\n    super.remove();\n    // this.canvas.remove();\n  }\n\n  // public setDimensions() {\n  //   const {canvas} = this;\n  //   sequentialDom.mutateElement(canvas, () => {\n  //     const rect = canvas.getBoundingClientRect();\n  //     this.setDimensionsFromRect(rect);\n  //   });\n  // }\n\n  public setDimensionsFromRect(rect: {width: number, height: number} = this.lastRect, forceRenderAfter = true) {\n    const {canvas} = this;\n    const {dpr} = canvas;\n\n    if(this.lastRect !== rect) {\n      this.lastRect = rect;\n    }\n\n    if(!rect || !dpr || this.ignoreSettingDimensions) {\n      return;\n    }\n\n    const {width, height} = rect;\n    // if(this.isSelectable) {\n    //   height = this.parentElement.scrollHeight || height;\n\n    //   this.style.width = width + 'px';\n    //   this.style.height = height + 'px';\n    // }\n\n    const newWidth = Math.floor(Math.round(width * dpr));\n    const newHeight = Math.floor(Math.round(height * dpr));\n    if(canvas.width === newWidth && canvas.height === newHeight) {\n      return;\n    }\n\n    canvas.width = newWidth;\n    canvas.height = newHeight;\n    this.isDimensionsSet = true;\n    this.isCanvasClean = true;\n\n    if(this.observeResizeElement || this.observeResizeElement === false) {\n      this.canvas.style.setProperty('width', width + 'px', 'important');\n      this.canvas.style.setProperty('height', height + 'px', 'important');\n    }\n\n    if(this.forceRenderAfterSize || (this.isSelectable && forceRenderAfter)) {\n      this.forceRenderAfterSize = undefined;\n      this.forceRender();\n    }\n  }\n\n  public forceRender() {\n    if(!this.isDimensionsSet) {\n      return;\n    }\n\n    if(!renderEmojis(new Set([this]))) {\n      this.clearCanvas();\n    }\n  }\n\n  private onElementCleanup = (element: CustomEmojiElement, syncedPlayer: SyncedPlayer, middleware: Middleware) => {\n    element.clear(); // * it is correct\n\n    syncedPlayer.middlewares.delete(middleware);\n\n    // * still has some elements\n    if(syncedPlayer.middlewares.size) {\n      return;\n    }\n\n    if(syncedPlayer.player) {\n      const frame = syncedPlayersFrames.get(syncedPlayer.player);\n      if(frame) {\n        (frame as ImageBitmap).close?.();\n        syncedPlayersFrames.delete(syncedPlayer.player);\n      }\n\n      syncedPlayersFrames.delete(syncedPlayer.player);\n      if(syncedPlayer.player instanceof RLottiePlayer) {\n        syncedPlayer.player.overrideRender = noop;\n        syncedPlayer.player.remove();\n      } else if(syncedPlayer.player instanceof HTMLVideoElement) {\n        const cacheName = framesCache.generateName('' + element.docId, 0, 0, undefined, undefined);\n        delete videosCache[cacheName];\n      }\n\n      syncedPlayer.player = undefined;\n    }\n\n    if(\n      syncedPlayers.get(syncedPlayer.key) === syncedPlayer &&\n      syncedPlayers.delete(syncedPlayer.key) &&\n      !syncedPlayers.size\n    ) {\n      clearRenderInterval();\n    }\n  };\n\n  private wrap({\n    doc,\n    addCustomEmojis,\n    usingOwnQueue,\n    lazyLoadQueue,\n    onlyThumb,\n    withThumb,\n    loadPromises\n  }: {\n    doc: MyDocument,\n    addCustomEmojis: Parameters<typeof wrapRichText>[1]['customEmojis'],\n    usingOwnQueue?: boolean,\n    lazyLoadQueue?: LazyLoadQueue | false,\n    onlyThumb?: boolean,\n    withThumb?: boolean,\n    loadPromises?: Promise<any>[]\n  }) {\n    const renderer = this;\n    const size = this.size;\n    const managers = rootScope.managers;\n    const middleware = this.middlewareHelper.get();\n\n    const docId = doc.id;\n    const newElements = addCustomEmojis.get(docId);\n    const customEmojis = renderer.customEmojis.get(docId);\n    const newElementsArray = Array.from(newElements);\n    const isLottie = doc.sticker === 2;\n    const isStatic = newElementsArray[0].static || (doc.mime_type === 'video/webm' && !IS_WEBM_SUPPORTED);\n    const willHaveSyncedPlayer = (isLottie || (doc.sticker === 3 && this.isSelectable)) && !onlyThumb && !isStatic;\n\n    const attribute = doc.attributes.find((attribute) => attribute._ === 'documentAttributeCustomEmoji') as DocumentAttribute.documentAttributeCustomEmoji;\n    if(attribute && attribute.pFlags.text_color) {\n      renderer.textColored.add(customEmojis);\n    }\n\n    const loadStickerMiddleware = willHaveSyncedPlayer ? middleware.create().get(() => {\n      return !!syncedPlayer.middlewares.size;\n    }) : undefined;\n\n    const _loadPromises: Promise<any>[] = [];\n    const promise = wrapSticker({\n      div: newElementsArray,\n      doc,\n      width: size.width,\n      height: size.height,\n      loop: true,\n      play: CUSTOM_EMOJI_INSTANT_PLAY,\n      managers,\n      isCustomEmoji: true,\n      group: 'none',\n      loadPromises: _loadPromises,\n      middleware,\n      exportLoad: usingOwnQueue || lazyLoadQueue === false ? 2 : 1, // 2 - export load always, 1 - do not export load if cached static\n      needFadeIn: false,\n      loadStickerMiddleware,\n      static: isStatic,\n      onlyThumb,\n      withThumb: withThumb ?? (renderer.clearedElements.has(customEmojis) ? false : undefined),\n      syncedVideo: this.isSelectable,\n      textColor: renderer.textColor\n    });\n\n    if(loadPromises) {\n      promise.then(() => loadPromises.push(..._loadPromises));\n    }\n\n    const addition: {\n      onRender?: (_p: Awaited<Awaited<typeof promise>['render']>) => Promise<void>,\n      elements: typeof newElements\n    } = {\n      elements: newElements\n    };\n\n    const readyPromise = newElementsArray[0].readyPromise;\n    if(readyPromise) {\n      promise.then(({render}) => {\n        if(!render) {\n          readyPromise.resolve();\n          return;\n        }\n\n        render.then(\n          () => readyPromise.resolve(),\n          readyPromise.reject.bind(readyPromise)\n        );\n      });\n    }\n\n    if(doc.sticker === 1 || onlyThumb || isStatic) {\n      if(this.isSelectable) {\n        addition.onRender = () => Promise.all(_loadPromises).then(() => {\n          if(!middleware()) return;\n          newElementsArray.forEach((element) => {\n            const {placeholder} = element;\n            placeholder.src = (element.firstElementChild as HTMLImageElement).src;\n          });\n        });\n      }\n\n      return promise.then((res) => ({...res, ...addition}));\n    }\n\n    // eslint-disable-next-line prefer-const\n    addition.onRender = (_p) => Promise.all(_loadPromises).then(() => {\n      if(!middleware() || !doc.animated) {\n        return;\n      }\n\n      const players = Array.isArray(_p) ? _p as HTMLVideoElement[] : [_p as RLottiePlayer];\n      const player = Array.isArray(players) ? players[0] : players;\n      assumeType<RLottiePlayer | HTMLVideoElement>(player);\n      newElementsArray.forEach((element, idx) => {\n        const player = players[idx] || players[0];\n        element.player = player;\n\n        if(syncedPlayer) {\n          element.syncedPlayer = syncedPlayer;\n          if(element.paused) {\n            element.syncedPlayer.pausedElements.add(element);\n          } else if(player.paused) {\n            player.play();\n          }\n        }\n\n        if(element.isConnected || middleware()) {\n          animationIntersector.addAnimation({\n            animation: element,\n            group: element.renderer.animationGroup,\n            observeElement: element.placeholder ?? element,\n            controlled: true,\n            type: 'emoji'\n          });\n        }\n      });\n\n      if(player instanceof RLottiePlayer || (player instanceof HTMLVideoElement && this.isSelectable)) {\n        syncedPlayer.player = player;\n        renderer.playersSynced.set(customEmojis, player);\n      }\n\n      if(player instanceof RLottiePlayer) {\n        player.group = renderer.animationGroup;\n\n        player.overrideRender ??= (frame) => {\n          syncedPlayersFrames.set(player, frame);\n          // frames.set(containers, frame);\n        };\n      } else if(player instanceof HTMLVideoElement) {\n        // player.play();\n\n        // const cache = framesCache.getCache(key);\n        // let {width, height} = renderer.size;\n        // width *= dpr;\n        // height *= dpr;\n\n        // const onFrame = (frame: ImageBitmap | HTMLCanvasElement) => {\n        //   topFrames.set(player, frame);\n        //   player.requestVideoFrameCallback(callback);\n        // };\n\n        // let frameNo = -1, lastTime = 0;\n        // const callback: VideoFrameRequestCallback = (now, metadata) => {\n        //   const time = player.currentTime;\n        //   if(lastTime > time) {\n        //     frameNo = -1;\n        //   }\n\n        //   const _frameNo = ++frameNo;\n        //   lastTime = time;\n        //   // const frameNo = Math.floor(player.currentTime * 1000 / CUSTOM_EMOJI_FRAME_INTERVAL);\n        //   // const frameNo = metadata.presentedFrames;\n        //   const imageBitmap = cache.framesNew.get(_frameNo);\n\n        //   if(imageBitmap) {\n        //     onFrame(imageBitmap);\n        //   } else if(IS_IMAGE_BITMAP_SUPPORTED) {\n        //     createImageBitmap(player, {resizeWidth: width, resizeHeight: height}).then((imageBitmap) => {\n        //       cache.framesNew.set(_frameNo, imageBitmap);\n        //       if(frameNo === _frameNo) onFrame(imageBitmap);\n        //     });\n        //   } else {\n        //     const canvas = document.createElement('canvas');\n        //     const context = canvas.getContext('2d');\n        //     canvas.width = width;\n        //     canvas.height = height;\n        //     context.drawImage(player, 0, 0);\n        //     cache.framesNew.set(_frameNo, canvas);\n        //     onFrame(canvas);\n        //   }\n        // };\n\n        // // player.requestVideoFrameCallback(callback);\n        // // setInterval(callback, CUSTOM_EMOJI_FRAME_INTERVAL);\n      }\n\n      if(willHaveSyncedPlayer) {\n        const dpr = getLottiePixelRatio(this.size.width, this.size.height);\n        renderer.canvas.dpr = dpr;\n        setRenderInterval();\n      }\n    });\n\n    let syncedPlayer: SyncedPlayer;\n    const key = [docId, size.width, size.height].join('-');\n    if(willHaveSyncedPlayer) {\n      syncedPlayer = syncedPlayers.get(key);\n      if(!syncedPlayer) {\n        syncedPlayer = {\n          player: undefined,\n          middlewares: new Set(),\n          pausedElements: new Set(),\n          key\n        };\n\n        syncedPlayers.set(key, syncedPlayer);\n      }\n\n      for(const element of newElements) {\n        const middleware = element.middlewareHelper.get();\n        syncedPlayer.middlewares.add(middleware);\n        middleware.onClean(this.onElementCleanup.bind(this, element, syncedPlayer, middleware));\n      }\n    }\n\n    return promise.then((res) => ({...res, ...addition}));\n  }\n\n  public add({\n    addCustomEmojis,\n    lazyLoadQueue,\n    onlyThumb,\n    withThumb\n  }: {\n    addCustomEmojis: Parameters<typeof wrapRichText>[1]['customEmojis'],\n    lazyLoadQueue?: LazyLoadQueue | false,\n    onlyThumb?: boolean,\n    withThumb?: boolean\n  }) {\n    const renderer = this;\n    const middleware = this.middlewareHelper.get();\n\n    addCustomEmojis.forEach((addElements, docId) => { // prevent adding old elements\n      let elements = this.customEmojis.get(docId);\n      if(!elements) this.customEmojis.set(docId, elements = new Set());\n      else this.clearedElements.delete(elements);\n\n      for(const el of addElements) {\n        if(elements.has(el)) {\n          addElements.delete(el);\n        } else {\n          el.clean = false;\n          el.renderer = renderer;\n          el.elements = elements;\n          el.middlewareHelper = middleware.create();\n          elements.add(el);\n\n          if(el.lastChildWas && !el.lastChildWas.parentNode) {\n            el.append(el.lastChildWas);\n          }\n        }\n      }\n\n      if(!addElements.size) {\n        addCustomEmojis.delete(docId);\n      }\n    });\n\n    if(!addCustomEmojis.size) {\n      return;\n    }\n\n    const usingOwnQueue = !!(!lazyLoadQueue && lazyLoadQueue !== false && globalLazyLoadQueue);\n    const docIds = Array.from(addCustomEmojis.keys());\n    const managers = rootScope.managers;\n\n    const loadPromise = managers.appEmojiManager.getCachedCustomEmojiDocuments(docIds).then((docs) => {\n      if(!middleware()) return;\n\n      const wrapOptions: Omit<Parameters<CustomEmojiRendererElement['wrap']>[0], 'doc'> = {\n        addCustomEmojis,\n        usingOwnQueue,\n        lazyLoadQueue,\n        onlyThumb,\n        withThumb\n      };\n\n      const loadPromises: Promise<any>[] = [];\n\n      const missing: DocId[] = [];\n      const cachedPromises = docs.map((doc, idx) => {\n        if(!doc) {\n          missing.push(docIds[idx]);\n          return;\n        }\n\n        return this.wrap({...wrapOptions, doc, loadPromises});\n      }).filter(Boolean);\n\n      const uncachedPromisesPromise = !missing.length ?\n        Promise.resolve([] as typeof cachedPromises) :\n        managers.appEmojiManager.getCustomEmojiDocuments(missing).then((docs) => {\n          if(!middleware()) return [];\n          return docs.filter(Boolean).map((doc) => this.wrap({...wrapOptions, doc}));\n        });\n\n      const loadFromPromises = async(_promises: typeof cachedPromises) => {\n        const arr = await Promise.all(_promises);\n        const promises = arr.map(({load, onRender, elements}) => {\n          if(!load) {\n            return;\n          }\n\n          const l = () => load().then(onRender);\n\n          if(!usingOwnQueue) {\n            return l();\n          }\n\n          elements.forEach((element) => {\n            globalLazyLoadQueue.push({\n              div: element,\n              load: () => {\n                elements.forEach((element) => {\n                  globalLazyLoadQueue.delete({div: element});\n                });\n\n                return l();\n              }\n            });\n          });\n        });\n\n        return Promise.all(promises.filter(Boolean));\n      };\n\n      const load = () => {\n        if(!middleware()) return;\n        const cached = loadFromPromises(cachedPromises);\n        const uncached = uncachedPromisesPromise.then((promises) => loadFromPromises(promises));\n        return Promise.all([cached, uncached]);\n      };\n\n      if(lazyLoadQueue) {\n        lazyLoadQueue.push({\n          div: renderer.canvas,\n          load\n        });\n      } else {\n        load();\n      }\n\n      return Promise.all(cachedPromises).then(() => Promise.all(loadPromises)).then(() => {});\n    });\n\n    // recordPromise(loadPromise, 'render emojis: ' + docIds.length);\n\n    return loadPromise;\n  }\n\n  public setTextColor(textColor: string) {\n    this.textColor = textColor;\n  }\n\n  public static create(options: CustomEmojiRendererElementOptions) {\n    const renderer = new CustomEmojiRendererElement();\n    renderer.animationGroup = options.animationGroup;\n    renderer.size = options.customEmojiSize || mediaSizes.active.customEmoji;\n    renderer.isSelectable = options.isSelectable;\n    renderer.textColor = options.textColor;\n    // renderer.textColor = typeof(options.textColor) === 'function' ? options.textColor() : options.textColor;\n    renderer.observeResizeElement = options.observeResizeElement;\n    if(options.wrappingDraft) {\n      renderer.contentEditable = 'false';\n      renderer.style.height = 'inherit';\n    }\n    // const middleware = () => !!renderer.disconnectedCallback && (!options.middleware || options.middleware());\n    const middleware = options.middleware;\n    if(middleware) {\n      renderer.middlewareHelper = middleware.create();\n      renderer.middlewareHelper.get().onDestroy(() => {\n        renderer.destroy?.();\n      });\n    } else {\n      // console.error('no middleware', this, options);\n      renderer.auto = true;\n      renderer.middlewareHelper = getMiddleware();\n    }\n\n    return renderer;\n  }\n}\n\nexport type CustomEmojiRenderer = CustomEmojiRendererElement;\nexport type SyncedPlayer = {\n  player: RLottiePlayer | HTMLVideoElement,\n  middlewares: Set<Middleware>,\n  pausedElements: Set<CustomEmojiElement>,\n  key: string\n};\nexport type CustomEmojiFrame = Parameters<RLottiePlayer['overrideRender']>[0] | HTMLVideoElement;\n\nexport type CustomEmojiRendererElementOptions = Partial<{\n  loadPromises: Promise<any>[],\n  customEmojiRenderer: CustomEmojiRendererElement,\n\n  isSelectable: boolean,\n  wrappingDraft: boolean,\n\n  observeResizeElement?: HTMLElement | false\n}> & WrapSomethingOptions;\n\nconst CUSTOM_EMOJI_INSTANT_PLAY = true; // do not wait for animationIntersector\nlet emojiRenderInterval: number;\nconst emojiRenderers: Set<CustomEmojiRenderer> = new Set();\nconst syncedPlayers: Map<string, SyncedPlayer> = new Map();\nconst syncedPlayersFrames: Map<RLottiePlayer | HTMLVideoElement, CustomEmojiFrame> = new Map();\nexport const renderEmojis = (renderers = emojiRenderers) => {\n  const r = Array.from(renderers);\n  const t = r.filter((r) => r.isConnected && r.checkForAnyFrame() && !r.ignoreSettingDimensions);\n  if(!t.length) {\n    return false;\n  }\n\n  const o = t.map((renderer) => {\n    const paused = [...renderer.playersSynced.values()].reduce((acc, v) => acc + +!!v.paused, 0);\n    if(renderer.playersSynced.size === paused) {\n      return;\n    }\n\n    const offsets = renderer.getOffsets();\n    if(offsets.size) {\n      return [renderer, offsets] as const;\n    }\n  }).filter(Boolean);\n\n  for(const [renderer] of o) {\n    renderer.clearCanvas();\n  }\n\n  for(const [renderer, offsets] of o) {\n    renderer.render(offsets);\n  }\n\n  return true;\n};\nconst CUSTOM_EMOJI_FPS = 60;\nconst CUSTOM_EMOJI_FRAME_INTERVAL = 1000 / CUSTOM_EMOJI_FPS;\nconst setRenderInterval = () => {\n  if(emojiRenderInterval) {\n    return;\n  }\n\n  emojiRenderInterval = window.setInterval(renderEmojis, CUSTOM_EMOJI_FRAME_INTERVAL);\n  renderEmojis();\n};\nconst clearRenderInterval = () => {\n  if(!emojiRenderInterval) {\n    return;\n  }\n\n  clearInterval(emojiRenderInterval);\n  emojiRenderInterval = undefined;\n};\n\n(window as any).syncedPlayers = syncedPlayers;\n(window as any).emojiRenderers = emojiRenderers;\n\ncustomElements.define('custom-emoji-renderer-element', CustomEmojiRendererElement);\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {CancellablePromise} from '../../helpers/cancellablePromise';\nimport animationIntersector from '../../components/animationIntersector';\nimport safePlay from '../../helpers/dom/safePlay';\nimport {MiddlewareHelper} from '../../helpers/middleware';\nimport {createCustomFiller} from '../richTextProcessor/wrapRichText';\nimport RLottiePlayer from '../rlottie/rlottiePlayer';\nimport {CustomEmojiRendererElement, SyncedPlayer} from './renderer';\n\nexport type CustomEmojiElements = Set<CustomEmojiElement>;\n\nexport default class CustomEmojiElement extends HTMLElement {\n  public elements: CustomEmojiElements;\n  public renderer: CustomEmojiRendererElement;\n  public player: RLottiePlayer | HTMLVideoElement;\n  public paused: boolean;\n  public syncedPlayer: SyncedPlayer;\n  public clean: boolean;\n  public lastChildWas: Node;\n  // public docId: DocId;\n  public placeholder: HTMLImageElement;\n  public middlewareHelper: MiddlewareHelper;\n  public static: boolean;\n  public readyPromise: CancellablePromise<void>;\n\n  constructor() {\n    super();\n    this.paused = true;\n    this.classList.add('custom-emoji');\n  }\n\n  public get docId() {\n    return this.dataset.docId;\n  }\n\n  public set docId(docId: DocId) {\n    this.dataset.docId = '' + docId;\n  }\n\n  public static create(docId?: DocId) {\n    const element = new CustomEmojiElement();\n    if(docId) element.docId = docId;\n    return element;\n  }\n\n  public get isConnected() {\n    return this.placeholder?.isConnected ?? super.isConnected;\n  }\n\n  public connectedCallback() {\n    // if(this.isConnected) {\n    //   return;\n    // }\n\n    if(this.player) {\n      animationIntersector.addAnimation({\n        animation: this,\n        group: this.renderer.animationGroup,\n        observeElement: this.placeholder ?? this,\n        controlled: true,\n        type: 'emoji'\n      });\n    }\n\n    // this.connectedCallback = undefined;\n  }\n\n  public disconnectedCallback() {\n    if(this.isConnected || !this.renderer?.isSelectable) { // prepend on sibling can invoke disconnectedCallback\n      return;\n    }\n\n    this.clear();\n  }\n\n  public destroy() {\n    this.clear();\n  }\n\n  public clear(replaceChildren = true) {\n    if(this.clean) {\n      return;\n    }\n\n    // if(this.docId === '5399836826758290421') {\n    //   console.log('clear', this, this.isConnected);\n    // }\n\n    this.clean = true;\n    this.pause();\n\n    const {syncedPlayer} = this;\n    if(syncedPlayer) {\n      syncedPlayer.pausedElements.delete(this);\n    }\n\n    this.middlewareHelper?.clean();\n    this.readyPromise?.reject();\n\n    if(this.renderer) {\n      const elements = this.renderer.customEmojis.get(this.docId);\n      if(elements?.delete(this) && !elements.size) {\n        this.renderer.customEmojis.delete(this.docId);\n        this.renderer.textColored.delete(elements);\n        this.renderer.playersSynced.delete(elements);\n      }\n\n      if(replaceChildren) {\n        if(this.renderer.isSelectable) {\n          this.replaceChildren(createCustomFiller(true));\n        } else {\n          // otherwise https://bugs.chromium.org/p/chromium/issues/detail?id=1144736#c27 will happen\n          this.replaceChildren();\n        }\n      }\n    }\n\n    if(this.player) {\n      animationIntersector.removeAnimationByPlayer(this);\n    }\n\n    CustomEmojiRendererElement.globalLazyLoadQueue?.delete({div: this});\n\n    /* this.disconnectedCallback =  */this.elements =\n      this.renderer =\n      this.player =\n      this.syncedPlayer =\n      undefined;\n  }\n\n  public pause() {\n    if(this.paused) {\n      return;\n    }\n\n    this.paused = true;\n\n    if(this.player instanceof HTMLVideoElement && !this.syncedPlayer) {\n      this.renderer.lastPausedVideo = this.player;\n      this.player.pause();\n    }\n\n    if(this.syncedPlayer && !this.syncedPlayer.pausedElements.has(this)) {\n      this.syncedPlayer.pausedElements.add(this);\n\n      if(this.syncedPlayer.player && this.syncedPlayer.pausedElements.size === this.syncedPlayer.middlewares.size) {\n        this.syncedPlayer.player.pause();\n      }\n    }\n  }\n\n  public play() {\n    if(!this.paused) {\n      return;\n    }\n\n    this.paused = false;\n\n    if(this.player instanceof HTMLVideoElement) {\n      this.player.currentTime = this.renderer.lastPausedVideo?.currentTime ?? this.player.currentTime;\n      safePlay(this.player);\n    }\n\n    if(this.syncedPlayer && this.syncedPlayer.pausedElements.has(this)) {\n      this.syncedPlayer.pausedElements.delete(this);\n\n      if(this.syncedPlayer.pausedElements.size !== this.syncedPlayer.middlewares.size) {\n        this.player.play();\n      }\n    }\n  }\n\n  public remove() {\n    super.remove();\n    this.clear();\n    // this.elements = this.renderer = this.player = undefined;\n  }\n\n  public get autoplay() {\n    return true;\n  }\n\n  public get loop() {\n    return true;\n  }\n}\n\ncustomElements.define('custom-emoji-element', CustomEmojiElement);\n","import callbackify from './helpers/callbackify';\n\nexport const CodeLanguageMap: {[key: string]: string[]} = {\n  'Markup': [\n    'markup',\n    'html',\n    'xml',\n    'svg',\n    'mathml',\n    'ssml',\n    'atom',\n    'rss'\n  ],\n  'CSS': [\n    'css'\n  ],\n  'C-like': [\n    'clike'\n  ],\n  'Regex': [\n    'regex'\n  ],\n  'JavaScript': [\n    'javascript',\n    'js'\n  ],\n  'ABAP': [\n    'abap'\n  ],\n  'ABNF': [\n    'abnf'\n  ],\n  'ActionScript': [\n    'actionscript'\n  ],\n  'Ada': [\n    'ada'\n  ],\n  'Agda': [\n    'agda'\n  ],\n  'AL': [\n    'al'\n  ],\n  'ANTLR4': [\n    'antlr4',\n    'g4'\n  ],\n  'Apache Configuration': [\n    'apacheconf'\n  ],\n  'SQL': [\n    'sql'\n  ],\n  'Apex': [\n    'apex'\n  ],\n  'APL': [\n    'apl'\n  ],\n  'AppleScript': [\n    'applescript'\n  ],\n  'AQL': [\n    'aql'\n  ],\n  'C': [\n    'c'\n  ],\n  'C++': [\n    'cpp'\n  ],\n  'Arduino': [\n    'arduino',\n    'ino'\n  ],\n  'ARFF': [\n    'arff'\n  ],\n  'ARM Assembly': [\n    'armasm',\n    'arm-asm'\n  ],\n  'Bash': [\n    'bash',\n    'sh',\n    'shell'\n  ],\n  'YAML': [\n    'yaml',\n    'yml'\n  ],\n  'Markdown': [\n    'markdown',\n    'md'\n  ],\n  'Arturo': [\n    'arturo',\n    'art'\n  ],\n  'AsciiDoc': [\n    'asciidoc',\n    'adoc'\n  ],\n  'C#': [\n    'csharp',\n    'cs',\n    'dotnet'\n  ],\n  'ASP.NET (C#)': [\n    'aspnet'\n  ],\n  '6502 Assembly': [\n    'asm6502'\n  ],\n  'Atmel AVR Assembly': [\n    'asmatmel'\n  ],\n  'AutoHotkey': [\n    'autohotkey'\n  ],\n  'AutoIt': [\n    'autoit'\n  ],\n  'AviSynth': [\n    'avisynth',\n    'avs'\n  ],\n  'Avro IDL': [\n    'avro-idl',\n    'avdl'\n  ],\n  'AWK': [\n    'awk',\n    'gawk'\n  ],\n  'BASIC': [\n    'basic'\n  ],\n  'Batch': [\n    'batch'\n  ],\n  'BBcode': [\n    'bbcode',\n    'shortcode'\n  ],\n  'BBj': [\n    'bbj'\n  ],\n  'Bicep': [\n    'bicep'\n  ],\n  'Birb': [\n    'birb'\n  ],\n  'Bison': [\n    'bison'\n  ],\n  'BNF': [\n    'bnf',\n    'rbnf'\n  ],\n  'BQN': [\n    'bqn'\n  ],\n  'Brainfuck': [\n    'brainfuck'\n  ],\n  'BrightScript': [\n    'brightscript'\n  ],\n  'Bro': [\n    'bro'\n  ],\n  'CFScript': [\n    'cfscript',\n    'cfc'\n  ],\n  'ChaiScript': [\n    'chaiscript'\n  ],\n  'CIL': [\n    'cil'\n  ],\n  'Cilk/C': [\n    'cilkc',\n    'cilk-c'\n  ],\n  'Cilk/C++': [\n    'cilkcpp',\n    'cilk-cpp',\n    'cilk'\n  ],\n  'Clojure': [\n    'clojure'\n  ],\n  'CMake': [\n    'cmake'\n  ],\n  'COBOL': [\n    'cobol'\n  ],\n  'CoffeeScript': [\n    'coffeescript',\n    'coffee'\n  ],\n  'Concurnas': [\n    'concurnas',\n    'conc'\n  ],\n  'Content-Security-Policy': [\n    'csp'\n  ],\n  'Cooklang': [\n    'cooklang'\n  ],\n  'Ruby': [\n    'ruby',\n    'rb'\n  ],\n  'Crystal': [\n    'crystal'\n  ],\n  'CSV': [\n    'csv'\n  ],\n  'CUE': [\n    'cue'\n  ],\n  'Cypher': [\n    'cypher'\n  ],\n  'D': [\n    'd'\n  ],\n  'Dart': [\n    'dart'\n  ],\n  'DataWeave': [\n    'dataweave'\n  ],\n  'DAX': [\n    'dax'\n  ],\n  'Dhall': [\n    'dhall'\n  ],\n  'Diff': [\n    'diff'\n  ],\n  'Markup templating': [\n    'markup-templating'\n  ],\n  'Django/Jinja2': [\n    'django',\n    'jinja2'\n  ],\n  'DNS zone file': [\n    'dns-zone-file',\n    'dns-zone'\n  ],\n  'Docker': [\n    'docker',\n    'dockerfile'\n  ],\n  'DOT (Graphviz)': [\n    'dot',\n    'gv'\n  ],\n  'EBNF': [\n    'ebnf'\n  ],\n  'EditorConfig': [\n    'editorconfig'\n  ],\n  'Eiffel': [\n    'eiffel'\n  ],\n  'EJS': [\n    'ejs',\n    'eta'\n  ],\n  'Elixir': [\n    'elixir'\n  ],\n  'Elm': [\n    'elm'\n  ],\n  'Lua': [\n    'lua'\n  ],\n  'Embedded Lua templating': [\n    'etlua'\n  ],\n  'ERB': [\n    'erb'\n  ],\n  'Erlang': [\n    'erlang'\n  ],\n  'Excel Formula': [\n    'excel-formula',\n    'xlsx',\n    'xls'\n  ],\n  'F#': [\n    'fsharp'\n  ],\n  'Factor': [\n    'factor'\n  ],\n  'False': [\n    'false'\n  ],\n  'Firestore security rules': [\n    'firestore-security-rules'\n  ],\n  'Flow': [\n    'flow'\n  ],\n  'Fortran': [\n    'fortran'\n  ],\n  'FreeMarker Template Language': [\n    'ftl'\n  ],\n  'GameMaker Language': [\n    'gml',\n    'gamemakerlanguage'\n  ],\n  'GAP (CAS)': [\n    'gap'\n  ],\n  'G-code': [\n    'gcode'\n  ],\n  'GDScript': [\n    'gdscript'\n  ],\n  'GEDCOM': [\n    'gedcom'\n  ],\n  'gettext': [\n    'gettext',\n    'po'\n  ],\n  'Git': [\n    'git'\n  ],\n  'GLSL': [\n    'glsl'\n  ],\n  'GN': [\n    'gn',\n    'gni'\n  ],\n  'GNU Linker Script': [\n    'linker-script',\n    'ld'\n  ],\n  'Go': [\n    'go'\n  ],\n  'Go module': [\n    'go-module',\n    'go-mod'\n  ],\n  'Gradle': [\n    'gradle'\n  ],\n  'GraphQL': [\n    'graphql'\n  ],\n  'Groovy': [\n    'groovy'\n  ],\n  'Less': [\n    'less'\n  ],\n  'Sass (SCSS)': [\n    'scss'\n  ],\n  'Textile': [\n    'textile'\n  ],\n  'Haml': [\n    'haml'\n  ],\n  'Handlebars': [\n    'handlebars',\n    'hbs',\n    'mustache'\n  ],\n  'Haskell': [\n    'haskell',\n    'hs'\n  ],\n  'Haxe': [\n    'haxe'\n  ],\n  'HCL': [\n    'hcl'\n  ],\n  'HLSL': [\n    'hlsl'\n  ],\n  'Hoon': [\n    'hoon'\n  ],\n  'HTTP Public-Key-Pins': [\n    'hpkp'\n  ],\n  'HTTP Strict-Transport-Security': [\n    'hsts'\n  ],\n  'JSON': [\n    'json',\n    'webmanifest'\n  ],\n  'URI': [\n    'uri',\n    'url'\n  ],\n  'HTTP': [\n    'http'\n  ],\n  'IchigoJam': [\n    'ichigojam'\n  ],\n  'Icon': [\n    'icon'\n  ],\n  'ICU Message Format': [\n    'icu-message-format'\n  ],\n  'Idris': [\n    'idris',\n    'idr'\n  ],\n  '.ignore': [\n    'ignore',\n    'gitignore',\n    'hgignore',\n    'npmignore'\n  ],\n  'Inform 7': [\n    'inform7'\n  ],\n  'Ini': [\n    'ini'\n  ],\n  'Io': [\n    'io'\n  ],\n  'J': [\n    'j'\n  ],\n  'Java': [\n    'java'\n  ],\n  'Scala': [\n    'scala'\n  ],\n  'PHP': [\n    'php'\n  ],\n  'JavaDoc-like': [\n    'javadoclike'\n  ],\n  'JavaDoc': [\n    'javadoc'\n  ],\n  'Java stack trace': [\n    'javastacktrace'\n  ],\n  'Jolie': [\n    'jolie'\n  ],\n  'JQ': [\n    'jq'\n  ],\n  'TypeScript': [\n    'typescript',\n    'ts'\n  ],\n  'JSDoc': [\n    'jsdoc'\n  ],\n  'N4JS': [\n    'n4js',\n    'n4jsd'\n  ],\n  'JSON5': [\n    'json5'\n  ],\n  'JSONP': [\n    'jsonp'\n  ],\n  'JS stack trace': [\n    'jsstacktrace'\n  ],\n  'Julia': [\n    'julia'\n  ],\n  'Keepalived Configure': [\n    'keepalived'\n  ],\n  'Keyman': [\n    'keyman'\n  ],\n  'Kotlin': [\n    'kotlin',\n    'kt',\n    'kts'\n  ],\n  'Kusto': [\n    'kusto'\n  ],\n  'LaTeX': [\n    'latex',\n    'tex',\n    'context'\n  ],\n  'Latte': [\n    'latte'\n  ],\n  'Scheme': [\n    'scheme'\n  ],\n  'LilyPond': [\n    'lilypond',\n    'ly'\n  ],\n  'Liquid': [\n    'liquid'\n  ],\n  'Lisp': [\n    'lisp',\n    'emacs',\n    'elisp',\n    'emacs-lisp'\n  ],\n  'LiveScript': [\n    'livescript'\n  ],\n  'LLVM IR': [\n    'llvm'\n  ],\n  'Log file': [\n    'log'\n  ],\n  'LOLCODE': [\n    'lolcode'\n  ],\n  'Magma (CAS)': [\n    'magma'\n  ],\n  'Makefile': [\n    'makefile'\n  ],\n  'Mata': [\n    'mata'\n  ],\n  'MATLAB': [\n    'matlab'\n  ],\n  'MAXScript': [\n    'maxscript'\n  ],\n  'MEL': [\n    'mel'\n  ],\n  'Mermaid': [\n    'mermaid'\n  ],\n  'METAFONT': [\n    'metafont'\n  ],\n  'Mizar': [\n    'mizar'\n  ],\n  'MongoDB': [\n    'mongodb'\n  ],\n  'Monkey': [\n    'monkey'\n  ],\n  'MoonScript': [\n    'moonscript',\n    'moon'\n  ],\n  'N1QL': [\n    'n1ql'\n  ],\n  'Nand To Tetris HDL': [\n    'nand2tetris-hdl'\n  ],\n  'Naninovel Script': [\n    'naniscript',\n    'nani'\n  ],\n  'NASM': [\n    'nasm'\n  ],\n  'NEON': [\n    'neon'\n  ],\n  'Nevod': [\n    'nevod'\n  ],\n  'nginx': [\n    'nginx'\n  ],\n  'Nim': [\n    'nim'\n  ],\n  'Nix': [\n    'nix'\n  ],\n  'NSIS': [\n    'nsis'\n  ],\n  'Objective-C': [\n    'objectivec',\n    'objc'\n  ],\n  'OCaml': [\n    'ocaml'\n  ],\n  'Odin': [\n    'odin'\n  ],\n  'OpenCL': [\n    'opencl'\n  ],\n  'OpenQasm': [\n    'openqasm',\n    'qasm'\n  ],\n  'Oz': [\n    'oz'\n  ],\n  'PARI/GP': [\n    'parigp'\n  ],\n  'Parser': [\n    'parser'\n  ],\n  'Pascal': [\n    'pascal',\n    'objectpascal'\n  ],\n  'Pascaligo': [\n    'pascaligo'\n  ],\n  'PATROL Scripting Language': [\n    'psl'\n  ],\n  'PC-Axis': [\n    'pcaxis',\n    'px'\n  ],\n  'PeopleCode': [\n    'peoplecode',\n    'pcode'\n  ],\n  'Perl': [\n    'perl'\n  ],\n  'PHPDoc': [\n    'phpdoc'\n  ],\n  'PlantUML': [\n    'plant-uml',\n    'plantuml'\n  ],\n  'PL/SQL': [\n    'plsql'\n  ],\n  'PowerQuery': [\n    'powerquery',\n    'pq',\n    'mscript'\n  ],\n  'PowerShell': [\n    'powershell'\n  ],\n  'Processing': [\n    'processing'\n  ],\n  'Prolog': [\n    'prolog'\n  ],\n  'PromQL': [\n    'promql'\n  ],\n  '.properties': [\n    'properties'\n  ],\n  'Protocol Buffers': [\n    'protobuf'\n  ],\n  'Stylus': [\n    'stylus'\n  ],\n  'Twig': [\n    'twig'\n  ],\n  'Pug': [\n    'pug'\n  ],\n  'Puppet': [\n    'puppet'\n  ],\n  'PureBasic': [\n    'purebasic',\n    'pbfasm'\n  ],\n  'Python': [\n    'python',\n    'py'\n  ],\n  'Q#': [\n    'qsharp',\n    'qs'\n  ],\n  'Q (kdb+ database)': [\n    'q'\n  ],\n  'QML': [\n    'qml'\n  ],\n  'Qore': [\n    'qore'\n  ],\n  'R': [\n    'r'\n  ],\n  'Racket': [\n    'racket',\n    'rkt'\n  ],\n  'Razor C#': [\n    'cshtml',\n    'razor'\n  ],\n  'React JSX': [\n    'jsx'\n  ],\n  'React TSX': [\n    'tsx'\n  ],\n  'Reason': [\n    'reason'\n  ],\n  'Rego': [\n    'rego'\n  ],\n  'Ren\\'py': [\n    'renpy',\n    'rpy'\n  ],\n  'ReScript': [\n    'rescript',\n    'res'\n  ],\n  'reST (reStructuredText)': [\n    'rest'\n  ],\n  'Rip': [\n    'rip'\n  ],\n  'Roboconf': [\n    'roboconf'\n  ],\n  'Robot Framework': [\n    'robotframework',\n    'robot'\n  ],\n  'Rust': [\n    'rust'\n  ],\n  'SAS': [\n    'sas'\n  ],\n  'Sass (Sass)': [\n    'sass'\n  ],\n  'Shell session': [\n    'shell-session',\n    'sh-session',\n    'shellsession'\n  ],\n  'Smali': [\n    'smali'\n  ],\n  'Smalltalk': [\n    'smalltalk'\n  ],\n  'Smarty': [\n    'smarty'\n  ],\n  'SML': [\n    'sml',\n    'smlnj'\n  ],\n  'Solidity (Ethereum)': [\n    'solidity',\n    'sol'\n  ],\n  'Solution file': [\n    'solution-file',\n    'sln'\n  ],\n  'Soy (Closure Template)': [\n    'soy'\n  ],\n  'Splunk SPL': [\n    'splunk-spl'\n  ],\n  'SQF: Status Quo Function (Arma 3)': [\n    'sqf'\n  ],\n  'Squirrel': [\n    'squirrel'\n  ],\n  'Stan': [\n    'stan'\n  ],\n  'Stata Ado': [\n    'stata'\n  ],\n  'Structured Text (IEC 61131-3)': [\n    'iecst'\n  ],\n  'SuperCollider': [\n    'supercollider',\n    'sclang'\n  ],\n  'Swift': [\n    'swift'\n  ],\n  'Systemd configuration file': [\n    'systemd'\n  ],\n  'T4 templating': [\n    't4-templating'\n  ],\n  'T4 Text Templates (C#)': [\n    't4-cs',\n    't4'\n  ],\n  'VB.Net': [\n    'vbnet'\n  ],\n  'T4 Text Templates (VB)': [\n    't4-vb'\n  ],\n  'TAP': [\n    'tap'\n  ],\n  'Tcl': [\n    'tcl'\n  ],\n  'Template Toolkit 2': [\n    'tt2'\n  ],\n  'TOML': [\n    'toml'\n  ],\n  'Tremor': [\n    'tremor',\n    'trickle',\n    'troy'\n  ],\n  'TypoScript': [\n    'typoscript',\n    'tsconfig'\n  ],\n  'UnrealScript': [\n    'unrealscript',\n    'uscript',\n    'uc'\n  ],\n  'UO Razor Script': [\n    'uorazor'\n  ],\n  'V': [\n    'v'\n  ],\n  'Vala': [\n    'vala'\n  ],\n  'Velocity': [\n    'velocity'\n  ],\n  'Verilog': [\n    'verilog'\n  ],\n  'VHDL': [\n    'vhdl'\n  ],\n  'vim': [\n    'vim'\n  ],\n  'Visual Basic': [\n    'visual-basic',\n    'vb',\n    'vba'\n  ],\n  'WarpScript': [\n    'warpscript'\n  ],\n  'WebAssembly': [\n    'wasm'\n  ],\n  'Web IDL': [\n    'web-idl',\n    'webidl'\n  ],\n  'WGSL': [\n    'wgsl'\n  ],\n  'Wiki markup': [\n    'wiki'\n  ],\n  'Wolfram language': [\n    'wolfram',\n    'mathematica',\n    'nb',\n    'wl'\n  ],\n  'Wren': [\n    'wren'\n  ],\n  'Xeora': [\n    'xeora',\n    'xeoracube'\n  ],\n  'Xojo (REALbasic)': [\n    'xojo'\n  ],\n  'XQuery': [\n    'xquery'\n  ],\n  'YANG': [\n    'yang'\n  ],\n  'Zig': [\n    'zig'\n  ]\n};\n\nexport const CodeLanguageAliases: {[key: string]: string} = {};\n\nfor(const language in CodeLanguageMap) {\n  const aliases = CodeLanguageMap[language];\n  aliases.unshift(language.toLowerCase());\n  for(let i = 0, l = aliases.length; i < l; ++i) {\n    CodeLanguageAliases[aliases[i]] = language;\n  }\n}\n\nfunction importPrismLanguage(language: string) {\n  const lowerCase = language.toLowerCase();\n  const aliases = CodeLanguageMap[CodeLanguageAliases[lowerCase]] || [];\n  for(const alias of aliases) {\n    if(prism.languages[alias]) {\n      return {language: alias, prism};\n    }\n  }\n\n  console.error('No prism language ' + lowerCase);\n}\n\nlet prism: any;\nexport function importPrism(language: string) {\n  if(prism) {\n    return callbackify(prism, () => importPrismLanguage(language));\n  }\n\n  const hadBefore = !!(window as any).Prism;\n  if(!hadBefore) {\n    (window as any).Prism = window.Prism || {};\n    (window as any).Prism.manual = true;\n  }\n\n  return prism = import('./vendor/prism').then((module) => {\n    const Prism = module.default;\n    if(!hadBefore) {\n      Prism.hooks.add('wrap', (env) => {\n        env.classes.forEach((className, i, arr) => {\n          arr[i] = 'prism-' + className;\n        });\n      });\n    }\n\n    prism = Prism;\n    return importPrismLanguage(language);\n  });\n}\n\nexport function highlightCode(code: string, _language: string) {\n  return callbackify(importPrism(_language), (imported) => {\n    if(!imported) {\n      console.error(`Language \"${_language}\" is not supported`, code);\n      return;\n    }\n\n    const {prism, language} = imported;\n    const html: string = prism.highlight(code, prism.languages[language], language);\n    return html;\n  });\n}\n\n// console.log(Object.keys(LanguageMap).map((key) => LanguageMap[key][0]));\n","export default function findIndexFrom<T>(\n  arr: T[],\n  predicate: (item: T, idx: number, arr: T[]) => boolean,\n  i: number = 0\n): number {\n  for(let length = arr.length; i < length; ++i) {\n    if(predicate(arr[i], i, arr)) {\n      return i;\n    }\n  }\n  return -1;\n}\n","export default function createElementFromMarkup<T = Element>(markup: string) {\n  const div = document.createElement('div');\n  div.innerHTML = markup.trim();\n  return div.firstElementChild as T;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n// * Jolly Cobra's animation.ts\n\nimport {fastRaf} from './schedulers';\nimport deferredPromise, {CancellablePromise} from './cancellablePromise';\n\ninterface AnimationInstance {\n  isCancelled: boolean;\n  deferred: CancellablePromise<void>\n}\n\ntype AnimationInstanceKey = any;\nconst instances: Map<AnimationInstanceKey, AnimationInstance> = new Map();\n\nexport function createAnimationInstance(key: AnimationInstanceKey) {\n  cancelAnimationByKey(key);\n\n  const instance: AnimationInstance = {\n    isCancelled: false,\n    deferred: deferredPromise<void>()\n  };\n\n  instances.set(key, instance);\n  instance.deferred.then(() => {\n    if(getAnimationInstance(key) === instance) {\n      instances.delete(key);\n    }\n  });\n\n  return instance;\n}\n\nexport function getAnimationInstance(key: AnimationInstanceKey) {\n  return instances.get(key);\n}\n\nexport function cancelAnimationByKey(key: AnimationInstanceKey) {\n  const instance = getAnimationInstance(key);\n  if(instance) {\n    instance.isCancelled = true;\n    instance.deferred.resolve();\n  }\n}\n\nexport function animateSingle(tick: Function, key: AnimationInstanceKey, instance?: AnimationInstance) {\n  if(!instance) {\n    instance = createAnimationInstance(key);\n  }\n\n  fastRaf(() => {\n    if(instance.isCancelled) {\n      return;\n    }\n\n    if(tick()) {\n      animateSingle(tick, key, instance);\n    } else {\n      instance.deferred.resolve();\n    }\n  });\n\n  return instance.deferred;\n}\n\nexport function animate(tick: Function) {\n  fastRaf(() => {\n    if(tick()) {\n      animate(tick);\n    }\n  });\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {Awaited} from '../types';\n\nexport default function callbackifyAll<T extends readonly unknown[] | [], R extends any>(\n  values: T,\n  callback: (result: { -readonly [P in keyof T]: Awaited<T[P]> }) => R\n): Promise<Awaited<R>> | R {\n  if(values.some((value) => value instanceof Promise)) {\n    return Promise.all(values).then(callback as any);\n  } else {\n    return callback(values as any);\n  }\n}\n","export default function getUnsafeRandomInt(min: number, max: number) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n","import {MOUNT_CLASS_TO} from '../config/debug';\nimport {logger} from '../lib/logger';\n\nimport animationIntersector from './animationIntersector';\n\nexport default class BluffSpoilerController {\n  private static log = logger('bluff-spoiler');\n\n  private static style: HTMLStyleElement;\n  private static lastDrawTime: number = 0;\n  private static DRAW_INTERVAL = 4 * (1000 / 60); // Once in 4 frames (considering 60fps) to avoid performance issues\n\n  private static reconnectIntervalId: number;\n  private static allWeakRefs: WeakRef<HTMLElement>[] = [];\n  private static reconnectCallbacks = new WeakMap<HTMLElement, (el: HTMLElement) => void>();\n  private static RECONNECT_INTERVAL = 250;\n\n  public static instancesCount = 0;\n\n  private static getStyleSheet() {\n    if(this.style) return this.style;\n\n    this.log('Creating style element');\n\n    this.style = document.createElement('style');\n    document.head.appendChild(this.style);\n\n    return this.style;\n  }\n\n  public static draw(canvas: HTMLCanvasElement) {\n    if(this.lastDrawTime + this.DRAW_INTERVAL > performance.now()) return;\n    this.lastDrawTime = performance.now();\n\n    const style = this.getStyleSheet();\n    const imageURL = canvas.toDataURL();\n\n    style.textContent = `\n      .bluff-spoiler {\n        mask-image: url(${imageURL});\n        opacity: 1;\n      }\n    `;\n  }\n\n  /**\n   * Observe if the element is reconnected to the DOM, in case there is still a reference to it\n   */\n  public static observeReconnection(element: HTMLElement, onReconnect: (el: HTMLElement) => void) {\n    const weakRef = new WeakRef(element);\n    if(!this.allWeakRefs.find((ref) => ref.deref() === element)) this.allWeakRefs.push(weakRef);\n\n    this.reconnectCallbacks.set(element, onReconnect);\n\n    this.initReconnectionInterval();\n  }\n\n  private static initReconnectionInterval() {\n    if(this.reconnectIntervalId) return;\n\n    this.log('Initializing reconnection interval');\n\n    this.reconnectIntervalId = window.setInterval(() => {\n      // animationIntersector.checkAnimations(undefined, 'BLUFF-SPOILER');\n\n      this.allWeakRefs = this.allWeakRefs.filter((weakRef) => {\n        const el = weakRef.deref();\n        if(!el) return false;\n\n        const animations = animationIntersector.getAnimations(el);\n        const reconnectCallback = this.reconnectCallbacks.get(el);\n        if(!animations?.length && el.isConnected) {\n          reconnectCallback(el);\n          this.log('Reconnected element');\n        }\n\n        return true;\n      });\n      if(!this.allWeakRefs.length) {\n        window.clearInterval(this.reconnectIntervalId);\n        this.reconnectIntervalId = undefined;\n\n        this.log('Removing reconnection interval');\n      }\n    }, this.RECONNECT_INTERVAL);\n  }\n\n  public static destroy() {\n    this.style?.remove();\n    this.style = undefined;\n\n    this.log('Destroying style element');\n  }\n}\n\nMOUNT_CLASS_TO['BluffSpoilerController'] = BluffSpoilerController;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n// * thanks https://github.com/dkaraush/particles for webgl version\n\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport {IS_MOBILE} from '../environment/userAgent';\nimport {animate} from '../helpers/animation';\nimport callbackify from '../helpers/callbackify';\nimport callbackifyAll from '../helpers/callbackifyAll';\nimport {Middleware} from '../helpers/middleware';\nimport clamp from '../helpers/number/clamp';\nimport getUnsafeRandomInt from '../helpers/number/getUnsafeRandomInt';\nimport {applyColorOnContext} from '../lib/rlottie/rlottiePlayer';\nimport animationIntersector, {AnimationItemGroup, AnimationItemWrapper} from './animationIntersector';\nimport BluffSpoilerController from './bluffSpoilerController';\n\nexport class AnimationItemNested implements AnimationItemWrapper {\n  public autoplay = true;\n  public loop = true;\n  public paused = true;\n\n  constructor(private options: {\n    onPlay: () => void,\n    onPause: () => void,\n    onDestroy?: () => void\n  }) {}\n\n  public remove() {\n    this.pause();\n    this.options.onDestroy?.();\n  }\n\n  public play() {\n    if(!this.paused) {\n      return;\n    }\n\n    this.paused = false;\n    this.options.onPlay();\n  }\n\n  public pause() {\n    if(this.paused) {\n      return;\n    }\n\n    this.paused = true;\n    this.options.onPause();\n  }\n}\n\nfunction getDefaultParticlesCount(width: number, height: number) {\n  return clamp(width * height / (500 * 500) * 1000 * (IS_MOBILE ? 5 : 10), 500, 10000);\n}\n\n// type DotRendererDot = {\n//   x: number,\n//   y: number,\n//   opacity: number,\n//   radius: number\n//   mOpacity: number,\n//   adding: boolean,\n//   counter: number,\n//   path: Path2D\n// };\nexport default class DotRenderer implements AnimationItemWrapper {\n  private static shaderTexts: {[url: string]: string | Promise<string>} = {};\n  private static createdIndex = -1;\n\n  private static imageSpoilerInstance: DotRenderer;\n  private static textSpoilerInstance: DotRenderer;\n\n  private drawCallbacks: Map<HTMLElement, () => void> = new Map();\n  private targetCanvasesCount = 0;\n\n  public canvas: HTMLCanvasElement;\n  private context: WebGL2RenderingContext;\n  // private dots: DotRendererDot[];\n\n  private reset = true;\n  private buffer: WebGLBuffer[];\n  private bufferParticlesCount: number;\n  private program: WebGLProgram;\n  private timeHandle: WebGLUniformLocation;\n  private deltaTimeHandle: WebGLUniformLocation;\n  private sizeHandle: WebGLUniformLocation;\n  private resetHandle: WebGLUniformLocation;\n  private radiusHandle: WebGLUniformLocation;\n  private seedHandle: WebGLUniformLocation;\n  private noiseScaleHandle: WebGLUniformLocation;\n  private noiseSpeedHandle: WebGLUniformLocation;\n  private dampingMultHandle: WebGLUniformLocation;\n  private velocityMultHandle: WebGLUniformLocation;\n  private forceMultHandle: WebGLUniformLocation;\n  private longevityHandle: WebGLUniformLocation;\n  private maxVelocityHandle: WebGLUniformLocation;\n  private noiseMovementHandle: WebGLUniformLocation;\n  private colorHandle: WebGLUniformLocation;\n  private lastDrawTime: number;\n  private time: number;\n  private bufferIndex: number;\n  private inited: boolean;\n\n  private config: {\n    particlesCount: number,\n    radius: number,\n    seed: number,\n    noiseScale: number,\n    noiseSpeed: number,\n    forceMult: number,\n    velocityMult: number,\n    dampingMult: number,\n    maxVelocity: number,\n    longevity: number,\n    noiseMovement: number,\n    timeScale: number,\n    color: number\n  };\n\n  public paused: boolean;\n  public autoplay: boolean;\n  public tempId: number;\n\n  private dpr: number;\n  private width: number;\n  private height: number;\n  private multiply: number;\n\n  public loop: boolean = true;\n  private initPromise: MaybePromise<boolean>;\n\n  constructor() {\n    const canvas = this.canvas = document.createElement('canvas');\n    this.dpr = window.devicePixelRatio;\n    canvas.classList.add('canvas-thumbnail', 'canvas-dots');\n\n    this.paused = true;\n    this.autoplay = true;\n    this.tempId = 0;\n    this.time = 0;\n    this.bufferIndex = 0;\n    // this.context = canvas.getContext('2d');\n    this.context = canvas.getContext('webgl2'/* , {preserveDrawingBuffer: true} */);\n  }\n\n  private resize(width: number, height: number, multiply?: number, config: Partial<DotRenderer['config']> = {}) {\n    this.width = width;\n    this.height = height;\n    this.multiply = multiply;\n    this.canvas.width = width * this.dpr;\n    this.canvas.height = height * this.dpr;\n    this.config = {\n      particlesCount: getDefaultParticlesCount(width, height),\n      radius: this.dpr * 1.6,\n      seed: Math.random() * 10,\n      noiseScale: 6,\n      noiseSpeed: .6,\n      forceMult: .6,\n      velocityMult: 1.,\n      dampingMult: .9999,\n      maxVelocity: 6.,\n      longevity: 1.4,\n      noiseMovement: 4,\n      timeScale: .65,\n      color: 0xffffff,\n      ...config\n    };\n\n    if(this.inited) {\n      this.draw();\n    }\n  }\n\n  private genBuffer() {\n    if(this.buffer) {\n      this.context.deleteBuffer(this.buffer[0]);\n      this.context.deleteBuffer(this.buffer[1]);\n    }\n\n    this.buffer = [];\n    for(let i = 0; i < 2; ++i) {\n      this.buffer[i] = this.context.createBuffer();\n      this.context.bindBuffer(this.context.ARRAY_BUFFER, this.buffer[i]);\n      this.context.bufferData(this.context.ARRAY_BUFFER, (this.bufferParticlesCount = Math.ceil(this.config.particlesCount)) * 6 * 4, this.context.DYNAMIC_DRAW);\n    }\n  }\n\n  private compileShader(type: number, path: string) {\n    const shader = this.context.createShader(type);\n    const shaderTextResult = DotRenderer.shaderTexts[path] ??=\n      fetch(path)\n      .then((response) => response.text())\n      .then((text) => DotRenderer.shaderTexts[path] = text + '\\n//' + Math.random());\n    return callbackify(shaderTextResult, (shaderText) => {\n      this.context.shaderSource(shader, shaderText);\n      this.context.compileShader(shader);\n      if(!this.context.getShaderParameter(shader, this.context.COMPILE_STATUS)) {\n        throw 'compile shader error:\\n' + this.context.getShaderInfoLog(shader);\n      }\n      return shader;\n    });\n  }\n\n  private compileShaders() {\n    return callbackifyAll([\n      this.compileShader(this.context.VERTEX_SHADER, 'assets/img/spoiler_vertex.glsl'),\n      this.compileShader(this.context.FRAGMENT_SHADER, 'assets/img/spoiler_fragment.glsl')\n    ], (result) => result);\n  }\n\n  // private prepare() {\n  //   let count = Math.round(this.width * this.height / (35 * (IS_MOBILE ? 2 : 1)));\n  //   count *= this.multiply || 1;\n  //   count = Math.min(!liteMode.isAvailable('chat_spoilers') ? 400 : IS_MOBILE ? 1000 : 2200, count);\n  //   count = Math.round(count);\n  //   const dots: DotRendererDot[] = this.dots = new Array(count);\n\n  //   for(let i = 0; i < count; ++i) {\n  //     dots[i] = this.generateDot();\n  //   }\n  // }\n\n  // private generateDot(adding?: boolean): DotRendererDot {\n  //   const x = Math.floor(Math.random() * this.canvas.width);\n  //   const y = Math.floor(Math.random() * this.canvas.height);\n  //   const opacity = adding ? 0 : Math.random();\n  //   const radius = (Math.random() >= .8 ? 1 : 0.5) * this.dpr;\n  //   const path = new Path2D();\n  //   path.arc(x, y, radius, 0, 2 * Math.PI, false);\n  //   return {\n  //     x,\n  //     y,\n  //     opacity,\n  //     radius,\n  //     mOpacity: opacity,\n  //     adding: adding ?? Math.random() >= .5,\n  //     counter: 0,\n  //     path\n  //   };\n  // }\n\n  // private draw() {\n  //   const {context, canvas, dots} = this;\n  //   context.clearRect(0, 0, canvas.width, canvas.height);\n  //   context.fillStyle = '#fff';\n\n  //   const add = 0.02;\n  //   for(let i = 0, length = dots.length; i < length; ++i) {\n  //     const dot = dots[i];\n  //     const addOpacity = dot.adding ? add : -add;\n\n  //     dot.mOpacity += addOpacity;\n  //     // if(dot.mOpacity <= 0) dot.mOpacity = dot.opacity;\n\n  //     // const easedOpacity = easing(dot.mOpacity);\n  //     const easedOpacity = clamp(dot.mOpacity, 0, 1);\n  //     context.globalAlpha = easedOpacity;\n  //     context.fill(dot.path);\n\n  //     if(dot.mOpacity <= 0) {\n  //       dot.adding = true;\n\n  //       if(++dot.counter >= 1) {\n  //         dots[i] = this.generateDot(dot.adding);\n  //       }\n  //     } else if(dot.mOpacity >= 1) {\n  //       dot.adding = false;\n  //     }\n  //   }\n  // }\n\n  private draw() {\n    if(!this.inited) {\n      return;\n    }\n\n    const gl = this.context;\n    const config = this.config;\n    const now = Date.now();\n    const dt = Math.min((now - this.lastDrawTime) / 1_000, 1) * config.timeScale;\n    this.lastDrawTime = now;\n\n    this.time += dt;\n\n    if(this.bufferParticlesCount < config.particlesCount) {\n      this.genBuffer();\n      this.reset = true;\n    }\n\n    gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    gl.useProgram(this.program);\n    gl.uniform1f(this.resetHandle, this.reset ? 1 : 0);\n    if(this.reset) {\n      this.time = 0;\n      this.reset = false;\n    }\n    gl.uniform1f(this.timeHandle, this.time);\n    gl.uniform1f(this.deltaTimeHandle, dt);\n    gl.uniform2f(this.sizeHandle, this.canvas.width, this.canvas.height);\n    gl.uniform1f(this.seedHandle, config.seed);\n    gl.uniform1f(this.radiusHandle, config.radius);\n    gl.uniform1f(this.noiseScaleHandle, config.noiseScale);\n    gl.uniform1f(this.noiseSpeedHandle, config.noiseSpeed);\n    gl.uniform1f(this.dampingMultHandle, config.dampingMult);\n    gl.uniform1f(this.velocityMultHandle, config.velocityMult);\n    gl.uniform1f(this.forceMultHandle, config.forceMult);\n    gl.uniform1f(this.longevityHandle, config.longevity);\n    gl.uniform1f(this.maxVelocityHandle, config.maxVelocity);\n    gl.uniform1f(this.noiseMovementHandle, config.noiseMovement);\n    gl.uniform3f(this.colorHandle,\n      ((config.color >> 16) & 0xff) / 0xff,\n      ((config.color >> 8) & 0xff) / 0xff,\n      (config.color & 0xff) / 0xff\n    );\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer[this.bufferIndex]);\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 24, 0);\n    gl.enableVertexAttribArray(0);\n    gl.vertexAttribPointer(1, 2, gl.FLOAT, false, 24, 8);\n    gl.enableVertexAttribArray(1);\n    gl.vertexAttribPointer(2, 1, gl.FLOAT, false, 24, 16);\n    gl.enableVertexAttribArray(2);\n    gl.vertexAttribPointer(3, 1, gl.FLOAT, false, 24, 20);\n    gl.enableVertexAttribArray(3);\n    gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, this.buffer[1 - this.bufferIndex]);\n    gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 24, 0);\n    gl.enableVertexAttribArray(0);\n    gl.vertexAttribPointer(1, 2, gl.FLOAT, false, 24, 8);\n    gl.enableVertexAttribArray(1);\n    gl.vertexAttribPointer(2, 1, gl.FLOAT, false, 24, 16);\n    gl.enableVertexAttribArray(2);\n    gl.vertexAttribPointer(3, 1, gl.FLOAT, false, 24, 20);\n    gl.enableVertexAttribArray(3);\n    gl.beginTransformFeedback(gl.POINTS);\n    gl.drawArrays(gl.POINTS, 0, config.particlesCount);\n    gl.endTransformFeedback();\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    gl.bindBufferBase(gl.TRANSFORM_FEEDBACK_BUFFER, 0, null);\n\n    this.bufferIndex = 1 - this.bufferIndex;\n\n    this.drawCallbacks.forEach((draw) => draw());\n  }\n\n  public remove() {\n    this.pause();\n    this.destroy();\n  }\n\n  public pause() {\n    if(this.paused) {\n      return;\n    }\n\n    this.paused = true;\n    ++this.tempId;\n  }\n\n  // public renderFirstFrame() {\n  //   if(!this.dots) {\n  //     this.prepare();\n  //   }\n\n  //   this.draw();\n  // }\n\n  public play() {\n    if(!this.paused) {\n      return;\n    }\n\n    this.paused = false;\n    const tempId = ++this.tempId;\n    this.lastDrawTime = Date.now();\n\n    // if(!this.dots) {\n    //   this.prepare();\n    // }\n\n    animate(() => {\n      if(this.tempId !== tempId || this.paused) {\n        return false;\n      }\n\n      this.draw();\n      return true;\n    });\n  }\n\n  private _init(vertexShader: WebGLShader, fragmentShader: WebGLShader) {\n    this.genBuffer();\n\n    const gl = this.context;\n\n    const program = this.program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.transformFeedbackVaryings(program, ['outPosition', 'outVelocity', 'outTime', 'outDuration'], gl.INTERLEAVED_ATTRIBS);\n    gl.linkProgram(program);\n    if(!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      throw 'program link error:\\n' + gl.getProgramInfoLog(program);\n    }\n    gl.deleteShader(vertexShader);\n    gl.deleteShader(fragmentShader);\n\n    this.timeHandle = gl.getUniformLocation(program, 'time');\n    this.deltaTimeHandle = gl.getUniformLocation(program, 'deltaTime');\n    this.sizeHandle = gl.getUniformLocation(program, 'size');\n    this.resetHandle = gl.getUniformLocation(program, 'reset');\n    this.radiusHandle = gl.getUniformLocation(program, 'r');\n    this.seedHandle = gl.getUniformLocation(program, 'seed');\n    this.noiseScaleHandle = gl.getUniformLocation(program, 'noiseScale');\n    this.noiseSpeedHandle = gl.getUniformLocation(program, 'noiseSpeed');\n    this.dampingMultHandle = gl.getUniformLocation(program, 'dampingMult');\n    this.velocityMultHandle = gl.getUniformLocation(program, 'velocityMult');\n    this.forceMultHandle = gl.getUniformLocation(program, 'forceMult');\n    this.longevityHandle = gl.getUniformLocation(program, 'longevity');\n    this.maxVelocityHandle = gl.getUniformLocation(program, 'maxVelocity');\n    this.noiseMovementHandle = gl.getUniformLocation(program, 'noiseMovement');\n    this.colorHandle = gl.getUniformLocation(program, 'color');\n\n    gl.clearColor(0, 0, 0, 0);\n    gl.viewport(0, 0, this.canvas.width, this.canvas.height);\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    this.inited = true;\n    this.lastDrawTime = Date.now();\n  }\n\n  private init() {\n    return this.initPromise ??= callbackify(this.compileShaders(), (shaders) => {\n      this._init(...shaders);\n      this.draw();\n      return true;\n    });\n  }\n\n  private destroy() {\n    if(this.buffer) {\n      this.context.deleteBuffer(this.buffer[0]);\n      this.context.deleteBuffer(this.buffer[1]);\n    }\n\n    this.buffer = null;\n    this.context.deleteProgram(this.program);\n    this.program = null;\n  }\n\n  public static create({\n    width,\n    height,\n    middleware,\n    animationGroup,\n    multiply,\n    config\n  }: {\n    width?: number,\n    height?: number,\n    middleware: Middleware,\n    animationGroup: AnimationItemGroup,\n    multiply?: number,\n    config?: Partial<DotRenderer['config']>\n  }) {\n    const index = ++this.createdIndex;\n    let {imageSpoilerInstance: instance} = this;\n    if(!instance) {\n      instance = this.imageSpoilerInstance = new DotRenderer();\n      instance.resize(480, 480);\n      (window as any).dotRenderer = instance;\n    }\n    // dotRenderer.renderFirstFrame();\n\n    const canvas = document.createElement('canvas');\n    canvas.classList.add('canvas-thumbnail', 'canvas-dots');\n    const dpr = window.devicePixelRatio;\n    if(width) {\n      canvas.width = width * dpr;\n      canvas.height = height * dpr;\n    }\n    const context = canvas.getContext('2d');\n\n    const rotate = (index % 4) === 1;\n    const flipX = (index % 4) === 2;\n    const flipY = (index % 4) === 3;\n\n    const transforms: string[] = [\n      rotate && 'rotate(180deg)',\n      flipX && 'scaleX(-1)',\n      flipY && 'scaleY(-1)'\n    ].filter(Boolean);\n    if(transforms.length) {\n      canvas.style.transform = transforms.join(' ');\n    }\n\n    const x = getUnsafeRandomInt(0, instance.canvas.width - canvas.width);\n    const y = getUnsafeRandomInt(0, instance.canvas.height - canvas.height);\n    const draw = () => {\n      const {width, height} = canvas;\n      context.clearRect(0, 0, width, height);\n      context.drawImage(\n        instance.canvas,\n        x,\n        y,\n        width,\n        height,\n        0,\n        0,\n        width,\n        height\n      );\n\n      if(config?.color) {\n        applyColorOnContext(context, '#' + config.color.toString(16), 0, 0, width, height);\n      }\n    };\n\n    ++instance.targetCanvasesCount;\n    const animation = new AnimationItemNested({\n      onPlay: () => {\n        instance.drawCallbacks.set(canvas, draw);\n        instance.play();\n      },\n      onPause: () => {\n        instance.drawCallbacks.delete(canvas);\n        if(!instance.drawCallbacks.size) {\n          instance.pause();\n        }\n      },\n      onDestroy: () => {\n        if(!--instance.targetCanvasesCount) {\n          instance.remove();\n          this.imageSpoilerInstance = undefined;\n        }\n      }\n    });\n\n    animationIntersector.addAnimation({\n      animation,\n      group: animationGroup,\n      observeElement: canvas,\n      controlled: middleware,\n      type: 'dots'\n    });\n\n    return {\n      canvas,\n      readyResult: width && (/* dotRenderer.resize(width, height, multiply, config),  */instance.init())\n    };\n  }\n\n  private static getTextSpoilerInstance() {\n    if(this.textSpoilerInstance) return this.textSpoilerInstance;\n\n    const instanceCanvasWidth = 240;\n    const instanceCanvasHeight = 120;\n    // const instanceCanvasWidth = 100;\n    // const instanceCanvasHeight = 40;\n\n    const instance = this.textSpoilerInstance = new DotRenderer();\n\n    /**\n     * Bigger DPR will make a visible separation between drawn chunks (when text spoilers are huge)\n     * Do not make this bigger, unless there is a way to mirror the dot on the other side when it is close to some margin\n     */\n    instance.dpr = Math.min(2, window.devicePixelRatio);\n    instance.resize(instanceCanvasWidth, instanceCanvasHeight, undefined, {\n      particlesCount: 4 * getDefaultParticlesCount(instanceCanvasWidth, instanceCanvasHeight),\n      noiseSpeed: 5,\n      maxVelocity: 10,\n      timeScale: 1.2,\n      radius: 1.8 * instance.dpr,\n      forceMult: .2,\n      velocityMult: .4,\n      dampingMult: 2.2,\n      longevity: 5.0\n    });\n\n    MOUNT_CLASS_TO.textSpoilerRenderer = instance;\n\n    return instance;\n  }\n\n  public static attachTextSpoilerTarget({\n    middleware,\n    animationGroup,\n    canvas,\n    draw\n  }: {\n    canvas: HTMLCanvasElement,\n    draw: () => void,\n    middleware: Middleware,\n    animationGroup: AnimationItemGroup,\n  }) {\n    const instance = this.getTextSpoilerInstance();\n\n    ++instance.targetCanvasesCount;\n\n    const animation = new AnimationItemNested({\n      onPlay: () => {\n        instance.drawCallbacks.set(canvas, draw);\n        instance.play();\n      },\n      onPause: () => {\n        instance.drawCallbacks.delete(canvas);\n        if(!instance.drawCallbacks.size) {\n          instance.pause();\n        }\n      },\n      onDestroy: () => {\n        if(!--instance.targetCanvasesCount) {\n          instance.remove();\n          this.textSpoilerInstance = undefined;\n        }\n      }\n    });\n\n    animationIntersector.addAnimation({\n      animation,\n      group: animationGroup,\n      observeElement: canvas,\n      controlled: middleware,\n      type: 'dots'\n    });\n\n    return {\n      animation,\n      sourceCanvas: instance.canvas,\n      dpr: instance.dpr,\n      readyResult: instance.init()\n    };\n  }\n\n  public static attachBluffTextSpoilerTarget(element: HTMLElement) {\n    const instance = this.getTextSpoilerInstance();\n\n    BluffSpoilerController.observeReconnection(element, (el) => this.attachBluffTextSpoilerTarget(el));\n\n    ++instance.targetCanvasesCount;\n    ++BluffSpoilerController.instancesCount;\n\n    const animation = new AnimationItemNested({\n      onPlay: () => {\n        instance.drawCallbacks.set(element, () => BluffSpoilerController.draw(instance.canvas));\n        instance.play();\n      },\n      onPause: () => {\n        instance.drawCallbacks.delete(element);\n        if(!instance.drawCallbacks.size) {\n          instance.pause();\n        }\n      },\n      onDestroy: () => {\n        if(!--instance.targetCanvasesCount) {\n          instance.remove();\n          this.textSpoilerInstance = undefined;\n        }\n        if(!--BluffSpoilerController.instancesCount) {\n          BluffSpoilerController.destroy();\n        }\n      }\n    });\n\n    animationIntersector.addAnimation({\n      animation,\n      group: 'BLUFF-SPOILER',\n      // controlled: true, // should not be controlled! elements might reappear in the DOM after being removed\n      observeElement: element,\n      type: 'dots'\n    });\n\n    instance.init();\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {EMOJI_VERSION} from '../../environment/emojiVersionsSupport';\nimport {SITE_HASHTAGS} from '.';\nimport {EmojiVersions} from '../../config/emoji';\nimport IS_EMOJI_SUPPORTED from '../../environment/emojiSupport';\nimport buildURLHash from '../../helpers/buildURLHash';\nimport copy from '../../helpers/object/copy';\nimport encodeEntities from '../../helpers/string/encodeEntities';\nimport {MessageEntity} from '../../layer';\nimport encodeSpoiler from './encodeSpoiler';\nimport parseEntities from './parseEntities';\nimport setBlankToAnchor from './setBlankToAnchor';\nimport wrapUrl from './wrapUrl';\nimport EMOJI_VERSIONS_SUPPORTED from '../../environment/emojiVersionsSupport';\nimport {CLICK_EVENT_NAME} from '../../helpers/dom/clickEvent';\nimport IS_CUSTOM_EMOJI_SUPPORTED from '../../environment/customEmojiSupport';\nimport BOM from '../../helpers/string/bom';\nimport wrapTelegramUrlToAnchor from './wrapTelegramUrlToAnchor';\nimport {IS_FIREFOX} from '../../environment/userAgent';\nimport CustomEmojiElement, {CustomEmojiElements} from '../customEmoji/element';\nimport {CustomEmojiRendererElementOptions, CustomEmojiRendererElement} from '../customEmoji/renderer';\nimport {setDirection} from '../../helpers/dom/setInnerHTML';\nimport {i18n} from '../langPack';\nimport Icon from '../../components/icon';\nimport {CodeLanguageAliases, highlightCode} from '../../codeLanguages';\nimport callbackify from '../../helpers/callbackify';\nimport findIndexFrom from '../../helpers/array/findIndexFrom';\nimport {observeResize} from '../../components/resizeObserver';\nimport createElementFromMarkup from '../../helpers/createElementFromMarkup';\nimport DotRenderer from '../../components/dotRenderer';\n\nexport type WrapRichTextOptions = Partial<{\n  entities: MessageEntity[],\n  contextSite: string,\n  highlightUsername: string,\n  noLinks: boolean,\n  noLinebreaks: boolean,\n  noCommands: boolean,\n  wrappingDraft: boolean,\n  // mustWrapEmoji: boolean,\n  fromBot: boolean,\n  noTextFormat: boolean,\n  passEntities: Partial<{\n    [_ in MessageEntity['_']]: boolean\n  }>,\n  maxMediaTimestamp: number,\n  noEncoding: boolean,\n  isSelectable: boolean,\n  whitelistedDomains?: string[],\n  passMaskedLinks?: boolean,\n\n  contextHashtag?: string,\n\n  // ! recursive, do not provide\n  nasty?: {\n    i: number,\n    usedLength: number,\n    text: string,\n    lastEntity?: MessageEntity\n  },\n  voodoo?: boolean,\n  customEmojis?: Map<DocId, CustomEmojiElements>,\n  customWraps?: Set<HTMLElement>,\n  ignoreNextIndex?: number,\n  doubleLinebreak?: number\n}> & CustomEmojiRendererElementOptions;\n\nfunction createMarkupFormatting(formatting: string) {\n  const element = document.createElement('span');\n  element.style.fontFamily = 'markup-' + formatting;\n  element.classList.add('is-markup');\n  element.dataset.markup = formatting;\n  return element;\n}\n\nfunction onQuoteResize(entry: ResizeObserverEntry) {\n  const target = entry.target as HTMLElement;\n  if((target as any).ignoreQuoteResize) {\n    if(Date.now() < (target as any).ignoreQuoteResize) {\n      return;\n    }\n\n    delete (target as any).ignoreQuoteResize;\n  }\n\n  const scrollHeight = target.scrollHeight;\n  if(!scrollHeight) {\n    return;\n  }\n\n  const padding = entry.contentRect.bottom - entry.contentRect.height + entry.contentRect.top;\n  // const margin = (entry.borderBoxSize[0].blockSize - entry.contentBoxSize[0].blockSize) * 2;\n  const margin = 0;\n  const diff = scrollHeight - padding - margin - Math.floor(entry.contentRect.height);\n  const isExpanded = diff <= 1;\n\n  // console.log('quote resize', entry, scrollHeight, entry.contentRect.height, isExpanded, diff);\n  target.style.setProperty('--quote-max-height', scrollHeight + 'px');\n  target.classList.toggle('is-truncated', !isExpanded);\n}\n\nfunction makeQuoteCollapsable(element: HTMLElement) {\n  element.classList.add('quote-like-collapsable');\n\n  const collapseIcon = document.createElement('span');\n  collapseIcon.classList.add('quote-like-icon', 'quote-like-collapse');\n  element.append(collapseIcon);\n\n  return observeResize(element, onQuoteResize);\n}\n\n/**\n * * Expecting correctly sorted nested entities (RichTextProcessor.sortEntities)\n */\nexport default function wrapRichText(text: string, options: WrapRichTextOptions = {}) {\n  const fragment = document.createDocumentFragment();\n  if(!text) {\n    return fragment;\n  }\n\n  const nasty = options.nasty ??= {\n    i: 0,\n    usedLength: 0,\n    text\n  };\n\n  const wrapSomething = (wrapElement: HTMLElement, noFiller?: boolean) => {\n    const element = document.createElement('span');\n    // element.append(BOM, a, BOM);\n    if(options.wrappingDraft) {\n      element.contentEditable = 'false';\n    }\n    // element.style.display = 'inline-block';\n    element.classList.add('input-something');\n    element.append(/* BOM,  */wrapElement);\n\n    (lastElement || fragment).append(element);\n\n    wrapElement.classList.add('input-selectable');\n    // if(wrapElement instanceof HTMLImageElement) {\n    //   element.prepend(f());\n    // } else {\n    !noFiller && wrapElement.append(createCustomFiller(true));\n    // }\n\n    customWraps.add(element);\n\n    return element;\n  };\n\n  options.isSelectable ||= options.wrappingDraft;\n\n  const customEmojis = options.customEmojis ??= new Map() as Map<DocId, CustomEmojiElements>;\n  const customWraps = options.customWraps ??= new Set();\n\n  const entities = options.entities ??= parseEntities(nasty.text);\n\n  const passEntities = options.passEntities ??= {};\n  const contextSite = options.contextSite ??= 'Telegram';\n  const contextExternal = contextSite !== 'Telegram';\n\n  const textLength = nasty.text.length;\n  const length = entities.length;\n  let lastElement: HTMLElement | DocumentFragment;\n  for(; nasty.i < length; ++nasty.i) {\n    let entity = entities[nasty.i];\n\n    // * check whether text was sliced\n    // TODO: consider about moving it to other function\n    if(entity.offset >= textLength) {\n      if(entity._ !== 'messageEntityCaret') { // * can set caret to the end\n        continue;\n      }\n    } else if((entity.offset + entity.length) > textLength) {\n      entity = copy(entity);\n      // entity.length = entity.offset + entity.length - textLength;\n      entity.length = textLength - entity.offset;\n    }\n\n    if(entity.length) {\n      nasty.lastEntity = entity;\n    }\n\n    let nextEntity = entities[nasty.i + 1];\n\n    const startOffset = entity.offset;\n    const endOffset = startOffset + entity.length;\n    const endPartOffset = Math.min(endOffset, nextEntity?.offset ?? 0xFFFF);\n    const fullEntityText = nasty.text.slice(startOffset, endOffset);\n    const sliced = nasty.text.slice(startOffset, endPartOffset);\n    let partText = sliced;\n\n    if(nasty.usedLength < startOffset) {\n      (lastElement || fragment).append(nasty.text.slice(nasty.usedLength, startOffset));\n    }\n\n    if(lastElement) {\n      lastElement = fragment;\n    }\n\n    nasty.usedLength = endPartOffset;\n\n    let element: HTMLElement,\n      property: 'alt',\n      usedText = false,\n      processingBlockElement = false;\n    switch(entity._) {\n      case 'messageEntityBold': {\n        if(!options.noTextFormat) {\n          if(options.wrappingDraft) {\n            element = createMarkupFormatting('bold');\n          } else {\n            element = document.createElement('strong');\n          }\n        }\n\n        break;\n      }\n\n      case 'messageEntityItalic': {\n        if(!options.noTextFormat) {\n          if(options.wrappingDraft) {\n            element = createMarkupFormatting('italic');\n          } else {\n            element = document.createElement('em');\n          }\n        }\n\n        break;\n      }\n\n      case 'messageEntityStrike': {\n        if(options.wrappingDraft) {\n          element = createMarkupFormatting('strikethrough');\n          // element = document.createElement('span');\n          // const styleName = IS_SAFARI ? 'text-decoration' : 'text-decoration-line';\n          // element.style.cssText = `${styleName}: line-through;`;\n          // element.style.fontFamily = 'markup-strikethrough';\n        } else/*  if(!options.noTextFormat) */ {\n          element = document.createElement('del');\n        }\n\n        break;\n      }\n\n      case 'messageEntityUnderline': {\n        if(options.wrappingDraft) {\n          element = createMarkupFormatting('underline');\n          // element = document.createElement('span');\n          // const styleName = IS_SAFARI ? 'text-decoration' : 'text-decoration-line';\n          // element.style.cssText = `${styleName}: underline;`;\n          // element.style.fontFamily = 'markup-underline';\n        } else if(!options.noTextFormat) {\n          element = document.createElement('u');\n        }\n\n        break;\n      }\n\n      case 'messageEntityPre':\n      case 'messageEntityCode': {\n        const entityLanguage = (entity as MessageEntity.messageEntityPre).language;\n        if(options.wrappingDraft) {\n          element = createMarkupFormatting('monospace');\n          if(entityLanguage) {\n            element.dataset.language = entityLanguage;\n          }\n          // element = document.createElement('span');\n          // element.style.fontFamily = 'var(--font-monospace)';\n          // element.style.fontFamily = 'markup-monospace';\n        } else if(entity._ === 'messageEntityPre' && !options.noTextFormat) {\n          const container = document.createElement('pre');\n          const content = document.createElement('div');\n          content.classList.add('code-content');\n          element = document.createElement('code');\n          element.classList.add('code-code');\n          fragment.append(container);\n          content.append(element);\n\n          container.classList.add('quote-like', 'quote-like-border', 'code');\n\n          const languageName = CodeLanguageAliases[entityLanguage.toLowerCase()];\n\n          const header = document.createElement('div');\n          header.classList.add('code-header');\n          const headerName = document.createElement('span');\n          headerName.classList.add('code-header-name');\n          headerName.append(languageName || i18n('CopyCode'));\n          const headerWrapButton = Icon('menu', 'code-header-button', 'code-header-toggle-wrap');\n          header.append(headerName, headerWrapButton, Icon('copy', 'code-header-button', 'code-header-copy'));\n\n          container.append(header, content);\n\n          const result = languageName && highlightCode(fullEntityText, languageName);\n          result && callbackify(result, (html) => {\n            if(html) {\n              element.innerHTML = html;\n            }\n          });\n\n          usedText = true;\n          if(!result || result instanceof Promise) {\n            element.textContent = fullEntityText;\n          }\n\n          let lastInnerEntityIndex = findIndexFrom(entities, (n) => n.offset >= endOffset, nasty.i + 1);\n          if(lastInnerEntityIndex === -1) lastInnerEntityIndex = entities.length - 1;\n          else lastInnerEntityIndex -= 1;\n          nasty.i = lastInnerEntityIndex;\n          nasty.usedLength = endOffset;\n          nasty.lastEntity = entities[lastInnerEntityIndex];\n          nextEntity = undefined;\n          processingBlockElement = true;\n        } else if(!options.noTextFormat) {\n          element = document.createElement('code');\n          element.classList.add('monospace-text');\n        }\n\n        break;\n      }\n\n      // case 'messageEntityPre': {\n      //   if(options.wrappingDraft) {\n      //     element = document.createElement('span');\n      //     element.style.fontFamily = 'var(--font-monospace)';\n      //   } else if(!options.noTextFormat) {\n      //     element = document.createElement('pre');\n      //     const inner = document.createElement('code');\n      //     if(entity.language) {\n      //       inner.className = 'language-' + entity.language;\n      //       inner.textContent = entityText;\n      //       usedText = true;\n      //     }\n      //   }\n\n      //   break;\n      // }\n\n      case 'messageEntityHighlight': {\n        element = document.createElement('i');\n        element.className = 'text-highlight';\n        break;\n      }\n\n      case 'messageEntityBotCommand': {\n        // if(!(options.noLinks || options.noCommands || contextExternal)/*  && !entity.unsafe */) {\n        if(!options.noLinks && passEntities[entity._]) {\n          let command = fullEntityText.slice(1);\n          let bot: string | boolean;\n          let atPos: number;\n          if((atPos = command.indexOf('@')) !== -1) {\n            bot = command.slice(atPos + 1);\n            command = command.slice(0, atPos);\n          } else {\n            bot = options.fromBot;\n          }\n\n          element = document.createElement('a');\n          (element as HTMLAnchorElement).href = encodeEntities('tg://bot_command?command=' + encodeURIComponent(command) + (bot ? '&bot=' + encodeURIComponent(bot) : ''));\n          if(!contextExternal) {\n            element.setAttribute('onclick', 'execBotCommand(this)');\n          }\n        }\n\n        break;\n      }\n\n      case 'messageEntityCustomEmoji': {\n        if(!IS_CUSTOM_EMOJI_SUPPORTED) {\n          break;\n        }\n\n        while(nextEntity?._ === 'messageEntityEmoji' && nextEntity.offset < endOffset) {\n          ++nasty.i;\n          nasty.lastEntity = nextEntity;\n          nasty.usedLength += nextEntity.length;\n          nextEntity = entities[nasty.i + 1];\n        }\n\n        const customEmojiElement = element = CustomEmojiElement.create(entity.document_id);\n        const {docId} = customEmojiElement;\n        let set = customEmojis.get(docId);\n        if(!set) customEmojis.set(docId, set = new Set());\n        set.add(customEmojiElement);\n        customEmojiElement.dataset.stickerEmoji = fullEntityText;\n\n        if(options.wrappingDraft) {\n          element = document.createElement('img');\n          (element as HTMLImageElement).alt = fullEntityText;\n          for(const i in customEmojiElement.dataset) {\n            element.dataset[i] = customEmojiElement.dataset[i];\n          }\n          (element as any).customEmojiElement = customEmojiElement;\n          customEmojiElement.placeholder = element as HTMLImageElement;\n          element.classList.add('custom-emoji-placeholder');\n          (element as HTMLImageElement).src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAAtJREFUGFdjYAACAAAFAAGq1chRAAAAAElFTkSuQmCC';\n          property = 'alt';\n          break;\n        }\n\n        if(options.isSelectable) {\n          // const s = document.createElement('span');\n          // s.append(fullEntityText);\n          // element.append(s);\n          // element.textContent = fullEntityText;\n          // element.textContent = 'a';\n          // element.contentEditable = 'false';\n\n          // const x = f();\n          // x.style.display = 'inline-block';\n          // x.contentEditable = 'false';\n          // (lastElement || fragment).append(BOM);\n          // (lastElement || fragment).append(x);\n\n          element = wrapSomething(element, !!options.customEmojiRenderer);\n\n          // const a = element;\n          // element = document.createElement('span');\n          // element.append(BOM, a, BOM);\n          // element.contentEditable = 'false';\n        }\n\n        property = 'alt';\n        break;\n      }\n\n      case 'messageEntityEmoji': {\n        let isSupported = IS_EMOJI_SUPPORTED;\n        if(isSupported) {\n          for(const version in EmojiVersions) {\n            if(version) {\n              const emojiData = EmojiVersions[version as EMOJI_VERSION];\n              if(emojiData.hasOwnProperty(entity.unicode) && !EMOJI_VERSIONS_SUPPORTED[version as EMOJI_VERSION]) {\n                isSupported = false;\n                break;\n              }\n            }\n          }\n        }\n\n        // if(!(options.wrappingDraft && isSupported)) { // * fix safari emoji\n        if(!isSupported) { // no wrapping needed\n          // if(isSupported) { // ! contenteditable=\"false\" нужен для поля ввода, иначе там будет меняться шрифт в Safari, или же рендерить смайлик напрямую, без контейнера\n          //   insertPart(entity, '<span class=\"emoji\">', '</span>');\n          // } else {\n          element = document.createElement('img');\n          (element as HTMLImageElement).src = `assets/img/emoji/${entity.unicode}.png`;\n          property = 'alt';\n          element.className = 'emoji emoji-image';\n\n          // if(options.isSelectable) {\n          //   usedText = true;\n          //   (element as HTMLImageElement).alt = partText;\n          //   element = wrapSomething(element);\n          // }\n\n          // const a = element;\n          // a.contentEditable = 'false';\n          // element = document.createElement('span');\n          // element.append(a);\n          // element.contentEditable = 'false';\n          // }\n        // } else if(options.mustWrapEmoji) {\n        } else if(!options.wrappingDraft) {\n          element = document.createElement('span');\n          element.className = 'emoji emoji-native';\n        }/*  else if(!IS_SAFARI) {\n          insertPart(entity, '<span class=\"emoji\" contenteditable=\"false\">', '</span>');\n        } */\n        /* if(!isSupported) {\n          insertPart(entity, `<img src=\"assets/img/emoji/${entity.unicode}.png\" alt=\"`, `\" class=\"emoji\">`);\n        } */\n\n        break;\n      }\n\n      case 'messageEntityCaret': {\n        element = document.createElement('span');\n        element.className = 'composer-sel';\n        break;\n      }\n\n      case 'messageEntityLinebreak': {\n        // slice linebreaks before and after quote\n        if(options.ignoreNextIndex === nasty.i || (options.wrappingDraft && nextEntity?._ === 'messageEntityBlockquote' && nextEntity.offset === endOffset)) {\n          usedText = true;\n        } else if(options.wrappingDraft && IS_FIREFOX) {\n          element = document.createElement('br');\n          usedText = true;\n        }\n\n        if(options.doubleLinebreak === nasty.i) {\n          options.doubleLinebreak = undefined;\n          (element || fragment).append('\\n\\n');\n          usedText = true;\n        }\n        // if(options.noLinebreaks) {\n        //   insertPart(entity, ' ');\n        // } else {\n        //   insertPart(entity, '<br/>');\n        // }\n\n        break;\n      }\n\n      case 'messageEntityUrl':\n      case 'messageEntityTextUrl': {\n        if(!(options.noLinks && !passEntities[entity._])) {\n          // let inner: string;\n          let url: string = (entity as MessageEntity.messageEntityTextUrl).url || fullEntityText;\n          let masked = false;\n          let onclick: string;\n\n          const wrapped = wrapUrl(url, true);\n          url = wrapped.url;\n          onclick = wrapped.onclick;\n\n          if(options.whitelistedDomains) {\n            try {\n              const hostname = new URL(url).hostname;\n              if(!options.whitelistedDomains.includes(hostname)) {\n                break;\n              }\n            } catch(err) {\n              break;\n            }\n          }\n\n          if(entity._ === 'messageEntityTextUrl') {\n            if(nextEntity?._ === 'messageEntityUrl' &&\n              nextEntity.length === entity.length &&\n              nextEntity.offset === entity.offset) {\n              nasty.lastEntity = nextEntity;\n              ++nasty.i;\n            }\n\n            if(url !== fullEntityText) {\n              masked = true;\n            }\n          } else {\n            // inner = encodeEntities(replaceUrlEncodings(entityText));\n          }\n\n          const currentContext = !!onclick;\n          if(!onclick && masked && !currentContext && !options.passMaskedLinks) {\n            onclick = 'showMaskedAlert';\n          }\n\n          if(options.wrappingDraft) {\n            onclick = undefined;\n          }\n\n          const href = (currentContext || typeof electronHelpers === 'undefined') ?\n            url :\n            `javascript:electronHelpers.openExternal('${url}');`;\n\n          element = document.createElement('a');\n          element.className = 'anchor-url';\n          (element as HTMLAnchorElement).href = href;\n\n          if(!(currentContext || typeof electronHelpers !== 'undefined')) {\n            setBlankToAnchor(element as HTMLAnchorElement);\n          }\n\n          if(onclick) {\n            element.setAttribute('onclick', onclick + '(this)');\n          }\n        }\n\n        break;\n      }\n\n      case 'messageEntityEmail': {\n        if(!options.noLinks) {\n          element = document.createElement('a');\n          (element as HTMLAnchorElement).href = encodeEntities('mailto:' + fullEntityText);\n          setBlankToAnchor(element as HTMLAnchorElement);\n        }\n\n        break;\n      }\n\n      case 'messageEntityHashtag': {\n        const contextUrl = !options.noLinks && SITE_HASHTAGS[contextSite];\n        if(contextUrl) {\n          const hashtag = fullEntityText.slice(1);\n          element = document.createElement('a');\n          element.className = 'anchor-hashtag';\n          (element as HTMLAnchorElement).href = contextUrl.replace('{1}', encodeURIComponent(hashtag));\n          if(contextExternal) {\n            setBlankToAnchor(element as HTMLAnchorElement);\n          } else {\n            element.setAttribute('onclick', 'searchByHashtag(this)');\n          }\n        }\n\n        break;\n      }\n\n      case 'messageEntityMentionName': {\n        if(!(options.noLinks && !passEntities[entity._])) {\n          element = document.createElement('a');\n          (element as HTMLAnchorElement).href = buildURLHash('' + entity.user_id);\n          element.className = 'follow';\n          element.dataset.follow = '' + entity.user_id;\n        }\n\n        break;\n      }\n\n      case 'messageEntityMention': {\n        // const contextUrl = !options.noLinks && siteMentions[contextSite];\n        if(!options.noLinks) {\n          const username = fullEntityText.slice(1);\n\n          element = wrapTelegramUrlToAnchor('t.me/' + username);\n          element.className = 'mention';\n\n          // insertPart(entity, `<a class=\"mention\" href=\"${contextUrl.replace('{1}', encodeURIComponent(username))}\"${contextExternal ? ' target=\"_blank\" rel=\"noopener noreferrer\"' : ''}>`, '</a>');\n        }\n\n        break;\n      }\n\n      case 'messageEntitySpoiler': {\n        if(options.noTextFormat) {\n          const encoded = encodeSpoiler(nasty.text, entity);\n          nasty.text = encoded.text;\n          partText = encoded.entityText;\n          if(endPartOffset !== endOffset) {\n            nasty.usedLength += endOffset - endPartOffset;\n          }\n          let n: MessageEntity;\n          for(; n = entities[nasty.i + 1], n && n.offset < endOffset;) {\n            // nasty.usedLength += n.length;\n            ++nasty.i;\n            nasty.lastEntity = n;\n            nextEntity = entities[nasty.i + 1];\n          }\n\n          element = document.createElement('span');\n          element.append(...partText.split('').map((encodedLetter, i) => createElementFromMarkup(`<span class=\"bluff-spoiler\" style=\"--index:${i}\">${encodedLetter}</span>`)))\n          fragment.append(element);\n\n          DotRenderer.attachBluffTextSpoilerTarget(element);\n\n          usedText = true;\n        } else if(options.wrappingDraft) {\n          element = createMarkupFormatting('spoiler');\n          // element = document.createElement('span');\n          // element.style.fontFamily = 'spoiler';\n          // element.style.fontFamily = 'markup-spoiler';\n        } else {\n          const container = document.createElement('span');\n          container.className = 'spoiler';\n          element = document.createElement('span');\n          element.className = 'spoiler-text';\n          element.textContent = partText;\n          usedText = true;\n          container.append(element);\n          fragment.append(container);\n\n          container[`on${CLICK_EVENT_NAME}`] = (window as any).onSpoilerClick;\n        }\n\n        break;\n      }\n\n      case 'messageEntityTimestamp': {\n        if(!options.maxMediaTimestamp || entity.time > options.maxMediaTimestamp) {\n          break;\n        }\n\n        element = document.createElement('a');\n        element.classList.add('timestamp');\n        element.dataset.timestamp = '' + entity.time;\n        (element as HTMLAnchorElement).href = '#';\n        element.setAttribute('onclick', 'setMediaTimestamp(this)');\n\n        if(options.maxMediaTimestamp === Infinity) {\n          element.classList.add('is-disabled');\n        }\n\n        break;\n      }\n\n      case 'messageEntityBlockquote': {\n        if(options.noTextFormat) {\n          break;\n        }\n\n        if(options.wrappingDraft) {\n          element = createMarkupFormatting('quote');\n\n          // * ? because of layer migration\n          if(entity.pFlags?.collapsed) {\n            element.dataset.collapsed = '1';\n          }\n        } else {\n          element = document.createElement('blockquote');\n          element.classList.add('quote');\n\n          // * ? because of layer migration\n          if(entity.pFlags?.collapsed/*  || true */) {\n            const dispose = makeQuoteCollapsable(element);\n            options.middleware.onClean(dispose);\n          }\n        }\n\n        element.classList.add('quote-like', 'quote-like-border', 'quote-like-icon');\n        setDirection(element);\n\n        processingBlockElement = true;\n        break;\n      }\n    }\n\n    if(processingBlockElement) {\n      let foundNextLinebreakIndex = -1;\n      for(let i = nasty.i; i < length; ++i) {\n        const n = entities[i];\n        if(n._ === 'messageEntityLinebreak' && n.offset >= endOffset) {\n          foundNextLinebreakIndex = i;\n          break;\n        }\n      }\n\n      if(foundNextLinebreakIndex !== -1 && nasty.text.slice(endOffset, entities[foundNextLinebreakIndex].offset).trim()) {\n        foundNextLinebreakIndex = -1;\n      }\n\n      if(!options.wrappingDraft && endOffset < nasty.text.length) {\n        // * ignore inner linebreak if found and double next linebreak\n        if(!element.parentElement) {\n          const container = document.createElement('div');\n          container.append(element);\n          fragment.append(container);\n        }\n\n        if(nasty.text[endOffset - 1] === '\\n') {\n          let lastInnerLinebreakIndex = -1;\n          for(let i = nasty.i; i < length; ++i) {\n            const n = entities[i];\n            if(n.offset >= endOffset) {\n              break;\n            }\n\n            if(n._ === 'messageEntityLinebreak') {\n              lastInnerLinebreakIndex = i;\n            }\n          }\n\n          if(lastInnerLinebreakIndex !== -1) {\n            options.ignoreNextIndex = lastInnerLinebreakIndex;\n          }\n        } else if(foundNextLinebreakIndex !== -1) {\n          options.ignoreNextIndex = foundNextLinebreakIndex;\n        }\n\n        // if(nasty.text[endOffset - 1] === '\\n' &&\n        //   foundNextLinebreakIndex !== -1 &&\n        //   nasty.text[endPartOffset + 1] === '\\n') {\n        //   options.ignoreNextIndex = foundNextLinebreakIndex - 1;\n        //   options.doubleLinebreak = foundNextLinebreakIndex;\n        // }\n      }\n\n      if(options.wrappingDraft && foundNextLinebreakIndex !== -1) {\n        options.ignoreNextIndex = foundNextLinebreakIndex;\n      }\n\n      // if(!options.wrappingDraft) {\n      //   const i = Icon('quote', 'quote-icon');\n      //   element.textContent = partText;\n      //   usedText = true;\n      //   element.prepend(i);\n      // } else {\n      //   element.classList.add('quote-use-before');\n      // }\n    }\n\n    if(!usedText && partText) {\n      if(element) {\n        if(property) {\n          // @ts-ignore\n          element[property] = partText;\n        } else {\n          element.append(partText);\n        }\n      } else {\n        (element || fragment).append(partText);\n      }\n    }\n\n    if(element && !element.parentNode) {\n      (lastElement || fragment).append(element);\n    }\n\n    while(nextEntity && nextEntity.offset < endOffset) {\n      ++nasty.i;\n\n      (element || fragment).append(wrapRichText(nasty.text, {\n        ...options,\n        voodoo: true\n      }));\n\n      nextEntity = entities[nasty.i + 1];\n    }\n\n    // if(!element?.parentNode) {\n    //   (lastElement || fragment).append(element ?? partText);\n    // }\n\n    if(nasty.usedLength <= endOffset) {\n      if(nasty.usedLength < endOffset) {\n        (element || fragment).append(nasty.text.slice(nasty.usedLength, endOffset));\n        nasty.usedLength = endOffset;\n      }\n\n      lastElement = fragment;\n      nasty.lastEntity = undefined;\n    } else if(entity.length > partText.length && element) {\n      lastElement = element;\n    } else {\n      lastElement = fragment;\n    }\n\n    if(options.voodoo) {\n      return fragment;\n    }\n  }\n\n  if(nasty.lastEntity) {\n    nasty.usedLength = nasty.lastEntity.offset + nasty.lastEntity.length;\n  }\n\n  if(nasty.usedLength < textLength) {\n    (lastElement || fragment).append(nasty.text.slice(nasty.usedLength));\n  }\n\n  if((!options.wrappingDraft || options.customEmojiRenderer) && customEmojis.size) {\n    let renderer = options.customEmojiRenderer;\n    if(!renderer) {\n      renderer = CustomEmojiRendererElement.create(options);\n      fragment.prepend(renderer);\n    }\n\n    const loadPromise = renderer.add({\n      addCustomEmojis: customEmojis,\n      lazyLoadQueue: options.lazyLoadQueue,\n      onlyThumb: options.wrappingDraft\n    });\n    options.loadPromises?.push(loadPromise);\n    // recordPromise(loadPromise, 'render emojis: ' + docIds.length);\n  }\n\n  if(customWraps.size) {\n    insertCustomFillers(customWraps);\n  }\n\n  fragment.normalize();\n\n  return fragment;\n}\n\nexport const createCustomFiller = (notFiller?: boolean) => {\n  const x = document.createElement('span');\n  x.classList.add(notFiller ? 'input-filler2' : 'input-filler');\n  x.textContent = BOM;\n  return x;\n};\n\nexport function isCustomFillerNeededBySiblingNode(node: ChildNode) {\n  if(\n    // !node?.textContent ||\n    // node.textContent.endsWith('\\n') ||\n    node?.textContent !== BOM ||\n    (node as HTMLElement)?.getAttribute?.('contenteditable') === 'false'\n  ) {\n    // if(!node || (node as HTMLElement).firstElementChild || node.textContent.endsWith('\\n')) {\n    if(!node || node.textContent !== BOM || (node as HTMLElement).firstElementChild) {\n      return 2;\n    } else if(node.nodeType === node.ELEMENT_NODE) {\n      return 1;\n    }/*  else if(node.nodeType === node.TEXT_NODE && !node.nodeValue) {\n      (node as CharacterData).insertData(0, BOM);\n    } */\n  }\n\n  return 0;\n}\n\nexport function insertCustomFillers(elements: Iterable<HTMLElement>) {\n  const check = (element: HTMLElement, node: ChildNode, method: 'before' | 'after') => {\n    const needed = isCustomFillerNeededBySiblingNode(node);\n    if(needed === 2) {\n      element[method](createCustomFiller());\n    } else if(needed === 1) {\n      node.appendChild(document.createTextNode(BOM));\n    }\n  };\n\n  for(const element of elements) {\n    const {previousSibling, nextSibling} = element;\n    check(element, previousSibling, 'before');\n    check(element, nextSibling, 'after');\n  }\n}\n\n(window as any).wrapRichText = wrapRichText;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MessageEntity} from '../../layer';\nimport parseEntities from './parseEntities';\nimport wrapRichText from './wrapRichText';\n\nexport default function wrapEmojiText(text: string, isDraft = false, entities?: MessageEntity[]) {\n  if(!text) return wrapRichText('');\n\n  entities ??= parseEntities(text).filter((e) => e._ === 'messageEntityEmoji');\n  return wrapRichText(text, {entities, wrappingDraft: isDraft});\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport _limitSymbols from '../../helpers/string/limitSymbols';\nimport {Chat} from '../../layer';\nimport getPeerActiveUsernames from '../../lib/appManagers/utils/peers/getPeerActiveUsernames';\nimport I18n from '../../lib/langPack';\nimport apiManagerProxy from '../../lib/mtproto/mtprotoworker';\nimport wrapEmojiText from '../../lib/richTextProcessor/wrapEmojiText';\nimport rootScope from '../../lib/rootScope';\n\ntype GetPeerTitleOptions = {\n  peerId: PeerId,\n  plainText?: boolean,\n  onlyFirstName?: boolean,\n  limitSymbols?: number,\n  threadId?: number,\n  useManagers?: boolean\n} & Pick<WrapSomethingOptions, 'managers'>;\n\nexport default async function getPeerTitle<\n  T extends GetPeerTitleOptions,\n  R = T['plainText'] extends true ? string : DocumentFragment\n>(\n  options: T\n): Promise<R> {\n  const {\n    peerId = rootScope.myId,\n    plainText,\n    onlyFirstName,\n    limitSymbols,\n    managers = rootScope.managers,\n    useManagers,\n    threadId\n  } = options;\n\n  let title = '';\n  if(peerId.isUser()) {\n    const user = useManagers ? await managers.appUsersManager.getUser(peerId.toUserId()) : apiManagerProxy.getUser(peerId.toUserId());\n    if(user) {\n      if(user.first_name) title += user.first_name;\n      if(user.last_name && (!onlyFirstName || !title)) title += ' ' + user.last_name;\n    }\n\n    if(!title) title = !user || user.pFlags.deleted ? I18n.format(onlyFirstName ? 'Deleted' : 'HiddenName', true) : getPeerActiveUsernames(user)[0] || '';\n    else title = title.trim();\n  } else {\n    if(threadId) {\n      const topic = await managers.dialogsStorage.getForumTopic(peerId, threadId);\n      title = topic?.title || '';\n    }\n\n    if(!title) {\n      const chat = (useManagers ? managers.appChatsManager.getChat(peerId.toChatId()) : apiManagerProxy.getChat(peerId.toChatId())) as Chat.chat;\n      title = chat?.title || '';\n    }\n\n    if(onlyFirstName) {\n      title = title.split(' ')[0];\n    }\n  }\n\n  if(limitSymbols !== undefined) {\n    title = _limitSymbols(title, limitSymbols, limitSymbols);\n  }\n\n  return plainText ? title : wrapEmojiText(title) as any;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {WallPaper} from '../layer';\nimport clamp from './number/clamp';\n\nexport type ColorHsla = {\n  h: number,\n  s: number,\n  l: number,\n  a: number\n};\n\nexport type ColorRgba = [number, number, number, number];\nexport type ColorRgb = [number, number, number];\n\n/**\n * https://stackoverflow.com/a/54070620/6758968\n * r, g, b in [0, 255]\n * @returns h in [0,360) and s, v in [0,1]\n */\nexport function rgbToHsv(r: number, g: number, b: number): [number, number, number] {\n  r /= 255, g /= 255, b /= 255;\n  const v = Math.max(r, g, b),\n    c = v - Math.min(r, g, b);\n  const h = c && ((v === r) ? (g - b ) / c : ((v == g) ? 2 + (b - r) / c : 4 + (r - g) / c));\n  return [60 * (h < 0 ? h + 6 : h), v && c / v, v];\n}\n\n/**\n * https://stackoverflow.com/a/54024653/6758968\n * @param h [0, 360]\n * @param s [0, 1]\n * @param v [0, 1]\n * @returns r, g, b in [0, 255]\n */\nexport function hsvToRgb(h: number, s: number, v: number): ColorRgb {\n  const f = (n: number, k: number = (n + h / 60) % 6) => Math.round((v - v * s * Math.max(Math.min(k, 4 - k, 1), 0)) * 255);\n  return [f(5), f(3), f(1)];\n}\n\n/**\n * @returns h [0, 360], s [0, 100], l [0, 100], a [0, 1]\n */\nexport function rgbaToHsla(r: number, g: number, b: number, a: number = 1): ColorHsla {\n  r /= 255, g /= 255, b /= 255;\n  const max = Math.max(r, g, b),\n    min = Math.min(r, g, b);\n  let h: number, s: number;\n  const l = (max + min) / 2;\n\n  if(max === min) {\n    h = s = 0; // achromatic\n  } else {\n    const d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    switch(max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    h /= 6;\n  }\n\n  return {\n    h: h * 360,\n    s: s * 100,\n    l: l * 100,\n    a\n  };\n}\n\nexport function hslaToString(hsla: ColorHsla) {\n  return `hsla(${hsla.h}, ${hsla.s}%, ${hsla.l}%, ${hsla.a})`;\n}\n\n// * https://stackoverflow.com/a/9493060/6758968\n/**\n * Converts an HSL color value to RGB. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n *\n * @param   {number}  h       The hue [0, 360]\n * @param   {number}  s       The saturation [0, 1]\n * @param   {number}  l       The lightness [0, 1]\n * @return  {Array}           The RGB representation [0, 255]\n */\nexport function hslaToRgba(h: number, s: number, l: number, a: number): ColorRgba {\n  h /= 360, s /= 100, l /= 100;\n  let r: number, g: number, b: number;\n\n  if(s === 0) {\n    r = g = b = l; // achromatic\n  } else {\n    const hue2rgb = function hue2rgb(p: number, q: number, t: number) {\n      if(t < 0) t += 1;\n      if(t > 1) t -= 1;\n      if(t < 1/6) return p + (q - p) * 6 * t;\n      if(t < 1/2) return q;\n      if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n      return p;\n    }\n\n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    const p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n\n  return [r, g, b, a].map((v) => Math.round(v * 255)) as ColorRgba;\n}\n\nexport function hslaStringToRgba(hsla: string) {\n  const splitted = hsla.slice(5, -1).split(', ');\n  const alpha = +splitted.pop();\n  const arr = splitted.map((val) => {\n    if(val.endsWith('%')) {\n      return +val.slice(0, -1);\n    }\n\n    return +val;\n  });\n\n  return hslaToRgba(arr[0], arr[1], arr[2], alpha);\n}\n\nexport function hexaToRgba(hexa: string) {\n  const arr: ColorRgba = [] as any;\n  const offset = hexa[0] === '#' ? 1 : 0;\n  if(hexa.length === (5 + offset)) {\n    hexa = (offset ? '#' : '') + '0' + hexa.slice(offset);\n  }\n\n  if(hexa.length === (3 + offset)) {\n    for(let i = offset; i < hexa.length; ++i) {\n      arr.push(parseInt(hexa[i] + hexa[i], 16));\n    }\n  } else if(hexa.length === (4 + offset)) {\n    for(let i = offset; i < (hexa.length - 1); ++i) {\n      arr.push(parseInt(hexa[i] + hexa[i], 16));\n    }\n\n    arr.push(parseInt(hexa[hexa.length - 1], 16));\n  } else {\n    for(let i = offset; i < hexa.length; i += 2) {\n      arr.push(parseInt(hexa.slice(i, i + 2), 16));\n    }\n  }\n\n  return arr;\n}\n\nexport function hexToRgb(hex: string) {\n  return hexaToRgba(hex.slice(0, 7)) as any as ColorRgb;\n}\n\nexport function hexaToHsla(hexa: string) {\n  const rgba = hexaToRgba(hexa);\n  return rgbaToHsla(rgba[0], rgba[1], rgba[2], rgba[3]);\n}\n\nexport function rgbaToHexa(rgba: ColorRgba | ColorRgb) {\n  return '#' + rgba.map((v) => ('0' + v.toString(16)).slice(-2)).join('');\n}\n\nexport function hslaStringToHexa(hsla: string) {\n  return rgbaToHexa(hslaStringToRgba(hsla));\n}\n\nexport function hslaStringToHex(hsla: string) {\n  return hslaStringToHexa(hsla).slice(0, -2);\n}\n\n/**\n * @param weight [0, 1]\n */\nexport function mixColors(color1: ColorRgb, color2: ColorRgb, weight: number) {\n  const out = new Array<number>(3) as ColorRgb;\n  for(let i = 0; i < 3; ++i) {\n    const v1 = color1[i], v2 = color2[i];\n    out[i] = Math.floor(v2 + (v1 - v2) * weight);\n  }\n\n  return out;\n}\n\nexport function computePerceivedBrightness(color: ColorRgb) {\n  return (color[0] * 0.2126 + color[1] * 0.7152 + color[2] * 0.0722) / 255;\n}\n\nexport function getAverageColor(color1: ColorRgb, color2: ColorRgb): ColorRgb {\n  return color1.map((v, i) => Math.round((v + color2[i]) / 2)) as ColorRgb;\n}\n\nexport function getAccentColor(baseHsv: number[], baseColor: ColorRgb, elementColor: ColorRgb): ColorRgb {\n  const hsvTemp3 = rgbToHsv(...baseColor);\n  const hsvTemp4 = rgbToHsv(...elementColor);\n\n  const dist = Math.min(1.5 * hsvTemp3[1] / baseHsv[1], 1);\n\n  hsvTemp3[0] = Math.min(360, hsvTemp4[0] - hsvTemp3[0] + baseHsv[0]);\n  hsvTemp3[1] = Math.min(1, hsvTemp4[1] * baseHsv[1] / hsvTemp3[1]);\n  hsvTemp3[2] = Math.min(1, (hsvTemp4[2] / hsvTemp3[2] + dist - 1) * baseHsv[2] / dist);\n  if(hsvTemp3[2] < 0.3) {\n    return elementColor;\n  }\n  return hsvToRgb(...hsvTemp3);\n}\n\nexport function changeColorAccent(baseHsv: number[], accentHsv: number[], color: ColorRgb, isDarkTheme: boolean) {\n  const colorHsv = rgbToHsv(...color);\n\n  const diffH = Math.min(Math.abs(colorHsv[0] - baseHsv[0]), Math.abs(colorHsv[0] - baseHsv[0] - 360));\n  if(diffH > 30) {\n    return color;\n  }\n\n  const dist = baseHsv[1] ? Math.min(1.5 * colorHsv[1] / baseHsv[1], 1) : 0;\n\n  colorHsv[0] = Math.min(360, colorHsv[0] + accentHsv[0] - baseHsv[0]);\n  colorHsv[1] = baseHsv[1] ? Math.min(1, colorHsv[1] * accentHsv[1] / baseHsv[1]) : 0;\n  colorHsv[2] = baseHsv[2] ? Math.min(1, colorHsv[2] * (1 - dist + dist * accentHsv[2] / baseHsv[2])) : 0;\n\n  let newColor = hsvToRgb(...colorHsv);\n\n  const origBrightness = computePerceivedBrightness(color);\n  const newBrightness = computePerceivedBrightness(newColor);\n\n  // We need to keep colors lighter in dark themes and darker in light themes\n  const needRevertBrightness = isDarkTheme ? origBrightness > newBrightness : origBrightness < newBrightness;\n\n  if(needRevertBrightness) {\n    const amountOfNew = 0.6;\n    const fallbackAmount = (1 - amountOfNew) * origBrightness / newBrightness + amountOfNew;\n    newColor = changeBrightness(newColor, fallbackAmount);\n  }\n\n  return newColor;\n}\n\nexport function changeBrightness(color: ColorRgb, amount: number) {\n  return color.map((v) => clamp(Math.round(v * amount), 0, 255)) as ColorRgb;\n}\n\nexport function getHexColorFromTelegramColor(color: number) {\n  const hex = (color < 0 ? 0xFFFFFF + color : color).toString(16);\n  return '#' + (hex.length >= 6 ? hex : '0'.repeat(6 - hex.length) + hex);\n}\n\nexport function getRgbColorFromTelegramColor(color: number) {\n  return hexToRgb(getHexColorFromTelegramColor(color));\n}\n\nexport function getColorsFromWallPaper(wallPaper: WallPaper) {\n  return wallPaper.settings ? [\n    wallPaper.settings.background_color,\n    wallPaper.settings.second_background_color,\n    wallPaper.settings.third_background_color,\n    wallPaper.settings.fourth_background_color\n  ].filter(Boolean).map(getHexColorFromTelegramColor).join(',') : '';\n}\n\nexport function rgbaToRgb(rgba: ColorRgba, bg: ColorRgb): ColorRgb {\n  const a = rgba[3];\n  return rgba.slice(0, 3).map((color, idx) => {\n    return clamp(Math.round((a * (color / 255) + (a * (bg[idx] / 255))) * 255), 0, 255);\n  }) as ColorRgb;\n}\n\nexport function calculateLuminance(rgb: ColorRgb) {\n  const [r, g, b] = rgb;\n  const luminance = (0.2126 * r / 255 + 0.7152 * g / 255 + 0.0722 * b / 255);\n  return luminance;\n}\n\nexport function getTextColor(luminance: number): ColorRgb {\n  return luminance > 0.5 ? [0, 0, 0] : [255, 255, 255];\n}\n\nexport function calculateOpacity(luminance: number, targetContrast: number) {\n  const targetTextLuminance = luminance > 0.5 ? 0 : 1;\n  const adaptiveOpacity = (luminance - targetTextLuminance + targetContrast) / targetContrast;\n  const opacity = +Math.max(0.5, Math.min(0.64, adaptiveOpacity)).toFixed(2);\n\n  return opacity;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {AppTheme} from '../config/state';\nimport type {Theme} from '../layer';\nimport type AppBackgroundTab from '../components/sidebarLeft/tabs/background';\nimport IS_TOUCH_SUPPORTED from '../environment/touchSupport';\nimport rootScope from '../lib/rootScope';\nimport {changeColorAccent, ColorRgb, getAccentColor, getAverageColor, getHexColorFromTelegramColor, getRgbColorFromTelegramColor, hexToRgb, hslaStringToHex, hslaStringToRgba, hslaToRgba, hsvToRgb, mixColors, rgbaToHexa, rgbaToHsla, rgbToHsv} from './color';\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport customProperties from './dom/customProperties';\nimport {TelegramWebViewTheme} from '../types';\nimport {joinDeepPath} from './object/setDeepProperty';\nimport windowSize from './windowSize';\nimport liteMode from './liteMode';\n\nexport type AppColorName = 'primary-color' | 'message-out-primary-color' |\n  'surface-color' | 'danger-color' | 'primary-text-color' |\n  'secondary-text-color' | 'message-out-background-color' |\n  'saved-color' | 'message-background-color' | 'green-color';\ntype AppColor = {\n  rgb?: boolean,\n  light?: boolean,\n  lightFilled?: boolean,\n  dark?: boolean,\n  darkRgb?: boolean,\n  darkFilled?: boolean\n};\n\nconst appColorMap: {[name in AppColorName]: AppColor} = {\n  // 'background-color': {},\n  'primary-color': {\n    rgb: true,\n    light: true,\n    lightFilled: true,\n    dark: true,\n    darkRgb: true\n  },\n  'message-out-primary-color': {\n    lightFilled: true,\n    rgb: true\n  },\n  'surface-color': {\n    rgb: true\n  },\n  'danger-color': {\n    rgb: true,\n    light: true,\n    dark: true\n  },\n  'primary-text-color': {\n    rgb: true\n  },\n  'secondary-text-color': {\n    light: true,\n    lightFilled: true,\n    rgb: true\n  },\n  'message-background-color': {\n    light: true,\n    lightFilled: true,\n    dark: true,\n    darkFilled: true\n  },\n  'message-out-background-color': {\n    light: true,\n    lightFilled: true,\n    dark: true,\n    darkFilled: true,\n    rgb: true\n  },\n  'saved-color': {\n    lightFilled: true\n  },\n  'green-color': {}\n};\n\nconst colorMap: {\n  [name in AppTheme['name']]?: {\n    [name in AppColorName]?: string\n  }\n} = {\n  day: {\n    // 'background-color': '#f4f4f5',\n    'primary-color': '#3390ec',\n    'message-out-primary-color': '#5CA853',\n    'message-background-color': '#ffffff',\n    'surface-color': '#ffffff',\n    'danger-color': '#df3f40',\n    'primary-text-color': '#000000',\n    'secondary-text-color': '#707579',\n    'saved-color': '#359AD4',\n    'green-color': '#70b768'\n  },\n  night: {\n    // 'background-color': '#181818',\n    'primary-color': '#8774E1',\n    'message-out-primary-color': '#8774E1',\n    'message-background-color': '#212121',\n    'surface-color': '#212121',\n    'danger-color': '#ff595a',\n    'primary-text-color': '#ffffff',\n    'secondary-text-color': '#aaaaaa',\n    'saved-color': '#8774E1',\n    'green-color': '#5CC85E'\n  }\n};\n\nexport class ThemeController {\n  private themeColor: string;\n  private _themeColorElem: Element;\n  private systemTheme: AppTheme['name'];\n  private styleElement: HTMLStyleElement;\n  public AppBackgroundTab: typeof AppBackgroundTab;\n  private applied: boolean;\n\n  constructor() {\n    rootScope.addEventListener('theme_change', (coordinates) => {\n      this.setTheme(typeof(coordinates) === 'object' ? coordinates : undefined);\n    });\n\n    rootScope.addEventListener('theme_changed', () => {\n      this.setWorkerThemeParams();\n    });\n\n    // rootScope.addEventListener('settings_updated', ())\n  }\n\n  private setWorkerThemeParams() {\n    rootScope.managers.apiManager.setThemeParams({\n      _: 'dataJSON',\n      data: JSON.stringify(this.getThemeParamsForWebView())\n    });\n  }\n\n  private get themeColorElem() {\n    if(this._themeColorElem !== undefined) {\n      return this._themeColorElem;\n    }\n\n    return this._themeColorElem = document.head.querySelector('[name=\"theme-color\"]') as Element || null;\n  }\n\n  public setThemeColor(color = this.themeColor) {\n    if(!color) {\n      color = this.isNight() ? '#212121' : '#ffffff';\n    }\n\n    const themeColorElem = this.themeColorElem;\n    if(themeColorElem) {\n      themeColorElem.setAttribute('content', color);\n    }\n  }\n\n  public setThemeListener() {\n    try {\n      const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\n      const checkDarkMode = () => {\n        // const theme = this.getTheme();\n        this.systemTheme = darkModeMediaQuery.matches ? 'night' : 'day';\n        // const newTheme = this.getTheme();\n\n        if(rootScope.myId) {\n          rootScope.dispatchEvent('theme_change');\n        } else {\n          this.setTheme();\n        }\n      };\n\n      if('addEventListener' in darkModeMediaQuery) {\n        darkModeMediaQuery.addEventListener('change', checkDarkMode);\n      } else if('addListener' in darkModeMediaQuery) {\n        (darkModeMediaQuery as any).addListener(checkDarkMode);\n      }\n\n      checkDarkMode();\n    } catch(err) {\n\n    }\n  }\n\n  public applyHighlightingColor({\n    hsla,\n    element = document.documentElement\n  }: {\n    hsla?: string,\n    element?: HTMLElement\n  } = {}) {\n    if(!hsla) {\n      hsla = 'hsla(85.5319, 36.9171%, 40.402%, .4)';\n      const theme = this.getTheme();\n      if(theme.settings?.highlightingColor) {\n        hsla = theme.settings.highlightingColor;\n      }\n    }\n\n    const highlightingRgba = hslaStringToRgba(hsla);\n    element.style.setProperty('--message-highlighting-color', hsla);\n    element.style.setProperty('--message-highlighting-color-rgb', highlightingRgba.slice(0, 3).join(','));\n    element.style.setProperty('--message-highlighting-alpha', '' + highlightingRgba[3] / 255);\n\n    if(!IS_TOUCH_SUPPORTED && hsla) {\n      this.themeColor = hslaStringToHex(hsla);\n    }\n  }\n\n  public _setTheme(silent?: boolean) {\n    const isNight = this.isNight();\n    const colorScheme = document.head.querySelector('[name=\"color-scheme\"]');\n    colorScheme?.setAttribute('content', isNight ? 'dark' : 'light');\n\n    document.documentElement.classList.toggle('night', isNight);\n    this.setThemeColor();\n    const theme = this.getTheme();\n    this.applyTheme(theme);\n\n    let style = this.styleElement;\n    if(!style) {\n      style = this.styleElement = document.createElement('style');\n      document.head.append(style);\n    }\n\n    const e = document.createElement('div');\n    this.applyTheme(rootScope.settings.themes.find((theme) => theme.name === 'night'), e, true);\n    style.textContent = `.night {${e.style.cssText}}`;\n\n    this.applyHighlightingColor();\n    !silent && rootScope.dispatchEventSingle('theme_changed');\n  }\n\n  public setTheme(coordinates?: {x: number, y: number}) {\n    if(!('startViewTransition' in document) || !this.applied) {\n      const silent = !this.applied;\n      const wasApplied = this.applied;\n      this.applied = true;\n\n      this._setTheme(silent);\n      if(!wasApplied) {\n        this.setWorkerThemeParams();\n      }\n\n      return;\n    }\n\n    if(!liteMode.isAvailable('animations')) {\n      coordinates = undefined;\n    }\n\n    const reverse = !this.isNight();\n    if(coordinates) {\n      document.documentElement.classList.add('no-view-transition');\n      document.documentElement.classList.toggle('reverse', reverse);\n      void document.documentElement.offsetLeft; // reflow\n    }\n\n    const transition = (document as any).startViewTransition(() => {\n      this._setTheme();\n    });\n\n    if(!coordinates) {\n      return;\n    }\n\n    const {x, y} = coordinates;\n    // Get the distance to the furthest corner\n    const endRadius = Math.hypot(\n      Math.max(x, windowSize.width - x),\n      Math.max(y, windowSize.height - y)\n    );\n\n    transition.ready.then(() => {\n      document.documentElement.animate({\n        clipPath: [\n          `circle(0 at ${x}px ${y}px)`,\n          `circle(${endRadius}px at ${x}px ${y}px)`\n        ]\n      }, {\n        duration: 500,\n        easing: 'ease-in-out',\n        pseudoElement: `::view-transition-${reverse ? 'old' : 'new'}(root)`,\n        direction: reverse ? 'reverse' : 'normal'\n      });\n    });\n\n    transition.finished.finally(() => {\n      document.documentElement.classList.remove('no-view-transition', 'reverse');\n    });\n  }\n\n  public async switchTheme(name: AppTheme['name'], coordinates?: {x: number, y: number}) {\n    await rootScope.managers.appStateManager.setByKey(joinDeepPath('settings', 'theme'), name);\n    rootScope.dispatchEvent('theme_change', coordinates);\n  }\n\n  public isNight() {\n    return this.getTheme().name === 'night';\n  }\n\n  public getTheme(name: AppTheme['name'] = rootScope.settings.theme === 'system' ? this.systemTheme : rootScope.settings.theme) {\n    return rootScope.settings.themes.find((t) => t.name === name);\n  }\n\n  // theme applier\n  private bindColorApplier(options: Pick<Parameters<ThemeController['applyAppColor']>[0], 'element' | 'isNight' | 'saveToCache'>) {\n    const appliedColors: Set<AppColorName> = new Set();\n    return {\n      applyAppColor: (_options: Omit<Parameters<ThemeController['applyAppColor']>[0], keyof typeof options>) => {\n        appliedColors.add(_options.name);\n        return this.applyAppColor({..._options, ...options});\n      },\n      finalize: () => {\n        const isNight = options.isNight;\n        for(const name in appColorMap) {\n          if(!appliedColors.has(name as AppColorName)) {\n            this.applyAppColor({\n              name: name as AppColorName,\n              hex: colorMap[isNight ? 'night' : 'day'][name as AppColorName],\n              ...options\n            });\n          }\n        }\n      }\n    };\n  };\n\n  public applyAppColor({\n    name,\n    hex,\n    element,\n    lightenAlpha = 0.08,\n    darkenAlpha = lightenAlpha,\n    mixColor,\n    isNight = this.isNight(),\n    saveToCache\n  }: {\n    name: AppColorName,\n    hex: string,\n    element: HTMLElement,\n    lightenAlpha?: number\n    darkenAlpha?: number,\n    mixColor?: ColorRgb,\n    isNight?: boolean,\n    saveToCache?: boolean\n  }) {\n    const appColor = appColorMap[name];\n    const rgb = hexToRgb(hex);\n    const hsla = rgbaToHsla(...rgb);\n\n    mixColor ??= hexToRgb(colorMap[isNight ? 'night' : 'day']['surface-color']);\n    const lightenedRgb = mixColors(rgb, mixColor, lightenAlpha);\n\n    const darkenedHsla: typeof hsla = {\n      ...hsla,\n      l: hsla.l - darkenAlpha * 100\n    };\n\n    const properties: [string, string][] = [\n      [name, hex],\n      appColor.rgb && [name + '-rgb', rgb.join(',')],\n      appColor.light && ['light-' + name, `rgba(${rgb[0]}, ${rgb[1]}, ${rgb[2]}, ${lightenAlpha})`],\n      appColor.lightFilled && ['light-filled-' + name, rgbaToHexa(lightenedRgb)],\n      appColor.dark && ['dark-' + name, `hsl(${darkenedHsla.h}, ${darkenedHsla.s}%, ${darkenedHsla.l}%)`]\n      // appColor.darkFilled && ['dark-' + name, `hsl(${darkenedHsla.h}, ${darkenedHsla.s}%, ${darkenedHsla.l}%)`]\n    ];\n\n    saveToCache ??= element === document.documentElement;\n    properties.filter(Boolean).forEach(([name, value]) => {\n      element.style.setProperty('--' + name, value);\n\n      if(saveToCache) {\n        customProperties.setPropertyCache(name as AppColorName, value, isNight);\n      }\n    });\n  }\n\n  public async applyNewTheme(theme: Theme) {\n    const isNight = this.isNightTheme(theme);\n    const currentTheme = this.getTheme();\n    const themes = rootScope.settings.themes;\n    const themeSettings = theme.settings.find((themeSettings) => themeSettings.base_theme._ === (isNight ? 'baseThemeNight' : 'baseThemeClassic'));\n    const newAppTheme: AppTheme = {\n      ...theme,\n      name: currentTheme.name,\n      settings: {\n        ...themeSettings,\n        highlightingColor: ''\n      }\n    };\n\n    await this.AppBackgroundTab.setBackgroundDocument(themeSettings.wallpaper, newAppTheme.settings);\n    themes[themes.indexOf(currentTheme)] = newAppTheme;\n    await rootScope.managers.appStateManager.setByKey(joinDeepPath('settings', 'themes'), rootScope.settings.themes);\n    rootScope.dispatchEvent('theme_change');\n  }\n\n  private isNightTheme(theme: Theme | AppTheme) {\n    return (theme as AppTheme).name === 'night' || this.isNight();\n  }\n\n  public getThemeSettings(theme: Theme | AppTheme, isNight?: boolean) {\n    isNight ??= this.isNightTheme(theme);\n    const themeSettings = Array.isArray(theme.settings) ?\n      theme.settings.find((settings) => settings.base_theme._ === (isNight ? 'baseThemeNight' : 'baseThemeClassic')) :\n      theme.settings;\n    return themeSettings;\n  }\n\n  public applyTheme(theme: Theme | AppTheme, element = document.documentElement, saveToCache?: boolean) {\n    const isNight = this.isNightTheme(theme);\n    const themeSettings = this.getThemeSettings(theme, isNight);\n    const baseColors = colorMap[isNight ? 'night' : 'day'];\n\n    let hsvTemp1 = rgbToHsv(...hexToRgb(baseColors['primary-color'])); // primary base\n    let hsvTemp2 = rgbToHsv(...getRgbColorFromTelegramColor(themeSettings.accent_color)); // new primary\n\n    const newAccentRgb = changeColorAccent(\n      hsvTemp1,\n      hsvTemp2,\n      hexToRgb(baseColors['primary-color']),\n      !isNight\n    );\n    const newAccentHex = rgbaToHexa(newAccentRgb);\n\n    const {applyAppColor, finalize} = this.bindColorApplier({element, isNight, saveToCache});\n\n    applyAppColor({\n      name: 'primary-color',\n      hex: newAccentHex,\n      darkenAlpha: 0.04\n    });\n\n    applyAppColor({\n      name: 'saved-color',\n      hex: newAccentHex,\n      lightenAlpha: 0.64,\n      mixColor: [255, 255, 255]\n    });\n\n    if(!themeSettings.message_colors?.length) {\n      return;\n    }\n\n    const messageLightenAlpha = isNight ? 1 : 0.12;\n    const baseMessageColor = hexToRgb(baseColors['message-out-primary-color']);\n    hsvTemp1 = rgbToHsv(...baseMessageColor);\n    const baseMessageOutBackgroundColor = mixColors(baseMessageColor, hexToRgb(baseColors['surface-color']), messageLightenAlpha);\n\n    const firstColor = getRgbColorFromTelegramColor(themeSettings.message_colors[0]);\n\n    let myMessagesAccent = firstColor;\n    if(themeSettings.message_colors.length > 1) {\n      // const w = getAccentColor(hsvTemp1, baseMessageOutBackgroundColor, myMessagesAccent);\n\n      themeSettings.message_colors.slice(1).forEach((nextColor) => {\n        myMessagesAccent = getAverageColor(myMessagesAccent, getRgbColorFromTelegramColor(nextColor));\n      });\n\n      myMessagesAccent = getAccentColor(hsvTemp1, baseMessageOutBackgroundColor, myMessagesAccent);\n\n      // console.log('www', rgbaToHexa(w), rgbaToHexa(myMessagesAccent));\n    }\n\n    const o = myMessagesAccent;\n    hsvTemp2 = rgbToHsv(...o);\n\n    // const c = changeColorAccent(\n    //   hsvTemp1,\n    //   hsvTemp2,\n    //   baseMessageOutBackgroundColor\n    // );\n\n    // console.log(o, c, rgbaToHexa(o), rgbaToHexa(c));\n\n    const accentColor2 = themeSettings.outbox_accent_color !== undefined && rgbToHsv(...getRgbColorFromTelegramColor(themeSettings.outbox_accent_color));\n\n    let newMessageOutBackgroundColor = mixColors(myMessagesAccent, hexToRgb(baseColors['surface-color']), messageLightenAlpha);\n\n    if(!isNight/*  || true */) {\n      const messageOutBackgroundColorHsl = rgbaToHsla(...newMessageOutBackgroundColor);\n      messageOutBackgroundColorHsl.s = Math.min(messageOutBackgroundColorHsl.s + (isNight ? 8 : 63), 100);\n      newMessageOutBackgroundColor = hslaToRgba(messageOutBackgroundColorHsl.h, messageOutBackgroundColorHsl.s, messageOutBackgroundColorHsl.l, messageOutBackgroundColorHsl.a).slice(0, 3) as ColorRgb;\n    }\n\n    applyAppColor({\n      name: 'message-out-background-color',\n      hex: rgbaToHexa(newMessageOutBackgroundColor),\n      lightenAlpha: messageLightenAlpha\n    });\n\n    applyAppColor({\n      name: 'message-out-primary-color',\n      hex: isNight ? '#ffffff' : rgbaToHexa(accentColor2 ? hsvToRgb(...accentColor2) : myMessagesAccent),\n      mixColor: newMessageOutBackgroundColor\n    });\n\n    // if(accentColor2) {\n    //   console.log(rgbaToHexa(myMessagesAccent), rgbaToHexa(hsvToRgb(...accentColor2)));\n    // }\n\n    finalize();\n  }\n\n  public getThemeParamsForWebView() {\n    const themePropertiesMap: {[key in keyof TelegramWebViewTheme]: string} = {\n      bg_color: 'surface-color',\n      button_color: 'primary-color',\n      button_text_color: '#ffffff',\n      hint_color: 'secondary-text-color',\n      link_color: 'link-color',\n      secondary_bg_color: 'background-color-true',\n      text_color: 'primary-text-color',\n      header_bg_color: 'surface-color',\n      accent_text_color: 'primary-color',\n      section_bg_color: 'surface-color',\n      section_header_text_color: 'primary-color',\n      subtitle_text_color: 'secondary-text-color',\n      destructive_text_color: 'danger-color'\n    };\n\n    const themeParams: TelegramWebViewTheme = {} as any;\n    for(const key in themePropertiesMap) {\n      const value = themePropertiesMap[key as keyof TelegramWebViewTheme];\n      themeParams[key as keyof TelegramWebViewTheme] = value[0] === '#' ? value : customProperties.getProperty(value as AppColorName);\n    }\n\n    return themeParams;\n  }\n}\n\nconst themeController = new ThemeController();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.themeController = themeController);\nexport default themeController;\n","import {getHexColorFromTelegramColor, hexToRgb, hexaToHsla} from '../../../../helpers/color';\nimport themeController from '../../../../helpers/themeController';\nimport {Chat, HelpPeerColorOption, HelpPeerColorSet, User} from '../../../../layer';\n\nconst DialogColorsFg: Array<string[]> = [['#CC5049'], ['#D67722'], ['#955CDB'], ['#40A920'], ['#309EBA'], ['#368AD1'], ['#C7508B']],\n  DialogColors = ['red', 'orange', 'violet', 'green', 'cyan', 'blue', 'pink'] as const;\n\nconst _DialogColorsFg = DialogColorsFg;\n\nexport function getPeerColorIndexById(peerId: UserId | ChatId) {\n  return Math.abs(+peerId) % 7;\n}\n\nexport function getPeerAvatarColorByPeer(peer: Chat | User) {\n  let idx = getPeerColorIndexByPeer(peer);\n  if(idx === -1) {\n    return;\n  }\n\n  let color = DialogColors[idx];\n  if(!color) {\n    const fgColor = DialogColorsFg[idx];\n    if(!fgColor) {\n      return DialogColors[getPeerColorIndexById(peer.id)];\n    }\n\n    const hsla = hexaToHsla(fgColor[0]);\n    const hue = hsla.h;\n\n    if(hue >= 345 || hue < 29) idx = 0; // red\n    else if(hue < 67) idx = 1; // orange\n    else if(hue < 140) idx = 3; // green\n    else if(hue < 199) idx = 4; // cyan\n    else if(hue < 234) idx = 5; // blue\n    else if(hue < 301) idx = 2; // violet\n    else idx = 6; // pink\n\n    color = DialogColors[idx];\n  }\n\n  return color;\n}\n\nexport function getPeerColorIndexByPeer(peer: Chat | User) {\n  if(!peer) return -1;\n  const peerColor = (peer as User.user).color;\n  return peerColor?.color ?? getPeerColorIndexById(peer.id);\n}\n\nexport function getPeerColorsByPeer(peer: Chat | User) {\n  const colorIndex = getPeerColorIndexByPeer(peer);\n  return DialogColorsFg[colorIndex] ?? [];\n}\n\nfunction replaceColors(writeIn: typeof DialogColorsFg, peerColorOptions: HelpPeerColorOption[], dark?: boolean) {\n  for(const peerColorOption of peerColorOptions) {\n    const colorSet = (dark ? peerColorOption.dark_colors : peerColorOption.colors) as HelpPeerColorSet.helpPeerColorSet;\n    const colors = colorSet?.colors;\n    if(!colors?.length) {\n      continue;\n    }\n\n    const c = colors.map((color) => getHexColorFromTelegramColor(color));\n    writeIn[peerColorOption.color_id] = c;\n  }\n\n  return writeIn;\n}\n\nexport function makeColorsGradient(colors: string[], partSize?: number) {\n  const length = colors.length;\n  partSize ||= 5;\n  if(length !== 3) {\n    colors = colors.slice().reverse();\n  }\n\n  const str = colors.map((color, idx, arr) => {\n    // const startPercents = +(idx * 100 / arr.length).toFixed(2);\n    // const endPercents = +((idx + 1) * 100 / arr.length).toFixed(2);\n    const startValue = idx * partSize + 'px';\n    const endValue = (idx + 1) * partSize + 'px';\n    return [\n      `${color} ${startValue}`,\n      `${color} ${endValue}`\n    ].join(', ');\n  }).join(', ');\n  return `repeating-linear-gradient(-45deg, ${str})`;\n}\n\nexport function setPeerColors(peerColorOptions: HelpPeerColorOption[], user: User.user) {\n  let newColors = replaceColors(_DialogColorsFg.slice(), peerColorOptions);\n  if(themeController.isNight()) {\n    newColors = replaceColors(newColors, peerColorOptions, true);\n  }\n  DialogColorsFg.splice(0, DialogColorsFg.length, ...newColors);\n\n  newColors.forEach((colors, index) => {\n    const peerProperty = `--peer-${index}`;\n    const borderBackgroundProperty = `${peerProperty}-border-background`;\n    const colorRgbProperty = `${peerProperty}-color-rgb`;\n    document.documentElement.style.setProperty(colorRgbProperty, hexToRgb(colors[0]).join(','));\n    if(colors.length > 1) {\n      const gradient = makeColorsGradient(colors);\n      document.documentElement.style.setProperty(\n        borderBackgroundProperty,\n        gradient\n      );\n    } else {\n      document.documentElement.style.removeProperty(borderBackgroundProperty);\n    }\n  });\n\n  // set my peer color\n  const myColors = getPeerColorsByPeer(user);\n  const properties: [string, string, number][] = [\n    ['--peer-border-background', '--primary-color', myColors.length],\n    ['--message-out-peer-border-background', '--message-out-primary-color', myColors.length],\n    ['--message-out-peer-1-border-background', '--message-out-primary-color', 1],\n    ['--message-out-peer-2-border-background', '--message-out-primary-color', 2],\n    ['--message-out-peer-3-border-background', '--message-out-primary-color', 3],\n    ['--message-empty-peer-1-border-background', '--message-empty-primary-color', 1],\n    ['--message-empty-peer-2-border-background', '--message-empty-primary-color', 2],\n    ['--message-empty-peer-3-border-background', '--message-empty-primary-color', 3]\n  ];\n\n  properties.forEach(([peerProperty, colorProperty, length]) => {\n    let borderBackground: string;\n    if(length > 1) {\n      const colors = [\n        `rgba(var(${colorProperty}-rgb), .4)`,\n        `rgba(var(${colorProperty}-rgb), .2)`,\n        `var(${colorProperty})`\n      ];\n\n      if(length === 2) {\n        colors.shift();\n      }\n\n      borderBackground = makeColorsGradient(colors);\n    } else {\n      borderBackground = `var(${colorProperty})`;\n    }\n\n    document.documentElement.style.setProperty(peerProperty, borderBackground);\n  });\n}\n","export default function drawCircle(ctx: CanvasRenderingContext2D, x: number, y: number, radius: number, fill?: boolean, stroke?: boolean) {\n  const dpr = ctx.canvas.dpr;\n  if(dpr) {\n    x *= dpr;\n    y *= dpr;\n    radius *= dpr;\n  }\n\n  ctx.beginPath();\n  ctx.arc(x, y, radius, 0, 2 * Math.PI, false);\n  ctx.closePath();\n\n  if(fill) {\n    ctx.fill();\n  }\n\n  if(stroke) {\n    ctx.stroke();\n  }\n}\n\nexport function drawCircleFromStart(ctx: CanvasRenderingContext2D, x: number, y: number, radius: number, fill?: boolean, stroke?: boolean) {\n  return drawCircle(ctx, x + radius, y + radius, radius, fill, stroke);\n}\n","import {MessageEntity} from '../../layer';\nimport {toCodePoints} from '../../vendor/emoji';\n\nexport default function getEmojiEntityFromEmoji(emoji: string): MessageEntity.messageEntityEmoji {\n  return {\n    _: 'messageEntityEmoji',\n    offset: 0,\n    length: emoji.length,\n    unicode: toCodePoints(emoji).join('-').replace(/-?fe0f/g, '')\n  };\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MessageEntity} from '../../layer';\nimport getEmojiEntityFromEmoji from './getEmojiEntityFromEmoji';\nimport emojiRegExp from '../../vendor/emoji/regex';\n\nconst EMOJI_REG_EXP = new RegExp(`(^${emojiRegExp})`);\n\nexport default function getAbbreviation(str: string, onlyFirst = false): {\n  text: string,\n  entities: MessageEntity[]\n} {\n  const splitted = (str || '').trim().split(' ');\n  if(!splitted[0]) return {text: '', entities: []};\n\n  const entities: MessageEntity.messageEntityEmoji[] = [];\n\n  const firstEmojiMatch = splitted[0].match(EMOJI_REG_EXP);\n  const first = firstEmojiMatch?.[0] || splitted[0][0];\n  if(firstEmojiMatch) {\n    entities.push(getEmojiEntityFromEmoji(first));\n  }\n\n  const length = splitted.length;\n  if(onlyFirst || length === 1) return {text: first, entities};\n\n  const lastEmojiMatch = splitted[length - 1].match(EMOJI_REG_EXP);\n  const last = lastEmojiMatch?.[0] || splitted[length - 1][0];\n  if(lastEmojiMatch) {\n    entities.push({\n      ...getEmojiEntityFromEmoji(last),\n      offset: first.length\n    });\n  }\n\n  return {text: first + last, entities};\n}\n","export const NOTIFICATION_ICON_PATH = 'assets/img/logo_filled_rounded.png';\nexport const NOTIFICATION_BADGE_PATH = 'assets/img/logo_plain.svg'; // masked\n","import {CURRENT_ACCOUNT_QUERY_PARAM} from './constants';\nimport {ActiveAccountNumber} from './types';\n\nexport function createAppURLForAccount(\n  accountNumber: ActiveAccountNumber,\n  hashParams?: Record<string, string>,\n  keepHash = false\n) {\n  const url = new URL(location.href);\n\n  const filteredEntries = Object.entries(hashParams || {}).filter((entry) => entry[1]);\n  const filteredParams = Object.fromEntries(filteredEntries);\n\n  if(filteredEntries.length) {\n    const hashSearchParams = new URLSearchParams();\n    for(const key in filteredParams) {\n      hashSearchParams.set(key, filteredParams[key]);\n    }\n    url.hash = `#/im?${hashSearchParams.toString()}`;\n  } else if(!keepHash) {\n    url.hash = '';\n  }\n\n  if(accountNumber === 1) url.searchParams.delete(CURRENT_ACCOUNT_QUERY_PARAM);\n  else url.searchParams.set(CURRENT_ACCOUNT_QUERY_PARAM, accountNumber + '');\n\n  return url;\n}\n","import {createRoot} from 'solid-js';\nimport {createStore, reconcile, unwrap} from 'solid-js/store';\nimport {State, StateSettings} from '../config/state';\nimport rootScope from '../lib/rootScope';\nimport {joinDeepPath} from '../helpers/object/setDeepProperty';\n\nconst [appSettings, _setAppSettings] = createRoot(() => createStore<StateSettings>({} as any));\n\nconst setAppSettings: typeof _setAppSettings = (...args: any[]) => {\n  const key = args[0];\n  // @ts-ignore\n  _setAppSettings(...args);\n  // @ts-ignore\n  rootScope.managers.appStateManager.setByKey(joinDeepPath('settings', key), unwrap(appSettings[key]));\n};\n\nconst setAppSettingsSilent = (key: any, value?: any) => {\n  if(typeof(key) === 'object') {\n    _setAppSettings(key);\n    return;\n  }\n\n  _setAppSettings(key, reconcile(value));\n};\n\nconst useAppSettings = () => [appSettings, setAppSettings] as const;\n\nexport {\n  appSettings,\n  useAppSettings,\n  setAppSettings,\n  setAppSettingsSilent\n};\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport type {Awaited} from '../../types';\nimport {type State} from '../../config/state';\nimport type {Chat, ChatPhoto, Message, MessagePeerReaction, PeerNotifySettings, User, UserProfilePhoto} from '../../layer';\nimport type {CryptoMethods} from '../crypto/crypto_methods';\nimport type {ThumbStorageMedia} from '../storages/thumbs';\nimport type ThumbsStorage from '../storages/thumbs';\nimport type {AppReactionsManager} from '../appManagers/appReactionsManager';\nimport type {MessagesStorageKey} from '../appManagers/appMessagesManager';\nimport type {AppAvatarsManager, PeerPhotoSize} from '../appManagers/appAvatarsManager';\nimport rootScope, {BroadcastEvents} from '../rootScope';\nimport webpWorkerController from '../webp/webpWorkerController';\nimport {MOUNT_CLASS_TO} from '../../config/debug';\nimport sessionStorage from '../sessionStorage';\nimport webPushApiManager from './webPushApiManager';\nimport appRuntimeManager from '../appManagers/appRuntimeManager';\nimport telegramMeWebManager from './telegramMeWebManager';\nimport pause from '../../helpers/schedulers/pause';\nimport ENVIRONMENT from '../../environment';\nimport loadStateForAllAccountsOnce from '../appManagers/utils/state/loadState';\nimport opusDecodeController from '../opusDecodeController';\nimport MTProtoMessagePort from './mtprotoMessagePort';\nimport cryptoMessagePort from '../crypto/cryptoMessagePort';\nimport SuperMessagePort from './superMessagePort';\nimport IS_SHARED_WORKER_SUPPORTED from '../../environment/sharedWorkerSupport';\nimport toggleStorages from '../../helpers/toggleStorages';\nimport idleController from '../../helpers/idleController';\nimport ServiceMessagePort from '../serviceWorker/serviceMessagePort';\nimport deferredPromise, {CancellablePromise} from '../../helpers/cancellablePromise';\nimport {makeWorkerURL} from '../../helpers/setWorkerProxy';\nimport ServiceWorkerURL from '../../../sw?worker&url';\nimport setDeepProperty, {splitDeepPath} from '../../helpers/object/setDeepProperty';\nimport getThumbKey from '../storages/utils/thumbs/getThumbKey';\nimport {NULL_PEER_ID, TEST_NO_STREAMING, THUMB_TYPE_FULL} from './mtproto_config';\nimport generateEmptyThumb from '../storages/utils/thumbs/generateEmptyThumb';\nimport getStickerThumbKey from '../storages/utils/thumbs/getStickerThumbKey';\nimport callbackify from '../../helpers/callbackify';\nimport isLegacyMessageId from '../appManagers/utils/messageId/isLegacyMessageId';\nimport {MTAppConfig} from './appConfig';\nimport {setAppStateSilent} from '../../stores/appState';\nimport getObjectKeysAndSort from '../../helpers/object/getObjectKeysAndSort';\nimport {reconcilePeer, reconcilePeers} from '../../stores/peers';\nimport {getCurrentAccount} from '../accounts/getCurrentAccount';\nimport {ActiveAccountNumber} from '../accounts/types';\nimport {createProxiedManagersForAccount, ProxiedManagers} from '../appManagers/getProxiedManagers';\nimport noop from '../../helpers/noop';\nimport AccountController from '../accounts/accountController';\nimport getPeerTitle from '../../components/wrappers/getPeerTitle';\nimport I18n from '../langPack';\nimport {getPeerAvatarColorByPeer} from '../appManagers/utils/peers/getPeerColorById';\nimport customProperties from '../../helpers/dom/customProperties';\nimport drawCircle from '../../helpers/canvas/drawCircle';\nimport getAbbreviation from '../richTextProcessor/getAbbreviation';\nimport {FontFamily} from '../../config/font';\nimport {NOTIFICATION_BADGE_PATH} from '../../config/notifications';\nimport {createAppURLForAccount} from '../accounts/createAppURLForAccount';\nimport {appSettings, setAppSettingsSilent} from '../../stores/appSettings';\nimport {unwrap} from 'solid-js/store';\n\nexport type Mirrors = {\n  state: State,\n  thumbs: ThumbsStorage['thumbsCache'],\n  stickerThumbs: ThumbsStorage['stickerCachedThumbs'],\n  availableReactions: AppReactionsManager['availableReactions'] | Promise<AppReactionsManager['availableReactions']>,\n  messages: {\n    [type in string]: {\n      [mid in number]: Message.message | Message.messageService\n    }\n  },\n  groupedMessages: {\n    [groupedId in string]: Map<number, Message.message | Message.messageService>\n  },\n  peers: {\n    [peerId in PeerId]: Exclude<Chat, Chat.chatEmpty> | User.user\n  },\n  avatars: AppAvatarsManager['savedAvatarURLs']\n};\n\nexport type MirrorTaskPayload<\n  T extends keyof Mirrors = keyof Mirrors\n  // K extends keyof Mirrors[T] = keyof Mirrors[T],\n  // J extends Mirrors[T][K] = Mirrors[T][K]\n> = {\n  name: T,\n  // key?: K,\n  key?: string,\n  value?: any,\n  accountNumber: ActiveAccountNumber\n};\n\nexport type NotificationBuildTaskPayload = {\n  message: Message.message | Message.messageService,\n  fwdCount?: number,\n  peerReaction?: MessagePeerReaction,\n  peerTypeNotifySettings?: PeerNotifySettings,\n  accountNumber?: ActiveAccountNumber,\n  isOtherTabActive?: boolean\n};\n\nexport type TabState = {\n  chatPeerIds: PeerId[],\n  idleStartTime: number,\n  accountNumber: number\n};\n\nclass ApiManagerProxy extends MTProtoMessagePort {\n  // private worker: /* Window */Worker;\n  // private sockets: Map<number, Socket> = new Map();\n  private mirrors: Mirrors;\n\n  public newVersion: string;\n  public oldVersion: string;\n\n  private tabState: TabState;\n  private allTabStates: TabState[];\n\n  public share: ShareData;\n\n  public serviceMessagePort: ServiceMessagePort<true>;\n  private lastServiceWorker: ServiceWorker;\n\n  private pingServiceWorkerPromise: CancellablePromise<void>;\n\n  private processMirrorTaskMap: {\n    [type in keyof Mirrors]?: (payload: MirrorTaskPayload) => void\n  };\n\n  private appConfig: MaybePromise<MTAppConfig>;\n\n  private closeMTProtoWorker = noop;\n\n  constructor() {\n    super();\n\n    this.mirrors = {\n      state: undefined,\n      thumbs: {},\n      stickerThumbs: {},\n      availableReactions: undefined,\n      messages: {},\n      groupedMessages: {},\n      peers: {},\n      avatars: {}\n    };\n\n    this.processMirrorTaskMap = {\n      messages: (payload) => {\n        const message = payload.value as Message.message | Message.messageService;\n        let mid: number, groupedId: string;\n        if(message) {\n          mid = message.mid;\n          groupedId = (message as Message.message).grouped_id;\n        } else {\n          const [key, _mid] = splitDeepPath(payload.key);\n          mid = +_mid;\n          const previousMessage = this.mirrors.messages[key]?.[mid];\n          if(!previousMessage) {\n            return;\n          }\n\n          groupedId = (previousMessage as Message.message).grouped_id;\n        }\n\n        if(!groupedId) {\n          return;\n        }\n\n        const map = this.mirrors.groupedMessages[groupedId] ??= new Map();\n        if(!message) {\n          map.delete(mid);\n\n          if(!map.size) {\n            delete this.mirrors.groupedMessages[groupedId];\n          }\n        } else {\n          map.set(mid, message);\n        }\n      },\n\n      state: (payload) => {\n        if(payload.key) {\n          setAppStateSilent(payload.key, payload.value);\n        } else {\n          console.error(payload);\n        }\n      },\n\n      peers: (payload) => {\n        if(payload.key) {\n          reconcilePeer(payload.key.toPeerId(), payload.value as any);\n        } else {\n          reconcilePeers(payload.value);\n        }\n      }\n    };\n\n    this.tabState = {\n      accountNumber: getCurrentAccount(),\n      chatPeerIds: [],\n      idleStartTime: 0\n    };\n\n    this.log('constructor');\n\n    if(!import.meta.env.VITE_MTPROTO_SW) {\n      this.registerWorker();\n    }\n\n    this.registerServiceWorker();\n    this.registerCryptoWorker();\n\n    // const perf = performance.now();\n    this.addMultipleEventsListeners({\n      convertWebp: ({fileName, bytes}) => {\n        return webpWorkerController.convert(fileName, bytes);\n      },\n\n      convertOpus: ({fileName, bytes}) => {\n        return opusDecodeController.pushDecodeTask(bytes, false).then((result) => result.bytes);\n      },\n\n      event: ({name, args, accountNumber}) => {\n        const commonEventNames: (keyof BroadcastEvents)[] = [\n          'language_change',\n          'settings_updated',\n          'theme_changed',\n          'theme_change',\n          'background_change',\n          'logging_out',\n          'notification_count_update',\n          'account_logged_in'\n        ];\n        const isDifferentAccount = accountNumber && accountNumber !== getCurrentAccount();\n        if(!commonEventNames.includes(name as keyof BroadcastEvents) && isDifferentAccount) return;\n        // @ts-ignore\n        rootScope.dispatchEventSingle(name, ...args);\n      },\n\n      localStorageProxy: (payload) => {\n        const storageTask = payload;\n        return (sessionStorage[storageTask.type] as any)(...storageTask.args);\n      },\n\n      mirror: this.onMirrorTask,\n\n      receivedServiceMessagePort: () => {\n        this.log.warn('mtproto worker received service message port');\n      },\n\n      tabsUpdated: (payload) => {\n        this.allTabStates = payload;\n        rootScope.dispatchEvent('notification_count_update');\n      },\n\n      callNotification: async(payload) => {\n        const {accountNumber} = payload;\n        const managers = createProxiedManagersForAccount(accountNumber);\n        const peerId = payload.callerId.toPeerId();\n        const peer = await managers.appPeersManager.getPeer(peerId);\n        const title = await getPeerTitle({peerId: peerId, managers, plainText: true, limitSymbols: 20, useManagers: true});\n\n        const notification = new Notification(title, {\n          body: I18n.format('Call.StatusCalling', true),\n          icon: await this.createNotificationImage(managers, peerId, title),\n          badge: NOTIFICATION_BADGE_PATH\n        });\n        notification.onclick = () => {\n          const peerId = peer.id;\n          const url = createAppURLForAccount(accountNumber, {\n            p: '' + peerId.toPeerId(),\n            call: '' + payload.callId\n          });\n          window.open(url, '_blank');\n          notification.close();\n        };\n        setTimeout(() => {\n          notification.close();\n        }, 5_000);\n      },\n\n      log: (payload) => {\n        console.log('Received log from shared worker', payload);\n      }\n\n      // hello: () => {\n      //   this.log.error('time hello', performance.now() - perf);\n      // }\n    });\n\n    // this.addTaskListener('socketProxy', (task) => {\n    //   const socketTask = task.payload;\n    //   const id = socketTask.id;\n    //   //console.log('socketProxy', socketTask, id);\n\n    //   if(socketTask.type === 'send') {\n    //     const socket = this.sockets.get(id);\n    //     socket.send(socketTask.payload);\n    //   } else if(socketTask.type === 'close') { // will remove from map in onClose\n    //     const socket = this.sockets.get(id);\n    //     socket.close();\n    //   } else if(socketTask.type === 'setup') {\n    //     const socket = new Socket(socketTask.payload.dcId, socketTask.payload.url, socketTask.payload.logSuffix);\n\n    //     const onOpen = () => {\n    //       //console.log('socketProxy onOpen');\n    //       this.postMessage({\n    //         type: 'socketProxy',\n    //         payload: {\n    //           type: 'open',\n    //           id\n    //         }\n    //       });\n    //     };\n    //     const onClose = () => {\n    //       this.postMessage({\n    //         type: 'socketProxy',\n    //         payload: {\n    //           type: 'close',\n    //           id\n    //         }\n    //       });\n\n    //       socket.removeEventListener('open', onOpen);\n    //       socket.removeEventListener('close', onClose);\n    //       socket.removeEventListener('message', onMessage);\n    //       this.sockets.delete(id);\n    //     };\n    //     const onMessage = (buffer: ArrayBuffer) => {\n    //       this.postMessage({\n    //         type: 'socketProxy',\n    //         payload: {\n    //           type: 'message',\n    //           id,\n    //           payload: buffer\n    //         }\n    //       });\n    //     };\n\n    //     socket.addEventListener('open', onOpen);\n    //     socket.addEventListener('close', onClose);\n    //     socket.addEventListener('message', onMessage);\n    //     this.sockets.set(id, socket);\n    //   }\n    // });\n\n    rootScope.addEventListener('language_change', (language) => {\n      rootScope.managers.networkerFactory.setLanguage(language);\n      rootScope.managers.appAttachMenuBotsManager.onLanguageChange();\n    });\n\n    window.addEventListener('online', () => {\n      rootScope.managers.networkerFactory.forceReconnectTimeout();\n    });\n\n    rootScope.addEventListener('logging_out', ({accountNumber, migrateTo}) => {\n      // const toClear: CacheStorageDbName[] = ['cachedFiles', 'cachedStreamChunks'];\n      Promise.all([\n        toggleStorages(false, true),\n        // sessionStorage.clear(),\n        Promise.race([\n          // TODO: Check here\n          telegramMeWebManager.setAuthorized(false),\n          pause(3000)\n        ]),\n        webPushApiManager.forceUnsubscribe()\n        // Promise.all(toClear.map((cacheName) => caches.delete(cacheName)))\n      ]).finally(() => {\n        let url = new URL(location.href);\n\n        const currentAccount = getCurrentAccount();\n        if(currentAccount > accountNumber) {\n          const newAccountNumber = currentAccount - 1;\n          url = createAppURLForAccount(newAccountNumber as ActiveAccountNumber, undefined, true);\n          //\n        } else if(currentAccount === accountNumber) {\n          if(migrateTo) url = createAppURLForAccount(migrateTo);\n          else {\n            url.hash = '';\n            url.search = '';\n          }\n        }\n\n        history.replaceState(null, '', url);\n\n        // Make sure managers don't have any obsolete data\n        this.closeMTProtoWorker();\n\n        appRuntimeManager.reload();\n      });\n    });\n\n    rootScope.addEventListener('settings_updated', ({key, settings}) => {\n      setAppSettingsSilent(/* key,  */settings);\n    });\n\n    idleController.addEventListener('change', (idle) => {\n      this.updateTabStateIdle(idle);\n    });\n    this.updateTabStateIdle(idleController.isIdle);\n\n    // this.sendState();\n  }\n\n  async createNotificationImage(managers: ProxiedManagers, peerId: PeerId, peerTitle: string) {\n    const peer = await managers.appPeersManager.getPeer(peerId);\n    const peerPhoto = await managers.appPeersManager.getPeerPhoto(peerId);\n    if(peerPhoto) {\n      const url = await managers.appAvatarsManager.loadAvatar(peerId, peerPhoto, 'photo_small');\n\n      return url;\n    }\n    const avatarCanvas = document.createElement('canvas');\n    const avatarContext = avatarCanvas.getContext('2d');\n\n    const SIZE = 54;\n    const dpr = 1;\n    avatarCanvas.dpr = dpr;\n    avatarCanvas.width = avatarCanvas.height = SIZE * dpr;\n\n    const color = getPeerAvatarColorByPeer(peer);\n    const gradient = avatarContext.createLinearGradient(avatarCanvas.width / 2, 0, avatarCanvas.width / 2, avatarCanvas.height);\n\n    const colorTop = customProperties.getProperty(`peer-avatar-${color}-top`);\n    const colorBottom = customProperties.getProperty(`peer-avatar-${color}-bottom`);\n    gradient.addColorStop(0, colorTop);\n    gradient.addColorStop(1, colorBottom);\n\n    avatarContext.fillStyle = gradient;\n\n    drawCircle(avatarContext, avatarCanvas.width / 2, avatarCanvas.height / 2, avatarCanvas.width / 2);\n    avatarContext.fill();\n\n    const fontSize = 20 * avatarCanvas.dpr;\n    const abbreviation = getAbbreviation(peerTitle);\n\n    avatarContext.font = `700 ${fontSize}px ${FontFamily}`;\n    avatarContext.textBaseline = 'middle';\n    avatarContext.textAlign = 'center';\n    avatarContext.fillStyle = 'white';\n    avatarContext.fillText(abbreviation.text, avatarCanvas.width / 2, avatarCanvas.height * (window.devicePixelRatio > 1 || true ? .5625 : .5));\n\n    return avatarCanvas.toDataURL();\n  }\n\n  public sendEnvironment() {\n    this.log('Passing environment:', ENVIRONMENT);\n    this.invoke('environment', ENVIRONMENT);\n  }\n\n  public pingServiceWorkerWithIframe() {\n    if(this.pingServiceWorkerPromise) {\n      return this.pingServiceWorkerPromise;\n    }\n\n    const promise = this.pingServiceWorkerPromise = deferredPromise<void>();\n    const iframe = document.createElement('iframe');\n    iframe.hidden = true;\n    const onFinish = () => {\n      clearTimeout(timeout);\n      setTimeout(() => { // ping once in 10 seconds\n        this.pingServiceWorkerPromise = undefined;\n      }, 10e3);\n\n      iframe.removeEventListener('load', onLoad);\n      iframe.removeEventListener('error', onError);\n      iframe.remove();\n    };\n    const onLoad = () => {\n      onFinish();\n      promise.resolve();\n    };\n    const onError = () => {\n      onFinish();\n      promise.reject();\n    };\n    iframe.addEventListener('load', onLoad);\n    iframe.addEventListener('error', onError);\n    iframe.src = 'ping/' + (Math.random() * 0xFFFFFFFF | 0) + '.nocache';\n    document.body.append(iframe);\n\n    const timeout = window.setTimeout(onError, 1500);\n    return promise;\n  }\n\n  private attachServiceWorker(serviceWorker: ServiceWorker) {\n    if(this.lastServiceWorker === serviceWorker) {\n      this.log.warn('trying to attach same service worker');\n      return;\n    }\n\n    this.lastServiceWorker && this.serviceMessagePort.detachPort(this.lastServiceWorker);\n    this.serviceMessagePort.attachSendPort(this.lastServiceWorker = serviceWorker);\n    this.serviceMessagePort.invokeVoid('hello', undefined);\n  }\n\n  private _registerServiceWorker() {\n    // if(import.meta.env.DEV && IS_SAFARI) {\n    //   return;\n    // }\n\n    navigator.serviceWorker.register(\n      // * doesn't work\n      // new URL('../../../sw.ts', import.meta.url),\n      // '../../../sw',\n      ServiceWorkerURL,\n      {type: 'module', scope: './'}\n    ).then((registration) => {\n      if(TEST_NO_STREAMING) {\n        throw 1;\n      }\n\n      this.log('SW registered', registration);\n\n      const url = new URL(window.location.href);\n      const FIX_KEY = 'swfix';\n      const swfix = +url.searchParams.get(FIX_KEY) || 0;\n      if(registration.active && !navigator.serviceWorker.controller) {\n        if(swfix >= 3) {\n          throw new Error('no controller');\n        }\n\n        // ! doubtful fix for hard refresh\n        return registration.unregister().then(() => {\n          url.searchParams.set(FIX_KEY, '' + (swfix + 1));\n          window.location.href = url.toString();\n        });\n      }\n\n      if(swfix) {\n        url.searchParams.delete(FIX_KEY);\n        history.pushState(undefined, '', url);\n      }\n\n      const sw = registration.installing || registration.waiting || registration.active;\n      sw.addEventListener('statechange', (e) => {\n        this.log('SW statechange', e);\n      });\n\n      const controller = navigator.serviceWorker.controller || registration.installing || registration.waiting || registration.active;\n      this.attachServiceWorker(controller);\n\n      if(import.meta.env.VITE_MTPROTO_SW) {\n        this.onWorkerFirstMessage(controller);\n      }\n    }).catch((err) => {\n      this.log.error('SW registration failed!', err);\n\n      this.invokeVoid('serviceWorkerOnline', false);\n    });\n  }\n\n  private registerServiceWorker() {\n    if(!('serviceWorker' in navigator)) return;\n\n    this.serviceMessagePort = webPushApiManager.serviceMessagePort = new ServiceMessagePort<true>();\n\n    // this.addMultipleEventsListeners({\n    //   hello: () => {\n    //     // this.serviceMessagePort.invokeVoid('port', undefined);\n    //   }\n    // });\n\n    // ! I hate webpack - it won't load it by using worker.register, only navigator.serviceWorker will do it.\n    const worker = navigator.serviceWorker;\n    this._registerServiceWorker();\n\n    // worker.startMessages();\n\n    worker.addEventListener('controllerchange', () => {\n      this.log.warn('controllerchange');\n\n      const controller = worker.controller;\n      this.attachServiceWorker(controller);\n\n      controller.addEventListener('error', (e) => {\n        this.log.error('controller error:', e);\n      });\n    });\n\n    if(import.meta.env.VITE_MTPROTO_SW) {\n      this.attachListenPort(worker);\n    } else {\n      this.serviceMessagePort.attachListenPort(worker);\n      this.serviceMessagePort.addMultipleEventsListeners({\n        port: (payload, source, event) => {\n          this.log.warn('got service worker port');\n          this.invokeVoid('serviceWorkerPort', undefined, undefined, [event.ports[0]]);\n        },\n\n        hello: (payload, source) => {\n          this.serviceMessagePort.resendLockTask(source);\n        },\n\n        share: (payload) => {\n          this.log('will try to share something');\n          this.share = payload;\n        }\n      });\n    }\n\n    worker.addEventListener('messageerror', (e) => {\n      this.log.error('SW messageerror:', e);\n    });\n  }\n\n  private async registerCryptoWorker() {\n    const get = (url: string) => {\n      return fetch(url).then((response) => response.text()).then((text) => {\n        const pathnameSplitted = location.pathname.split('/');\n        pathnameSplitted[pathnameSplitted.length - 1] = '';\n        const pre = location.origin + pathnameSplitted.join('/');\n        text = text.replace(/(import (?:.+? from )?['\"])\\//g, '$1' + pre);\n        const blob = new Blob([text], {type: 'application/javascript'});\n        return blob;\n      });\n    };\n\n    const workerHandler = {\n      construct(target: any, args: any): any {\n        return {\n          url: makeWorkerURL(args[0]).toString()\n        };\n      }\n    };\n\n    const originals = [\n      Worker,\n      typeof(SharedWorker) !== 'undefined' && SharedWorker\n    ].filter(Boolean);\n    originals.forEach((w) => window[w.name as any] = new Proxy(w, workerHandler));\n\n    const worker: SharedWorker | Worker = new Worker(\n      new URL('../crypto/crypto.worker.ts', import.meta.url),\n      {type: 'module'}\n    );\n\n    originals.forEach((w) => window[w.name as any] = w as any);\n\n    const originalUrl = (worker as any).url;\n\n    const createWorker = (url: string) => new constructor(url, {type: 'module'});\n    const attachWorkerToPort = (worker: SharedWorker | Worker) => this.attachWorkerToPort(worker, cryptoMessagePort, 'crypto');\n    const constructor = IS_SHARED_WORKER_SUPPORTED ? SharedWorker : Worker;\n\n    // let cryptoWorkers = workers.length;\n    cryptoMessagePort.addEventListener('port', (payload, source, event) => {\n      this.invokeVoid('cryptoPort', undefined, undefined, [event.ports[0]]);\n      // .then((attached) => {\n      //   if(!attached && cryptoWorkers-- > 1) {\n      //     this.log.error('terminating unneeded crypto worker');\n\n      //     cryptoMessagePort.invokeVoid('terminate', undefined, source);\n      //     const worker = workers.find((worker) => (worker as SharedWorker).port === source || (worker as any) === source);\n      //     if((worker as SharedWorker).port) (worker as SharedWorker).port.close();\n      //     else (worker as Worker).terminate();\n      //     cryptoMessagePort.detachPort(source);\n      //   }\n      // });\n    });\n\n    const firstWorker = createWorker(originalUrl);\n    attachWorkerToPort(firstWorker);\n\n    const blob = await get(originalUrl);\n    const urlsPromise = await this.invoke('createProxyWorkerURLs', {originalUrl, blob});\n    const workers = urlsPromise.slice(1).map(createWorker);\n    workers.forEach(attachWorkerToPort);\n  }\n\n  private registerWorker() {\n    if(import.meta.env.VITE_MTPROTO_SW) {\n      return;\n    }\n\n    let worker: SharedWorker | Worker;\n    if(IS_SHARED_WORKER_SUPPORTED) {\n      worker = new SharedWorker(\n        new URL('./mtproto.worker.ts', import.meta.url),\n        {type: 'module'}\n      );\n      this.closeMTProtoWorker = () => (worker as SharedWorker).port.close();\n    } else {\n      worker = new Worker(\n        new URL('./mtproto.worker.ts', import.meta.url),\n        {type: 'module'}\n      );\n      this.closeMTProtoWorker = () => (worker as Worker).terminate();\n    }\n\n    this.onWorkerFirstMessage(worker);\n  }\n\n  private attachWorkerToPort(worker: SharedWorker | Worker, messagePort: SuperMessagePort<any, any, any>, type: string) {\n    const port: MessagePort = (worker as SharedWorker).port || worker as any;\n    messagePort.attachPort(port);\n\n    worker.addEventListener('error', (err) => {\n      this.log.error(type, 'worker error', err);\n    });\n  }\n\n  private onWorkerFirstMessage(worker: any) {\n    this.log('set webWorker');\n\n    // this.worker = worker;\n    if(import.meta.env.VITE_MTPROTO_SW) {\n      this.attachSendPort(worker);\n    } else {\n      this.attachWorkerToPort(worker, this, 'mtproto');\n    }\n  }\n\n  private async loadAllStates() {\n    const loadedStates = await loadStateForAllAccountsOnce();\n\n    this.dispatchUserAuth();\n\n    const stateForThisAccount = loadedStates[getCurrentAccount()];\n    rootScope.settings = stateForThisAccount.common.settings;\n    this.newVersion = stateForThisAccount.newVersion;\n    this.oldVersion = stateForThisAccount.oldVersion;\n    this.mirrors['state'] = stateForThisAccount.state;\n    setAppStateSilent(stateForThisAccount.state);\n    setAppSettingsSilent(stateForThisAccount.common.settings);\n\n    Object.defineProperty(rootScope, 'settings', {\n      get: () => {\n        return unwrap(appSettings);\n      }\n    });\n\n    return loadedStates;\n  }\n\n  private async dispatchUserAuth() {\n    const accountData = await AccountController.get(getCurrentAccount());\n    if(accountData?.userId) {\n      rootScope.dispatchEvent('user_auth', {\n        dcID: accountData.dcId || 0,\n        date: accountData.date || (Date.now() / 1000 | 0),\n        id: accountData.userId.toPeerId(false)\n      });\n    }\n  }\n\n  public hasTabOpenFor(accountNumber: ActiveAccountNumber) {\n    return !!this.allTabStates.find((tab) => tab.accountNumber === accountNumber);\n  }\n\n  public async sendAllStates() {\n    const loadedStates = await this.loadAllStates();\n\n    for(let i = 1; i <= 4; i++) {\n      const state = loadedStates[i as ActiveAccountNumber];\n      this.invoke('state', {\n        ...state,\n        accountNumber: i as ActiveAccountNumber\n      });\n    }\n    return loadedStates;\n  }\n\n  public invokeCrypto<Method extends keyof CryptoMethods>(method: Method, ...args: Parameters<CryptoMethods[typeof method]>): Promise<Awaited<ReturnType<CryptoMethods[typeof method]>>> {\n    if(!import.meta.env.VITE_MTPROTO_WORKER) {\n      return;\n    }\n\n    return cryptoMessagePort.invokeCrypto(method, ...args);\n  }\n\n  public async toggleStorages(enabled: boolean, clearWrite: boolean) {\n    await toggleStorages(enabled, clearWrite);\n    this.invoke('toggleStorages', {enabled, clearWrite});\n    this.serviceMessagePort?.invokeVoid('toggleStorages', {enabled, clearWrite});\n  }\n\n  public async getMirror<T extends keyof Mirrors>(name: T) {\n    const mirror = this.mirrors[name];\n    return mirror;\n  }\n\n  public getState() {\n    return this.getMirror('state');\n  }\n\n  public getAllTabStates() {\n    return [...this.allTabStates];\n  }\n\n  public getCacheContext(\n    media: ThumbStorageMedia,\n    thumbSize: string = THUMB_TYPE_FULL,\n    key = getThumbKey(media)\n  ) {\n    const cache = this.mirrors.thumbs[key];\n    return cache?.[thumbSize] || generateEmptyThumb(thumbSize);\n  }\n\n  public getStickerCachedThumb(docId: DocId, toneIndex: string | number) {\n    const key = getStickerThumbKey(docId, toneIndex);\n    return this.mirrors.stickerThumbs[key];\n  }\n\n  public getAvailableReactions() {\n    return this.mirrors.availableReactions ||= rootScope.managers.appReactionsManager.getAvailableReactions();\n  }\n\n  public getReaction(reaction: string) {\n    return callbackify(this.getAvailableReactions(), (availableReactions) => {\n      return availableReactions.find((availableReaction) => availableReaction.reaction === reaction);\n    });\n  }\n\n  public getMessageFromStorage(key: MessagesStorageKey, mid: number) {\n    // * use global storage instead\n    if(key.endsWith('history') && isLegacyMessageId(mid)) {\n      key = this.getGlobalHistoryMessagesStorage();\n    }\n\n    const cache = this.mirrors.messages[key];\n    return cache?.[mid];\n  }\n\n  public getGroupsFirstMessage(message: Message.message) {\n    if(!message?.grouped_id) return message;\n\n    const storage = this.mirrors.groupedMessages[message.grouped_id];\n    let minMid = Number.MAX_SAFE_INTEGER;\n    for(const [mid, message] of storage) {\n      if(message.mid < minMid) {\n        minMid = message.mid;\n      }\n    }\n\n    return storage.get(minMid);\n  }\n\n  public getMidsByGroupedId(groupedId: string, sort: 'asc' | 'desc' = 'asc') {\n    return getObjectKeysAndSort(this.mirrors.groupedMessages[groupedId], sort);\n  }\n\n  public getMessagesByGroupedId(groupedId: string) {\n    const mids = this.getMidsByGroupedId(groupedId, 'asc');\n    const storage = this.mirrors.groupedMessages[groupedId];\n    // return mids.map((mid) => this.getMessageFromStorage(storage, mid) as Message.message);\n    return mids.map((mid) => storage.get(mid) as Message.message);\n  }\n\n  public getHistoryMessagesStorage(peerId: PeerId): MessagesStorageKey {\n    return `${peerId}_history`;\n  }\n\n  public getGlobalHistoryMessagesStorage(): MessagesStorageKey {\n    return this.getHistoryMessagesStorage(NULL_PEER_ID);\n  }\n\n  public getMessageById(messageId: number) {\n    if(isLegacyMessageId(messageId)) {\n      return this.getMessageFromStorage(this.getGlobalHistoryMessagesStorage(), messageId);\n    }\n  }\n\n  public getMessageByPeer(peerId: PeerId, messageId: number) {\n    if(!peerId) {\n      return this.getMessageById(messageId);\n    }\n\n    return this.getMessageFromStorage(this.getHistoryMessagesStorage(peerId), messageId);\n  }\n\n\n  public getPeerForAccount(peerId: PeerId, accountNumber: ActiveAccountNumber) {\n    const managers = createProxiedManagersForAccount(accountNumber);\n    return managers.appPeersManager.getPeer(peerId);\n  }\n\n  public getPeer(peerId: PeerId) {\n    return this.mirrors.peers[peerId];\n  }\n\n  public getUser(userId: UserId) {\n    return this.mirrors.peers[userId.toPeerId(false)] as User.user;\n  }\n\n  public getChat(chatId: ChatId) {\n    return this.mirrors.peers[chatId.toPeerId(true)] as Exclude<Chat, Chat.chatEmpty>;\n  }\n\n  public isForum(peerId: PeerId) {\n    const peer = this.getPeer(peerId);\n    return !!(peer as Chat.channel)?.pFlags?.forum;\n  }\n\n  public isAvatarCached(peerId: PeerId, size?: PeerPhotoSize) {\n    const saved = this.mirrors.avatars[peerId];\n    if(size === undefined) {\n      return !!saved;\n    }\n\n    return !!(saved && saved[size] && !(saved[size] instanceof Promise));\n  }\n\n  public loadAvatar(peerId: PeerId, photo: UserProfilePhoto.userProfilePhoto | ChatPhoto.chatPhoto, size: PeerPhotoSize, accountNumber?: ActiveAccountNumber) {\n    if(accountNumber && accountNumber !== getCurrentAccount()) {\n      const managers = createProxiedManagersForAccount(accountNumber);\n      return managers.appAvatarsManager.loadAvatar(peerId, photo, size);\n    }\n\n    const saved = this.mirrors.avatars[peerId] ??= {};\n    return saved[size] ??= rootScope.managers.appAvatarsManager.loadAvatar(peerId, photo, size);\n  }\n\n  public getAppConfig(overwrite?: boolean) {\n    if(overwrite) {\n      this.appConfig = undefined;\n    }\n\n    if(!this.appConfig) {\n      const promise = rootScope.managers.apiManager.getAppConfig().then((appConfig) => {\n        if(this.appConfig === promise) {\n          this.appConfig = appConfig;\n        }\n\n        return appConfig;\n      });\n\n      return this.appConfig = promise;\n    }\n\n    return this.appConfig;\n  }\n\n  public isPremiumFeaturesHidden(): MaybePromise<boolean> {\n    return callbackify(this.isPremiumPurchaseBlocked(), (isPremiumPurchaseBlocked) => {\n      return isPremiumPurchaseBlocked && !rootScope.premium;\n    });\n  }\n\n  public isPremiumPurchaseBlocked(): MaybePromise<boolean> {\n    return callbackify(this.getAppConfig(), (appConfig) => {\n      return !!appConfig.premium_purchase_blocked;\n    });\n  }\n\n  public async hasSomeonePremium() {\n    const totalAccounts = await AccountController.getTotalAccounts();\n\n    let hasSomeonePremium = false;\n    for(let i = 1; i <= totalAccounts; i++) {\n      const accountNumber = i as ActiveAccountNumber;\n      const managers = createProxiedManagersForAccount(accountNumber);\n      hasSomeonePremium ||= await managers.rootScope.getPremium();\n      if(hasSomeonePremium) break;\n    }\n\n    return hasSomeonePremium;\n  }\n\n  public updateTabState<T extends keyof TabState>(key: T, value: TabState[T]) {\n    this.tabState[key] = value;\n    this.invokeVoid('tabState', this.tabState);\n  }\n\n  public updateTabStateIdle(idle: boolean) {\n    this.updateTabState('idleStartTime', idle ? Date.now() : 0);\n  }\n\n  private onMirrorTask = (payload: MirrorTaskPayload) => {\n    const {name, key, value, accountNumber} = payload;\n    const isSettingsUpdate = name === 'state' && key === 'settings';\n    if(!isSettingsUpdate && accountNumber !== getCurrentAccount()) return;\n\n    this.processMirrorTaskMap[name]?.(payload);\n    if(!payload.hasOwnProperty('key')) {\n      this.mirrors[name] = value;\n      return;\n    }\n\n    const mirror = this.mirrors[name] ??= {} as any;\n    setDeepProperty(mirror, key, value, true);\n  };\n}\n\ninterface ApiManagerProxy extends MTProtoMessagePort<true> {}\n\nconst apiManagerProxy = new ApiManagerProxy();\nMOUNT_CLASS_TO.apiManagerProxy = apiManagerProxy;\nexport default apiManagerProxy;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport EventListenerBase from './eventListenerBase';\n\nexport class OverlayCounter extends EventListenerBase<{\n  change: (isActive: boolean) => void\n}> {\n  public overlaysActive = 0;\n  public hasDarkOverlays = 0;\n\n  get isOverlayActive() {\n    return this.overlaysActive > 0;\n  }\n\n  set isOverlayActive(value: boolean) {\n    this.overlaysActive += value ? 1 : -1;\n    this.dispatchEvent('change', this.isOverlayActive);\n  }\n\n  get isDarkOverlayActive() {\n    return this.hasDarkOverlays > 0;\n  }\n\n  set isDarkOverlayActive(value: boolean) {\n    this.hasDarkOverlays += value ? 1 : -1;\n    this.isOverlayActive = value;\n  }\n}\n\nconst overlayCounter = new OverlayCounter();\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.overlayCounter = overlayCounter);\nexport default overlayCounter;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nexport default function parseUriParams(uri: string, splitted = uri.split('?')) {\n  try {\n    const url = new URL(uri);\n    const obj: any = {};\n    for(const [key, value] of url.searchParams.entries()) {\n      obj[key] = value;\n    }\n\n    return obj;\n  } catch(err) {\n    return parseUriParamsLine(splitted?.[1]);\n  }\n}\n\nexport function parseUriParamsLine(line: string) {\n  const params: any = {};\n  if(!line) {\n    return params;\n  }\n\n  line.split('&').forEach((item) => {\n    const [key, value = ''] = item.split('=');\n    params[key] = decodeURIComponent(value);\n  });\n\n  return params;\n}\n","const IS_INSTALL_PROMPT_SUPPORTED = 'onbeforeinstallprompt' in window;\nexport default IS_INSTALL_PROMPT_SUPPORTED;\n","let callback: () => Promise<void>;\nexport default function cacheInstallPrompt() {\n  window.addEventListener('beforeinstallprompt', (deferredPrompt: any) => {\n    callback = async() => {\n      deferredPrompt.prompt();\n      const {outcome} = await deferredPrompt.userChoice;\n      const installed = outcome === 'accepted';\n      if(installed) {\n        callback = undefined;\n      }\n    };\n  });\n}\n\nexport function getInstallPrompt() {\n  return callback;\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nimport {MOUNT_CLASS_TO} from '../config/debug';\nimport I18n, {i18n} from '../lib/langPack';\nimport capitalizeFirstLetter from './string/capitalizeFirstLetter';\n\nexport const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];\nexport const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\nexport const monthsLocalized = months.slice();\nexport const daysLocalized = days.slice();\n\nexport const ONE_DAY = 86400;\nexport const ONE_DAY_MINUTES = 1440;\nexport const ONE_WEEK = 604800;\nexport const ONE_WEEK_MINUTES = 10080;\n\nexport function getWeekDays() {\n  const dateTimeFormat = I18n.getDateTimeFormat({weekday: 'long'});\n  const date = new Date(Date.UTC(2017, 0, 2));\n  const out: string[] = [];\n  for(let i = 0; i < 7; ++i) {\n    out.push(capitalizeFirstLetter(dateTimeFormat.format(date)));\n    date.setDate(date.getDate() + 1);\n  }\n  return out;\n}\n\nexport function getMonths() {\n  const dateTimeFormat = I18n.getDateTimeFormat({month: 'long'});\n  const date = new Date(Date.UTC(2017, 0, 1));\n  const out: string[] = [];\n  for(let i = 0; i < 12; ++i) {\n    out.push(capitalizeFirstLetter(dateTimeFormat.format(date)));\n    date.setMonth(date.getMonth() + 1);\n  }\n  return out;\n}\n\nexport function fillLocalizedDates() {\n  monthsLocalized.splice(0, monthsLocalized.length, ...getMonths());\n  daysLocalized.splice(0, daysLocalized.length, ...getWeekDays());\n}\n\n// https://stackoverflow.com/a/6117889\nexport const getWeekNumber = (date: Date) => {\n  const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\n  const dayNum = d.getUTCDay() || 7;\n  d.setUTCDate(d.getUTCDate() + 4 - dayNum);\n  const yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n  return Math.ceil((((d.getTime() - yearStart.getTime()) / ONE_DAY) + 1) / 7);\n};\n\nexport function formatDate(date: Date, today?: Date) {\n  if(!today) {\n    today = new Date();\n    today.setHours(0, 0, 0, 0);\n  }\n\n  const options: Intl.DateTimeFormatOptions = {\n    day: 'numeric',\n    month: 'long'\n  };\n\n  if(date.getFullYear() !== today.getFullYear()) {\n    options.year = 'numeric';\n  }\n\n  return new I18n.IntlDateElement({\n    date,\n    options\n  }).element;\n}\n\nexport function formatDateAccordingToTodayNew(time: Date) {\n  const today = new Date();\n  const now = today.getTime() / 1000 | 0;\n  const timestamp = time.getTime() / 1000 | 0;\n\n  const options: Intl.DateTimeFormatOptions = {};\n  if((now - timestamp) < ONE_DAY && today.getDate() === time.getDate()) { // if the same day\n    options.hour = options.minute = '2-digit';\n  } else if(today.getFullYear() !== time.getFullYear()) { // different year\n    options.year = options.day = 'numeric';\n    options.month = '2-digit';\n  } else if((now - timestamp) < (ONE_DAY * 7) && getWeekNumber(today) === getWeekNumber(time)) { // current week\n    options.weekday = 'short';\n  } else { // same year\n    options.month = 'short';\n    options.day = 'numeric';\n  }\n\n  return new I18n.IntlDateElement({\n    date: time,\n    options\n  }).element;\n}\n\nconst formatTimeOptions: Intl.DateTimeFormatOptions = {\n  hour: '2-digit',\n  minute: '2-digit'\n};\n\nexport function formatFullSentTimeRaw(timestamp: number, options: {\n  capitalize?: boolean\n  noToday?: boolean,\n  combined?: boolean\n} = {}) {\n  if(options.combined) {\n    options.noToday = true;\n  }\n\n  const date = new Date();\n  const time = new Date(timestamp * 1000);\n  const now = date.getTime() / 1000 | 0;\n  const diff = now - timestamp;\n\n  const timeEl = options.combined ? undefined : formatTime(time);\n\n  let dateEl: HTMLElement;\n  if(!options.noToday && diff < ONE_DAY && date.getDate() === time.getDate()) { // if the same day\n    dateEl = i18n(options.capitalize ? 'Date.Today' : 'Peer.Status.Today');\n  } else if(!options.noToday && diff > 0 && diff < (ONE_DAY * 2) && new Date(date.getTime() - ONE_DAY * 1000).getDate() === time.getDate()) { // yesterday\n    dateEl = i18n(options.capitalize ? 'Yesterday' : 'Peer.Status.Yesterday');\n\n    if(options.capitalize) {\n      dateEl.style.textTransform = 'capitalize';\n    }\n  } else if(date.getFullYear() !== time.getFullYear()) { // different year\n    dateEl = new I18n.IntlDateElement({\n      date: time,\n      options: {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric',\n        ...(options.combined ? formatTimeOptions: {})\n      }\n    }).element;\n    // dateStr = months[time.getMonth()].slice(0, 3) + ' ' + time.getDate() + ', ' + time.getFullYear();\n  } else {\n    dateEl = new I18n.IntlDateElement({\n      date: time,\n      options: {\n        month: 'short',\n        day: 'numeric',\n        ...(options.combined ? formatTimeOptions: {})\n      }\n    }).element;\n    // dateStr = months[time.getMonth()].slice(0, 3) + ' ' + time.getDate();\n  }\n\n  return {dateEl, timeEl};\n}\n\nexport function formatFullSentTime(timestamp: number, capitalize = true, noToday = false) {\n  const {dateEl, timeEl} = formatFullSentTimeRaw(timestamp, {\n    capitalize,\n    noToday\n  });\n\n  const fragment = document.createDocumentFragment();\n  fragment.append(dateEl, ' ', i18n('ScheduleController.at'), ' ', timeEl);\n  return fragment;\n}\n\nexport function formatTime(date: Date) {\n  return new I18n.IntlDateElement({\n    date,\n    options: formatTimeOptions\n  }).element;\n}\n\nMOUNT_CLASS_TO && (MOUNT_CLASS_TO.formatDateAccordingToTodayNew = formatDateAccordingToTodayNew);\n\nexport const getFullDate = (date: Date, options: Partial<{\n  noTime: true,\n  noSeconds: true,\n  monthAsNumber: true,\n  leadingZero: true,\n  shortYear: boolean\n}> = {}) => {\n  const joiner = options.monthAsNumber ? '.' : ' ';\n  const time = ('0' + date.getHours()).slice(-2) + ':' + ('0' + date.getMinutes()).slice(-2) + (options.noSeconds ? '' : ':' + ('0' + date.getSeconds()).slice(-2));\n  const fullYear = date.getFullYear();\n\n  return (options.leadingZero ? ('0' + date.getDate()).slice(-2) : date.getDate()) +\n    joiner + (options.monthAsNumber ? ('0' + (date.getMonth() + 1)).slice(-2) : months[date.getMonth()]) +\n    joiner + (('' + fullYear).slice(options.shortYear ? 2 : 0)) +\n    (options.noTime ? '' : ', ' + time);\n};\n\nexport function formatMonthsDuration(months: number, bold?: boolean) {\n  const isYears = months >= 12 && !(months % 12);\n  return i18n(\n    bold ? (isYears ? 'BoldYears' : 'BoldMonths') : (isYears ? 'Years' : 'Months'),\n    [isYears ? months / 12 : months]\n  );\n}\n\n// https://github.com/DrKLO/Telegram/blob/d52b2c921abd3c1e8d6368858313ad0cb0468c07/TMessagesProj/src/main/java/org/telegram/ui/Adapters/FiltersView.java\nconst minYear = 2013;\nconst yearPattern = new RegExp('20[0-9]{1,2}');\nconst anyLetterRegExp = `\\\\p{L}`;\nconst monthPattern = new RegExp(`(${anyLetterRegExp}{3,})`, 'iu');\nconst monthYearOrDayPattern = new RegExp(`(${anyLetterRegExp}{3,}) ([0-9]{0,4})`, 'iu');\nconst yearOrDayAndMonthPattern = new RegExp(`([0-9]{0,4}) (${anyLetterRegExp}{2,})`, 'iu');\nconst shortDate = new RegExp('^([0-9]{1,4})(\\\\.| |/|\\\\-)([0-9]{1,4})$', 'i');\nconst longDate = new RegExp('^([0-9]{1,2})(\\\\.| |/|\\\\-)([0-9]{1,2})(\\\\.| |/|\\\\-)([0-9]{1,4})$', 'i');\nconst numberOfDaysEachMonth = [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nexport type DateData = {\n  title: string,\n  minDate: number,\n  maxDate: number,\n};\nexport function fillTipDates(query: string, dates: DateData[]) {\n  const q = query.trim().toLowerCase();\n\n  if(q.length < 3) {\n    return;\n  }\n\n  if(['today', I18n.format('Peer.Status.Today', true)].some((haystack) => haystack.indexOf(q) === 0)) {\n    const date = new Date();\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const day = date.getDate();\n    date.setFullYear(year, month, day);\n    date.setHours(0, 0, 0);\n\n    const minDate = date.getTime();\n    date.setFullYear(year, month, day + 1);\n    date.setHours(0, 0, 0);\n\n    const maxDate = date.getTime() - 1;\n    dates.push({\n      title: I18n.format('Date.Today', true),\n      minDate,\n      maxDate\n    });\n    return;\n  }\n\n  if(['yesterday', I18n.format('Peer.Status.Yesterday', true)].some((haystack) => haystack.indexOf(q) === 0)) {\n    const date = new Date();\n    const year = date.getFullYear();\n    const month = date.getMonth();\n    const day = date.getDate();\n    date.setFullYear(year, month, day);\n    date.setHours(0, 0, 0);\n\n    const minDate = date.getTime() - 86400000;\n    date.setFullYear(year, month, day + 1);\n    date.setHours(0, 0, 0);\n\n    const maxDate = date.getTime() - 86400001;\n    dates.push({\n      title: capitalizeFirstLetter(I18n.format('Yesterday', true)),\n      minDate,\n      maxDate\n    });\n    return;\n  }\n\n  const dayOfWeek = getDayOfWeek(q);\n  if(dayOfWeek >= 0) {\n    const date = new Date();\n    const now = date.getTime();\n    const currentDay = date.getDay();\n    const distance = dayOfWeek - currentDay;\n    date.setDate(date.getDate() + distance);\n    if(date.getTime() > now) {\n      date.setTime(date.getTime() - 604800000);\n    }\n    const year = date.getFullYear()\n    const month = date.getMonth();\n    const day = date.getDate();\n    date.setFullYear(year, month, day);\n    date.setHours(0, 0, 0);\n\n    const minDate = date.getTime();\n    date.setFullYear(year, month, day + 1);\n    date.setHours(0, 0, 0);\n\n    const maxDate = date.getTime() - 1;\n    dates.push({\n      title: formatWeekLong(minDate),\n      minDate,\n      maxDate\n    });\n    return;\n  }\n\n  let matches: any[];\n  if((matches = shortDate.exec(q)) !== null) {\n    const g1 = matches[1];\n    const g2 = matches[3];\n    const k = parseInt(g1);\n    const k1 = parseInt(g2);\n    if(k > 0 && k <= 31) {\n      if(k1 >= minYear && k <= 12) {\n        const selectedYear = k1;\n        const month = k - 1;\n        createForMonthYear(dates, month, selectedYear);\n        return;\n      } else if(k1 <= 12) {\n        const day = k - 1;\n        const month = k1 - 1;\n        createForDayMonth(dates, day, month);\n      }\n    } else if(k >= minYear && k1 <= 12) {\n      const selectedYear = k;\n      const month = k1 - 1;\n      createForMonthYear(dates, month, selectedYear);\n    }\n\n    return;\n  }\n\n  if((matches = longDate.exec(q)) !== null) {\n    const g1 = matches[1];\n    const g2 = matches[3];\n    const g3 = matches[5];\n    if(!matches[2] === matches[4]) {\n      return;\n    }\n\n    const day = parseInt(g1);\n    const month = parseInt(g2) - 1;\n    let year = parseInt(g3);\n    if(year >= 10 && year <= 99) {\n      year += 2000;\n    }\n\n    const currentYear = new Date().getFullYear();\n    if(validDateForMonth(day - 1, month) && year >= minYear && year <= currentYear) {\n      const date = new Date();\n      date.setFullYear(year, month, day);\n      date.setHours(0, 0, 0);\n\n      const minDate = date.getTime();\n      date.setFullYear(year, month, day + 1);\n      date.setHours(0, 0, 0);\n\n      const maxDate = date.getTime() - 1;\n      dates.push({\n        title: formatterYearMax(minDate),\n        minDate,\n        maxDate\n      });\n      return;\n    }\n\n    return;\n  }\n\n  if((matches = monthYearOrDayPattern.exec(q)) !== null) {\n    const g1 = matches[1];\n    const g2 = matches[2];\n    const month = getMonth(g1);\n    if(month >= 0) {\n      const k = +g2 || new Date().getUTCFullYear();\n      if(k > 0 && k <= 31) {\n        const day = k - 1;\n        createForDayMonth(dates, day, month);\n        return;\n      } else if(k >= minYear) {\n        const selectedYear = k;\n        createForMonthYear(dates, month, selectedYear);\n        return;\n      }\n    }\n  }\n\n  if((matches = yearOrDayAndMonthPattern.exec(q)) !== null) {\n    const g1 = matches[1];\n    const g2 = matches[2];\n    const month = getMonth(g2);\n    if(month >= 0) {\n      const k = +g1;\n      if(k > 0 && k <= 31) {\n        const day = k - 1;\n        createForDayMonth(dates, day, month);\n        return;\n      } else if(k >= minYear) {\n        const selectedYear = k;\n        createForMonthYear(dates, month, selectedYear);\n      }\n    }\n  }\n\n  if((matches = monthPattern.exec(q)) !== null) {\n    const g1 = matches[1];\n    const month = getMonth(g1);\n    if(month >= 0) {\n      const currentYear = new Date().getFullYear();\n      for(let i = currentYear; i >= minYear; --i) {\n        createForMonthYear(dates, month, i);\n      }\n    }\n  }\n\n  if((matches = yearPattern.exec(q)) !== null) {\n    let selectedYear = +matches[0];\n    const currentYear = new Date().getFullYear();\n    if(selectedYear < minYear) {\n      selectedYear = minYear;\n      for(let i = currentYear; i >= selectedYear; i--) {\n        const date = new Date();\n        date.setFullYear(i, 0, 1);\n        date.setHours(0, 0, 0);\n\n        const minDate = date.getTime();\n        date.setFullYear(i + 1, 0, 1);\n        date.setHours(0, 0, 0);\n\n        const maxDate = date.getTime() - 1;\n        dates.push({\n          title: '' + i,\n          minDate,\n          maxDate\n        });\n      }\n    } else if(selectedYear <= currentYear) {\n      const date = new Date();\n      date.setFullYear(selectedYear, 0, 1);\n      date.setHours(0, 0, 0);\n\n      const minDate = date.getTime();\n      date.setFullYear(selectedYear + 1, 0, 1);\n      date.setHours(0, 0, 0);\n\n      const maxDate = date.getTime() - 1;\n      dates.push({\n        title: '' + selectedYear,\n        minDate,\n        maxDate\n      });\n    }\n\n    return;\n  }\n}\n\nfunction createForMonthYear(dates: DateData[], month: number, selectedYear: number) {\n  const currentYear = new Date().getFullYear();\n  const today = Date.now();\n  if(selectedYear >= minYear && selectedYear <= currentYear) {\n    const date = new Date();\n    date.setFullYear(selectedYear, month, 1);\n    date.setHours(0, 0, 0);\n    const minDate = date.getTime();\n    if(minDate > today) {\n      return;\n    }\n    date.setMonth(date.getMonth() + 1);\n    const maxDate = date.getTime() - 1;\n\n    dates.push({\n      title: formatterMonthYear(minDate),\n      minDate,\n      maxDate\n    });\n  }\n}\n\nfunction createForDayMonth(dates: DateData[], day: number, month: number) {\n  if(validDateForMonth(day, month)) {\n    const currentYear = new Date().getFullYear();\n    const today = Date.now();\n\n    for(let i = currentYear; i >= minYear; i--) {\n      if(month === 1 && day === 28 && !isLeapYear(i)) {\n        continue;\n      }\n\n      const date = new Date();\n      date.setFullYear(i, month, day + 1);\n      date.setHours(0, 0, 0);\n\n      const minDate = date.getTime();\n      if(minDate > today) {\n        continue;\n      }\n\n      date.setFullYear(i, month, day + 2);\n      date.setHours(0, 0, 0);\n      const maxDate = date.getTime() - 1;\n      if(i === currentYear) {\n        dates.push({\n          title: formatterDayMonth(minDate),\n          minDate,\n          maxDate\n        });\n      } else {\n        dates.push({\n          title: formatterYearMax(minDate),\n          minDate,\n          maxDate\n        });\n      }\n    }\n  }\n}\n\nfunction formatterMonthYear(timestamp: number) {\n  const date = new Date(timestamp);\n  return monthsLocalized[date.getMonth()]/* .slice(0, 3) */ + ' ' + date.getFullYear();\n}\n\nfunction formatterDayMonth(timestamp: number) {\n  const date = new Date(timestamp);\n  return monthsLocalized[date.getMonth()]/* .slice(0, 3) */ + ' ' + date.getDate();\n}\n\nfunction formatterYearMax(timestamp: number) {\n  const date = new Date(timestamp);\n  return ('0' + date.getDate()).slice(-2) + '.' + ('0' + (date.getMonth() + 1)).slice(-2) + '.' + date.getFullYear();\n}\n\nfunction formatWeekLong(timestamp: number) {\n  const date = new Date(timestamp);\n  return daysLocalized[date.getDay()];\n}\n\nfunction validDateForMonth(day: number, month: number) {\n  if(month >= 0 && month < 12) {\n    if(day >= 0 && day < numberOfDaysEachMonth[month]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction isLeapYear(year: number) {\n  return ((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0);\n}\n\nfunction getMonth(q: string) {\n  q = q.toLowerCase();\n  for(let i = 0; i < 12; i++) {\n    if([months[i], monthsLocalized[i]].some((month) => month.toLowerCase().indexOf(q) === 0)) {\n      return i;\n    }\n  }\n  return -1;\n}\n\nfunction getDayOfWeek(q: string) {\n  const c = new Date();\n  if(q.length <= 3) {\n    return -1;\n  }\n\n  for(let i = 0; i < 7; i++) {\n    c.setDate(c.getDate() + 1);\n\n    if(formatWeekLong(c.getTime()).toLowerCase().indexOf(q) === 0) {\n      return c.getDay();\n    }\n  }\n  return -1;\n}\n\nMOUNT_CLASS_TO.fillTipDates = fillTipDates;\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\nconst arrays = {\n  8: new Uint8Array(1),\n  16: new Uint16Array(1),\n  32: new Uint32Array(1)\n};\nexport function nextRandomUint(bits: 8 | 16 | 32) {\n  const array = arrays[bits];\n  crypto.getRandomValues(array);\n  return array[0];\n}\n\nexport function randomLong() {\n  return '' + nextRandomUint(32) + nextRandomUint(32) % 0xFFFFFF;\n}\n","import {CHROMIUM_VERSION, IS_CHROMIUM, IS_FIREFOX, IS_MOBILE, IS_MOBILE_SAFARI, IS_SAFARI} from './userAgent';\n\nexport const USE_NATIVE_SCROLL = /* IS_APPLE ||  */IS_MOBILE/*  || true */;\nexport const IS_OVERLAY_SCROLL_SUPPORTED = IS_MOBILE || (!IS_CHROMIUM && (!IS_SAFARI || IS_MOBILE_SAFARI)/*  && !IS_FIREFOX */) || CHROMIUM_VERSION < 113;\nexport const USE_CUSTOM_SCROLL = !USE_NATIVE_SCROLL && !IS_OVERLAY_SCROLL_SUPPORTED;\n","import appNavigationController from '../../components/appNavigationController';\n\nimport {CURRENT_ACCOUNT_QUERY_PARAM} from './constants';\nimport {ActiveAccountNumber} from './types';\n\nexport function changeAccount(accountNumber: ActiveAccountNumber, newTab = false) {\n  const url = new URL(location.href);\n\n  if(accountNumber === 1) url.searchParams.delete(CURRENT_ACCOUNT_QUERY_PARAM);\n  else url.searchParams.set(CURRENT_ACCOUNT_QUERY_PARAM, accountNumber + '');\n\n  const newUrl = url.search ? url.pathname + url.search : url.pathname;\n  if(newTab) {\n    window.open(newUrl, '_blank');\n  } else {\n    appNavigationController.overrideHash();\n    history.replaceState(null, '', newUrl);\n    location.reload();\n  }\n}\n","/*\n * https://github.com/morethanwords/tweb\n * Copyright (C) 2019-2021 Eduard Kuzmenko\n * https://github.com/morethanwords/tweb/blob/master/LICENSE\n */\n\n/* @refresh reload */\n\nimport App from './config/app';\nimport blurActiveElement from './helpers/dom/blurActiveElement';\nimport cancelEvent from './helpers/dom/cancelEvent';\nimport {IS_STICKY_INPUT_BUGGED} from './helpers/dom/fixSafariStickyInputFocusing';\nimport loadFonts from './helpers/dom/loadFonts';\nimport IS_EMOJI_SUPPORTED from './environment/emojiSupport';\nimport {IS_ANDROID, IS_APPLE, IS_APPLE_MOBILE, IS_FIREFOX, IS_MOBILE, IS_MOBILE_SAFARI, IS_SAFARI} from './environment/userAgent';\nimport './materialize.scss';\nimport './scss/style.scss';\nimport pause from './helpers/schedulers/pause';\nimport setWorkerProxy from './helpers/setWorkerProxy';\nimport toggleAttributePolyfill from './helpers/dom/toggleAttributePolyfill';\nimport rootScope from './lib/rootScope';\nimport IS_TOUCH_SUPPORTED from './environment/touchSupport';\nimport I18n from './lib/langPack';\nimport './helpers/peerIdPolyfill';\nimport './lib/polyfill';\nimport apiManagerProxy from './lib/mtproto/mtprotoworker';\nimport getProxiedManagers from './lib/appManagers/getProxiedManagers';\nimport themeController from './helpers/themeController';\nimport overlayCounter from './helpers/overlayCounter';\nimport singleInstance from './lib/mtproto/singleInstance';\nimport {parseUriParamsLine} from './helpers/string/parseUriParams';\nimport Modes from './config/modes';\nimport {AuthState} from './types';\nimport {IS_BETA} from './config/debug';\nimport IS_INSTALL_PROMPT_SUPPORTED from './environment/installPrompt';\nimport cacheInstallPrompt from './helpers/dom/installPrompt';\nimport {fillLocalizedDates} from './helpers/date';\nimport {nextRandomUint} from './helpers/random';\nimport {IS_OVERLAY_SCROLL_SUPPORTED, USE_CUSTOM_SCROLL, USE_NATIVE_SCROLL} from './environment/overlayScrollSupport';\nimport IMAGE_MIME_TYPES_SUPPORTED, {IMAGE_MIME_TYPES_SUPPORTED_PROMISE} from './environment/imageMimeTypesSupport';\nimport MEDIA_MIME_TYPES_SUPPORTED from './environment/mediaMimeTypesSupport';\nimport {doubleRaf} from './helpers/schedulers';\nimport {getCurrentAccount} from './lib/accounts/getCurrentAccount';\nimport AccountController from './lib/accounts/accountController';\nimport {changeAccount} from './lib/accounts/changeAccount';\nimport {MAX_ACCOUNTS_FREE, MAX_ACCOUNTS_PREMIUM} from './lib/accounts/constants';\nimport sessionStorage from './lib/sessionStorage';\n\n\nIMAGE_MIME_TYPES_SUPPORTED_PROMISE.then((mimeTypes) => {\n  mimeTypes.forEach((mimeType) => {\n    IMAGE_MIME_TYPES_SUPPORTED.add(mimeType);\n    MEDIA_MIME_TYPES_SUPPORTED.add(mimeType);\n  });\n\n  console.log('Supported image mime types', IMAGE_MIME_TYPES_SUPPORTED);\n  apiManagerProxy.sendEnvironment();\n});\n\n/* false &&  */document.addEventListener('DOMContentLoaded', async() => {\n  // * Randomly choose a version if user came from google\n  try {\n    if(\n      App.isMainDomain &&\n      document.referrer &&\n      /(^|\\.)(google|bing|duckduckgo|ya|yandex)\\./i.test(new URL(document.referrer).host)\n    ) {\n      const version = localStorage.getItem('kz_version');\n      if(version === 'Z' || nextRandomUint(8) > 127) {\n        localStorage.setItem('kz_version', 'Z');\n        location.href = 'https://web.telegram.org/a/';\n      } else {\n        localStorage.setItem('kz_version', 'K');\n      }\n    }\n  } catch(err) {}\n\n  const sidebarEl = document.getElementById('column-left');\n  const storedWidth = localStorage.getItem('sidebar-left-width');\n  if(storedWidth === '0') {\n    sidebarEl.classList.add('is-collapsed');\n  } else if(storedWidth) {\n    document.documentElement.style.setProperty('--current-sidebar-left-width', storedWidth + 'px');\n  }\n\n  toggleAttributePolyfill();\n\n  // polyfill for replaceChildren\n  if((Node as any).prototype.replaceChildren === undefined) {\n    (Node as any).prototype.replaceChildren = function(...nodes: any[]) {\n      this.textContent = '';\n      // while(this.lastChild) {\n      //   this.removeChild(this.lastChild);\n      // }\n      if(nodes) {\n        this.append(...nodes);\n      }\n    }\n  }\n\n  rootScope.managers = getProxiedManagers();\n\n  const manifest = document.getElementById('manifest') as HTMLLinkElement;\n  if(manifest) manifest.href = `site${IS_APPLE && !IS_APPLE_MOBILE ? '_apple' : ''}.webmanifest?v=jw3mK7G9Aq`;\n\n  singleInstance.start();\n\n  // We listen to the resize event (https://css-tricks.com/the-trick-to-viewport-units-on-mobile/)\n  const w = window.visualViewport || window; // * handle iOS keyboard\n  let setViewportVH = false/* , hasFocus = false */;\n  let lastVH: number;\n  const setVH = () => {\n    let vh = (setViewportVH && !overlayCounter.isOverlayActive ? (w as VisualViewport).height || (w as Window).innerHeight : window.innerHeight) * 0.01;\n    vh = +vh.toFixed(2);\n    if(lastVH === vh) {\n      return;\n    } else if(IS_TOUCH_SUPPORTED && lastVH < vh && (vh - lastVH) > 1) {\n      blurActiveElement(); // (Android) fix blurring inputs when keyboard is being closed (e.g. closing keyboard by back arrow and touching a bubble)\n    }\n\n    lastVH = vh;\n\n    // const vh = document.documentElement.scrollHeight * 0.01;\n    document.documentElement.style.setProperty('--vh', `${vh}px`);\n\n    // console.log('setVH', vh, setViewportVH ? w : window);\n\n    /* if(setViewportVH && userAgent.isSafari && touchSupport.isTouchSupported && document.activeElement && (document.activeElement as HTMLElement).blur) {\n      const rect = document.activeElement.getBoundingClientRect();\n      if(rect.top < 0 || rect.bottom >= (w as any).height) {\n        fastSmoothScroll(findUpClassName(document.activeElement, 'scrollable-y') || window as any, document.activeElement as HTMLElement, 'center', 4, undefined, FocusDirection.Static);\n      }\n    } */\n  };\n\n  setWorkerProxy;\n\n  // const [_, touchSupport, userAgent, _rootScope, _appStateManager, _I18n, __/* , ___ */] = await Promise.all([\n  //   import('./lib/polyfill'),\n  //   import('./environment/touchSupport'),\n  //   import('./environment/userAgent'),\n  //   import('./lib/rootScope'),\n  //   import('./lib/appManagers/appStateManager'),\n  //   import('./lib/langPack'),\n  //   import('./helpers/peerIdPolyfill'),\n  //   // import('./helpers/cacheFunctionPolyfill')\n  // ]);\n\n  /* const {IS_TOUCH_SUPPORTED} = touchSupport;\n  const {IS_FIREFOX, IS_MOBILE, IS_APPLE, IS_SAFARI, IS_APPLE_MOBILE, IS_ANDROID} = userAgent;\n  const rootScope = _rootScope.default;\n  const appStateManager = _appStateManager.default;\n  const I18n = _I18n.default; */\n\n  window.addEventListener('resize', setVH);\n  setVH();\n\n  const preparePrint = () => {\n    const chat = document.querySelector('.chat.active');\n    if(!chat) {\n      return;\n    }\n\n    const chatClone = chat.cloneNode(true) as HTMLElement;\n    chatClone.querySelectorAll('.chat-input, .chat-background').forEach((element) => element.remove());\n    const bubbles = chatClone.querySelector('.bubbles');\n    const bubblesInner = bubbles.querySelector('.bubbles-inner');\n    bubbles.replaceChildren(bubblesInner);\n    const video = bubbles.querySelectorAll<HTMLVideoElement>('video');\n    video.forEach((video) => (video.muted = true));\n    const printable = document.createElement('div');\n    printable.setAttribute('id', 'printable');\n    printable.append(chatClone);\n    document.body.append(printable);\n  };\n  const removePrint = () => {\n    const printContent = document.getElementById('printable');\n    printContent?.remove();\n  };\n  window.addEventListener('beforeprint', preparePrint);\n  window.addEventListener('afterprint', removePrint);\n\n  if(IS_STICKY_INPUT_BUGGED) {\n    const toggleResizeMode = () => {\n      setViewportVH = tabId === 1 && IS_STICKY_INPUT_BUGGED && !overlayCounter.isOverlayActive;\n      setVH();\n\n      if(w !== window) {\n        if(setViewportVH) {\n          window.removeEventListener('resize', setVH);\n          w.addEventListener('resize', setVH);\n        } else {\n          w.removeEventListener('resize', setVH);\n          window.addEventListener('resize', setVH);\n        }\n      }\n    };\n\n    let tabId: number;\n    (window as any).onImTabChange = (id: number) => {\n      const wasTabId = tabId !== undefined;\n      tabId = id;\n\n      if(wasTabId || tabId === 1) {\n        toggleResizeMode();\n      }\n    };\n\n    overlayCounter.addEventListener('change', () => {\n      toggleResizeMode();\n    });\n  }\n\n  if(IS_FIREFOX && !IS_EMOJI_SUPPORTED) {\n    document.addEventListener('dragstart', (e) => {\n      const target = e.target as HTMLElement;\n      if(target.tagName === 'IMG' && target.classList.contains('emoji')) {\n        cancelEvent(e);\n        return false;\n      }\n    });\n  }\n\n  if(IS_EMOJI_SUPPORTED) {\n    document.documentElement.classList.add('native-emoji');\n  }\n\n  if(USE_NATIVE_SCROLL) {\n    document.documentElement.classList.add('native-scroll');\n  } else if(IS_OVERLAY_SCROLL_SUPPORTED) {\n    document.documentElement.classList.add('overlay-scroll');\n  } else if(USE_CUSTOM_SCROLL) {\n    document.documentElement.classList.add('custom-scroll');\n  }\n\n  // document.documentElement.style.setProperty('--quote-icon', `\"${getIconContent('quote')}\"`);\n\n  // prevent firefox image dragging\n  document.addEventListener('dragstart', (e) => {\n    if((e.target as HTMLElement)?.tagName === 'IMG') {\n      e.preventDefault();\n      return false;\n    }\n  });\n\n  // restrict contextmenu on images (e.g. webp stickers)\n  document.addEventListener('contextmenu', (e) => {\n    if((e.target as HTMLElement).tagName === 'IMG' && !(window as any).appMediaViewer) {\n      cancelEvent(e);\n    }\n  });\n\n  if(IS_FIREFOX) {\n    document.documentElement.classList.add('is-firefox', 'no-backdrop');\n  }\n\n  if(IS_MOBILE) {\n    document.documentElement.classList.add('is-mobile');\n  }\n\n  if(IS_APPLE) {\n    if(IS_SAFARI) {\n      document.documentElement.classList.add('is-safari');\n    }\n\n    // document.documentElement.classList.add('emoji-supported');\n\n    if(IS_APPLE_MOBILE) {\n      document.documentElement.classList.add('is-ios');\n    } else {\n      document.documentElement.classList.add('is-mac');\n    }\n  } else if(IS_ANDROID) {\n    document.documentElement.classList.add('is-android');\n\n    // force losing focus on input blur\n    // focusin and focusout are not working on mobile\n\n    // const onInResize = () => {\n    //   hasFocus = true;\n    //   window.addEventListener('resize', onOutResize, {once: true});\n    // };\n\n    // const onOutResize = () => {\n    //   hasFocus = false;\n    //   blurActiveElement();\n    // };\n\n    // let hasFocus = false;\n    // document.addEventListener('touchend', (e) => {\n    //   const input = (e.target as HTMLElement).closest('[contenteditable=\"true\"], input');\n    //   if(!input) {\n    //     return;\n    //   }\n\n    //   if(document.activeElement !== input && !hasFocus) {\n    //     console.log('input click', e, document.activeElement, input, input.matches(':focus'));\n    //     window.addEventListener('resize', onInResize, {once: true});\n    //   }\n    // });\n  }\n\n  if(!IS_TOUCH_SUPPORTED) {\n    document.documentElement.classList.add('no-touch');\n  } else {\n    document.documentElement.classList.add('is-touch');\n    /* document.addEventListener('touchmove', (event: any) => {\n      event = event.originalEvent || event;\n      if(event.scale && event.scale !== 1) {\n        event.preventDefault();\n      }\n    }, {capture: true, passive: false}); */\n  }\n\n  if(IS_INSTALL_PROMPT_SUPPORTED) {\n    cacheInstallPrompt();\n  }\n\n  const perf = performance.now();\n\n  // await pause(1000000);\n\n  // * can't combine now since langPack will be migrated to the new system\n  const stateResult = await apiManagerProxy.sendAllStates().then((loadedStates) => loadedStates[getCurrentAccount()]);\n  const langPack = await I18n.getCacheLangPack();\n  I18n.setTimeFormat(rootScope.settings.timeFormat);\n\n  document.body.classList.toggle('has-folders-sidebar', rootScope.settings.tabsInSidebar);\n\n  rootScope.managers.rootScope.getPremium().then((isPremium) => {\n    rootScope.premium = isPremium;\n  });\n\n  themeController.setThemeListener();\n\n  if(langPack.appVersion !== App.langPackVersion) {\n    I18n.getLangPack(langPack.lang_code);\n  } else {\n    fillLocalizedDates();\n  }\n\n  rootScope.addEventListener('language_change', (langCode) => {\n    I18n.getLangPack(langCode);\n    fillLocalizedDates();\n  });\n\n  /**\n   * won't fire if font is loaded too fast\n   */\n  function fadeInWhenFontsReady(elem: HTMLElement, promise: Promise<any>) {\n    elem.style.opacity = '0';\n\n    promise.then(() => {\n      window.requestAnimationFrame(() => {\n        elem.style.opacity = '';\n      });\n    });\n  }\n\n  console.log('got state, time:', performance.now() - perf);\n\n  await IMAGE_MIME_TYPES_SUPPORTED_PROMISE;\n\n  if(langPack.lang_code === 'ar' || langPack.lang_code === 'fa' && IS_BETA && false) {\n    document.documentElement.classList.add('is-rtl');\n    document.documentElement.dir = 'rtl';\n    document.documentElement.lang = langPack.lang_code;\n    I18n.setRTL(true);\n  } else {\n    document.documentElement.dir = 'ltr';\n  }\n\n  let authState = stateResult.state.authState;\n\n  const hash = location.hash;\n  const splitted = hash.split('?');\n  const params = parseUriParamsLine(splitted[1] ?? splitted[0].slice(1));\n  if(params.tgWebAuthToken && authState._ !== 'authStateSignedIn') {\n    const data: AuthState.signImport['data'] = {\n      token: params.tgWebAuthToken,\n      dcId: +params.tgWebAuthDcId,\n      userId: params.tgWebAuthUserId.toUserId(),\n      isTest: params.tgWebAuthTest !== undefined && !!+params.tgWebAuthTest,\n      tgAddr: params.tgaddr\n    };\n\n    if(data.isTest !== Modes.test) {\n      const urlSearchParams = new URLSearchParams(location.search);\n      if(+params.tgWebAuthTest) {\n        urlSearchParams.set('test', '1');\n      } else {\n        urlSearchParams.delete('test');\n      }\n\n      location.search = urlSearchParams.toString();\n      return;\n    }\n\n    rootScope.managers.appStateManager.pushToState('authState', authState = {_: 'authStateSignImport', data});\n\n    // appNavigationController.overrideHash('?tgaddr=' + encodeURIComponent(params.tgaddr));\n  }\n\n  if(authState._ !== 'authStateSignedIn'/*  || 1 === 1 */) {\n    console.log('Will mount auth page:', authState._, Date.now() / 1000);\n\n    (async() => {\n      const totalAccounts = await AccountController.getTotalAccounts();\n      const hasSomeonePremium = await apiManagerProxy.hasSomeonePremium();\n      const maxAccountNumber = hasSomeonePremium ? MAX_ACCOUNTS_PREMIUM : MAX_ACCOUNTS_FREE;\n\n      const currentAccount = getCurrentAccount();\n\n      if(currentAccount > Math.min(maxAccountNumber, totalAccounts + 1)) {\n        changeAccount(1);\n      }\n    })();\n\n    const el = document.getElementById('auth-pages');\n    let scrollable: HTMLElement;\n\n    let isEnteringAnimationFinished = false;\n\n    const finishEnteringAnimation = async() => {\n      if(isEnteringAnimationFinished) return;\n      isEnteringAnimationFinished = true;\n\n      await doubleRaf();\n      el.classList.add('auth-pages-entering');\n\n      await pause(1000); // Need a little more time for the animation to finish\n      el.classList.remove('auth-pages-enter', 'auth-pages-entering');\n    }\n\n    if(el) {\n      if(await sessionStorage.get('should_animate_auth')) {\n        await sessionStorage.delete('should_animate_auth');\n        el.classList.add('auth-pages-enter');\n\n        // Just in case\n        pause(1000).then(() => finishEnteringAnimation());\n      }\n\n      scrollable = el.querySelector('.scrollable') as HTMLElement;\n      if((!IS_TOUCH_SUPPORTED || IS_MOBILE_SAFARI)) {\n        scrollable.classList.add('no-scrollbar');\n      }\n\n      // * don't remove this line\n      scrollable.style.opacity = '0';\n\n      const placeholder = document.createElement('div');\n      placeholder.classList.add('auth-placeholder');\n\n      scrollable.prepend(placeholder);\n      scrollable.append(placeholder.cloneNode());\n    }\n\n    try {\n      await Promise.all([\n        import('./lib/mtproto/telegramMeWebManager'),\n        import('./lib/mtproto/webPushApiManager')\n      ]).then(([meModule, pushModule]) => {\n        meModule.default.setAuthorized(false);\n        pushModule.default.forceUnsubscribe();\n      });\n    } catch(err) {\n\n    }\n\n    let pagePromise: Promise<void>;\n    // langPromise.then(async() => {\n    switch(authState._) {\n      case 'authStateSignIn':\n        pagePromise = (await import('./pages/pageSignIn')).default.mount();\n        break;\n      case 'authStateSignQr':\n        pagePromise = (await import('./pages/pageSignQR')).default.mount();\n        break;\n      case 'authStateAuthCode':\n        pagePromise = (await import('./pages/pageAuthCode')).default.mount(authState.sentCode);\n        break;\n      case 'authStatePassword':\n        pagePromise = (await import('./pages/pagePassword')).default.mount();\n        break;\n      case 'authStateSignUp':\n        pagePromise = (await import('./pages/pageSignUp')).default.mount(authState.authCode);\n        break;\n      case 'authStateSignImport':\n        pagePromise = (await import('./pages/pageSignImport')).default.mount(authState.data);\n        break;\n    }\n    // });\n\n    if(scrollable) {\n      // wait for text appear\n      if(pagePromise) {\n        await pagePromise;\n      }\n\n      const promise = 'fonts' in document ?\n        Promise.race([\n          pause(1000),\n          document.fonts.ready\n        ]) :\n        Promise.resolve();\n\n      promise.then(async() => {\n        await pause(20);\n        finishEnteringAnimation();\n      });\n\n      fadeInWhenFontsReady(scrollable, promise);\n    }\n\n    /* setTimeout(async() => {\n      (await import('./pages/pageAuthCode')).default.mount({\n        \"_\": \"auth.sentCode\",\n        \"pFlags\": {},\n        \"flags\": 6,\n        \"type\": {\n          \"_\": \"auth.sentCodeTypeSms\",\n          \"length\": 5\n        },\n        \"phone_code_hash\": \"\",\n        \"next_type\": {\n          \"_\": \"auth.codeTypeCall\"\n        },\n        \"timeout\": 120,\n        \"phone_number\": \"\"\n      });\n\n      (await import('./pages/pageSignQR')).default.mount();\n\n      (await import('./pages/pagePassword')).default.mount();\n\n      (await import('./pages/pageSignUp')).default.mount({\n        \"phone_code_hash\": \"\",\n        \"phone_number\": \"\"\n      });\n    }, 500); */\n  } else {\n    console.log('Will mount IM page:', Date.now() / 1000);\n\n    const fontsPromise = loadFonts();\n    fadeInWhenFontsReady(document.getElementById('main-columns'), fontsPromise);\n\n    const [page, shouldAnimate] = await Promise.all([\n      import('./pages/pageIm').then((module) => module.default),\n      sessionStorage.get('should_animate_main')\n    ]);\n    if(shouldAnimate) {\n      await sessionStorage.delete('should_animate_main');\n      page.pageEl.classList.add('main-screen-enter');\n\n      await page.mount();\n      await fontsPromise;\n\n      await doubleRaf();\n      page.pageEl.classList.add('main-screen-entering');\n      await pause(200);\n\n      page.pageEl.classList.remove('main-screen-enter', 'main-screen-entering');\n    } else {\n      await page.mount();\n    }\n  }\n});\n"],"file":"index-_yd-8GWv.js"}